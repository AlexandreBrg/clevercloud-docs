{"/doc/":{"data":{"":" Everything you need to know¬†for your Clever Cloud journey Getting StartedGet ready to deploy and app in 5 minutes DevelopBest practices on Cloud deployments, sheduling jobs, etc. AdministrateAccess metrics, logs, manage domains, set up scalability\u0026hellip; DeployDeploy any app on Clever Cloud. Find helpLost? See how to get help. ExtendAccess Clever Cloud API, collect add-ons logs\u0026hellip; ReferencesList of environment variables your can use on Clever Clever Cloud, CLI commands\u0026hellip; User AccountSet up your account, collaborate and manage permissions. BillingFind invoices, analyse consumption and understand pricing. ContributeSee how to contribute to this documentation. See our step by step tutorials Find your language Simple and easy to use, yet powerful and feature-rich. Test\nUnderstand your invoices No dependency or Node.js is needed to use Hextra. Powered by Hugo, one of the fastest static site generators, building your site in just seconds with a single binary.\nReponsive with Dark Mode Included Looks great on different screen sizes. Built-in dark mode support, with auto-switching based on user\u0026rsquo;s system preference.\nBuild and Host for Free Build with GitHub Actions, and host for free on GitHub Pages. Alternatively it can be hosted on any static hosting service.\nMulti-Language Made Easy Create multi-language pages by just adding locales suffix to the Markdown file. Adding i18n support to your site is intuitive.\nAnd Much More... Syntax highlighting / Table of contents / SEO / RSS / LaTeX / Mermaid / Customizable / and more\u0026hellip;\n"},"title":"Documentation"},"/doc/account/administrate-organization/":{"data":{"":"","administrate-an-organization#Administrate an organization":"By clicking on you application name, a new left menu will open itself.\nOverview: Simple metrics about your applications within this organization\nInformation: See and edit organization\u0026rsquo;s name, description, billing address and image. That also is where you can delete your organization.\nMembers: Manage team members. Team members must have a Clever Cloud account. On this page you can add and remove team members. You can also edit their roles in order to manage their permissions.\nShared softwares:\nPayment methods: Manage provisioning of your organization, manage credit cards and add here potential discount codes or coupons.\nInvoices: See your recent invoices.\nNotifications: Manage email notifications and web hooks for team members.\nConsumption: See metrics about your organization\u0026rsquo;s consumptions.\n","create-an-organization#Create an organization":"In the Clever Cloud Web Console, select Add an organization in the left menu.\nGive it a name, description, specify if it is a company and add billing informations.\n","delete-an-organization#Delete an organization":"In the Information page, click the remove this organization button. You will be prompted to enter the name of the organization in order to confirm the organization deletion."},"title":"Manage an Organization"},"/doc/account/create-account/":{"data":{"":" The API of Clever Cloud uses OAuth 1 to perform authentication actions. There are two ways to signup to Clever Cloud: email or GitHub login.\nGo to the Clever Cloud Console and select the method you prefer.\n@ Email Authentication This kind of auth requires a valid and non-temporary disposable e-mail, and a password having at least 6 characters. Do not forget to validate your email by clicking the link you will receive.\nGitHub Authentication The GitHub signup allows you to create an account or link your existing one to GitHub, in one click. This process asks the following permissions:¬†Read your Public Key Read User Repositories The \u0026ldquo;repository permission\u0026rdquo; is used to deploy your GitHub apps directly to Clever Cloud, with a simple step.\nIf you need to give access to Clever Cloud\u0026rsquo;s API to a specific GitHub organization, you can do it here.\nüîê Two Factor Authentication (2FA) Clever Cloud supports 2FA. You can enable it here: https://console.clever-cloud.com/users/me/authentication\nPlease, backup your recovery codes, we won\u0026rsquo;t be able to restore access to your account if you lose access to your regular codes.\n"},"title":"Create an Account"},"/doc/account/delete-account/":{"data":{"":"To delete your account:\nOpen the Clever Cloud Web Console. Select Profile in the bottom left menu. Select Delete my account in the top menu of the freshly opened page. Click the red Send me a confirmation email button. You will get an email with a link you must click to confirm your account deletion.\n"},"title":"Delete an account"},"/doc/account/manage-account/":{"data":{"":"In the Clever Cloud Web Console, select Profile in the bottom left menu.\nYou will see several menu entries.\nInformation: on that page you can edit your name, address, phone number, profile picture, manage the link between your Clever Cloud and Github account and select the language of your Clever Cloud web console.\nEmails: manage your linked email addresses.\nAuthentication: Change your password, enanble/disable Two Factor Authentication.\nSSH keys: add or remove your SSH keys, manage your Github SSH keys if you have linked your Github account.\nOauth tokens: See and revoke your access tokens\nDelete my account: Delete your Clever Cloud account\n"},"title":"Manage your account"},"/doc/account/notifications/":{"data":{"":"The Notifications service allows you to choose the events of interest to you and decide where to send corresponding notifications.","e-mails#E-mails":"Historically and by default, deployment result e-mails (deployment succeeded or failed) were always sent to the owners of an application, namely the user themselves or the organization\u0026rsquo;s members.\nTo disable the deployment result e-mails or restrict it to only some applications:\nGo in Organization Manager \u0026gt; Notifications panel. Delete the hook named Default deployment result e-mails. Add a new one. Set it to your liking. In the future, this service will also handle credits warning notifications and others to come. You will be able to choose wether or not to receive an e-mail and/or for these events to be forwarded to a web service via a webhook.\n","webhooks#Webhooks":"From Wikipedia:\nA webhook in web development is a method of augmenting or altering the behavior of a web page, or web application, with custom callbacks. These callbacks may be maintained, modified, and managed by third-party users and developers who may not necessarily be affiliated with the originating website or application.\nIn practical terms, this means that you can choose to receive all deployment result events on an endpoint of your application without having to listen to all events via the Websocket API. No more lost events and having to reconnect to the websocket if and when it fails.\nTo create a webhook stay on the Notifications panel:\nClick on Webhooks button at the top of the Notifications window. Add a new one. Choose the URL which will receive the data through a POST request and the format it will be sent as. As of now, you can choose between 3 formats: raw, slack and flowdock. The raw format is the Clever Cloud internal representation of events, it is identical to events sent by the Websocket API. Slack and Flowdock formats are to be used with the corresponding services: Slack and Flowdock.\nYou can also choose which events you want and restrict notifications to a list of applications and addons.\nExample: Slack deployment results Webhook First, you will have to create the Incoming WebHooks integration on Slack:\nLet\u0026rsquo;s go to the custom integrations page, once there go to Incoming WebHooks.\nYou will find an Add Configuration button on the left which will take you to the page where you need to configure the integration. You just need to select the channel where you want the notifications to be posted, then it will show you the Webhook URL, it starts with https://hooks.slack.com/services/. Copy that URL.\nNow, let\u0026rsquo;s create the Webhook!\nYou should already have a tab opened on the Webhook creation page; if it\u0026rsquo;s not the case, follow the Webhooks section above.\nThere, you just need to paste the URL you copied before in the Webhook URL field, then select Result of deployments (success/fail) in the Only send notification for these events menu.\nYou can now push your application or restart it and you will see the result of the deployment in your Slack channel.\n"},"title":"Notifications management"},"/doc/account/organizations/":{"data":{"":"In order to improve team collaboration between developers, accountants, managers and admins, we have introduced organizations. Each organization has its own billing, leaning that you can create as much as orgnanization you\u0026rsquo;d like. Most use-cases include the billing separation of private and business applications, several businesses or business units (within one company, for instance).\nOnce you create an organization, you can add collaborators and assign them roles which gives them rights.\nEach organization have its own identifier looking like orga_xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\n","add-an-organization#Add an organization":"Organization names are unique. It means that you cannot use an already used organization name.\nIn order to add an organization, just click on \u0026ldquo;Add an organization\u0026rdquo; in the top left sidebar.\n","roles-and-privileges#Roles and privileges":"The table below describes rights assigned to roles:\nAdmin Manager Developer Accountant Add Member x x Remove Member x x Add Application x x x Remove Application x x Add / Remove add-on x x Edit Organization x x Delete Organization x Access Bills \u0026 Receive Invoices x x Access Repositories x x x "},"title":"Roles and Organizations"},"/doc/account/ssh-keys-managment/":{"data":{"":"You need to add a SSH key to your Clever Cloud\u0026rsquo;s account to deploy via Git. SSH keys are used to establish a secure connection between your computer and Clever Cloud. A user can have multiple SSH keys.\n‚ö†Ô∏è Accounts cannot share the same SSH key.¬†A SSH key is used to identify the actions made by a user and must be associated with only one account.\nIf a key is used by more than one account, a warning will be displayed in the console. ","add-your-ssh-key-on-clever-cloud#Add your SSH key on Clever Cloud":"Public SSH Key To declare your public SSH Key on Clever Cloud, in the left navigation bar, go in \u0026ldquo;Profile\u0026rdquo; and in the \u0026ldquo;SSH Keys\u0026rdquo; tab.\nAdd the key by entering a name and the public SSH key. The key is the entire contents of the id_[ed25519/rsa].pub file including the id_ed25519/ssh-rsa part and your email.\n‚ö†Ô∏è Your public SSH key must be associated with only one account. If you see \u0026ldquo;access denied\u0026rdquo; or \u0026ldquo;password:\u0026rdquo; when you push on Clever Cloud, your SSH Keys may be invalid or not available on Clever Cloud. Please check that you SSH Key is present and valid in your profile.\n","check-your-ssh-configuration#Check your ssh configuration":"To check if your ssh key is correctly configured, you can try to run:\nssh git@push.clever-cloud.com The first time, you may have to type \u0026ldquo;yes\u0026rdquo; to continue.\nIf you see\n\u0026gt; git@push-par-clevercloud-customers.services.clever-cloud.com: Permission denied (publickey). \u0026gt; \u0026gt; fatal: Could not read from remote repository. \u0026gt; \u0026gt; Please make sure you have the correct access rights \u0026gt; and the repository exists. This error can occur when your SSH agent has not be configured to use your SSH¬†key.\nMost of the time, it is due to the presence of multiple SSH keys generated by 3rd party software, like GitHub for Mac. To fix this you will need to configure your SSH agent.\n","configure-your-ssh-agent#Configure your SSH agent":"You can add those lines into your ~/.ssh/config file. It tells your SSH agent which key to pick for a given hostname. Please update your Clever Cloud SSH key path accordingly.\n# config for Clever Cloud specific key (Paris zone) Host push-par-clevercloud-customers.services.clever-cloud.com Hostname push-par-clevercloud-customers.services.clever-cloud.com User git IdentityFile ~/.ssh/id_ed25519_clevercloud # config for Clever Cloud specific key (Roubaix zone) Host push-rbx-clevercloud-customers.services.clever-cloud.com Hostname push-rbx-clevercloud-customers.services.clever-cloud.com User git IdentityFile ~/.ssh/id_ed25519_clevercloud # config for Clever Cloud specific key (Warsaw zone) Host push-wsw-clevercloud-customers.services.clever-cloud.com Hostname push-wsw-clevercloud-customers.services.clever-cloud.com User git IdentityFile ~/.ssh/id_ed25519_clevercloud # config for Clever Cloud specific key (Montreal zone) Host push-mtl-clevercloud-customers.services.clever-cloud.com Hostname push-mtl-clevercloud-customers.services.clever-cloud.com User git IdentityFile ~/.ssh/id_ed25519_clevercloud # config for Clever Cloud specific key (Singapore zone) Host push-sgp-clevercloud-customers.services.clever-cloud.com Hostname push-sgp-clevercloud-customers.services.clever-cloud.com User git IdentityFile ~/.ssh/id_ed25519_clevercloud # config for Clever Cloud specific key (Sydney zone) Host push-syd-clevercloud-customers.services.clever-cloud.com Hostname push-syd-clevercloud-customers.services.clever-cloud.com User git IdentityFile ~/.ssh/id_ed25519_clevercloud Need help about SSH keys?\nContact us at support@clever-cloud.com or you can read more about SSH Keys.\n","how-to-add-your-ssh-key-on-clever-cloud#How to add your SSH key on Clever Cloud?":"I don\u0026rsquo;t have any, I want to create an SSH key In your Terminal, enter the following bash line:\nssh-keygen -t ed25519 -C \u0026#34;your_email@youremail.com\u0026#34; This command creates a new ssh key using the provided email, so that the owner of the key can be identified.\nWhen prompted in which file you want to save the key, just press enter. If it says that the file already exists, enter n for no. Type ls, verify the presence of the file and jump to Add your SSH key on Clever Cloud.\nWhen asked, enter a passphrase:\nGenerating public/private ed25519 key pair. Enter file in which to save the key (/your_home_path/.ssh/id_ed25519): # Now you should enter a passphrase. Enter passphrase (empty for no passphrase): [Type a passphrase] Enter same passphrase again: [Type passphrase again] Which should give you something like this:\nYour identification has been saved in /your_home_path/.ssh/id_ed25519. Your public key has been saved in /your_home_path/.ssh/id_ed25519.pub. The key fingerprint is: 01:0e:e5:2d:ab:98:d6:17:a1:6d:f0:68:9f:d0:a2:db your_email@youremail.com ","i-maybe-have-ssh-keys-i-want-to-check#I maybe have SSH keys, I want to check":"GitHub account and SSH key on Clever Cloud If your account is linked to GitHub, a panel with your GitHub SSH keys will appear in the \u0026ldquo;SSH Keys\u0026rdquo; tab. You can add any key already present in your GitHub account by clicking on the import button next to it.\nFind your SSH key You may already have an SSH key and so do not need to generate a new one. To check if you have one, follow these steps:\nLinux and Mac Whether you use Mac or Linux, open your Terminal application. Run cd ~/.ssh/ in your Terminal. If the folder exists, run ls and check if a pair of key exists : id_ed25519 and id_ed25519.pub. Using id_rsa and id_rsa.pub is fine too. We are just advocating the use of ed25519. Smaller to copy and way stronger than 2048-bit RSA keys. If you can find them, you do not need to generate a new one, simply go to the following \u0026ldquo;Add your key on Clever Cloud\u0026rdquo; part! Windows If you don\u0026rsquo;t have it, download Git for Windows and install it. Run Git Bash (from the Start Menu or from the Explorer with the contextual menu (right click)). Run cd ~/.ssh/ in your Terminal. If the folder exists, run ls and check if a pair of key exists : id_ed25519 and id_ed25519.pub or id_rsa and id_rsa.pub. We would recommend using ed25519 keys. Smaller to copy and way stronger than 2048-bit RSA keys. If you can find them, you do not need to generate a new one, simply go to the following \u0026ldquo;Add your key on Clever Cloud\u0026rdquo; part! ","private-ssh-key#Private SSH Key":"If you want to clone a repository from a private repository, you can add a Private SSH Key to an application by creating a folder clevercloud at the root of your application and creating the file clevercloud/ssh.json with the following content:\n{ \u0026#34;privateKeyFile\u0026#34;: \u0026#34;path/to/file\u0026#34; } Of course you need to provide a valid path to a file that contains a valid key and that you will push on the Clever Cloud git remote.\n","specific-ssh-key-for-clever-cloud#Specific SSH key for Clever Cloud":"If you want to use a specific key for Clever Cloud, you can set it in your SSH config by adding this :\nHost *.clever-cloud.com IdentityFile ~/.ssh/clevercloud "},"title":"SSH Keys"},"/doc/administrate/apps-management/":{"data":{"":"","archivingunarchiving-your-application#Archiving/Unarchiving your application":"You can perform this operation in the Overview menu of your application in the Clever Cloud console. You will find an archive button. This will remove it from your application\u0026rsquo;s list, but you will stil be able to access your application and push to its git remote. If you want to unarchieve your application simply click the un-archive button where the archive button was.","deleting-your-application#Deleting your application":"You can perform this operation in the Information menu of your application in the Clever Cloud console. You will find a red remove this application button at the bottom. This will open a modal where you should type the name of your application. Click remove to finish the process. Your application will be deleted and no longer accessible.","deploy-an-old-commit#Deploy an old commit":"If you want to revert to a previous version of your code, you can go to the Activity menu of your application in the Clever Cloud console. You will find here all your previous commits. Just select redeploy this commit on the desired one. This will trigger a redeploy of your application at this version.","edit-application-configuration#Edit application configuration":"You can edit your application in the Information menu of your application in the Clever Cloud console. You can rename it, change description and deployment zone. You can also enable/disable:\nZero downtime deployment: During a deployment, old scalers are kept up until the new instances work. Updates are thus transparent to the user. Your application has to work correctly with several scalers in parallel (e.g. for connections to databases). pico and nano scalers are using this feature by default. Sticky sessions: When horizontal scalability is enabled, a user is always served by the same scaler. Some frameworks or technologies require this option. Dedicated build instance: Your application will build on a dedicated machine allowing you to use a small scaler to run your application. But, using this option will make your deployment slower (by ~10 seconds) Cancel ongoing deployment on new push: A \u0026ldquo;git push\u0026rdquo; will cancel any ongoing deployment and start a new one with the last available commit. Force HTTPS: Any non secured HTTP request to this application will be redirected to HTTPS with a 301 Moved Permanently status code. Do not forget to save after editing your configuration.\nEdit your application ","start-restart-and-stop#Start, restart and stop":"You can start, restart, and stop your application in the Overview menu of your application in the Clever Cloud console.\nStart: will restart a stopped application. This will not trigger a rebuild phase as it will use the build cache. Re-build and restart: Same as start but with a build phase and without using using the build cache. Restart last pushed commit: will start last commit on the tree even if you reverted deployments to a previous commit. Stop: will stop currently running instances of your application. Stop functionality is useful during the development of the application to limit its credit consumption.\nManage your application "},"title":"Application Management"},"/doc/administrate/cache/":{"data":{"":"","configure-the-cache-size#Configure the cache size":"You can change the storage size specified in the varnish.params file with the CC_VARNISH_STORAGE_SIZE environment variable (the default value is 1G).\nCC_VARNISH_STORAGE_SIZE=2G ","enable-varnish-for-your-application#Enable Varnish for your application":"To enable it, you just have to create a varnish.vcl file in the /clevercloud folder. This file describes how Varnish caches your applications and how it decides to return a cached resource or not.\n‚ö†Ô∏è The vcl 4.1; and backend section of the varnish.vcl configuration file are not necessary as they are already handled by Clever Cloud. If you have a PHP¬†FTP application or if your varnish.vcl file is on an FS¬†Bucket, make sure you redeploy the application for the changes to take effect. To know how to write your varnish.vcl file, please have a look at the Varnish 6 book.\n","example-files#Example files":"We provide some examples of Varnish configuration files that you can use for your application. Create a /clevercloud folder at the root of your application if it does not exist, rename the file to varnish.vcl and move it in the /clevercloud folder.","limitations#Limitations":" ‚ö†Ô∏è Varnish is only available on PHP, Go and Node.js applications. Support for other applications is in discussion.\nFor more information about it, contact us at support@clever-cloud.com.\n","listen-on-the-right-port#Listen on the right port":"Once varnish is enabled, your application should no longer listen on port 8080, but on port 8081. Because it\u0026rsquo;s Varnish that will listen on port 8080, and it will have in its configuration your application as backend.","overview#Overview":"Varnish is a HTTP proxy-cache, which works as a reverse proxy between your application and the client. Following rules defined by the user, Varnish will cache the data of an application to reduce the load on its server. We use Varnish 6.6.0 and varnish-modules 0.18.0.","varnish-6-migration#Varnish 6 migration":"If you already have a configuration for an older version of varnish, you can read this guide to upgrade to version 6."},"title":"Varnish as HTTP Cache"},"/doc/administrate/clamav/":{"data":{"":"Clam AntiVirus is an open source (GPLv2) anti-virus toolkit, designed especially for e-mail scanning on mail gateways. It provides a number of utilities including a flexible and scalable multi-threaded daemon, a command line scanner and advanced tool for automatic database updates. The core of the package is an anti-virus engine available in a form of shared library.","activate-clamav#Activate ClamAV":"You can set the CC_CLAMAV environment variable to enable ClamAV for your application:\nCC_CLAMAV=true This variable is used to start these two services:\nclamav-daemon.service (multi-threaded daemon that uses libclamav to scan files for viruses). clamav-freshclam.service (used to update signature database sets to the latest version). The signature database is updated every 2 hours.\n","additional-configurations#Additional configurations":"CC_CLAMAV_MAXTHREADS: Maximum number of threads running at the same time.\nCC_CLAMAV_MAXQUEUE: Maximum number of queued items.\nIf you have special needs, you can make a request on our technical support:\nsupport@clever-cloud.com ","clamav-for-all-applications#ClamAV for all applications":"ClamAV is not enabled by default but it\u0026rsquo;s available for all Clever Cloud applications.","memory-consumption#Memory consumption":"ClamAV can consume a lot of resources, make sure you have a scaler with enough memory (at least 1GB available) to avoid a complete shutdown / crash of your application (OOM).","unix-andor-tcp-sockets-connections#Unix and/or TCP sockets connections":"The ClamAV daemon on Clever Cloud instances listens for incoming connections on the following sockets:\nUnix socket:\n/run/clamav/clamd.ctl TCP socket:\nlocalhost:3310 Be sure to use these settings when configuring your ClamAV client.\n"},"title":"Clamav"},"/doc/administrate/cron/":{"data":{"":"The configuration file used for crontab is /clevercloud/cron.json.\n‚ö†Ô∏è Crons are not available in the Docker environment as it would require to set them up inside the Docker container. ","access-environment-variables#Access environment variables":"To have access to environment variable, you must wrap your commands in a bash script. Let\u0026rsquo;s say your command is bundle exec rake myapp:dosomething.\nYou need to put it in a bash script, starting with #!/bin/bash -l. The -l is very important:\n#! /bin/bash -l cd ${APP_HOME} # Which has been loaded by the env. bundle exec rake myapp:dosomething Then you need to commit an executable file:\nchmod +x crons/mycron.sh git add crons/mycron.sh git diff --cached $ diff --git a/crons/mycron.sh b/crons/mycron.sh $ old mode 100644 $ new mode 100755 git commit -m \u0026#34;Make cron file executable\u0026#34; Then, in clevercloud/cron.json:\n[ \u0026#34;*/5 * * * * $ROOT/crons/mycron.sh\u0026#34; ] Do not double bash! You might be tempted to put the following in your cron.json file:\n[ \u0026#34;*/5 * * * * /bin/bash $ROOT/crons/mycron.sh\u0026#34; ] Do NOT. Invoking bash here will supersede the shebang and cancel the bash -l that loads the env. So just put the path to your executable mycron.sh.\nYou can refer to this list to see which variables are available.\n","deduplicating-crons#Deduplicating crons":"Crons are installed and executed on every scaler of an application. This means the same cron may be executed more than once.\nYou can use your own techniques to avoid that, like a shared task queue or some other locking system.\nIf you do want to stay stateless and simple, just your bash wrapper script by:\n#! /bin/bash -l if [[ \u0026#34;$INSTANCE_NUMBER\u0026#34; != \u0026#34;0\u0026#34; ]]; then echo \u0026#34;Instance number is ${INSTANCE_NUMBER}. Stop here.\u0026#34; exit 0 fi cd ${APP_HOME} # Which has been loaded by the env. # Your part here ‚ö†Ô∏è If Zero downtime deployment is activated, Crons might overlap for a couple of minutes until the old instance are deleted as two instances would have the same instance number You can prevent this by deactivating it. ","logs-collection#Logs collection":"Everything coming from stdout \u0026amp; stderr is forwarded to our logs collection system and is available in the web console / CLI logs.","restrictions#Restrictions":"There are two restrictions about the usage of crontab on our platform:\nThe special date @reboot is not available since the crontab is added after the startup of the instance You must use the absolute path of commands ‚ö†Ô∏è We do not currently support the clustering of cron tasks, you must manage it yourself if your application requires more than one instance. ","root#$ROOT":"You can use the special token $ROOT to refer to the root folder of your application.\nExample of clevercloud/cron.json which executes the file cron.php every 5 minutes:\n[ \u0026#34;*/5 * * * * /usr/bin/php $ROOT/cron.php\u0026#34; ] Note: $ROOT is only a token (not an actual variable) which is replaced when setting up the crons by the equivalent of the APP_HOME variable (/home/bas/\u0026lt;app_id\u0026gt;). Do not write ${ROOT}, only $ROOT will work.\n","syntax#Syntax":"Here is the general syntax:\n[ \u0026#34;\u0026lt;string\u0026gt;\u0026#34;, \u0026#34;\u0026lt;string\u0026gt;\u0026#34; ] The string \u0026lt;string\u0026gt; must use the cron format:\nM H d m Y command M: Minute [0,59] H: Hour [0,23] d: Day of the month [1,31] m: Month of the year [1,12] Y: Day of the week [0,6] (0 is Sunday) ‚ö†Ô∏è All the servers are configured to use Coordinated Universal Time (UTC), please keep it in mind when configuring cron tasks to run at a specific hour. * For more information about the syntax, you can check this page\n"},"title":"CRON"},"/doc/administrate/database-migration/":{"data":{"":"","migrating-any-database-and-updating-its-security#Migrating any database and updating its security":" ‚ö†Ô∏è We do not support the migration of read only users except for PostgreSQL addons. If you have any, you will have to create new ones at the end of the migration. You can migrate any database easily in Clever Cloud to upgrade the size of the addon and improve its security by updating underlaying softwares.\nIndeed, our databases add-ons are deployed on immutable Virtual Machines. No updates are made on those VMs. To improve security, you need to perform a \u0026ldquo;migration\u0026rdquo;, which will boot a new VM with up-to-date system and database. Unless you want to upgrade your database to a new major version or to give it more resources, you just have to perform a migration on the same zone, same plan and same major version.\nThese updates are not related to your addon (PostgreSQL, MySQL\u0026hellip;) major version. Only patches or minor versions of the addon software along with system upgrades (security patches and new kernel features) are performed. For example, you can keep PostgreSQL 11 if you want to.\n","migration-updating-step-by-step#Migration (updating) step-by-step":"Under any database add-on menu, go to the Migrate/Upgrade section.\nYou will see the disclaimer of the database migration assistant. It informs you that your databse will be read-only during the migration process and that the hostname and database name will be automatically changed.\nMigrate/Upgrade section Regarding this, we strongly recommend that you make sure every linked application uses the database add-on environment variables so those values will be automatically updated in your application.\nOnce you are ready, you can click on Migration Settings.\nA menu will open, where you will see your current database informations.\nMigration settings Under you will see that you can select your new batabse size and pricing plan. Billing section in Summary will be edited accordingly.\nUnder Targeted version you can choose the desired database version.\nPlease note that downgrading database is currently not supported, you can however ask our support team to do it at support@clever-cloud.com.\nOnce you are happy with the changes you made, you can select Migrate the Database. You will be prompted to confirm the migration.\nConfirmation prompt screen As soon as you do so, the database will be set in read-only mode and the migration process will start.\nMigration in progress If the process succeeds, you will get a success screen. Every linked applications will automatically restart to use the new configuration. Please make sure to update configuration that do not use environment variable if you have some.\nMigration successful In case the database migration fails, you will be informed at wich point it did and a button to contact our support team will appear. Reach out to them at support@clever-cloud.com with you add-on ID (available in the Addon Dashboard section) and they will help you finish the process.\n"},"title":"Database migration and security updates"},"/doc/administrate/domain-names/":{"data":{"":"","gandi-cname-configuration#Gandi CNAME configuration":"Here is an article that demonstrates a simple setup for Gandi CNAMEs.","prefix-routing#Prefix routing":"Requests are routed to applications based on the domain name, but you can also route based on a path prefix.\nFor instance, you can bind example.com to an app, and example.com/api to another one. All the HTTP requests on example.com where the path starts with /api will be routed to the second app. The other requests will be routed to the first app. You can add a path after every domain name you bind in the console (or with clever tools).\nNote that your prefix-routed application needs to have a /prefix route.\nThis will work:\nexample.com -\u0026gt; myfirtapp-main-route example.com/api -\u0026gt; mysecond-app-main-route/api This will NOT work:\nexample.com -\u0026gt; myfirtapp-main-route (works) example.com/api -\u0026gt; mysecondapp-main-route (404 response from mysecondapp) Prefix routing for static sites In the case of static files, you usually understand routes as paths in a file tree.\nThis will work:\nexample.com/api -\u0026gt; my-static-site/api/index.php This will NOT work:\nexample.com/api -\u0026gt; my-static-site/index.php ","using-a-cleverappsio-free-domain-with-built-in-ssl#Using a \u003cstrong\u003e*.cleverapps.io\u003c/strong\u003e free domain, with built-in SSL":"When creating an application, you have two (non exclusive) choices for domain names:\nUsing a personal domain name Using a *.cleverapps.io free domain for dev purposes, with built-in SSL You can link one or several domain names in the console.\nAdd it in the application configuration: in the console, click on your application name in the first panel, then choose domain¬†names. You\u0026rsquo;ll have to choose to add a custom domain name or use a sub-domain under *.cleverapps.io.\nUsing a *.cleverapps.io free domain, with built-in SSL ‚ö†Ô∏è *.cleverapps.io domains are given for development and tests purpose. They point to specific reverse proxies and have the following weaknesses:\n.io TLD is not a stable one since we offer the domain, the probability that people will abuse it is high. Thus, we do not garantee the same QoS on the cleverapps reverse proxies. In the console, in the domain name sub menu of your application, there is a default entry configured by default for every new app: yourAppID.cleverapps.io, which can be removed.\nIn your application\u0026rsquo;s domain section, just enter example.cleverapps.io. You have to choose a unique one. Trusted SSL is available on every sub-domain.\n‚ö†Ô∏è *.cleverapps.io certificate is only valid for the first sub-domain level, it won\u0026rsquo;t work with a domain like blog.mycompany.cleverapps.io. ","using-personal-domain-names#Using Personal Domain Names":"You can point your domain name to Clever Cloud either with a CNAME record or with A records.\nThe use of a CNAME record is highly recommended.\nWith a CNAME record, your DNS configuration is always up-to-date. Using A records will require you to keep the DNS configuration up-to-date manually.\nDomain names linked to Clever Cloud applications are monitored, so we will send you an email if your DNS configuration is obsolete or incorrect.\nWe also support wildcard personal domain names, to do so use the standard pattern to describe it: *.example.com\nYour Application Runs in the Europe/Paris (\u0026lsquo;PAR\u0026rsquo;) Zone Provide the following to your registrar:\nRecord Type Value CNAME Recommended {yoursubdomain} 10800 IN CNAME domain.par.clever-cloud.com. AOnly if CNAME is not available Four records:\n@ 10800 IN A 185.42.117.108\n@ 10800 IN A 185.42.117.109\n@ 10800 IN A 46.252.181.103\n@ 10800 IN A 46.252.181.104 Your Application Runs in the Europe/Paris onto Scaleway (\u0026lsquo;SCW\u0026rsquo;) Zone Record Type Value CNAME Recommended {yoursubdomain} 10800 IN CNAME domain.scw.clever-cloud.com. AOnly if CNAME is not available Four records:\n@ 10800 IN A 212.129.27.239\n@ 10800 IN A 212.83.186.147 @ 10800 IN A 212.83.186.216 @ 10800 IN A 212.129.27.183 Your Application Runs in the Europe/Roubaix (\u0026lsquo;RBX\u0026rsquo;) Zone Record Type Value CNAME Recommended {yoursubdomain} 10800 IN CNAME domain.rbx.clever-cloud.com. AOnly if CNAME is not available Four records:\n@ 10800 IN A 87.98.180.173\n@ 10800 IN A 87.98.182.176\n@ 10800 IN A 87.98.180.181\n@ 10800 IN A 87.98.182.136 Your Application Runs in the Europe/Roubaix HDS (\u0026lsquo;RBXHDS\u0026rsquo;) Zone Record Type Value CNAME Recommended {yoursubdomain} 10800 IN CNAME domain.rbxhds.clever-cloud.com. AOnly if CNAME is not available Two records:\n@ 10800 IN A 135.125.16.47\n@ 10800 IN A 135.125.16.49 Your Application Runs in the Europe/Warsaw (\u0026lsquo;WSW\u0026rsquo;) Zone Record Type Value CNAME Recommended {yoursubdomain} 10800 IN CNAME domain.wsw.clever-cloud.com. AOnly if CNAME is not available Two records:\n@ 10800 IN A 145.239.17.127\n@ 10800 IN A 145.239.17.192 Your Application Runs in the Europe/Gravelines (\u0026lsquo;GRAHDS\u0026rsquo;) Zone Record Type Value CNAME Recommended {yoursubdomain} 10800 IN CNAME domain.grahds.clever-cloud.com. AOnly if CNAME is not available Two records:\n@ 10800 IN A 188.165.58.196\n@ 10800 IN A 188.165.58.200 Your Application Runs in the North-America/Montreal (\u0026lsquo;MTL\u0026rsquo;) Zone Provide the following to your registrar:\nRecord Type Value CNAME Recommended {yoursubdomain} 10800 IN CNAME domain.mtl.clever-cloud.com. AOnly if CNAME is not available Two records:\n@ 10800 IN A 149.56.147.232\n@ 10800 IN A 149.56.126.234\nYour Application Runs in the Asia/Singapore (\u0026lsquo;SGP\u0026rsquo;) Zone Record Type Value CNAME Recommended {yoursubdomain} 10800 IN CNAME domain.sgp.clever-cloud.com. AOnly if CNAME is not available Two records:\n@ 10800 IN A 51.79.197.159\n@ 10800 IN A 51.79.197.160 Your Application Runs in the Oceania/Sydney (\u0026lsquo;SYD\u0026rsquo;) Zone Record Type Value CNAME Recommended {yoursubdomain} 10800 IN CNAME domain.syd.clever-cloud.com. AOnly if CNAME is not available Two records:\n@ 10800 IN A 139.99.253.215\n@ 10800 IN A 139.99.253.237 Your Application Runs in the Jeddah (\u0026lsquo;JED\u0026rsquo;) Zone Record Type Value CNAME Recommended {yoursubdomain} 10800 IN CNAME domain.jed.clever-cloud.com. AOnly if CNAME is not available Two records:\n@ 10800 IN A 158.101.226.110\n@ 10800 IN A 150.230.50.217 ‚ö†Ô∏è You cannot use a CNAME on a top-level domain, or on a subdomain which already has DNS records. If you want to make your application available from a domain name which does not support CNAME records (eg example.com in addition to www.example.com), check if your registrar provides a web redirection service. This way, you only have to make www.example.com point to Clever Cloud. Please note that web redirection provided by registrars only work over HTTP.\nRemember that DNS changes may take time to propagate (usually a few hours, sometimes up to a day or more). It depends on the TTL setting of your DNS configuration. For faster changes, you can lower the TTL value in advance, and rise it again afterwards.\n‚ÑπÔ∏è \u0026lt;div\u0026gt; \u0026lt;code\u0026gt;*.example.com\u0026lt;/code\u0026gt; will match e.g. \u0026lt;code\u0026gt;blog.example.com\u0026lt;/code\u0026gt; or \u0026lt;code\u0026gt;www.example.com\u0026lt;/code\u0026gt;. \u0026lt;/div\u0026gt; \u0026lt;div\u0026gt; But for the raw domain \u0026lt;code\u0026gt;example.com\u0026lt;/code\u0026gt;, you will have to add both \u0026lt;code\u0026gt;*.example.com\u0026lt;/code\u0026gt; and \u0026lt;code\u0026gt;example.com\u0026lt;/code\u0026gt; to your application.\u0026lt;/div\u0026gt; Contextual Example Domain Name Use Case CNAME config record A config Web redirections www.example.com example.com point www.example.com to domain.par/mtl.clever-cloud.com. No A record needed Redirect example.com to www.example.com www.example.com point www.example.com to domain.par/mtl.clever-cloud.com. No A record needed No redirect needed example.com No CNAME record needed point example.com to the two IP addresses of the selected region No redirect needed "},"title":"Domain names"},"/doc/administrate/encryption-at-rest/":{"data":{"":"","availability#Availability":"Encryption at rest is currently available for the following add-ons:\nPostgreSQL MySQL MongoDB Redis Elastic Stack Jenkins Only dedicated add-ons have the option. If your add-on is not encrypted, you can ask our support team to configure it. A migration will then be needed to encrypt your disk.\n","introduction#Introduction":"Encrypting your data at rest provides another security layer to protect your data from various security threats. By default and unless you implemented it in your code, the data stored on disk is not encrypted. Enabling encryption at rest allows you to make sure your data can\u0026rsquo;t be read by anyone having a physical access to the hard drive.\nEncryption at rest only protects the data \u0026ldquo;at rest\u0026rdquo;, meaning that if your data is sent over an unencrypted channel on the network, it could be read on the fly. The scenario encryption at rest covers are mostly hard drives stealing or unauthorized access once the hard drive got removed.\nHere at Clever Cloud, before removing a hard drive, either because it is faulty or not used anymore, we first shred the hard drive with multiple passes. Then it is physically damaged by the data center operators before being thrown away. If one of those steps are missing or fail for some reason, your data could still be read if you didn\u0026rsquo;t use encryption at rest. If you did, no one will be able to access it.\n","technical-details#Technical details":"Encryption at rest works by decrypting the encrypted data disk and exposing it to the system in an unencrypted volume. Each time you read data on this unencrypted volume, the system will fetch the data on the encrypted disk and decrypt it. If you write data, the opposite happens: the data to be written is encrypted and then its encrypted content is written to the encrypted disk.\nEach add-on has a randomly generated encryption key used to encrypt the data disk. The key will stay the same during the add-on life but can be changed if needed. In that case, a migration will use the new passphrase.\nWe use the cryptsetup tool to operate encrypted disks. Cryptsetup\u0026rsquo;s current default is LUKS2 with aes-xts as the encryption algorithm. This may be subject to change as cryptsetup and the security algorithms evolve.\nThe encryption key is only stored encrypted on our systems and is not stored on your add-on. When your add-on boots, the key is downloaded over HTTPS from our systems and the disk is then mounted.\nWe also have a small swap partition on add-ons to allow more available RAM for background services. This swap file is also encrypted to avoid any encrypted data leak.\nPerformances Performances may be a bit degraded with encryption enabled but in most of the cases under regular load, it is usually insignificant and an acceptable tradeoff.\nAlso, depending on whether you are using a single vCPU add-on or a multiple vCPU one, numbers can greatly vary. Single vCPU instances will switch between decrypting/encrypting the data and reading/writing it to the disk while multiple vCPU instances will be able to parallelize those operations, leading to better performance.\nNote that most of the databases either have an in-memory cache or use the system\u0026rsquo;s file cache so if the same data is often read, it may be available in the cache and no decryption occur leading to fast reads.\nThose tests were made using a 4 vCPU instance with 4 GiB of RAM. Before each test, the system\u0026rsquo;s cache was dropped to avoid having reads that are faster than they should be: sync; echo 1 \u0026gt; /proc/sys/vm/drop_caches.\nNote: The dd tool wasn\u0026rsquo;t used for this benchmark as it does not represent a valid workload, leading to results that can greatly vary depending on disk performance.\nUsing pgbench for PostgreSQL Using pgbench with 20 jobs and 20 clients, we see a difference between 3% and 5% less transactions per second on the encrypted disk and no real CPU difference.\nWith encrypted disk, the number of transactions per second was 315. On the unencrypted one, it was 330 per second.\nUsing sysbench for MySQL Using sysbench with 6¬†threads, the difference is between 5% and 10% less transactions per second. The CPU usage is also between 5% and 10% higher depending on the work load (reads or writes).\nWith encrypted disk, the number of transactions per second was 635. On the unencrypted one, it was 703 per second.\n"},"title":"Encryption at rest"},"/doc/administrate/log-management/":{"data":{"":"Log management is currently only available through our API and clever-tools.\n‚ÑπÔ∏è Logs are currently retained for a maximum of 1 day. Logs are flushed daily at midnight. You can use log drains if a greater retention is needed. ","exporting-logs-to-an-external-tools#Exporting logs to an external tools":"You can use the logs drains to send your application\u0026rsquo;s logs to an external server with the following command.\nclever drain create [--alias \u0026lt;alias\u0026gt;] \u0026lt;DRAIN-TYPE\u0026gt; \u0026lt;DRAIN-URL\u0026gt; [--username \u0026lt;username\u0026gt;] [--password \u0026lt;password\u0026gt;] Where DRAIN-TYPE is one of:\nTCPSyslog: for TCP syslog endpoint; UDPSyslog: for UDP syslog endpoint; HTTP: for TCP syslog endpoint (note that this endpoint has optional username/password parameters as HTTP Basic Authentication); ElasticSearch: for Elasticsearch endpoint (note that this endpoint requires username/password parameters as HTTP Basic Authentication); DatadogHTTP: for Datadog endpoint (note that this endpoint needs your Datadog API Key). You can list the currently activated drains with this command.\nclever drain [--alias \u0026lt;alias\u0026gt;] And remove them if needed\nclever drain remove [--alias \u0026lt;alias\u0026gt;] \u0026lt;DRAIN-ID\u0026gt; If the status of your drain is shown as DISABLED without you disabling it, it may be because we have not been able to send your logs to your drain endpoint or because the requests timed out after 25 seconds.\nYou can also use the logs drain to send your add-on\u0026rsquo;s logs by using --addon flag, the value must be the add-on id starting by addon_.\nElasticsearch ElasticSearch drains use the Elastic bulk API. To match this endpoint, specify /_bulk at the end of your Elasticsearch endpoint.\nclever drain create ElasticSearch https://xxx-elasticsearch.services.clever-cloud.com/_bulk --username USERNAME --password PASSWORD Each day, we will create an index logstash-\u0026lt;yyyy-MM-dd\u0026gt; and push logs to it.\nIndex Lifecycle Management Depending on the amount of logs generated by your application, you might want to manage the lifecyle of your log indexes to prevent your Elasticsearch instance from running out of storage space.\nTo do so, Elasticsearch provides a functionnality called Index Lifecycle management that allows you to create a policy to delete indexes based on their creation date.\nWith our Elasticsearch add-on, you can choose to create a Kibana application in which you can create the policy and apply it to your indexes with an index template, but you can create them manually through API requests.\nHere is an example that will create a policy to delete indexes older than 30 days:\ncurl -X PUT \u0026#34;https://username:password@xxx-elasticsearch.services.clever-cloud.com/_ilm/policy/logs_drain?pretty\u0026#34; -H \u0026#39;Content-Type: application/json\u0026#39; -d\u0026#39; { \u0026#34;policy\u0026#34;: { \u0026#34;phases\u0026#34;: { \u0026#34;delete\u0026#34;: { \u0026#34;min_age\u0026#34;: \u0026#34;30d\u0026#34;, \u0026#34;actions\u0026#34;: { \u0026#34;delete\u0026#34;: {} } } } } } \u0026#39; An index template example to apply the policy based on an index pattern:\ncurl -X PUT \u0026#34;https://username:password@xxx-elasticsearch.services.clever-cloud.com/_index_template/logs_drain?pretty\u0026#34; -H \u0026#39;Content-Type: application/json\u0026#39; -d\u0026#39; { \u0026#34;index_patterns\u0026#34;: [\u0026#34;logstash-*\u0026#34;], \u0026#34;template\u0026#34;: { \u0026#34;settings\u0026#34;: { \u0026#34;index.lifecycle.name\u0026#34;: \u0026#34;logs_drain\u0026#34; } } } \u0026#39; For more information, please refer to the official documentation.\nDatadog To create a Datadog drain, you just need to use:\nclever drain create DatadogHTTP \u0026#34;https://http-intake.logs.datadoghq.com/v1/input/\u0026lt;API_KEY\u0026gt;?ddsource=clevercloud\u0026amp;service=\u0026lt;SERVICE\u0026gt;\u0026amp;hostname=\u0026lt;HOST\u0026gt;\u0026#34; ‚ö†Ô∏è Datadog has two zones, EU and COM. An account on one zone is not available on the other, make sure to target the right intake endpoint (datadoghq.eu or datadoghq.com). NewRelic To create a NewRelic drain, you just need to use:\nclever drain create NewRelicHTTP \u0026#34;https://log-api.eu.newrelic.com/log/v1\u0026#34; --api-key \u0026#34;\u0026lt;API_KEY\u0026gt;\u0026#34; ‚ö†Ô∏è NewRelic has two zones, EU and US. An account on one zone is not available on the other, make sure to target the right intake endpoint (log-api.eu.newrelic.com or log-api.newrelic.com). ","get-continuous-logs-from-your-application#Get continuous logs from your application":"You can see logs with the command down below.\nclever logs You can also add a flag --before or --after followed by a date (ISO8601 format).\nclever logs --before 2016-08-11T14:54:33.971Z You can also get your add-on\u0026rsquo;s logs by using --addon flag, the value must be the add-on id starting by addon_.\nclever logs --addon \u0026lt;addon_xxx\u0026gt; ‚ö†Ô∏è Only the last 1000 lines of logs are got by clever logs. Access logs It contains all incoming requests to your application. Here is an example:\n255.255.255.255 - - [06/Feb/2020:07:59:22 +0100] \u0026#34;GET /aget/to/your/beautiful/website -\u0026#34; 200 1453 They are available in different formats, the most common is CLF which stands for Common Log Format.\nYou can see access logs with the following command:\nclever accesslogs As with the logs command, you can specify --before and --after flags as well as the --follow to display access logs continuously.\nIf you need to change the ouput you can specify the --format flag with one of these values:\nsimple: 2021-06-25T10:11:35.358Z 255.255.255.255 GET /\nextended: 2021-06-25T10:11:35.358Z [ 255.255.255.255 - Nantes, FR ] GET www.clever-cloud.com / 200\nclf: 255.255.255.255 - - [25/Jun/2021:12:11:35 +0200] \u0026quot;GET / -\u0026quot; 200 562\njson:\n{ \u0026#34;t\u0026#34;:\u0026#34;2021-06-25T10:11:35.358209Z\u0026#34;, \u0026#34;a\u0026#34;:\u0026#34;app_xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\u0026#34;, \u0026#34;adc\u0026#34;:\u0026#34;clevercloud-adc-nX\u0026#34;, \u0026#34;o\u0026#34;:\u0026#34;orga_xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\u0026#34;, \u0026#34;i\u0026#34;:\u0026#34;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\u0026#34;, \u0026#34;ipS\u0026#34;:\u0026#34;255.255.255.255\u0026#34;, \u0026#34;pS\u0026#34;:58477, \u0026#34;s\u0026#34;:{ \u0026#34;lt\u0026#34;:50.624, \u0026#34;lg\u0026#34;:3.0511, \u0026#34;ct\u0026#34;:\u0026#34;Nantes\u0026#34;, \u0026#34;co\u0026#34;:\u0026#34;FR\u0026#34; }, \u0026#34;ipD\u0026#34;:\u0026#34;46.252.181.17\u0026#34;, \u0026#34;pD\u0026#34;:14001, \u0026#34;d\u0026#34;:{ \u0026#34;lt\u0026#34;:45.7059, \u0026#34;lg\u0026#34;:4.7444, \u0026#34;ct\u0026#34;:\u0026#34;Chaponost\u0026#34;, \u0026#34;co\u0026#34;:\u0026#34;FR\u0026#34; }, \u0026#34;vb\u0026#34;:\u0026#34;GET\u0026#34;, \u0026#34;path\u0026#34;:\u0026#34;/\u0026#34;, \u0026#34;bIn\u0026#34;:658,\u0026#34;bOut\u0026#34;:562, \u0026#34;h\u0026#34;:\u0026#34;www.clever-cloud.com\u0026#34;, \u0026#34;rTime\u0026#34;:\u0026#34;31ms\u0026#34;, \u0026#34;sTime\u0026#34;:\u0026#34;75Œºs\u0026#34;, \u0026#34;scheme\u0026#34;:\u0026#34;HTTPS\u0026#34;, \u0026#34;sC\u0026#34;:200,\u0026#34;sT\u0026#34;:\u0026#34;OK\u0026#34;, \u0026#34;w\u0026#34;:\u0026#34;WRK-01\u0026#34;, \u0026#34;r\u0026#34;:\u0026#34;01F91AEG8Z9RJKYB7JY7H56FNB\u0026#34;, \u0026#34;tlsV\u0026#34;:\u0026#34;TLS1.3\u0026#34; } "},"title":"Logs management"},"/doc/administrate/metrics/blackfire/":{"data":{"":"","blackfire-configuration#Blackfire configuration":"Necessary information Before setting up your app, be sure to have a Blackfire Account.\nConfiguration To configure Blackfire, you need to set the environment variables CC_BLACKFIRE_SERVER_TOKEN and CC_BLACKFIRE_SERVER_ID.\nOptional configuration If you need to fine-tune agent settings, you can use the following environment variables:\nCC_BLACKFIRE_LOG_LEVEL CC_BLACKFIRE_MEMORY_LIMIT CC_BLACKFIRE_COLLECTOR CC_BLACKFIRE_TIMEOUT CC_BLACKFIRE_STATSD CC_BLACKFIRE_STATSD_PREFIX Usage Just redeploy your application on Clever Cloud for the changes to take effect. A few minutes later, your application will begin sending data to Blackfire. Once Blackfire receives the data, your application will be listed in the dashboard.\n","overview#Overview":"Blackfire can be used on Clever Cloud with PHP applications.\nBlackfire helps to improve web applications, performance at each step of its lifecycle: from development to test, staging and production.\n"},"title":"Blackfire"},"/doc/administrate/metrics/new-relic/":{"data":{"":"","new-relic-configuration#New Relic configuration":"Necessary information Before setting up your app, be sure to have a New Relic Account.\nConfiguration To configure your New Relic, you need to set the environment variables NEW_RELIC_LICENSE_KEY and NEW_RELIC_APP_NAME (optional).\nAlternatively you can create and add a ./clevercloud/newrelic.json file in your project, with the following fields:\n{ \u0026#34;license\u0026#34;: \u0026#34;licenceID\u0026#34;, \u0026#34;appname\u0026#34;: \u0026#34;NameOfYourApp(optional)\u0026#34; } If the appname or NEW_RELIC_APP_NAME is not specified, we use your application id for the name.\nOptional configuration (PHP only) If you need to fine-tune agent settings, you can use the following environment variables:\nCC_NEWRELIC_BROWSER_MONITORING_AUTO_INSTRUMENT\nCC_NEWRELIC_DISTRIBUTED_TRACING_ENABLED\nCC_NEWRELIC_ERROR_COLLECTOR_ENABLED\nCC_NEWRELIC_TRANSACTION_TRACER_ENABLED\nCC_NEWRELIC_TRANSACTION_TRACER_RECORD_SQL\nUsage Just redeploy your application on Clever Cloud for the changes to take effect. A few minutes later, your application will begin sending data to New Relic. Once New Relic receives the data, your application will be listed in the dashboard.\n","new-relic-for-java-scala-and-php#New Relic for Java, Scala and PHP":"To use New Relic in Java, Scala or PHP instances, you need to configure it as it is provided directly inside the instances.","new-relic-for-nodejs-and-ruby#New Relic for Node.js and Ruby":"New Relic is very simple to install in a Node.js or Ruby application as it is a simple dependency. Install instructions for Node.js and Ruby are available in the New Relic documentation.","new-relic-for-python#New Relic for Python":"To use New Relic in Python, you have to add the newrelic dependency into your requirements.txt file.","overview#Overview":"New Relic can be used on Clever Cloud with Java, Node.js, PHP, Ruby and Scala applications.\nNew Relic is a software analytics company based in the United States. New Relic\u0026rsquo;s technology monitors Web and mobile applications in real-time that run in cloud, on-premise, or hybrid environments. You can easily setup a New Relic based monitoring on your application to monitor it and find performances problems.\n"},"title":"New Relic"},"/doc/administrate/metrics/overview/":{"data":{"":"","access-logs-metrics#Access Logs metrics":"","consumption-metric#Consumption metric":"Consumption can also be inferred by our metrics. We provide some helper macros in the Warp 10 documentation.\nConsumption unit is in second.\nThe following script provides the whole consumption from between start and end timestamps for all applications under an organisation.\n\u0026#39;\u0026lt;READ TOKEN\u0026gt;\u0026#39; \u0026#39;\u0026lt;ORGANISATION ID\u0026gt;\u0026#39; \u0026lt;START TIMESTAMP\u0026gt; \u0026lt;END TIMESTAMP\u0026gt; @clevercloud/app_consumption ","display-metrics#Display metrics":"","monitoring-metrics#Monitoring\u0026rsquo; metrics":" ‚ö†Ô∏è Clever Cloud Metrics is still in beta. In addition to logs, you can have access to metrics to know how your application behaves. By default, system metrics like CPU and RAM use are available, as well as application-level metrics when available (apache or nginx status for instance).\nDisplay metrics For each application, there is a Metrics tab in the console.\nOverview pane To get a quick overview of the current state of your scalers, the overview pane displays the current CPU, RAM, Disk and Network activity. On supported platforms, you can also have access to requests / second, and GC statistics.\nDirect link from Overview pane to app dashboard in Grafana Advanced pane Advanced metrics allow you to access all gathered metrics, on a specified time range.\nCustom queries All metrics are stored in Warp 10, so you can explore data directly with the quantum interface, with WarpScript.\nFor instance, you can derive metrics over time, do custom aggregations or combine metrics.\nGet alerts You can set up alerts in Grafana to be notified on your apps and add-ons consumption. This can be useful to monitor databases capacity or latency.\nAlert option from the general menu in Grafana For example, check this tutorial on how to create Slack alerts with Grafana.\nAccess Logs metrics All your applications access logs are pushed to Warp 10. You are now able to process them directly in the console in the Metrics tab of your applications.\nRequest rate We provide a request rate metric. It is an average of the access logs request count over 1 minute. It is updated every 30 second.\nThis can be reached using the Warp 10 class: request_rate.\nThere are the same labels than for others metrics (see monitoring-metrics)\nAccess Log data model Access logs are defined in the 'accessLogs' Warp 10 class and there are three Warp 10 labels available:\nowner_id: Organisation ID app_id : Application ID (ex: app_xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxx ) or Addon ID (ex: postgresql_xxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxx) adc or sdc adc (Application Delivery Controller) are used for HTTP connections sdc (Service Delivery Controller) are used for TCP connections Available addons for the field addon_id are mysql, redis, mongodb and postgresql addons.\n‚ö†Ô∏è Add-ons on shared plans (usually DEV plans) do not provide access logs There are no recorded access logs in case of a direct access to an add-on To reduce space used to store access logs, we defined the following key-value models.\nKey-Value model for applications AccessLogs data models for application. Using HTTP protocol.\nt -\u0026gt; timestamp a -\u0026gt; appId or addonId o -\u0026gt; ownerId i -\u0026gt; instanceId ipS -\u0026gt; ipSource pS -\u0026gt; portSource # 0 if undefined s -\u0026gt; source lt -\u0026gt; latitude lg -\u0026gt; longitude ct -\u0026gt; city co -\u0026gt; country ipD -\u0026gt; ipDestination pD -\u0026gt; portDestination # 0 if undefined d -\u0026gt; destination lt -\u0026gt; latitude lg -\u0026gt; longitude ct -\u0026gt; city co -\u0026gt; country vb -\u0026gt; verb path -\u0026gt; path bIn -\u0026gt; bytesInt bOut -\u0026gt; bytesOut h -\u0026gt; hostname rTime -\u0026gt; responseTime sTime -\u0026gt; serviceTime scheme -\u0026gt; scheme sC -\u0026gt; statusCode sT -\u0026gt; statusText tS -\u0026gt; Haproxy termination_state adc -\u0026gt; Reverse proxy hostname w -\u0026gt; workerId (Sozu) r -\u0026gt; requestId (Sozu) tlsV -\u0026gt; tlsVersion (Sozu) Key-Value model for addons AccessLogs data models for addons. Using TCP protocol.\nt -\u0026gt; timestamp a -\u0026gt; appId or addonId o -\u0026gt; ownerId i -\u0026gt; instanceId ipS -\u0026gt; ipSource pS -\u0026gt; portSource # 0 if undefined s -\u0026gt; source lt -\u0026gt; latitude lg -\u0026gt; longitude ct -\u0026gt; city co -\u0026gt; country ipD -\u0026gt; ipDestination pD -\u0026gt; portDestination # 0 if undefined d -\u0026gt; destination lt -\u0026gt; latitude lg -\u0026gt; longitude ct -\u0026gt; city co -\u0026gt; country tS -\u0026gt; Haproxy termination_state sdc -\u0026gt; Reverse proxy hostname sDuration -\u0026gt; total session duration time in millis Queries examples: The main ways to use accessLogs data is to FETCH over it and get interesting values by a JSON processing.\n‚ÑπÔ∏è Look at fetch_accessLogs_key_v0 macro to have a convenient way to explore access log data, see Warp 10 documentation. A convenient way to integrate the intercepted data in a workflow is to use WarpScript. It is a good idea to use the GTS format to be able to apply all GTS transformation on the output.\nIn the following example, we get the accessLogs status codes and create a GTS as an output to be able to use FILTER or any other transformation on it a second time.\nAn example using the provided Clever Cloud macro to straightforward access to the access logs input byte :\n\u0026#39;\u0026lt;READ TOKEN\u0026gt;\u0026#39; { \u0026#39;app_id\u0026#39; \u0026#39;id\u0026#39; } \u0026#39;bIn\u0026#39; NOW 1 h @clevercloud/fetch_accessLogs_key_v0 or to get the latitude of the destination, which is a nested data:\n\u0026#39;\u0026lt;READ TOKEN\u0026gt;\u0026#39; { \u0026#39;app_id\u0026#39; \u0026#39;id\u0026#39; } \u0026#39;d.lt\u0026#39; NOW 1 h @clevercloud/fetch_accessLogs_key_v0 Monitoring\u0026rsquo; metrics All applications and VMs instances behind are monitored. Data is sent to Warp 10, a Geotimes series database. All metrics can be processed directly in the console in the Metrics tab of your applications or by the Clever Cloud Warp 10 endpoint.\nMonitoring data model All metrics data follow the same schema in warp 10. Each class represents a specific metric. The context is provided by the Warp 10 labels.\nClass values and Labels Overview A telegraf daemon supplies most metrics.\nEach metric is recorded as a Warp 10 class. Labels provide additional information about the VMs like instances id, organisation id, reverse proxy used.\nLabels In metrics\u0026rsquo; data, mains labels would be :\nowner_id : A unique ID by organisation app_id : A unique ID of application host : HV id hosting the VM instance adc : Reverse proxy ID for http connexion (ie: applications) sdc : Reverse proxy ID for tcp connexion (ie: addons) vm_type : volatile or persistent. Is it a stateless application or a stateful add-on deployment_id : ID of the deployment ‚ö†Ô∏è For some specific metrics. Some labels could miss. Classes Telegraf provide lots of metrics described in their documentation.\nBelow, the list of all Warp 10 classes representing Telegraf metrics :\nconntrack.ip_conntrack_count mem.swap_free conntrack.ip_conntrack_max mem.swap_total cpu.usage_guest mem.total cpu.usage_guest_nice mem.used cpu.usage_idle mem.used_percent cpu.usage_iowait mem.vmalloc_chunk cpu.usage_irq mem.vmalloc_total cpu.usage_nice mem.vmalloc_used cpu.usage_softirq mem.wired cpu.usage_steal mem.write_back cpu.usage_system mem.write_back_tmp cpu.usage_user net.bytes_recv disk.free net.bytes_sent disk.inodes_free net.drop_in disk.inodes_total net.drop_out disk.inodes_used net.err_in disk.total net.err_out disk.used net.packets_recv disk.used_percent net.packets_sent http_response.http_response_code net_response.response_time http_response.response_time net_response.result_code http_response.result_code net_response.result_type http_response.result_type netstat.tcp_close kernel.boot_time netstat.tcp_close_wait kernel.context_switches netstat.tcp_closing kernel.entropy_avail netstat.tcp_established kernel.interrupts netstat.tcp_fin_wait1 kernel.processes_forked netstat.tcp_fin_wait2 mem.active netstat.tcp_last_ack mem.available netstat.tcp_listen mem.available_percent netstat.tcp_none mem.buffered netstat.tcp_syn_recv mem.cached netstat.tcp_syn_sent mem.commit_limit netstat.tcp_time_wait mem.committed_as netstat.udp_socket mem.dirty processes.blocked mem.free processes.dead mem.high_free processes.idle mem.high_total processes.paging mem.huge_page_size processes.running mem.huge_pages_free processes.sleeping mem.huge_pages_total processes.stopped mem.inactive processes.total mem.low_free processes.total_threads mem.low_total processes.unknown mem.mapped processes.zombies mem.page_tables procstat_lookup.pid_count mem.shared system.load1 mem.slab system.load1_per_cpu mem.swap_cached jvm.statsd-jvm-profiler_heap_ps-old-gen_max.value jvm.statsd-jvm-profiler_pending-finalization-count.value jvm.statsd-jvm-profiler_nonheap_total_committed.value jvm.statsd-jvm-profiler_loaded-class-count.value jvm.metrics_jvm_heapMemoryUsage_used.value jvm.statsd-jvm-profiler_gc_PS_Scavenge_count.value jvm.metrics_jvm_nonHeapMemoryUsage_used.value jvm.statsd-jvm-profiler_nonheap_metaspace_init.value jvm.statsd-jvm-profiler_nonheap_total_used.value jvm.statsd-jvm-profiler_heap_ps-survivor-space_used.value jvm.statsd-jvm-profiler_heap_ps-eden-space_init.value jvm.statsd-jvm-profiler_gc_PS_MarkSweep_time.value jvm.statsd-jvm-profiler_nonheap_total_max.value jvm.statsd-jvm-profiler_heap_ps-eden-space_max.value jvm.statsd-jvm-profiler_nonheap_compressed-class-space_max.value jvm.statsd-jvm-profiler_heap_total_init.value jvm.statsd-jvm-profiler_nonheap_code-cache_used.value jvm.statsd-jvm-profiler_nonheap_metaspace_used.value jvm.statsd-jvm-profiler_nonheap_compressed-class-space_init.value jvm.statsd-jvm-profiler_nonheap_metaspace_max.value jvm.statsd-jvm-profiler_gc_PS_MarkSweep_count.value jvm.statsd-jvm-profiler_heap_ps-eden-space_used.value jvm.statsd-jvm-profiler_total-loaded-class-count.value jvm.statsd-jvm-profiler_nonheap_total_init.value jvm.metrics_jvm_thread.value jvm.statsd-jvm-profiler_heap_total_used.value jvm.statsd-jvm-profiler_heap_total_committed.value jvm.statsd-jvm-profiler_nonheap_compressed-class-space_committed.value jvm.metrics_jvm_nonHeapMemoryUsage_committed.value jvm.statsd-jvm-profiler_unloaded-class-count.value jvm.statsd-jvm-profiler_nonheap_code-cache_init.value jvm.metrics_jvm_loadedClasses.value jvm.statsd-jvm-profiler_nonheap_code-cache_max.value jvm.statsd-jvm-profiler_nonheap_compressed-class-space_used.value jvm.statsd-jvm-profiler_heap_ps-survivor-space_max.value jvm.statsd-jvm-profiler_nonheap_code-cache_committed.value jvm.statsd-jvm-profiler_heap_ps-old-gen_committed.value jvm.statsd-jvm-profiler_heap_ps-survivor-space_committed.value jvm.statsd-jvm-profiler_gc_PS_Scavenge_time.value jvm.statsd-jvm-profiler_heap_ps-old-gen_used.value jvm.metrics_jvm_heapMemoryUsage_committed.value jvm.statsd-jvm-profiler_gc_PS_MarkSweep_runtime.value jvm.statsd-jvm-profiler_nonheap_metaspace_committed.value jvm.statsd-jvm-profiler_heap_ps-eden-space_committed.value jvm.statsd-jvm-profiler_heap_ps-old-gen_init.value jvm.statsd-jvm-profiler_heap_total_max.value jvm.statsd-jvm-profiler_gc_PS_Scavenge_runtime.value jvm.statsd-jvm-profiler_heap_ps-survivor-space_init.value Examples and usages From the metrics tab on the console. You can either open a Quantum console, an online WarpScript editor, or either send your WarpScript by your own way on the Warp 10 endpoint (provided by Quantum).\nMore information about Quantum and Warp 10 in our documentation.\nFor example, you could fetch the memory usage of an application for the last hour. Smoothed by a data average by minute.\n‚ö†Ô∏è Computation can be time intensive. // Fix the NOW timestamp to have the same on over the script NOW \u0026#39;NOW\u0026#39; STORE // fetch data over 1 hour [ \u0026lt;READ TOKEN\u0026gt; \u0026#39;mem.available\u0026#39; { \u0026#39;app_id\u0026#39; \u0026#39;\u0026lt;APPLICATION ID\u0026gt;\u0026#39; } $NOW 1 h ] FETCH // Average the data by bucket of 1 min from the last point timestamped at NOW [ SWAP bucketizer.mean $NOW 1 m 0 ] BUCKETIZE // From the instance granularity to application granularity. Timestamps to timestamps merge [ SWAP [ \u0026#39;app_id\u0026#39; ] reducer.mean ] REDUCE ","publish-your-own-metrics#Publish your own metrics":"We currently support two ways to push / collect your metrics: the statsd protocol and prometheus.\nThe statsd server listens on port 8125. You can send metrics using regular statsd protocol or using an advanced one as described here.\nWe also support Prometheus metrics collection, by default our agent collects exposed metrics on localhost:9100/metrics.\nIf needed, you can override those settings with the two following environment variables:\nCC_METRICS_PROMETHEUS_PORT: Define the port on which the Prometheus endpoint is available CC_METRICS_PROMETHEUS_PATH: Define the path on which the Prometheus endpoint is available As with Prometheus the exposed host can be the same as the application deployed, you can use a basic authentication to collect the metrics with the two following environment variables:\nCC_METRICS_PROMETHEUS_USER: Define the user for the basic auth of the Prometheus endpoint CC_METRICS_PROMETHEUS_PASSWORD: Define the password for the basic auth of the Prometheus endpoint For large custom set of metrics to collect, the default response timeout of the /metrics query is 3 seconds. You can update it with the following environment variable:\nCC_METRICS_PROMETHEUS_RESPONSE_TIMEOUT: Define the timeout in seconds to collect the application metrics. This value must be below 60 seconds as data are collected every minutes. To access your metrics from Warp10 you need to use the prefix prometheus. or statsd. based on what you used to publish your metrics.\nYou can use this query to show all collected metrics:\n[ \u0026#39;TOKEN\u0026#39; \u0026#39;~prometheus.*\u0026#39; { \u0026#39;app_id\u0026#39; \u0026#39;app_xxxxxxxx\u0026#39; } NOW 5 m ] FETCH Node.js example You can use node-statsd to publish metrics:\n// npm install node-statsd const StatsD = require(\u0026#34;node-statsd\u0026#34;), client = new StatsD(); // Increment: Increments a stat by a value (default is 1) client.increment(\u0026#34;my_counter\u0026#34;); // Gauge: Gauge a stat by a specified amount client.gauge(\u0026#34;my_gauge\u0026#34;, 123.45); Haskell example In Haskell, metrics are usually gathered with EKG. The package ekg-statsd allows to push EKG metrics over statsd.\nIf you\u0026rsquo;re using warp, you can use wai-middleware-metrics to report request distributions (request count, responses count aggregated by status code, responses latency distribution).\nEKG allows you to have access to GC metrics, make sure you compile your application with \u0026quot;-with-rtsopts=-T -N\u0026quot; to enable profiling.\n{-# LANGUAGE OverloadedStrings #-} -- you need the following packages -- ekg-core -- ekg-statsd -- scotty -- wai-middleware-metrics import Control.Monad (when) import Network.Wai.Metrics (WaiMetrics, metrics, registerWaiMetrics) import System.Metrics (newStore, registerGcMetrics) import System.Remote.Monitoring.Statsd (defaultStatsdOptions, forkStatsd) import Web.Scotty handleMetrics :: IO WaiMetrics handleMetrics = do store \u0026lt;- newStore registerGcMetrics store waiMetrics \u0026lt;- registerWaiMetrics store sendMetrics \u0026lt;- maybe False (== \u0026#34;true\u0026#34;) \u0026lt;$\u0026gt; lookupEnv \u0026#34;ENABLE_METRICS\u0026#34; when sendMetrics $ do putStrLn \u0026#34;statsd reporting enabled\u0026#34; forkStatsd defaultStatsdOptions store return () return waiMetrics main = do waiMetrics \u0026lt;- handleMetrics scotty 8080 $ do middleware $ metrics waiMetrics get \u0026#34;/\u0026#34; $ html $ \u0026#34;Hello world\u0026#34; "},"title":"Metrics Overview"},"/doc/administrate/metrics/warp10/":{"data":{"":"","endpoint#Endpoint":"The Clever Cloud Warp 10 endpoint is:\nhttps://c1-warp10-clevercloud-customers.services.clever-cloud.com/api/v0 You can find documentation about endpoint gateway here.\nYou can find the endpoint and an available token under the metric tab of your application\nYou can query our Warp 10 platform with your own script. Here\u0026rsquo;s a curl example :\ncurl -T \u0026lt;Path/to/a/warpscript_file\u0026gt; https://c1-warp10-clevercloud-customers.services.clever-cloud.com/api/v0/exec Do not forget the endpoint. exec in the previous exemple.\n","macro#Macro":"Warp 10 provide a server side macro manager. It is a way to release some ready to use WarpScript. Hence, Clever Cloud provides some macros as helpers to avoid redondant and often need code.\nNote: More information on the Warp 10' macros documentations. Consumption The following macros are helpers to compute consumption in seconds\napp_consumption Return the consumption in second by applications for a specific organisation. Start and End parameters can be either a timestamp in microseconds or an iso8601 date format.\n\u0026#39;\u0026lt;READ TOKEN\u0026gt;\u0026#39; \u0026#39;\u0026lt;ORGANISATION ID\u0026gt;\u0026#39; \u0026#39;\u0026lt;START\u0026gt;\u0026#39; \u0026#39;\u0026lt;END\u0026gt;\u0026#39; @clevercloud/app_consumption orga_consumption Return all the consumption in second for a specific organisation. Start and End parameters can be either a timestamp in microseconds or an iso8601 date format.\n\u0026#39;\u0026lt;READ TOKEN\u0026gt;\u0026#39; \u0026#39;\u0026lt;ORGANISATION ID\u0026gt;\u0026#39; \u0026#39;\u0026lt;START\u0026gt;\u0026#39; \u0026#39;\u0026lt;END\u0026gt;\u0026#39; @clevercloud/app_consumption AccessLogs fetch_accessLogs_key_v0 We provide the following macro to easily and quickly deep dive into access logs data. As we store access log as a Json value in a geotime series (metrics documentation here), this macro can be useful for straightforward access to a specific key. it allows you to fetch the accessLogs class and get only wanted value instead of the whole Json.\n\u0026#39;\u0026lt;READ TOKEN\u0026gt;\u0026#39; { \u0026#39;app_id\u0026#39; \u0026#39;id\u0026#39; } \u0026#39;\u0026lt;1stLevelKey\u0026gt;\u0026#39; NOW 1 h @clevercloud/fetch_accessLogs_key_v0 \u0026#39;\u0026lt;READ TOKEN\u0026gt;\u0026#39; { \u0026#39;app_id\u0026#39; \u0026#39;id\u0026#39; } \u0026#39;\u0026lt;1stLevelKey\u0026gt;.\u0026lt;2ndLevelKey\u0026gt;\u0026#39; NOW 10 m @clevercloud/fetch_accessLogs_key_v0 More example in the metrics part of this documenation.\nNested keys can be reached using a dot (.) to represent the depth.\n\u0026#39;\u0026lt;READ TOKEN\u0026gt;\u0026#39; \u0026#39;\u0026lt;LABELS\u0026gt;\u0026#39; \u0026#39;\u0026lt;KEY\u0026gt;\u0026#39; \u0026#39;\u0026lt;START\u0026gt;\u0026#39; \u0026#39;\u0026lt;END\u0026gt;\u0026#39; @clevercloud/fetch_accessLogs_key_v0 ","main-concepts#Main concepts":"Warp 10 is a time series database. The notion of class, labels, longitude, latitude, altitude and value are used.\nA GTS is a GeoTime Serie defined by a class and somes labels. They are indexed and used to quickly retrieved the data.\nlabels is a kind of dictionnary. That is called a map under the warp10 terminology.\nA GTS may contain some values which have the following models : [ timestamp longitude latitude altitude value ]\nWarp 10 uses Warp Script. It\u0026rsquo;s a stack based language using reverse polish notation.\nThe metrics ovh team built an other way to request Warp 10: https://github.com/ovh/tsl/\nWarp 1O documentation is availlable on their website\nTime and duration in Warp 10 More information about date functions here, and time functions here.\nNote: The plateform's time unit is in microsecond. Duration is set by the followings symbols d : day h : Hour ms : millisecond ns : nanosecond ps : picosecond s : second us : microsecond w : week Date Allowed format :\nISO8601 Timestamp in microsecond Builtin function :\nNOW : get the current timestamp ISO8601 : Convert a string or a timstamp to a iso8601 date format ","technical-constraints#Technical constraints":"The followings limits are defined in Warp 10. The soft one can be passed over by an AUTHENTICATE operation. The hard one is unsurpassable.\nWarpScript Operator Warp 10 limit description soft limit hard limit MAXGTS Maximum number of GTS which can be fetched 10e5 5e7 LIMIT maximum number of datapoints which can be fetched during a script execution 10e6 10e7 MAXBUCKETS maximum number of buckets which can be created by a call to BUCKETIZE 10e5 50e5 MAXDEPTH maximum depth (number of levels) of the execution stack 5e3 5e3 MAXLOOP maximum number of milliseconds which can be spent in a loop 5e3 10e3 MAXOPS maximum number of operations which can be performed during a single WarpScript execution 5e6 5e7 MAXSYMBOLS maximum number of simultaneous symbols which can be defined on the stack during a single WarpScript execution 64 256 MAXGEOCELLS maximum number of cells a GEOSHAPE 10e3 10e4 MAXPIXELS maximum size (in pixels) of images which can be created by PGraphics 10e5 10e5 MAXRECURSION maximum nesting depth of macro calls 16 32 Warning: operation over soft limts may be really intensives. Usage: An example where it is needed to increase the fetch limit by the LIMIT function\n\u0026#39;\u0026lt;READTOKEN\u0026gt;\u0026#39; AUTHENTICATE 50e6 TOLONG LIMIT // Fetch on the \u0026#39;accessLogs\u0026#39; class for your application id as labels [ \u0026#39;\u0026lt;READTOKEN\u0026gt;\u0026#39; \u0026#39;accessLogs\u0026#39; { \u0026#39;app_id\u0026#39; \u0026#39;\u0026lt;APP_ID\u0026gt;\u0026#39; } NOW 1 w ] FETCH ","token#Token":"Tokens are based on your application with the notion of producer and owner. Hence, only the data owner can see it.\nYou can find a 5 days available token in the metric tab of your application.\n","visualization-and-exploration#Visualization and exploration":"Quantum Quantum is a web tool used to run some WarpScript. You can access to it from your metrics interface.\nIt provide the path to the Clever Cloud Warp 10 gateway and let you explore your data.\n"},"title":"Warp 10"},"/doc/administrate/network/":{"data":{"":"","custom-network-services#Custom network services":"","the-other-regions#The other regions":"The other regions we provide are hosted by other providers (OVHCloud, Scaleway, Oracle Cloud).\nIn this case, we use the IPs they provide to us and have no control over the ranges.","the-paris-region#The \u0026ldquo;Paris\u0026rdquo; region":"Some services external to Clever Cloud require filtering their clients\u0026rsquo; source IPs. They may call it \u0026ldquo;whitelist\u0026rdquo; or \u0026ldquo;allowlist\u0026rdquo;. Since your applications may be deployed \u0026ldquo;somewhere\u0026rdquo; inside your chosen zones, you cannot predict the IP they are going to come from.\nHere\u0026rsquo;s a bit more insight on the subject:\nCustom network services Unique IP service For each region, we provide a unique IP service. This service allows your queries to some external services to come from a fixed and unique IP.\nThis service does not appear in the Console at the moment. The best is to ask the support team that will set it up for you and provide you with the needed information. At the time of writing this doc, this service was billed 30‚Ç¨/month. The price does not change with the number of applications that will use it.\nThe IP depends on the zone, so ask the support about it.\nVPN service Some external services, customers or providers may propose/require a encrypted Virtual Private Network between Clever Cloud\u0026rsquo;s regions and their datacenter to secure the traffic.\nWe provide three kinds of VPN technologies:\nWireguard: our favorite VPN technology. Has been adopted by most major \u0026ldquo;off-the-shelf\u0026rdquo; VPNs (like the ones that sponsor Youtubers üòâ). IPSec: used by a lot of companies. It might be their only available VPN technology. OpenVPN: less used by companies, but still quite common. If you are interested, please ask the support / your sales contact for a quote.\nThe \u0026ldquo;Paris\u0026rdquo; region The Paris region is owned and handled by Clever Cloud. We own or entrust the associated AS\u0026rsquo;s and IP addresses ranges.\nHere are the current four addresses ranges your application may have an outgoing IP in:\n185.42.117.0/24 46.252.181.0/24 91.208.207.0/24 185.133.116.0/22 Clever Cloud may change these ranges at any moment while we expand our infrastructure. If filtering source IPs is important to you, please check this page, or opt into our Unique IP service or a VPN Service.\nPlease note that allowing all four ranges means you \u0026ldquo;allow\u0026rdquo; all Clever Cloud applications running in the Paris region to access that service. This means you should not base all that service security solely on filtering source IPs!\n"},"title":"Networking and IP addresses ranges"},"/doc/administrate/scalability/":{"data":{"":"When your application is running, you don\u0026rsquo;t have the same number of users all the time. During an event for example, the number of users can increase, as will the load on the server. If too many requests are done on your server at the same time, the response time will increase and could slow down your website.\nTo avoid this problem and keep a fast website, the main solution is to deploy more Scalers for your application to support the load. That\u0026rsquo;s what scaling is: adapting automatically the number of Scalers and their size to fit the load of your application, without any action from you.\nClever Cloud gives you the ability to fine tune your application\u0026rsquo;s scaling by managing both horizontal and vertical scaling. These two parameters can be combined to adapt to your needs.\n","combination-of-both-scalings#Combination of both scalings":"When both scalings are set up, vertical scaling is privileged over horizontal scaling. In the case you set the vertical scaling from S to L, and the horizontal scaling from 2 scalers to 4 scalers, Clever Cloud will firstly increase the size of the 2 scalers already launched.\nIf the 2 initials scalers are at their maximum size, Clever Cloud will launch new scalers with the maximum size of scalers. This is how it\u0026rsquo;ll be done:\n2-S =\u0026gt; 2-M =\u0026gt; 2-L =\u0026gt; 3-L =\u0026gt; 4-L.\n","horizontal-scaling#Horizontal scaling":"You can enable it by defining how many maximum instances you need under the \u0026ldquo;Horizontal scaling\u0026rdquo; section of the \u0026ldquo;Scaling\u0026rdquo; menu.\nIn case of large traffic, we detect a high load on your application and spawn another instance in parallel. This will automatically set up another identical application with same size. Both will run in parallel with load balancing. If the traffic grows even more, we will repeat the process until the maximum instances count you defined.\nThis process is exactly the opposite when the load decreases. A Scaler is removed and so on till a minimum reasonable level is reached.\nThe following scheme depicts a Scaler replication in case of a load increase:\nYou can manage the range of Scalers you consider in the application configurator. The range is from 1 to 20. You can manage the range of Scalers you consider in the application configurator. The range is from 1 to 20.\nHorizontal scaling: the amount of scaler will increase, not the scaler size. ","vertical-scaling#Vertical scaling":"In case of large traffic, we detect a high load on your application and set up a new larger Scaler.\nIn case of low traffic, we detect a low load and set up a new smaller Scaler.\nYou give more power to your application by setting up a larger instance that will replace the previous one. The more the load, the larger the instance.\nThe following scheme depicts a larger Scaler replacement in case of a load increase:\nvertical scaling You can choose the type of Scalers you consider by defining a maximum instance size manually or just let Clever Cloud choose for you by defining nothing:\nVertical scaling: the amount of scalers will not increase in this configuration, but the scaler size will, from S to XL. ","what-is-a-scaler#What is a Scaler?":"A Scaler is a Clever Cloud \u0026ldquo;instance\u0026rdquo;. It is an individual and independent virtual machine hosting your application. A Scaler is defined by two factors: RAM and CPU.\nWith the Scalers, Clever Cloud gives you the ability to scale your application up and down with two non exclusive methods: horizontal and vertical scaling.\nEnable auto-scalability To enable the scalability of your application, open the console and go in the \u0026ldquo;scalability\u0026rdquo; section of your application. Then, enable the auto-scalability.\n"},"title":"Application scaling"},"/doc/administrate/service-dependencies/":{"data":{"":"On Clever Cloud, each application depends on one or more backing addons. Each addon exposes configuration, which allows the user to choose which addon link to an application.\nIn a micro services architecture, backing services can be addons or other applications. Clever Cloud allows you to declare the dependencies between applications in the same way you can declare a dependency from an application to an addon.\nClever Cloud allows to declare the topology of your micro services graph by letting you link applications in the same way you can link addons.\nService dependencies To link an application to another, go to the \u0026ldquo;Service Dependencies\u0026rdquo; tab and add the applications you depend on.\n","exposed-configuration#Exposed configuration":"Each application can expose configuration to be used by other applications. For instance an API can expose its URL and credentials to access it. The exposed configuration will be injected in the dependent applications' environment.\n‚ö†Ô∏è The configuration exposed by an application is available in the environment variables of the \u0026lt;i\u0026gt;dependent\u0026lt;/i\u0026gt; applications, but not in the environment of the application itself. Redeploy on configuration update When an application updates its exposed configuration, all applications depending on it are automatically redeployed.\nAutomatic redeployment "},"title":"Service Dependencies"},"/doc/administrate/ssh-clever-tools/":{"data":{"":"","access-your-applications-folder#Access your application\u0026rsquo;s folder":"","overview#Overview":"","requirements#Requirements":"","show-your-applications-logs#Show your application\u0026rsquo;s logs":"Overview Clever Cloud allows you to connect to running instances via SSH.\nWhile direct SSH access to instances is not recommended in an immutable infrastructure setup, it can be useful for debugging purposes.\n‚ö†Ô∏è \u0026lt;p\u0026gt; Clever Cloud instances are to be seen as \u0026lt;i\u0026gt;read-only\u0026lt;/i\u0026gt; resources. Any change made on an instance \u0026lt;b\u0026gt;will not be persisted\u0026lt;/b\u0026gt;. You can use SSH access for quick tests, but if you want to persist changes, you need to commit them in your repository. Changes made on instances are not kept across deployments. \u0026lt;/p\u0026gt; ‚ö†Ô∏è \u0026lt;p\u0026gt; For security reasons, you can't connect on the instance that hosts your Docker application.\u0026lt;br/\u0026gt; Instead, if `bash` is installed in your Docker application, you will be able to connect directly inside your container.\u0026lt;br/\u0026gt; Contact the support if you need help to debug your Docker applications. \u0026lt;/p\u0026gt; Requirements You need to have at least one of the following installed locally:\nthe Clever Tools CLI an SSH client (e.g putty for windows users) Make sure you have a properly configured SSH key To use SSH access, you need to have a SSH key properly configured in your Clever Cloud account. Please refer to the SSH keys section of the documentation to know how to set up your SSH keys.\nUsing Clever Tools CLI In order to access the machine via SSH using the Clever Tools CLI\nyou need to have an application running on Clever Cloud and have linked it with your local repository using the Clever Tools CLI with clever link --org \u0026lt;your_application's_organization_id\u0026gt; \u0026lt;your_application_id\u0026gt;\nAccessing your machine You can access running instances of a linked application with $ clever ssh in the linked application\u0026rsquo;s repository locally.\n$ clever ssh \u0026gt; Opening an ssh shell \u0026gt; bas@67fbf787-3518-47bb-abd9-2c2575844edd ~ $ If multiple instances are running, you will be asked which one to use:\n$ clever ssh \u0026gt; 1) Sleepy Ponita - Instance 0 - UP (11281f38-31ff-43a7-8595-a2d82630c32b) \u0026gt; 2) Tense Caterpie - Instance 1 - UP (b10d19d9-5238-408b-b038-3e32c7a301c2) \u0026gt; Your choice: 1 \u0026gt; Opening an ssh shell \u0026gt; bas@11281f38-31ff-43a7-8595-a2d82630c32b ~ $ You are now connected to the machine.\nNote for Windows users $ clever ssh command will fail on PowerShell or cmd.exe if there is no ssh.exe in your path. The most straightforward solution is to start $ clever ssh from git-bash but you can also add ssh.exe in your path..\nUsing an SSH client You can connect using only your ssh client:\nssh -t ssh@sshgateway-clevercloud-customers.services.clever-cloud.com \u0026lt;app_id\u0026gt; You can omit the application ID. In that case, you will be prompted to choose an organization and an application.\nYou can validate connection to remote server with this fingerprint :\nED25519 key fingerprint is SHA256:lys1oC3plDGyAsWD7Yd5fJVKQUV/Pbn/M5KI5GyAj5s. RSA key fingerprint is SHA256:0odQb8NQPKYNCme2Nf3Xrz3Bc9kmrDK6eSJGIzj9aEA. ‚ö†Ô∏è \u0026lt;p\u0026gt; The \u0026lt;code\u0026gt;-t\u0026lt;/code\u0026gt; flag, it is mandatory for the ssh connection to work properly. If your terminal hangs and you see \u0026lt;code\u0026gt;pseudo-terminal will not be allocated because stdin is not a terminal\u0026lt;/code\u0026gt;, it's likely you've forgotten the \u0026lt;code\u0026gt;-t\u0026lt;/code\u0026gt; flag. \u0026lt;/p\u0026gt; Access your application\u0026rsquo;s folder No matter wich way you\u0026rsquo;ve decided to use to SSH to the machine, your application\u0026rsquo;s folder is located at: /home/bas/\u0026lt;app_id\u0026gt;.\nShow your application\u0026rsquo;s logs If you want to show your application\u0026rsquo;s logs while you debug:\njournalctl -efa -u bas-deploy.service You can also use journalctl with other options if you need to.\n","using-an-ssh-client#Using an SSH client":"","using-clever-tools-cli#Using Clever Tools CLI":""},"title":"SSH access to running instances"},"/doc/administrate/ssl/":{"data":{"":"","transmitting-your-files-manually-not-recommended#Transmitting your files manually (not recommended)":"If you need manual operations on the certificates, the most secure way to transfer your certificates is using a signed and encrypted email. Our dedicated email for receiving certificates is ssl@clever-cloud.com.\n‚ö†Ô∏è Do not send any of these files via an unsecure way. The integrity of your certificate may not be guaranteed. Clever Cloud on Keybase If your are a Keybase.io user, you can find us at keybase.io/clevercloud.\nClever Cloud\u0026rsquo;s Public Key (for GPG users) fingerprint: 03943517934C1FA5ED4E2F61218B86BD5278460F 64-bit: 218B86BD5278460F -----BEGIN PGP PUBLIC KEY BLOCK----- Comment: GPGTools - https://gpgtools.org mQINBFa4bJMBEAC21vsfJ1ay5iVUcKsP8X8GziZu8daV5G4Lqpns54zN/GB05f9+ 3jV1RYRMweq7RC6XU/GDZo20ksvDw0N963/WCswCt0MyzM1O105tZ/ZbYyVV/w5w 763DXCUPdBhzcA7o31A7JgPimiceP/BcyA8CniLSD4nfzD0CiM74kdG5/vx2Ve9T vkJ0wX5qWFvEivBPf/+jUfmdwtx5RLjH783xRuh0wWcz9ey/hsuLxJmdDuIlUccu yH0itAMiLmI0yGscTVQ6pmLmEY1GZY3GSrTZbDOrKbJLxPjtRAtW8JvE1UD9AOqs yvJ+QYp+6viEkQg0Fq2agCkpWTEy/6INGvjwexHkq9zUBe/Dm0awcqg46GSY8cwA gqaaV32hPwv4fYMsz8fH50DDIAmKjJspWTeehnaXUSmr9lHpYH/l1mHPOtCvBL2e m52YAKF5bCQEwn1p/UsysxtTaOrLO3ZoRTpM9lAeR3SfM768lnLzpI2AcpyJ95jg btibuy59WvCQMdbA6UneaWxaOhSAtAB3OzHauXhQzru1BXfy5VOva5YHgH+4xS9n 7aqMxG0uB9X7wcPPV9FHFv+6QnKZ1fHLf6zN0tUjoXTIS6egbJqtYcTbDE8nRgoU rwEadolEVSNnTEX3cfdueUHslMZwF+U30RG2bHSJTmUTOnVT6g1zk2hxwwARAQAB tD5DbGV2ZXIgQ2xvdWQgKENsZXZlciBDbG91ZCdzIFNTTCBlbWFpbCkgPHNzbEBj bGV2ZXItY2xvdWQuY29tPokCPQQTAQoAJwUCVrhskwIbAwUJB4YfgAULCQgHAwUV CgkICwUWAgMBAAIeAQIXgAAKCRAhi4a9UnhGDwbQD/49Ol6HlYivxbxHi+uZdI2V RoRLQlbTjrpIWc3ENJSjo19w7ntirsTkAmwh80Uvf72dLTPT3/dAa7qDiLHbaEPq 1Qr9XWgvb1rs/iXaJyEG/bhPEYoB/cvV+C921vArx6R8ZaUV0GZnZraOQgXCXq/y a7QdM+wnh2abRwEOUFqVc2q2/N/1SjCKx9cCk2v4s3/chC/EZfUw3AoDQSwRkKYk JD8r5r7TP7m048KreIKL5YNh9M6ybfsXPAtVRT3qIXFFDhrTcTvRokf50EFDwGVC 7miSaDDBLzQOJaaAD4j7I+QsiiKJSE41bymPcNNtZ/StILVTtmUSWSZAYC5Ke/PI 78o/0Hp3vT2WUw3w4iAHhbDhaPk+swC1rzTvPUXNb0ELVZb23ouPGqn0gMFcv0I5 ojQ+hH/J5kQ2VvRUc7aCzA6Cqqavn9FljlwbI/Vro562GTkHQnmvKAnTYLomhFyL TLrCs8vnLIVBJiSO4v/di6GhderDGjeeEgKXN+BuxU+V1u4kTp9uRjlNtEHoGPo7 n38nChtFmRkfCp8eBXKDTZllxHUoiBSbEpY64zr3D3X9KTRBbS+JJXFpTcHJXeC2 Ifc+5rOeJFjjmQ7iui0u0wwGaXY5WaQYd7zQ2rQz8pDaINsOAMTdaRJ5rPFBmAAn KX7GBYRhPwWB0sjSHhRttLkCDQRWuGyTARAAp2fLCM77rmEREyt4Rn2Psd+RU6Ad 4k5Zlug6JE0BC9H340RKo3ViXV258Yqg2ra8rr9anJ4qX+T5ZsgVQ6daRstE7l9N d62w+86ZcI+av3ncAKAihZsuZeZiI4NldCFoaJUu2Ixt/Bk4ppY+Uo0MkdL3Rq/6 pEt4WGjOm+KMY38mSYGgzkdyOrncZ8+XY8UFvza/MAu4ukuduh+uozXRvCiaeiEx 4OhPR4TksZ6RrP++f/ZywTf19Qn3/7ickW4TU7F/khGMg+xtTkgFA+pdes2JrfgF G7zvLIsQqfB7rNTNPHaQhazdQDWX9ylzg+Az/uoF3nMcEgLdawm2X60cyzo0ogt1 F1f+juMvJJ+W7ao7Dfve0qoSQtEOmmR8sc4vVBzdPAFCOh8QYqm1z4JGbDcmWfG4 ypGbBXBiGLyeJRm3o4iRBkAl7jkSNJeDnO4ajrTmZYSpO/NecbWAiybIxpoqQ3Yy 36XyTJJp6sie/6BWEF+tJUC4w4jQiuGeE+As9VwkGnsH0+m9gOwiO/TUocrxOHal W2GB6s9V2zBqMFHEwKZgGZXLMG7IbiHS72QnrynwZpkAW328SUb/DgkI5DbbeVDG tFNHBDiqxFgREv7c8DpnnJK7WX59HAZlXDcz1jfc6oKCFILDB0ujfuceRMGCxZ7m Slkp3cHibEvsW18AEQEAAYkCJQQYAQoADwUCVrhskwIbDAUJB4YfgAAKCRAhi4a9 UnhGD1zuD/99suvRucY3IJXHFCsV4wHIVgerU86sx3w0Nu5p18feqEf6K9tODZ32 NcFKaWKVZ7tK1G0fzOnoLiT/Pzhu2pjq+cFN9t1CQy5U2cyFRRbrkd64LsIU6Nln BVLNTje+akWnF3ezOSYvU02LElt4HQgTE1fMh7lolNcDrsg3hAd7vWJsr5r9MNtL hxKrRjT1P+5op+lomSHeeWMnj2DxnwyA4es7fRfHcqC6fCW39Plhl6uCGaKNaR4n wr4ht/n06QsBcGyIJrrkTrRGiHx9z9McNdI3hGZijBFYtPGfSsDFtipf8sOXIok3 rQ3NGoRYb9siJKupaMNXhhr8awXX36DlWIoS6m0pnlD9F3ZC+iWMQMpAFTg/8+ZU IfFBXZpXGw8WLiLNiBWcxVrgPDNm0IJFoOd52fyFRyDGukhJFUJXWyQK2bKvOZdk jUWMNJ2sQTFMlIAnhgeWnalMU4GOgSumxGozZ7fYGQJdPdclIrMSJFdHghsaX5PM lxA/k5PoRGfhx2p+REbdgvD3oN11Kep2Y6/PEC9n0wPU9VHk+R8Ab9jLekQjcfLB bvoe/dzJcoT/thvBKpxgRCoEFI0ozYUnU9L288hPg3ctLR6k8e7ALMbPk13BFbJa S1G9NpEsu94rDq7yehVOpGv0bCav2xtDIAgQW+ZRpRoipu5KSsUAzg== =DNbu -----END PGP PUBLIC KEY BLOCK----- ","uploading-my-own-certificates#Uploading my own certificates":"You can upload certificates yourself: https://api.clever-cloud.com/v2/certificates/new\nYou need to paste a PEM bundle containing (in this order):\nthe private key the certificate itself intermediate certificates You should create a file.pemcontaining:\n-----BEGIN RSA PRIVATE KEY----- \u0026lt;the private key\u0026gt; -----END RSA PRIVATE KEY----- -----BEGIN CERTIFICATE----- \u0026lt;the certificate\u0026gt; -----END CERTIFICATE----- You can add optionnal intermediate certificates by appending them to the file as\n-----BEGIN CERTIFICATE----- \u0026lt;the certificate\u0026gt; -----END CERTIFICATE----- You should note that .pem files use the unix way of terminating lines with a single line feed character. Make sure your text editor does the same.\n","using-the-provided-lets-encrypt-certificate#Using the provided Let\u0026rsquo;s Encrypt certificate":"TLS certificates (updated, more secure, version of SSL) are necessary to enable secure HTTPS connections between a browser and your application. These certificates can be bought online, or generated by Clever Cloud. In that case, we manage the whole process for you.\nThere is two ways to get HTTPS for your apps:\nLet\u0026rsquo;s Encrypt: Provided by default by Clever Cloud. Free. Nothing to configure. Your own certificates: If you already have a certificate, you can upload it securely. Using the provided Let\u0026rsquo;s Encrypt certificate We automatically generate certificates when you add a domain name to your app. It\u0026rsquo;s all you have to do, our internal certificate generator will create a TLS certificate for a domain or a sub-domain.\nWe do not support wildcard Let\u0026rsquo;s Encrypt certificates at the moment. If you need a wildcard certificate, you can either generate a Let\u0026rsquo;s Encrypt certificate yourself or buy one (we can resell one to you, in which case we will deal with the csr generation ourselves, contact the support to know more).\nCloudflare If you use Cloudflare to manage your domain, the certificate generation could fail depending on your SSL/TLS settings, you will encounter 502 HTTP errors if Cloudflare expects SSL/TLS strict mode and automatically redirects to HTTPS.\nTo prevent this from happening you can create a page rule to bypass this policy as Let\u0026rsquo;s Encrypt needs to access the route /.well-known/acme-challenge* via HTTP to generate the certificate:\nDefine a page rule such as this one:\nCreate a bypass page rule We also recommend to disable the cache level.\nTurn off HTTP to HTTPS redirection on Cloudflare:\nTurn off automatic HTTPS redirection You can enable Force HTTPS in the information tab of your Clever Cloud application instead.\n‚ö†Ô∏è If Let‚Äôs Encrypt fails to generate the certificate, you can test that the acme-challenge url works by running: $ curl http://\u0026lt;your-domain\u0026gt;/.well-known/acme-challenge/test test It should return a HTTP 200 OK with the string \"test\" as the body. If it does not, check your Cloudflare configuration.\n"},"title":"Installing TLS Certificates"},"/doc/administrate/tcp-redirections/":{"data":{"":" ‚ö†Ô∏è TCP redirections are currently available free of charge as long as the feature is still considered in a BETA stage. Once the feature leaves the BETA stage, it won\u0026rsquo;t be free anymore. ","creating-a-new-tcp-redirection#Creating a new TCP redirection":"Creating a new TCP redirection is as simple as clever tcp-redirs add --namespace default where you can obviously replace \u0026ldquo;default\u0026rdquo; by the namespace of your choice. You will be prompted with the port that has been assigned to you and you will be able to contact your application\u0026rsquo;s TCP listener using tcp://your-domain-name:the-port/","deleting-a-tcp-redirection#Deleting a TCP redirection":"First, you need to know which port was allocated to you, and in which namespace. You can list the active TCP redirections to make sure you have the proper data.\nWe\u0026rsquo;ll use namespace \u0026ldquo;default\u0026rdquo; and port \u0026ldquo;42\u0026rdquo; for this example.\nYou can now remove your TCP redirection using clever tcp-redirs remove 42 --namespace default.\n","listing-active-tcp-redirections#Listing active TCP redirections":"You can list active TCP redirections for the current application using clever tcp-redirs","what-is-a-namespace#What is a namespace?":"When creating a TCP redirection, you will need to choose in which namespace you want to create it. If you are a Premium customer with dedicated reverse proxies, you will have your own namespace. If you are not a Premium customer and want to use a custom domain name, you will have to use the \u0026ldquo;default\u0026rdquo; namespace. If you want to use a cleverapps domain, you will have to use the \u0026ldquo;cleverapps\u0026rdquo; namespace.\nclever tcp-redirs list-namespaces will provide you with a list of namespaces that you are allowed to use for the current application.\n","what-is-a-tcp-redirection#What is a TCP redirection?":"A regular application on Clever Cloud needs to listen on port 8080 and answer to HTTP traffic. Our reverse proxies then make your application available using HTTP(s) using your domain name.\nSome applications might additionally want to use a binary protocol, with raw TCP interactions. For this scenario, your application will have to listen for TCP traffic on port 4040. Once this is done, all you need to do is add a TCP redirection to your application. A port will be provided to you, and your TCP listener will be available on your domain name using the provided port.\n"},"title":"TCP redirections with Clever Tools"},"/doc/administrate/zone-migration/":{"data":{"add-on-migration#Add-on migration":"Add-ons can be migrated from one zone to another. For some of them, our support team can help you do it.\nPostgreSQL, MySQL, MongoDB, Redis These add-ons can be migrated using the Migration Tool.\nOnce your migration is over, the services connecting to the add-on might be impacted by an increased latency due to DNS updates. The domain of your add-on will have its DNS records changed but it will take up to 1 hour for them to propagate. This means that during that time, your services might still connect to the old zone, which will then redirect to the target zone where your database has been migrated.\nJenkins, Elasticsearch, Cellar, Pulsar These add-ons can not be automatically migrated across zones. Please reach out to our support team so we can assist you further for this migration.\nFSBucket FSBuckets can not be migrated across zones either. You will have to create a new FSBucket in the target zone and transfer its content from the old to the new one.\nTo do so, you can use the lftp or rclone tools. Or you can ask our support team and we will be able to do it for you.\n‚ö†Ô∏è In case of a FSBucket add-on (and not a PHP+FTP add-on), you will have to remember to link it to your application once it has been migrated to the new zone. ","application-migration#Application migration":"Most of the applications will migrate without issues. If one of your applications matches any criteria is in the list below, you will need extra steps described in the following sub-sections.\nAny application that uses a FSBucket add-on PHP applications In this case, please read the prerequisites below first and then follow the right sub-section.\nPrerequisites Besides redeploying your application in your target zone, you have to keep a few things in mind:\nIncreased latency might be observed during DNS propagation (more below) You will need to update your DNS settings, so make sure you have access to your DNS registrar One of the first things you can do is to lower your DNS records TTL (time to live). In order to speed up the DNS propagation during the update of your domains DNS¬†records.\nOn your registrar\u0026rsquo;s interface, find your application\u0026rsquo;s domain. Usually, the DNS record will be domain.tld IN CNAME domain.\u0026lt;current-zone\u0026gt;.clever-cloud.com with a certain TTL. Edit that TTL to 60 seconds instead of the existing value, and wait for this change to propagate (wait as much time as the old TTL value). This change will allow a faster DNS propagation when you have to update the CNAME record value to domain.\u0026lt;target-zone\u0026gt;.clever-cloud.com, lowering the amount of time your users will experience an increased latency.\n‚ÑπÔ∏è After the migration, you can set back your old TTL value. Increased latency Once your application has been redeployed to your target zone, your application\u0026rsquo;s domain will still have its DNS pointing to the old zone. As a consequence, the latency may increase for your users. For example, if you are migrating from Paris (PAR) to Montreal (MTL), your visitors will connect to our Paris infrastructure, which will then redirect the traffic to our Montreal infrastructure, leading requests to take more time.\nYou might also experience an increased latency between your application and other services (like a PostgreSQL add-on for example). If your application has switched to the Montreal zone and your PostgreSQL add-on is still in Paris, your application will need extra time to query the database.\nDNS updates Once your application has been migrated to your target zone, you will find in the Domain names section the new A and CNAME DNS records to use for your application\u0026rsquo;s domains. If you were using A¬†records, update the records (there might be more or fewer of them than what you had previously, this is normal). If you used a CNAME record, simply change the value.\nOnce done, it will take as much time to propagate as the TTL defined for that record. If you followed the prerequisites above, it should take a few minutes tops.\nMigration If your application doesn\u0026rsquo;t match any criteria of the list in the Application migration section, then you can go to the Information pane of your application. Under the Zone label, chose your target zone. Once selected, you can save your changes using the Save button at the bottom of the page.\nAfter saving, you can now redeploy your application in the Overview, it will redeploy on the new zone.\nApplications using an FSBucket FSBuckets can only be mounted by applications on the same zone. This means that you cannot use an FSBucket add-on hosted in Paris, if your application is in Montreal.\nTo migrate FSBuckets, see the section below.\nPHP Applications Because of technical reasons, a PHP application can not be migrated to another zone. In this case, you will have to re-create the application. When domains are switched from the old application to the new one, a small downtime may occur. 404 or 503 errors might happen for a few seconds.\nFirst, create a new PHP application on your target zone. Then, you can easily copy / paste the environment variable from the old application to the new one using the Expert mode of our environment variables interface. Don\u0026rsquo;t forget to link all services that were linked to your old application. Linking multiple times the same service to different application doesn\u0026rsquo;t cause any issue. Make sure the Scalability section of your application is the same as the old one, as well as the various options you can find in the Information pane (HTTPS redirection, build cache, \u0026hellip;).\nOnce everything is setup again, we can push the code. If you are using Git, you can find the new Git URL in the Information panel. If you are using FTP, please read the FSBucket migration section.\nYour new application should now be deployed. You can update the domain names: for each domain of your old application, delete it and add it to the new application.\nYou can use the CLI to do it and minimize the downtime:\nclever -a \u0026lt;old-application-alias\u0026gt; domain rm \u0026lt;domain\u0026gt;; clever -a \u0026lt;new-application-alias\u0026gt; domain add \u0026lt;domain\u0026gt; You can now update your DNS as described in the DNS updates section.\n","migrate-your-services-from-one-zone-to-another#Migrate your services from one zone to another":"Migrate your services from one zone to anotherIn this document, we will see how you can migrate your Clever Cloud services from one zone to another zone, for example from Paris to Montreal.\nFor most of the services, you will be able to migrate them as-is. For others, you will need to create them and do a manual migration.\nKeep in mind that our support team remains available, should you have any questions regarding zone migration.\n"},"title":"Zone Migration"},"/doc/billing/analytics-consumption/":{"data":{"":"","billing-calculation#Billing calculation":"","upscale--downscale-impacts#Upscale \u0026amp; Downscale Impacts":"Clever Cloud\u0026rsquo;s billing is based on several types of products: applications (Java, PHP, Jenkins, etc.), managed services (MySQL, PostgreSQL, etc.), storage services (via FTP with FS Buckets, or via the S3 protocol with Cellar) and other services (Heptapod, Pulsar, etc).\nBilling calculation The calculation of consumption is based on the second of running. Once your monthly bill has been generated, you can refer to it to find out by service:\nthe size of the instances used the execution time the unit price per second the total monthly amount To find your consumption history, it is visible in the Metrics in Grafana service via a specific Grafana dashboard. This is called the Uptime Service.\nThe Uptime Service dashboard in Grafana Upscale \u0026amp; Downscale Impacts If the auto-scalability option is activated, it is possible that the size of the instances of your applications will vary during the month. This variation will not be systematically identical from one month to the next, which explains the variation in the amount of your bills.\nMost of our cutomers apps running with auto-scaling enabled have less than a ¬±5% variation between consecutive months in their invoice. Especially because upscale events don\u0026rsquo;t last for long before a downscale occurs, usually after 2-3 hours. High traffic is most of the time temporary (a newsletter sendings, a TV show appearance, Techcrunch effect etc.).\nIn the end, auto-scaling is pretty useful to avoid applications slowdown without a significant impact on your billing.\n"},"title":"Analytics and consumption"},"/doc/billing/payments-invoicing/":{"data":{"":"","change-billing-information#Change Billing Information":" for personal account: available in Profile \u0026gt; Informations\nfor organization: available in Information \u0026gt; Billing details\nOrganization information ","invoices#Invoices":"Invoices are available in the Invoices tab in the sidebar of the organization section. Once paid, invoices are moved to the \u0026ldquo;Paid invoice\u0026rdquo; table.\nReceive invoices You can change the billing email for an organization in Information \u0026gt; Billing details \u0026gt; Billing email.\nAlso an organization member with the accountant role can receive invoices as described in the organization roles.\n","make-a-payment#Make a payment":"In the sidebar of the organization section, there are three alternatives to buy credit for your applications:\nCredit card (powered by Stripe) Paypal Bank transfer: we accept international bank transfers. This option will generate a reference that you will have to add to your bank transfert, as a note. SEPA Direct Debit: we support payment via SEPA debit. More information in the SEPA Direct Debit section ","sepa-direct-debit#SEPA Direct Debit":"When adding your IBAN in the admin console, you accept the following SEPA Direct Debit Mandate:\nBy providing your IBAN or confirming this payment, you are authorizing Clever Cloud and Stripe, our payment service provider, to send instructions to your bank to debit your account and your bank to debit your account in accordance with those instructions. You also agree to be debited in the future 2 days after receiving a debit notification.\nYou are entitled to a refund from your bank under the terms and conditions of your agreement with your bank. A refund must be claimed within 8 weeks starting from the date on which your account was debited.\nDebit instructions are issued in the following cases:\nwhen you confirm an invoice payment; on the 5th of the month, when we issue an automatic invoice on the 1st of that month, would you set your IBAN as default payment method; would the first debit fail, new attempts will be made on the 5th, 10th, 15th and 20th of that month. Your rights are explained in a statement that you can obtain from your bank. About invoices issuance and notifications As explained in the Monthly Invoice documentation, we issue an invoice at the beginning of every month. We attach the invoice to an email we send you. In accordance with SEPA rules and the mandate your agreed to, this email will notify you that a debit we send you. Following SEPA rules and the mandate you agreed to, this email notifies you will be attempted the 5th of the month, so three to four days after the notification. that Clever Cloud is going to charge you on the 5th of the month, three to four days after the notification.\n"},"title":"Payments \u0026 invoicing"},"/doc/billing/pricing/":{"data":{"":"Our up-to-date prices (as well as a pricing calculator) is available on the pricing page.\n"},"title":"Pricing"},"/doc/billing/unified-invoices/":{"data":{"":"Each month, for each organization, a single invoice is generated, including the whole activity (credits, add-on etc).","managed-services#Managed Services":"While applications are billed on a per second basis, this may be different for managed services. From a billing point of view there are X categories\ntime-based billing (per second) resource consumption billing For example, dedicated databases are charged by the second, just like applications. In contrast, services such as Cellar object storage or Pulsar are charged according to the volume of data stored and the volume of outgoing traffic.\n","management-of-payment-methods#Management of payment methods":"For each organisation it is possible to register one or more payment methods ([see list of payment methods here]](/doc/billing/payments-invoicing/)). Invoices will be automatically paid with the default payment method a few days after their generation. For the one-off invoices mentioned above, the invoice must be paid manually, via the invoice page via the \u0026ldquo;Pay\u0026rdquo; button.","monthly-invoice#Monthly invoice":"At the beginning of each month, a new invoice is generated for each organisation. It details the consumption of services, and the provisioning of your account for the coming month.\nThe invoice is made up of three distinct sections:\nA summary of the total amount to be paid for the current month An exploded view of the invoice calculation, including credits used, coupons, provision for the coming month etc. and full details of the operating time of each service, of each service invoiced, of storage used etc. To find your invoices, go to your organisation and click on Invoices to see a list of them and their payment status:\nThe list of invoices First section This first section shows the fee for the use of Clever Cloud over a month. Any discounts are explained here.\nThe second section of the invoice Second section This part details line by line the evolution of your credit with:\nThe balance of free credits (a) Pre-paid credits (b) The use of free credits (c) Expired credits (d) Use of your prepaid credits (e) Estimated consumption for the next period (f) Invoiced credits pending payment (g) Amount of prepaid credits to be topped up (h) The amount of prepaid credits to be topped up and the new balance of credits after settlement are explained via calculations of the different types of credits and their use over time.\nThe second section of the invoice Third section This section of the invoice details the usage of each cloud service.\nThe third section of the invoice ","specific-invoices#Specific invoices":"For specific services performed by the support teams, specific invoices can be created by the administration or support teams. These invoices usually indicate a specific service act.","unpaid-invoices#Unpaid invoices":"If a bill is unpaid, several steps are taken before the service is cut off:\nemail reminders (on the 5th, 10th, 15th, 20th, 21st, 22nd, 23rd, 24th and 25th of each month) an announcement of the cut-off from the 15th of the month the effective termination of services and blocking of deployments (variable date) Support and access to your account will remain available to regularise non-payment situations.\n"},"title":"Unified Invoicing"},"/doc/contribute/shortcodes/":{"data":{"":"To call a shortcode you need to write {{\u0026lt;/* myshortcode */\u0026gt;}}.","alert-shortcode#Alert shortcode":"Use the alert shortcode when you want to outline something in particular. The first parameter is the level of the alert, the second is an optional title. Everything inside the shortcode will be the message. The list of alert level is available on Bootstrap documentation.\nHere\u0026rsquo;s an example for a warning alert:\n{{\u0026lt; callout type=\u0026#34;warning\u0026#34;\u0026gt;}} This is the message of the warning. {{\u0026lt; /callout \u0026gt;}}. This will render:\n‚ö†Ô∏è This is the message of the warning. .\n","githubreadme-shortcode#githubReadme shortcode":"Use the githubReadme shortcode to embed the Readme of an existing Github project in a page. The first parameter is the group and name of the repository.\nThis shortcode will embed the clever-tools readme.\n{{\u0026lt;/* githubReadme \u0026#34;CleverCloud/clever-tools\u0026#34; */\u0026gt;}} ","image-shortcode#image shortcode":"Use the image shortcode if you want to embed an image. The first parameter is the link to the image. The second is the title/caption of the image.\n{{\u0026lt;/* image \u0026#34;/images/image.png\u0026#34; \u0026#34;Image Title\u0026#34; */\u0026gt;}} ","readfile-shortcode#readfile shortcode":"Use the readfile shortcode to include a partial document in your content. It acts as a templating solution to enable reuse of common content.\n{{\u0026lt;/* readfile \u0026ldquo;/content/partials/commonContent.html\u0026rdquo; */\u0026gt;}}\nIt\u0026rsquo;s possible to search and replace variable during templating. Make sure you have a dictionary called str_replace_dict in the frontmatter section of the page.\nstr_replace_dict: \u0026#34;@application-type@\u0026#34;: \u0026#34;Go\u0026#34; ","ref-shortcode#ref shortcode":"This is a default Hugo shortcode to link to another content page.\nThis will output the relative link to the common configuration page: reference/common-configuration/#private-ssh-key\n{{\u0026lt;/* ref \u0026#34;doc/reference/common-configuration.md#private-ssh-key\u0026#34; */\u0026gt;}} ","tooltip-shortcode#tooltip shortcode":"Use the tooltip shortcode to provide a definition of the a term in a tooltip. All terms definitions are fetched from the glossary under /data/glossary.json. the title parameter is the identifier of the object from glossary.json.\nThis tooltip\n{{\u0026lt; tooltip title=\u0026#34;paas\u0026#34; \u0026gt;}}PaaS{{\u0026lt; /tooltip \u0026gt;}} will produce PaaS "},"title":"Shortcode"},"/doc/contribute/writing/":{"data":{"":"","before-writing-something-new#Before writing something new":"Before you start writing something new please create a Github issue so we can talk about it. Moslty to make sure someone is not already working on the same thing.","writing-new-content#Writing new content":"There are a number of things you need to be aware of when writing new content. We use markdown files and Hugo to generate this documentation. The CSS classes available are in Bootstrap 4.5. A list of commonly used Hugo shortcode can be found in its dedicated page\nDebug Mode If you add debug=true as params of your Hugo site, you should see every shortcode outlined on your website like so:\nmyshortcode This is a shortcode being used"},"title":"Write new Content"},"/doc/deploy/addon/cellar/":{"data":{"":"Cellar is S3-compatible online file storage web service. You can use it with your favorite S3 client.\nTo manually manage the files, you can use s3cmd. You can download a s3cmd configuration file from the add-on configuration page.\n‚ö†Ô∏è ws-* and cf* commands are not avaible with a Cellar add-on. ","cors-configuration#CORS Configuration":"You can set a CORS configuration on your buckets if you need to share resources on websites that do not have the same origin as the one you are using.\nEach CORS configuration can contain multiple rules. Those are defined using an XML document:\n\u0026lt;CORSConfiguration\u0026gt; \u0026lt;CORSRule\u0026gt; \u0026lt;AllowedOrigin\u0026gt;console.clever-cloud.com\u0026lt;/AllowedOrigin\u0026gt; \u0026lt;AllowedMethod\u0026gt;PUT\u0026lt;/AllowedMethod\u0026gt; \u0026lt;AllowedMethod\u0026gt;POST\u0026lt;/AllowedMethod\u0026gt; \u0026lt;AllowedMethod\u0026gt;DELETE\u0026lt;/AllowedMethod\u0026gt; \u0026lt;AllowedHeader\u0026gt;*\u0026lt;/AllowedHeader\u0026gt; \u0026lt;ExposeHeader\u0026gt;ETag\u0026lt;/ExposeHeader\u0026gt; \u0026lt;/CORSRule\u0026gt; \u0026lt;CORSRule\u0026gt; \u0026lt;AllowedOrigin\u0026gt;*\u0026lt;/AllowedOrigin\u0026gt; \u0026lt;AllowedMethod\u0026gt;GET\u0026lt;/AllowedMethod\u0026gt; \u0026lt;MaxAgeSeconds\u0026gt;3600\u0026lt;/MaxAgeSeconds\u0026gt; \u0026lt;/CORSRule\u0026gt; \u0026lt;/CORSConfiguration\u0026gt; Here this configuration has two CORS rules:\nThe first rule allows cross-origin requests from the console.clever-cloud.com origin. PUT, POST and DELETE methods are allowed to be used by the cross-origin request. Then, all headers specified in the preflight OPTIONS request in the Access-Control-Request-Headers header are allowed using AllowedHeaders *. At the end, the ExposeHeader allows the client to access the ETag header in the response it received. The second one allows cross-origin GET requests for all origins. The MaxAgeSeconds directive tells the browser how much time (in seconds) it should cache the response of a preflight OPTIONS request for this particular resource. Updating the `CORS` configuration replaces the old one If you update your `CORS` configuration, the old configuration will be replaced by the new one. Be sure to save it before you update it if you ever need to rollback. To view and save your current CORS configuration, you can use s3cmd info:\ns3cmd -c s3cfg -s info s3://your-bucket You can then set this CORS configuration using s3cmd:\ns3cmd -c s3cfg -s setcors ./cors.xml s3://your-bucket If you need to rollback, you can either set the old configuration or completely drop it:\ns3cmd -c s3cfg -s delcors s3://your-bucket ","creating-a-bucket#Creating a bucket":"In Cellar, files are stored in buckets. When you create a Cellar addon, no bucket is created yet.\nYou will need to install the s3cmd on your machine following these recommendations.\nOnce s3cmd is installed, you can go to your add-on menu in the Clever Cloud console.\nUnder the Addon Dashboard, click the Download a pre-filled s3cfg file. link.\nThis will provide you a configuration file that you just need to add to your home on your machine.\nTo create a bucket, you can use s3cmd:\ns3cmd mb s3://bucket-name The bucket will now be available at https://\u0026lt;bucket-name\u0026gt;.cellar-c2.services.clever-cloud.com/.\nYou can upload files (--acl-public makes the file publicly readable):\ns3cmd put --acl-public image.jpg s3://bucket-name The file will then be publicly available at https://\u0026lt;bucket-name\u0026gt;.cellar-c2.services.clever-cloud.com/image.jpg.\nYou can list the files in your bucket, you should see the image.png file:\ns3cmd ls s3://bucket-name Using a custom domain If you want to use a custom domain, for example cdn.example.com, you need to create a bucket named exactly like your domain:\ns3cmd --host-bucket=cellar-c2.services.clever-cloud.com mb s3://cdn.example.com Then, you just have to create a CNAME record on your domain pointing to cellar-c2.services.clever-cloud.com..\n‚ö†Ô∏è New cellar add-ons supports the v4 signature algorithm from S3. If you are still using an old account (cellar.services.clever-cloud.com), please make sure your client is configured to use the v2 signature algorithm. The s3cmd configuration file provided by the add-on\u0026rsquo;s dashboard is already configured. Static hosting You can use a bucket to host your static website, this blog article describe well how it can be done.\nBe aware that SPA applications won\u0026rsquo;t work because our proxy serving the bucket needs to find an HTML file that match the route.\nFor example if your path is /login you need to have a file login.html because the index.html is not the default entrypoint to handle the path.\nYou may use SSG (Static Site Generated) to dynamically generate your content during your build.\n","pricing#Pricing":" ","public-bucket#Public bucket":"You can upload all your objects with a public ACL, but you can also make your whole bucket publicly available in read mode. Writes won\u0026rsquo;t be allowed to anyone that is not authenticated.\n‚ö†Ô∏è This will make all of your bucket\u0026rsquo;s objects publicly available to anyone. Be careful that there are no objects you do not want to be publicly exposed. To set your bucket as public, you have to apply the following policy which you can save in a file named policy.json:\n{ \u0026#34;Id\u0026#34;: \u0026#34;Policy1587216857769\u0026#34;, \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Sid\u0026#34;: \u0026#34;Stmt1587216727444\u0026#34;, \u0026#34;Action\u0026#34;: [ \u0026#34;s3:GetObject\u0026#34; ], \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Resource\u0026#34;: \u0026#34;arn:aws:s3:::\u0026lt;bucket-name\u0026gt;/*\u0026#34;, \u0026#34;Principal\u0026#34;: \u0026#34;*\u0026#34; } ] } Replace the \u0026lt;bucket-name\u0026gt; with your bucket name in the policy file. Don\u0026rsquo;t change the Version field to the current date, keep it as is.\nNow, you can set the policy to your bucket using s3cmd:\ns3cmd setpolicy ./policy.json s3://\u0026lt;bucket-name\u0026gt; All of your objects should now be publicly accessible.\nIf needed, you can delete this policy by using:\ns3cmd delpolicy s3://\u0026lt;bucket-name\u0026gt; All of your objects should now be restrained to their original ACL.\n","troubleshooting#Troubleshooting":"SSL error with s3cmd If you created a bucket with a custom domain name and use s3cmd to manipulate it, you will experience this error:\n[SSL: SSLV3_ALERT_HANDSHAKE_FAILURE] sslv3 alert handshake failure (_ssl.c:1125) The error comes from the host used to make the request, which is build like this %s.cellar-c2.services.clever-cloud.com.\nFor example with a bucket named blog.mycompany.com:\nOur certificate covers *.cellar-c2.services.clever-cloud.com but not blog.mycompany.com.cellar-c2.services.clever-cloud.com, which triggers the error.\nIt can be solved by forcing s3cmd to use path style endpoint with the option --host-bucket=cellar-c2.services.clever-cloud.com.\n","using-aws-cli#Using AWS CLI":"You can use the official AWS cli with cellar. You will need to configure the aws_access_key_id, aws_secret_access_key and endpoint.\naws configure set aws_access_key_id $CELLAR_ADDON_KEY_ID aws configure set aws_secret_access_key $CELLAR_ADDON_KEY_SECRET Sadly the endpoint cannot be configured globally and has to be given as a parameter each time you use the aws cli. Here\u0026rsquo;s an example to create a bucket:\naws s3api create-bucket --bucket myBucket --acl public-read --endpoint-url https://cellar-c2.services.clever-cloud.com To simplify this, you may want to configure an alias like so:\nalias aws=\u0026#34;aws --endpoint-url https://cellar-c2.services.clever-cloud.com\u0026#34; ","using-aws-sdk#Using AWS SDK":"To use cellar from your applications, you can use the AWS SDK. You only need to specify a custom endpoint (eg cellar-c2.services.clever-cloud.com).\nNode.js // Load the AWS SDK for Node.js const AWS = require(\u0026#39;aws-sdk\u0026#39;); // Set up config AWS.config.update({ accessKeyId: \u0026#39;\u0026lt;cellar_key_id\u0026gt;\u0026#39;, secretAccessKey: \u0026#39;\u0026lt;cellar_key_secret\u0026gt;\u0026#39; }); // Create S3 service object const s3 = new AWS.S3({ endpoint: \u0026#39;\u0026lt;cellar_host\u0026gt;\u0026#39; }); // Create the parameters for calling createBucket const bucketParams = { Bucket : \u0026#39;\u0026lt;my-bucket-name\u0026gt;\u0026#39;, CreateBucketConfiguration: { LocationConstraint: \u0026#39;\u0026#39; } }; // call S3 to create the bucket s3.createBucket(bucketParams, function(err, data) { // handle results }); // Call S3 to list the buckets s3.listBuckets(function(err, res) { // handle results }); /* In order to share access to access non-public files via HTTP, you need to get a presigned url for a specific key * the example above present a \u0026#39;getObject\u0026#39; presigned URL. If you want to put a object in the bucket via HTTP, * you\u0026#39;ll need to use \u0026#39;putObject\u0026#39; instead. * see doc : https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/S3.html#getSignedUrl-property */ s3.getSignedUrl(\u0026#39;getObject\u0026#39;, {Bucket: \u0026#39;\u0026lt;YouBucket\u0026gt;\u0026#39;, Key: \u0026#39;\u0026lt;YourKey\u0026gt;\u0026#39;}) Java Make sure to use at least version 1.11.232. Older versions don\u0026rsquo;t support Server Name Indication, so if you have SSL certificates errors, check that you\u0026rsquo;re not using an old version.\nimport com.amazonaws.ClientConfiguration; import com.amazonaws.HttpMethod; import com.amazonaws.auth.AWSStaticCredentialsProvider; import com.amazonaws.auth.BasicAWSCredentials; import com.amazonaws.client.builder.AwsClientBuilder.EndpointConfiguration; import com.amazonaws.services.s3.AmazonS3; import com.amazonaws.services.s3.AmazonS3ClientBuilder; import com.amazonaws.services.s3.model.Bucket; import java.net.URL; import java.util.List; public class Main { public static void main(String[] argv) { EndpointConfiguration endpointConfiguration = new EndpointConfiguration(\u0026#34;\u0026lt;host\u0026gt;\u0026#34;, null); AWSStaticCredentialsProvider credentialsProvider = new AWSStaticCredentialsProvider( new BasicAWSCredentials(\u0026#34;\u0026lt;key\u0026gt;\u0026#34;, \u0026#34;\u0026lt;secret\u0026gt;\u0026#34;) ); AmazonS3 s3Client = AmazonS3ClientBuilder.standard() .withCredentials(credentialsProvider) .withClientConfiguration(opts) .withEndpointConfiguration(endpointConfiguration) .withPathStyleAccessEnabled(Boolean.TRUE) .build(); List\u0026lt;Bucket\u0026gt; buckets = s3Client.listBuckets(); // handle results /* In order to share access to access non-public files via HTTP, you need to get a presigned url for a specific key * the example above present a \u0026#39;getObject\u0026#39; presigned URL. If you want to put a object in the bucket via HTTP, * you\u0026#39;ll need to use \u0026#39;HttpMethod.PUT\u0026#39; instead. * see doc : https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/AmazonS3.html#generatePresignedUrl-java.lang.String-java.lang.String-java.util.Date-com.amazonaws.HttpMethod- */ URL presignedUrl = s3Client.generatePresignedUrl(\u0026#34;\u0026lt;YourBucket\u0026gt;\u0026#34;, \u0026#34;\u0026lt;YourFileKey\u0026gt;\u0026#34;, \u0026lt;expiration date\u0026gt;, HttpMethod.GET); } } Python This has been tested against python 3.6\nThis script uses boto, the old implementation of the aws-sdk in python. Make sure to not use boto3, the API is completely different. For the moment, the host endpoint is cellar-c2.services.clever-cloud.com (but check in the clever cloud console).\nfrom boto.s3.key import Key from boto.s3.connection import S3Connection from boto.s3.connection import OrdinaryCallingFormat apikey=\u0026#39;\u0026lt;key\u0026gt;\u0026#39; secretkey=\u0026#39;\u0026lt;secret\u0026gt;\u0026#39; host=\u0026#39;\u0026lt;host\u0026gt;\u0026#39; cf=OrdinaryCallingFormat() # This mean that you _can\u0026#39;t_ use upper case name conn=S3Connection(aws_access_key_id=apikey, aws_secret_access_key=secretkey, host=host, calling_format=cf) b = conn.get_all_buckets() print(b) \u0026#34;\u0026#34;\u0026#34; In order to share access to non-public files via HTTP, you need to get a presigned url for a specific key the example above present a \u0026#39;getObject\u0026#39; presigned URL. If you want to put a object in the bucket via HTTP, you\u0026#39;ll need to use \u0026#39;putObject\u0026#39; instead. see doc : https://docs.pythonboto.org/en/latest/ref/s3.html#boto.s3.bucket.Bucket.generate_url \u0026#34;\u0026#34;\u0026#34; b[0].generate_url(60) Active Storage (Ruby On Rails) Active Storage can manage various cloud storage services like Amazon S3, Google Cloud Storage, or Microsoft Azure Storage. To use Cellar, you must configure a S3 service with a custom endpoint.\nUse this configuration in your config/storage.yml:\ncellar: service: S3 access_key_id: \u0026lt;%= ENV.fetch(\u0026#39;CELLAR_ADDON_KEY_ID\u0026#39;) %\u0026gt; secret_access_key: \u0026lt;%= ENV.fetch(\u0026#39;CELLAR_ADDON_KEY_SECRET\u0026#39;) %\u0026gt; endpoint: https://\u0026lt;%= ENV.fetch(\u0026#39;CELLAR_ADDON_HOST\u0026#39;) %\u0026gt; region: \u0026#39;us-west-1\u0026#39; force_path_style: true bucket: mybucket A region parameter must be provided, although it is not used by Cellar. The region value is used to satisfy ActiveStorage and the aws-sdk-s3 gem. Without a region option, an exception will be raised : missing keyword: region (ArgumentError). If region is an empty string you will get the following error: missing region; use :region option or export region name to ENV['AWS_REGION'] (Aws::Errors::MissingRegionError).\nforce_path_style must be set to true as described in the Ruby S3 Client documentation.\n"},"title":"Cellar, a S3-like object storage service"},"/doc/deploy/addon/config-provider/":{"data":{"":"The configuration provider add-on helps you to create groups of environment variables that you can share with multiple applications.","details-and-behaviour#Details and behaviour":" As with any other add-on, you can only link a configuration provider to applications that are in the same organisation. Variables defined directly in the application override the ones injected from the configuration provider. When you update the variables of a configuration provider, all applications linked to it will be automatically restarted. You can create multiple configuration providers in your organisation and link them to different applications. ","example#Example":"Let\u0026rsquo;s take an example with 2 Node.js applications exposing some REST APIs: shipping-api and payment-api.\nThe shipping-api application needs the following environment variables:\nPULSAR_TOPIC=order USER_API_HOST=https://user.example.com/api ENABLE_PARTNERS=true The payment-api application needs the following environment variables:\nPULSAR_TOPIC=order USER_API_HOST=https://user.example.com/api ENABLE_SEPA=false Two Node.js applications with their own environment variables As you can see, we had to define PULSAR_TOPIC and USER_API_HOST in both applications with the same value. If we ever need to change these values, we\u0026rsquo;ll have to apply the updates in both apps and restart them.\nNOTE: This is a simple example, but we could have more than just 2 microservices and more than just 2 common variables.\nTo simplify this process, we will create a configuration provider add-on. It will allow us to define those common variables in one place and inject them in our 2 applications.\nTwo Node.js applications sharing the 2 variables from a configuration provider Think of a configuration provider as a way to group a set of environment variables and share them with any application.\nOne application overriding the environment variable value for PULSAR_TOPIC If a variable is defined in a configuration provider and also in the application, the value defined in the application wins.\n","how-to-create-a-config-provider#How to create a config provider":"In the console, go to the organisation where you have your applications.\nClick on \u0026ldquo;Create\u0026hellip;\u0026rdquo; and then on \u0026ldquo;an add-on\u0026rdquo; You will see a list of add-ons, select \u0026ldquo;Configuration provider\u0026rdquo; Select the first plan and click on \u0026ldquo;Next\u0026rdquo; Toggle the \u0026ldquo;Link\u0026rdquo; for each application you need and then on \u0026ldquo;Next\u0026rdquo; Define a name and click on \u0026ldquo;Next\u0026rdquo; Once you have your configuration provider, you can set the variables in the form. You can find out more about rules and format in this page.\nNOTE: At any point, you can link/unlink an application from the configuration provider by going to the app\u0026rsquo;s \u0026ldquo;Service dependencies\u0026rdquo; page.\n","pricing#Pricing":"This add-on is completely free.\nNo fee will be invoiced to you while using this kind of add-on."},"title":"Configuration provider"},"/doc/deploy/addon/couchbase/":{"data":{"":"CouchBase is a database wich automation is still in beta on Clever Cloud. Please reach to our support if you would like to use this database, they will kindly assist you.\n"},"title":"CouchBase"},"/doc/deploy/addon/elastic/elastic/":{"data":{"":"The Elastic Stack is Elasticsearch, Kibana, Beats, and Logstash (also known as the ELK Stack). Reliably and securely take data from any source, in any format, then search, analyze, and visualize it in real time. Find out more about it on Elastic\u0026rsquo;s website.\nProvisioning the Elastic Stack addon on Clever Cloud will give you an Elasticsearch instance, Kibana and an APM server.\n","backups#Backups":"Your Elastic add-on backups are managed by Clever Cloud. When you provision the add-on, we automatically create a Cellar add-on instance named Backups. You will find it in your organisation. Backups are taken daily and are stored in this Cellar add-on instance. As such additional credits will be consumed by your backups.\nBackups can be managed under the Backup tab of the elastic add-on. You can restore, delete or open it directly under Kibana if you opted-in.\n‚ö†Ô∏è \u0026lt;p\u0026gt;If you are using Elasticsearch 6, backups are not deleted automatically, you will need to clean them up from time to time.\u0026lt;/p\u0026gt; ","elastic-apm#Elastic APM":"Elastic APM is an Application performance management tool chain based on the Elastic Stack. See exactly where your application is spending time so you can quickly fix issues and feel good about the code you push. To use it you must install an APM agent to your application. In some cases, you\u0026rsquo;ll need to add a configuration file, or add it as a dependency in you application. You can find configuration files examples in our public repository.\nOnce both your application and APM server are running, you application with automatically send APM datas to the APM server which will send them to Elastic and once indexed they will be available in your Kibana dashboard (this process is really fast, you won\u0026rsquo;t see it as a human).\nCurrently, APM agents are available in the following languages:\nGo Java Node.js PHP Python Ruby It is available as an opt-in option of the Elastic add-on. It will be deployed and billed as a regular application. You can upscale/downscale/delete it at any time. This application will be updated by Clever Cloud on a regular basis.\nThe created application name follow the pattern APM - addon_eb464a6d-ce5f-4780-b595-6772ebe33d06. The provisioning of this application might take up a minute to show up in your organisation.\nLearn more on APM official documentation.\nHow to setup APM Any applications linked to the APM application will have the right credentials and APM endpoint automatically available as environment variables. In some cases these variables will be picked up automatically by the APM agent you are using in your application and everything will work automatically. But in some other cases you have to configure it yourself. See for instance the Rails documentation. The list of agents configuration can be found on Elastic\u0026rsquo;s documentation.\nAPM Server custom configuration The APM server is deployed as an application. As such it\u0026rsquo;s configured as an application. Its default pre run hook is set to:\nCC_PRE_RUN_HOOK=\u0026quot;curl https://api.clever-cloud.com/v2/providers/es-addon/apm-server-setup/7 | sh\u0026quot;\nYou can change the URL to point to your own custom configuration.\nA configuration example for RUM activation can be found here: es-apm-serverconfig.sh.\nKibana custom configuration Kibana is deployed as an application. As such it\u0026rsquo;s configured as an application. Its default pre run hook is set to:\nCC_PRE_RUN_HOOK=\u0026quot;curl https://api.clever-cloud.com/v2/providers/es-addon/kibana-setup/7 | sh\u0026quot;\nYou can change the URL to point to your own custom configuration.\nJava APM agent You have multiple ways to use the APM agent. You can either add it in your dependencies and it should work out of the box or you can attach an agent to the JVM. If you prefer the last option, you have to define the following environment variable to attach the agent to the JVM: CC_JAVA_APM_AGENT_ENABLE=true.\nThe agent will list all JVMs on the system and attach to all of them, only once. If you know that your application will spawn multiple JVM processes (not threads) over time and you want the agent to also monitor those processes, you can add this environment variable: CC_JAVA_APM_AGENT_CONTINUOUS=true.\nThe agent will periodically scan for JVM processes and will attach to them if needed.\n","elasticsearch#Elasticsearch":"Elasticsearch is a distributed, RESTful search and analytics engine capable of addressing a growing number of use cases. As the heart of the Elastic Stack, it centrally stores your data so you can discover the expected and uncover the unexpected.","kibana#Kibana":"Kibana lets you visualize your Elasticsearch data and navigate the Elastic Stack so you can do anything from tracking query load to understanding the way requests flow through your apps.\nIt is available as an opt-in option of the Elastic add-on. It will be deployed and billed as a regular application. You can upscale/downscale/delete it at any time. This application will be updated by Clever Cloud on a regular basis.\nThe created application name follow the pattern Kibana - addon_eb464a6d-ce5f-4780-b595-6772ebe33d06. The provisioning of this application might take up a minute to show up in your organisation.\nLearn more on Kibana official documentation.\nAuthentication Any member of the Clever Cloud organisation containing the Elastic add-on will be able to login to Kibana through an automatically configured SSO system.\n","plans#Plans":" ","versions#Versions":"The current versions supported at add-on creation are 7 and 8."},"title":"Elastic Stack Addon"},"/doc/deploy/addon/elastic/kibana/":{"data":{"":" ‚ö†Ô∏è To deploy a custom Kibana, you need to ask Clever Cloud Support team to enable superuser permissions for your user. ","deploy-kibana-on-localhost#Deploy Kibana on localhost":"The Kibana version should match with the ElasticSearch version.\nFollow these steps :\nDownload/unzip Kibana in version which match with your Elastic Stack version Edit kibana.yml : line 43 : elasticsearch.host: \u0026lt;elastic-addon-host\u0026gt;:443 line 49 : elasticsearch.username: kibana line 50 : elasticsearch.password: \u0026lt;password\u0026gt; Launch Kibana (\u0026lt;path_to_kibana\u0026gt;/bin/kibana) Go to Kibana through the dedicated local address Connect to ElasticSearch with your Elastic username and password ","enable-kibana-with-your-elastic-stack-add-on#Enable Kibana with your Elastic Stack add-on":"Kibana can be enabled at the add-on creation. Choose \u0026ldquo;Create an add-on\u0026rdquo; \u0026gt; \u0026ldquo;Elastic Stack\u0026rdquo;. Select your plan, applications which will use the Elastic Stack and name the add-on. On the \u0026ldquo;options\u0026rdquo; step, enable Kibana. Then, confirm the options and your add-on will start with a Kibana instance.\nCustomize the Kibana configuration file The configuration is set with this deployment hook : CC_PRE_RUN_HOOK = curl https://api.clever-cloud.com/v2/providers/es-addon/kibana-setup/\u0026lt;your elastic version\u0026gt; | sh\nTo modify this default configuration (Configuration file for Kibana 8.3.3), you need to host your own config file (we strongly recommend Cellar).\nCheck other available configuration file on Github\nDisable SSO authentication To disable SSO authentication and use elastic users instead, you need to modify Kibana\u0026rsquo;s configuration file and CC_PRE_RUN_HOOK in environment variables.\nFor example for Kibana 8.3.3: CC_PRE_RUN_HOOK = curl https://raw.githubusercontent.com/CleverCloud/custom-kibana-config/master/8.3.3/no-sso-8.3.3 | sh\nRemember, you need to ask Clever Cloud Support team to grant superuser permissions to your user. After that, you will be able to add additional users via Kibana.\nAdd custom domain name You need to disable SSO authentication first. Then, you will be able to add a custom domain name in \u0026ldquo;Domain name\u0026rdquo; tab of your Kibana app.\n","overview#Overview":"Kibana is the web interface available on the Clever Cloud\u0026rsquo;s platform to manage your Elastic Stack.\nBy default, you can enable Kibana when you create an Elastic Stack add-on.\n"},"title":"Customize Kibana"},"/doc/deploy/addon/fs-bucket/":{"data":{"":"When you deploy an application on Clever Cloud, like most PaaS, a new virtual machine is created, the previous one is deleted. If your application generates data, for example if you let users upload pictures and you do not store it on external services like S3, you will lose anything stored on the disk.\nThe Git deployment does not allow you to keep generated data files between deployments. To avoid the loss of your data, you have to mount a persistent filesystem. This is why we created File System Buckets.\nYou will be able to retrieve generated data between two deployments.\nNotes:\nBack-ups are not included in the public cloud offer. You can still do them manually. FSBuckets are not available for Docker applications because of security concerns. ","accessing-your-data-inside-the-fs-bucket#Accessing your data inside the FS Bucket":"From your application Your bucket is mounted at the configured path, starting from your application\u0026rsquo;s root folder.\nIf you want to use an absolute path, you can use the APP_HOME environment variable, see special environment variables\nFrom the addon dashboard The File explorer tab of the addon dashboard gives you access to your files in the FS bucket.\nFrom your favorite FTP client The Addon information tab of your FS Bucket add-on displays the information you need to connect to your bucket using FTP.\n","configuring-your-application#Configuring your application":"Buckets are configured using environment variables. Add the following to your application :\nCC_FS_BUCKET=/some/empty/folder:bucket-xxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx-fsbucket.services.clever-cloud.com[:async] don\u0026rsquo;t forget to replace the path of the mounted folder and the fs-bucket host with the targeted folder path (make sure the folder not exists) and your fs-bucket host\nOptionnally, you can add :async to the end of the environment variable. This will make Clever Cloud mount the FS Bucket with the async option. It will make the FS Bucket faster (sometimes 3√ó faster), but in case of a network issue it may cause file corruption.\nYou can setup multiple buckets by appending a number at the end of the environment variable\u0026rsquo;s name.\nCC_FS_BUCKET=/some/empty/folder:fs_bucket_host CC_FS_BUCKET_1=/some/otherempty/folder:fs_bucket_other_host:async Note that the async parameter can be set per bucket.\n","configuring-your-application-with-bucketsjson-deprecated#Configuring your application with buckets.json (@deprecated)":" ‚ö†Ô∏è \u0026lt;p\u0026gt; This method is deprecated, we strongly recommend that you use environment variables. \u0026lt;/p\u0026gt; \u0026lt;p\u0026gt; If you want to switch from this method to the environment variables, you need to remove the `buckets.json` file. Otherwise, the environment variables will be ignored. Also, this method does not support the `async` parameter. \u0026lt;/p\u0026gt; To configure your application to use buckets, use the clevercloud/buckets.json file.\nThe clevercloud folder must be located at the root of your application.\nThe buckets.json file must contain the following structure:\n[ { \u0026#34;bucket\u0026#34; : \u0026#34;bucketId\u0026#34;, \u0026#34;folder\u0026#34; : \u0026#34;/myFolder\u0026#34;, \u0026#34;apps\u0026#34; : [\u0026#34;app_id\u0026#34;] }, { \u0026#34;bucket_host\u0026#34; : \u0026#34;bucket-01234567-0123-0123-0123-012345678987-fsbucket.services.clever-cloud.com\u0026#34;, \u0026#34;folder\u0026#34; : \u0026#34;/myotherFolder\u0026#34;, \u0026#34;apps\u0026#34; : [\u0026#34;app_id_2\u0026#34;] } ] ‚ÑπÔ∏è You can find a pre-filled json object to copy in the dashboard of your FSBucket add-on, in the \u0026quot;Dashboard configuration\u0026quot; tab It\u0026rsquo;s a json array containing objects with at least two fields:\nUsage Field Description Required bucket The bucket id you can find in the console. It begins with `bucket_`. This is for \"old-style\" buckets (created before the 7 December 2015) Required bucket_host The bucket host you can find in the console. It begins with `bucket-` and ends with `services.clever-cloud.com`. This is for \"new-style\" buckets. Required folder The folder you want the bucket to be mounted in. Should start with `/`. Using the example *myFolder*, you can access your bucket via the *myFolder* folder at the root of your application (which absolute path is available in the `APP_HOME` environment variable) Optional apps Whitelist of the applications allowed to mount this bucket. It's helpful if you need to deploy a *preprod* app and a *prod* app using the exact same codebase but different buckets ‚ö†Ô∏è \u0026lt;p\u0026gt; The folder must not exist in your repository (or it needs to be empty). Otherwise, the mount of your bucket will be ignored. \u0026lt;/p\u0026gt; \u0026lt;p\u0026gt; You can mount the same bucket in different folders, but they will share the same content, so it's not the solution. You should prefer to mount the bucket in only one folder and then manage multiple subfolders in it. \u0026lt;/p\u0026gt; ‚ö†Ô∏è \u0026lt;p\u0026gt; You cannot mount two buckets in the same folder for the same app. \u0026lt;/p\u0026gt; \u0026lt;p\u0026gt; If you put the same \u0026quot;folder\u0026quot; value for two entries in your environment variables or the *buckets.json* array, **you better make sure** that the \u0026quot;apps\u0026quot; fields make the two buckets mutually exclusive upon deployment! \u0026lt;/p\u0026gt; ","pricing#Pricing":" "},"title":"File System Buckets"},"/doc/deploy/addon/jenkins/":{"data":{"":"Jenkins is an an open source automation server which enables developers to build, test, and deploy their software. It facilitates continuous integration (CI) and continuous delivery (CD). You can find out more about Jenkins on their website.\nJenkins on Clever Cloud will allow your team to effortlessly setup CI/CD pipelines, executed on runners that deploy on Clever Cloud docker applications. This way, you will only pay for the CI/CD you really consume, to the second. You will also be able to access Jenkins interface by using the Clever Cloud SSO (Single Sign-On)¬†Authentication.\nJenkins Dashboard ","accessing-the-jenkins-interface#Accessing the Jenkins interface":"Once you created your add-on, you should get to the dashboard. You should see a link named Access Jenkins. Opening that link will redirect you to our SSO authentication.\nClever Cloud has its own SSO (Single Sign-On) authentication to authenticate to various services. All members of your organization will be able to authenticate to the services in the same organization, using their Clever Cloud account.\nWhen a service will need to authenticate you, you will be redirected to a login form. Please enter your Clever Cloud credentials as well as your 2FA Authentication code if needed.\n‚ÑπÔ∏è If it\u0026rsquo;s the first time you use the Clever Cloud SSO, a few OAuth rights will be displayed for you to accept them. All the rights listed should be accepted otherwise the backend service might not work correctly.\nSSO Needed Rights If you mistakenly disabled some rights at some point, you have to revoke all tokens generated by this OAuth consumer:\nFirst, go to your user\u0026rsquo;s OAuth token in the Web console Then, find all tokens named Keycloak Consumer and revoke them Try to log-in again. The rights list should now be displayed. \u0026lt;/p\u0026gt; ","backup#Backup":"By default, Clever Cloud performs a backup every day, with a retention of seven days. Retention and frequency can be customized for Premium customers. Backups can be found in the Clever Cloud Console in the backups menu of your add-on.","configure-your-jenkins-instance#Configure your Jenkins instance":"Once you accessed your Jenkins interface, we can start configuring it. A custom Clever Cloud plugin is automatically installed on your instance during the provisioning. This plugin will allow you to configure the runners Jenkins will start to execute your jobs. Those runners will be Docker applications provisioned directly on Clever Cloud, in your organization.\nConfigure your runners Using our Jenkins plugin, you can configure multiple runners. Runners can have multiple configuration customized:\nLabel: Only Jobs that require this label will be able to use that runner. More on that below. Docker image: Select which docker image your job will use to run. More on that below. Virtual machine size: The size of the Clever Cloud scaler to use. Before configuring the runners themselves, we have to configure a new Cloud. To do so:\nOpen the left menu, open the Manage Jenkins link. Then, under System configuration, open the Manage nodes and Clouds item. On the left menu, open the Configure Clouds link. A dropdown named Add a new Cloud should be displayed, select Clever Cloud. In the Name input field, you can enter Clever Cloud. You can also define a custom Docker registry to use with the associated credentials. Even if you stick with the default one (Docker Hub), we encourage you to add your credentials to avoid any rate limiting. From there, we will be able to create runner templates. You can have multiple runner templates for multiple workflows. For example, you might need two runner templates:\nOne for building and testing your Java Maven projects. One for building and testing your Frontend projects. Let\u0026rsquo;s configure a runner template for Java Maven projects:\nClick on Add a runner template. Name your runner template, for example Jenkins maven agent. Set maven as the label. Jobs that require a maven runner will then be able to execute on this runner. Set the docker image your jobs will use. For example jenkins/jnlp-agent-maven. Be sure to read the section about Docker image requiremetns. Select the virtual machine size you need. For Java projects, let\u0026rsquo;s use a M instance that has 4 vCPUs and 8 GiB of RAM. Jenkins Cloud configuration Once you configured everything, click on Save at the end. You should now have a runner template ready for Java Maven projects.\nWe can now start configuring a new Job that will execute on a runner that will be started using the template we used.\nLabels Label is a very important setting. Labels will restrict on which runners a given project can be run.\nFor example, if you have two runners templates with the following labels:\nmaven nodejs And you have two jobs:\nA first job that builds and test a Java Maven project A second job that builds and test a frontend application The first job will be configured to only use the maven runners. And the second one will be configured to use the nodejs runners.\nYou might also want to only have one runner template for all of your jobs. If you omit this setting both in the runner template and in the jobs settings, then this runner template will be picked up to execute your jobs.\nDocker image requirements As of today, only runners on Clever Cloud Docker applications are supported. The Docker image you provide must contain the Jenkins Inbound agent.\nBy default, Jenkins provides a few Docker images that embed this agent. The agent will then connect to Jenkins to receive jobs orders.\nYou can find more details on the default Jenkins Inbound agent Docker image. Jenkins also provides various base images with pre-installed tools for some CI workflows on Docker Hub.\nIf you have specific needs, you must create your own Docker image with the Jenkins Inbound Agent.\nConfigure and run a Job Jenkins has a large variety of options to configure a job. This documentation won\u0026rsquo;t cover them all, we will just go through a basic Shell Job. For more information, you can read Jenkin\u0026rsquo;s documentation.\nIn this example, the job will execute on a runner using the maven runner template we created earlier. It will basically print Hello world and sleep a bit.\nFirst, on the left menu, click on New item. This will open the available jobs types:\nEnter a name for your project, let\u0026rsquo;s say My Maven Project Select the Freestyle project option and click Ok We will use a Maven runner template we previously configured to execute the job: Tick the Restrict where this project can be run option and enter maven in the text field At the end of the settings, click on Add a build step, select Execute shell In the command shell input field, enter: echo \u0026#39;Hello World!\u0026#39; sleep 60 Save the settings. Now that the job is configured, we can start it by clicking on the Build now button in the left menu. A message saying that the build has been scheduled should be printed. You should also see after a few seconds a pending Job in the Build history, on your left.\nJenkins jobs history At the same time, a new application should have been created in your organization, named Jenkins agent \u0026lt;UUID\u0026gt;. The application should be deploying and once it gets deployed, the job will start to be executed.\nJenkins runner deploying At some point the application should have deployed and you should be able to click on the Job\u0026rsquo;s number in the build history list. From there, you can open the Console Output which is basically your job logs.\nOnce your job has ended, after the 1 minute sleep, the application provisionned in your organization will be stopped and deleted.\nYou should now be able to start creating jobs that automatically build and test your projects on a Clever Cloud application.\nJenkins File example Here is an example of a Jenkins file taken from our CLI repository. It should be at the root directory of your project for Jenkins to pick it up. It basically builds our CLI project and publish it to various platforms.\npipeline { agent { label \u0026#39;cc-ci-agent\u0026#39; } environment { GIT_TAG_NAME = gitTagName() S3_KEY_ID = credentials(\u0026#39;CELLAR_CC_TOOLS_ACCESS_KEY_ID\u0026#39;) S3_SECRET_KEY = credentials(\u0026#39;CELLAR_CC_TOOLS_SECRET_ACCESS_KEY\u0026#39;) BINTRAY_API_KEY = credentials(\u0026#39;BINTRAY_CC_TOOLS_API_KEY\u0026#39;) NPM_TOKEN = credentials(\u0026#39;NPM_TOKEN\u0026#39;) } options { buildDiscarder(logRotator(daysToKeepStr: \u0026#39;5\u0026#39;, numToKeepStr: \u0026#39;10\u0026#39;, artifactDaysToKeepStr: \u0026#39;5\u0026#39;, artifactNumToKeepStr: \u0026#39;10\u0026#39;)) } stages { stage(\u0026#39;build\u0026#39;) { steps { sh \u0026#39;npm ci\u0026#39; sh \u0026#39;node scripts/job-build.js\u0026#39; } } stage(\u0026#39;publish\u0026#39;) { when { not { environment name: \u0026#39;GIT_TAG_NAME\u0026#39;, value: \u0026#39;\u0026#39; } beforeAgent true } parallel { stage(\u0026#39;cellar\u0026#39;) { steps { sh \u0026#39;node scripts/job-publish-cellar.js\u0026#39; } } stage(\u0026#39;npm\u0026#39;) { steps { sh \u0026#39;node ./scripts/job-publish-npm.js\u0026#39; } } } } } post { always { archiveArtifacts artifacts: \u0026#39;releases/**/*\u0026#39;, fingerprint: true, onlyIfSuccessful: true } } } @NonCPS String gitTagName() { return sh(script: \u0026#39;git describe --tags --exact-match $(git rev-parse HEAD) || true\u0026#39;, returnStdout: true)?.trim() } You can find more documentation about the Jenkins file syntax on Jenkin\u0026rsquo;s Documentation\n","create-jenkins-add-on#Create Jenkins add-on":"Jenkins versions Jenkins has two releases pipelines: Weekly and LTS (Long-term support). By default, our add-ons are using the LTS version of Jenkins, those will include all security fixes needed. The Weekly version isn\u0026rsquo;t available during the creation, yet, but if you ever need it, feel free to ask our support team about it.\nTo create a Jenkins add-on, you can either use our web console or our CLI:\nWeb console Create a new add-on by clicking on the Create\u0026hellip; dropdown in the sidebar and then an add-on. Select the Jenkins add-on. Select the plan you need. You can skip linking the add-on to an application, it won\u0026rsquo;t be needed. Enter the name of your Jenkins add-on and select the zone where you wish to deploy it. Select the options you wish to enable on your Jenkins add-on. CLI Make sure you have clever-tools installed locally. Report to the getting started guide if needed. List the available plans and options for Jenkins: clever addon providers show jenkins. In your terminal, you can then run clever addon create jenkins \u0026lt;app-name\u0026gt; --region \u0026lt;region\u0026gt; --org \u0026lt;org\u0026gt; where app-name is the name you want for your add-on, region deployment region, and org the organization ID the application will be created under. Refer to the documentation for more details on application creation with Clever Tools\n","customize-your-jenkins-instance#Customize your Jenkins instance":"Jenkins can be customized following your needs with a multitude of plugins. You can go into Manage Jenkins and then Manage plugins to manage them.\nPlugins can be browsed from Jenkins own plugin repository.\n","plans#Plans":"Here are the plans of the Jenkins controller as well as its available runner instances.\nJenkins Add-on Those are the plans of the Jenkins controller instance.\nRunners Those plans are the available runners for your jobs.\n","security-and-updates#Security and updates":"Jenkins usually gets a lot of security releases as well as many plugins updates. It is important to keep your Jenkins up-to-date. Today that\u0026rsquo;s not something we automatically manage but this may evolve in the future. In the meantime, you have full rights to update your Jenkins instance and its plugins. Usually, when Jenkins has a security release available, it will be displayed as a notification and as a message in the Manage Jenkins administration page.\nThe Clever Cloud Jenkins dashboard also has an item informing you about available Jenkins updates.\nJenkins update available After Jenkins or some plugins were updated, Jenkins will need to restart.\nUpdate Jenkins To update Jenkins, you can go into the Manage Jenkins administration page. If an update is available, it should ask you if you want to install it with a message looking like this:\nJenkins update message You can then click on the Or upgrade automatically button. It should start downloading and installing the update. You can enable the option Restart Jenkins when installation is complete and no jobs are running and Jenkins will restart automatically. After a few minutes, it should be available again.\nUpdate Jenkins plugins Plugins can be updated by going into the plugin management page: Manage Jenkins and then Manage plugins.\nPlugins that need to be updated are listed in the Updates section. You can check the plugins you need to update or check them all and then click on Download now and install after restart.\nAll plugins will be downloaded. You can enable the option Restart Jenkins when installation is complete and no jobs are running and Jenkins will restart automatically and install the plugins updates. After a few minutes, it should be available again.\n"},"title":"Jenkins"},"/doc/deploy/addon/mailpace/":{"data":{"":"MailPace is a fast \u0026amp; Reliable Transactional Email.","add-on-configuration#Add-on configuration":"Create the add-on from Clever Cloud\u0026rsquo;s Console. You need to verify you domain name by adding the provided DNS entry in your DNS provider\u0026rsquo;s dashboard. Then, you will get an API KEY that you should add to your application (as environment variable with PHP, see section below).\nHost : smtp.mailpace.com Port : 25, 465, 587, 2525 User : API KEY Password : API KEY Encryption : usage of TLS or STARTTLS are highly recommended. ","mailpace-for-erlang-go-nodejs-rust-and-ruby#MailPace for Erlang, Go, Node.js, Rust and Ruby":"Check MailPace documentation","mailpace-for-php#MailPace for PHP":"PHP mail() function usage You have to turn TLS on with port 465 (environment variable CC_MTA_SERVER_USE_TLS=true) to make Mailpace working. Enable STARTTLS allows to use another port.\nThese environment variables have to be set with the value of :\nCC_MTA_SERVER_HOST: Host of MailPace\u0026rsquo;s SMTP server is smtp.mailpace.com. CC_MTA_SERVER_PORT: Server port has to be set to 465. Defaults to 465 whether TLS is enabled or not. CC_MTA_AUTH_USER: User to authenticate to MailPace\u0026rsquo;s SMTP server has to be set with MAILPACE_API_KEY. CC_MTA_AUTH_PASSWORD: Password to authenticate to the SMTP server has to be set with MAILPACE_API_KEY. CC_MTA_SERVER_USE_TLS: Have to be enabled. Defaults to true. CC_MTA_SERVER_STARTTLS: Enable or disable STARTTLS. Defaults to false. CC_MTA_SERVER_AUTH_METHOD: Authentication has to be enabled. Defaults to on. Then, redeploy your application on Clever Cloud for the changes to take effect. A few minutes later, your application will be able to send mails with mail() function thanks to MailPace\u0026rsquo;s SMTP server.\nPHP frameworks To use frameworks such as Symfony, you can check MailPace documentation.\n","overview#Overview":"MailPace is a SMTP provider which can be used on Clever Cloud to send emails.\nMailPace provides an HTTPS API, SMTP Server and several libraries for sending emails that completely removes the need for any email setup or active email management. Emails sent through the MailPace API can come from any address for any domain that you are able to verify ownership of through a simple DNS update.\n"},"title":"MailPace"},"/doc/deploy/addon/matomo/":{"data":{"":"Matomo is an open-source web analytics solution which gives you full ownership of your data. It\u0026rsquo;s a GDPR compliant alternative to Google Analytics. You can learn more about Matomo on their website.\nMatomo on Clever Cloud will allow your marketing team to effortlessly setup a tailored web analytics solution, that can be adjusted to your needs and workloads.\nMatomo Dashboard ","accessing-the-matomo-interface#Accessing the Matomo interface":"Once you created your add-on, you should get to the dashboard and see a link named Access Matomo. Opening that link will redirect you to our SSO authentication.\nClever Cloud has its own SSO (Single Sign-On) authentication to authenticate to various services. All members of your organization will be able to authenticate to the services in the same organization, using their Clever Cloud account.\nWhen a service will need to authenticate you, you will be redirected to a login form. Please enter your Clever Cloud credentials as well as your 2FA Authentication code if needed.\n‚ÑπÔ∏è If it\u0026rsquo;s the first time you use the Clever Cloud SSO, a few OAuth rights will be displayed for you to accept them. All the rights listed should be accepted otherwise the backend service might not work correctly.\nSSO Needed Rights If you mistakenly disabled some rights at some point, you have to revoke all tokens generated by this OAuth consumer:\nFirst, go to your user\u0026rsquo;s OAuth token in the Web console Then, find all tokens named Keycloak Consumer and revoke them Try to log-in again. The rights list should now be displayed. \u0026lt;/p\u0026gt; ","configure-your-matomo-instance#Configure your Matomo instance":"Once you accessed your Matomo interface, we can start configuring it. A custom Clever Cloud configuration is automatically installed on your instance during the provisioning.\nThis configuration helps you taking advantage of optimizations by using a Redis cache by default.\nUsing your Matomo If you\u0026rsquo;re new with Matomo, you would probably want to read the Matomo\u0026rsquo;s guides on the official documentation.\n","create-matomo-add-on#Create Matomo add-on":"Web Console Create a new add-on by clicking on the Create\u0026hellip; dropdown in the sidebar and then an add-on. Select the Matomo add-on. You can skip linking the add-on to an application, it won\u0026rsquo;t be needed. Enter the name of your Matomo add-on and select the zone where you wish to deploy it. It\u0026rsquo;s done! CLI Make sure you have clever-tools installed locally. Report to the getting started guide if needed. List the available plans and options for Matomo: clever addon providers show Matomo. In your terminal, you can then run clever addon create matomo \u0026lt;app-name\u0026gt; --region \u0026lt;region\u0026gt; --org \u0026lt;org\u0026gt; where app-name is the name you want for your add-on, region deployment region, and org the organization ID the application will be created under. Refer to the documentation for more details on application creation with Clever Tools","how-it-works#How it works?":"When you subscribe the Matomo add-on, we automatically setup a PHP instance based on the latest Matomo release. It comes with the required MySQL database and an optional Redis cache.\nWe have chosen to let you see and manage these companion add-ons in the Console so that you could adjust them to your needs. You can change their settings and use the Clever Cloud ability to migrate from an S flavored database or cache to an L or XL if required. You can also activate autoscalabity (horizontal and/or vertical scaling).\nBy default, Matomo on Clever Cloud comes with small sized add-ons:\nPHP Nano MySQL XXS BigStorage Redis S We\u0026rsquo;ve already integrated the Clever Cloud SSO, so you can login directly into your matomo instance from the Console, start to integrate your website, create different users.\n","matomo-plugins#Matomo plugins":"Your Matomo instance comes with a list of pre-installed plugins. As a managed instance, our Matomo addon won\u0026rsquo;t let you bypass the installation process. Installed plugins already allows a quite advanced use of Matomo, but if you wish to install a specific plugin that\u0026rsquo;s not in your instance, feel free to contact our suport team.\nWhen activating a deactivated plugin Keep in mind that some plugins might consume more ressources than you have by default on your PHP instance, since some PHP processes can take a long time, depending on what you are doing.\nIf you activate a deactivated by default plugin (like GoogleAnalyticsImporter):\nScale your PHP app Disable autoscalability for the PHP app Scale your Matomo MySQL addon If you activate the plugin while enabling autoscalability, your PHP insatnce will restart with default settings when scaling, therefore disabling the plugin and killing the process.\nPlugins can be browsed from Matomo own plugin repository.\n‚ö†Ô∏è Plugin files are removed everytime your instance reboots.\nThis means you have to reinstall them all again after every reboot.\nThis is temporary, and it is something we plan on improving as soon as we can.\n","plans#Plans":"Matomo on Clever Cloud is the easiest way to set it up, but you can go further and adjust the flavour of your instance, database or cache. We provide different plans for PHP, MySQL and Redis.\nMatomo PHP Instances Those are the plans of the PHP instance:\nMySQL database Those plans are the available MySQL databases:\nRedis cache Those plans are the available Redis cache:\n","security-and-updates#Security and updates":"The Matomo add-on is a fully managed application, you don\u0026rsquo;t have to select a particular version. Still its receives updates for both features and security, that we will managed for you with continuously upgraded version over time.\nAfter being updated, you Matomo add-on could need to be restarted.\n"},"title":"Matomo"},"/doc/deploy/addon/mongodb/managing-mongodb/":{"data":{"":"","can-i-use-mongo-ops-manager-on-clever-cloud#Can I use Mongo Ops Manager on Clever Cloud?":"To be able to use Mongo Ops Manager, you\u0026rsquo;ll need a valid MongoDB Enterprise Advanced subscription and to deploy a Linux version of their manager solution. If you haven\u0026rsquo;t purchased any license from MongoDB and you are using the Community version, you might be looking for a similar service for your databases.","does-clever-cloud-provide-a-similar-service#Does Clever Cloud provide a similar service?":"The features available with Mongo Ops Manager could be relevant if you managed your infrastructure and the maintenance of your MongoDB databases yourself. However, if you use Clever Cloud to access our Mongo add-ons, you are already opting for a managed service, and will therefore benefit from the following features similar to Mongo Ops Manager:\nA centralized interface to access your database settings and perform operations on them. A monitoring and alert system that can be configured with Grafana (an example with Slack alerts can be found here). A backup and restore system already configured for our add-ons (customizable upon request) with easy migration and one-click importation. The ability to automate tasks with our CLI. Enhanced security through our default access management on Clever Cloud (encryption at rest, default unauthorized super admin operations, etc.). Note that these features are available for all our databases add-ons, in addition to MongoDB.\nThe managed databases provide an advantage if you want to avoid the complexity of installing and deploying databases and if you want simple-to-use management and monitoring tools.\n"},"title":"Managing your MongoDB"},"/doc/deploy/addon/mongodb/mongodb/":{"data":{"":"MongoDB is an open source NoSQL document-oriented database. We provide these databases with daily backups and monitoring for both shared and dedicated plans.","about-free-databases#About Free Databases":"Free plans are recommended for test and development usage only. Using these databases in production is not recommended, because performance may vary depending on the global usage of the cluster. Therefore, before switching to production, consider upgrading to a dedicated database for better performance.\nImportant Note About Fair Use on Free Databases Heavy usage of free databases may impact the shared cluster they rely upon. It will degrade performance of the other databases. To that extent, we set a soft limit of 15 operations/second. Going above the limit will expose your database to disconnection, would you not answer our notices.\nDatabase Daily Backup and Retention By default, Clever Cloud performs a free backup every day, with a retention of seven days. Retention and frequency can be customized for Premium customers.\nEach backup can be found in the add-on dashboard in the web console, along with the credentials.\n","database-migration-process#Database Migration Process":"The migration process is pretty much the same for each of these cases:\nmigrating from a Clever Cloud shared database to a dedicated one migrating from an external database to a Clever Cloud one migrating between Clever Cloud Databases The process consists in three steps:\nFirst, perform a backup and download it, either with the Clever Cloud add-on dashboard or the mongodump command from your workstation. Install mongorestore (a tool packaged with MongoDB) On your workstation, use the taylor-made mongorestore command line located in your mongodb dashboard page (open the \u0026ldquo;Backup\u0026rdquo; panel and click on the \u0026ldquo;Restore\u0026rdquo; link to find the complete command line to perform the database import). If needed, change the nsFrom and nsTo flags, depending on what you actually want to do (importing this database in another, importing another to this one, \u0026hellip;). ","encryption-at-rest#Encryption at rest":"Encryption at rest is available on MongoDB. You can have more information on the dedicated page","plans#Plans":" ","versions#Versions":"In order to comply with MongoDB Server Side Public License, the version currently installed by the add-on is:\non shared plans (DEV) : MongoDB 4.0.3 on newly created dedicated databases (plans XS Small Space and above) : MongoDB 4.0.3 Higher Versions If you puchased a higher version from MongoDB and you want to deploy your database on Clever Cloud, please contact us.\n"},"title":"MongoDB add-on"},"/doc/deploy/addon/mysql/mysql/":{"data":{"":"MySQL is an open-source relational database management system (RDBMS).","direct-access#Direct access":"All our dedicated MySQL databases are served via a proxy. To reduce the latency you can bypass this proxy by generating direct hostname and port for the addon. You can do it by clicking the \u0026ldquo;Generate direct hostname and port\u0026rdquo; on the addon dashboard.\nThis action will add new environment variables to reach the addon without any proxy.\nKeep in mind that usage of direct access is a trade-off: when you migrate your addon, you will need to to generate hostname and port again so your application must update these environment while proxy usage changes nothing.\n","encryption-at-rest#Encryption at rest":"Encryption at rest is available on MySQL. You can have more information on the dedicated page","migrating-from-an-old-database#Migrating from an old database":"Some applications require a populated database to run properly. If you want to import your SQL dump, you can use several methods:\nOur WebGUI (PHP My Admin). Command line tool for MySQL administration. Any MySQL client such as MySQL Workbench. If you need to import a very large dump, please send an email to support@clever-cloud.com.\n","plans#Plans":" ‚ö†Ô∏è As Shared databases (DEV) are shared between multiple applications and delays could appear in case of an high demand.\nIf this delays create problems in your application or are problematcs, we recommend you to use a dedicated database (XS plans and above).\n","proxysql#ProxySQL":" ProxySQL is a tool that acts like a proxy between your application and your MySQL add-on. Instead of connecting to your MySQL add-on, you can connect to the local ProxySQL and it will forward all your requests to your MySQL add-on.\nThis allows you to let ProxySQL take care of some interesting features like connection pooling or leader / follower setup.\nYou can learn more about ProxySQL on the dedicated documentation page\n","versions#Versions":"The version currently installed by the add-on is :\non shared plans (DEV) : MySQL 8.0 on newly created dedicated databases (plans XS Small Space and above) : MySQL 5.7.20 or 8.0 Database Daily Backup and Retention By default, Clever Cloud performs a free backup every day, with a retention of seven days. Retention and frequency can be customized for Premium customers.\nEach backup can be found in the add-on dashboard in the web console, along with the credentials.\n"},"title":"MySQL add-on"},"/doc/deploy/addon/mysql/proxysql/":{"data":{"":"ProxySQL is a tool available on applications instances to help you manage your connection pool towards your MySQL add-on.\n‚ö†Ô∏è ProxySQL is not available on Docker instances. If you want to use ProxySQL, you can add it and configure it in your Dockerfile. ","how-to-configure-proxysql#How to configure ProxySQL":"In order to configure ProxySQL, the first thing to do is to link your MySQL add-on. To do that, you can go to the Service Dependencies page of your application and select your MySQL add-on.\nOnce linked, you can enable the ProxySQL feature by defining the following environment variable: CC_ENABLE_MYSQL_PROXYSQL=true. If you ever need to stop using ProxySQL, you can remove this variable or set it to false.\nYou can customize some other parameters:\nCC_MYSQL_PROXYSQL_MAX_CONNECTIONS: Integer. This is the maximum connections ProxySQL will open to your add-on. See the Scalability part below for more explanations on how to customize this variable. Defaults to 10. CC_MYSQL_PROXYSQL_USE_TLS: Boolean (true or false). This controls whether ProxySQL should open a secure connection using TLS to your add-on. Defaults to true. To connect to ProxySQL, a special environment variable will be injected to your environment variables: CC_MYSQL_PROXYSQL_SOCKET_PATH. This variable contains the path to the Unix Domain Socket you have to connect. See Usages below for some example on how to use it.\nScalability When the scalability of your application is enabled, you may need to tweak the CC_MYSQL_PROXYSQL_MAX_CONNECTIONS value. This is what we are going to see here.\nAuto scalability will add or remove instances following your needs. This means that you may have multiple instances running at the same time for a certain period of time. If your application restarts, you will have your current instance number * 2 instances running in parallel while the deployment finishes and the old instances are stopped. A new deployment starts new instances with the old ones alongside them.\nThis means that have up to maximum scalability * 2 instances can run at the same time. And if all of your instances open the maximum connections they are allowed to, it means there will be up to maximum scalability * 2 * CC_MYSQL_PROXYSQL_MAX_CONNECTIONS connections at the same time. We will call this result MaxCon.\nEach MySQL add-on has a connection limit which varies following the plan you are using. You must be sure that MaxCon doesn\u0026rsquo;t exceed your plan\u0026rsquo;s max connections. If it does, you might have issues connecting to the remote MySQL add-on. You have to adjust CC_MYSQL_PROXYSQL_MAX_CONNECTIONS to a number that makes sense for your scalability parameters.\nExample Let\u0026rsquo;s say that I\u0026rsquo;m hosting a simple PHP application on 1 XS instance, with a scalability that can go up to 4 M instances. And I\u0026rsquo;m using the MySQL S Small Space plan which has a connection limit of 125.\nNow my application receives a lot of traffic and scales up to 4 M instances. But at the same time, I also need to deploy a hot fix. This means that 4 new M instances will be started, alongside the already existing 4 M instances. I need to make sure that MaxCon doesn\u0026rsquo;t go above 125.\nHere is the summary:\n8 instances: 4 currently running, 4 currently deploying my hot fix 125 max connections: the maximum number of connections of my MySQL add-on\u0026rsquo;s plan 5 other connections: I want to be able to use PHPMyAdmin or any CLI tool at the same time, in case I need it CC_MYSQL_PROXYSQL_MAX_CONNECTIONS = ( (125 - 5) / 8 ) = 15. If I set CC_MYSQL_PROXYSQL_MAX_CONNECTIONS to 15, each instance should have enough connections to query the database without errors. And it also let you some spare connections (5) available if anything goes wrong and you need to connect to your database using a CLI tool or PHPMyAdmin.\n","metrics#Metrics":"ProxySQL exposes some metrics using Prometheus. Some of those metrics are ingested in our metrics system. You can then explore them in the Web Console.\nHere is the list of currently tracked metrics, those may evolve over time:\nprometheus.proxysql_access_denied_max_connections_total prometheus.proxysql_access_denied_max_user_connections_total prometheus.proxysql_access_denied_wrong_password_total prometheus.proxysql_client_connections_connected prometheus.proxysql_client_connections_hostgroup_locked prometheus.proxysql_client_connections_non_idle prometheus.proxysql_client_connections_total prometheus.proxysql_connpool_conns prometheus.proxysql_connpool_conns_latency_us prometheus.proxysql_connpool_conns_queries_total prometheus.proxysql_connpool_conns_status prometheus.proxysql_connpool_conns_total prometheus.proxysql_connpool_data_bytes_total prometheus.proxysql_connpool_get_conn_failure_total prometheus.proxysql_connpool_get_conn_success_immediate_total prometheus.proxysql_connpool_get_conn_success_latency_awareness_total prometheus.proxysql_connpool_get_conn_success_total prometheus.proxysql_connpool_memory_bytes prometheus.proxysql_mysql_error_total prometheus.proxysql_server_connections_connected Those metrics might help you follow how effective your connection pool is or have more insights into your client\u0026rsquo;s requests.\nKeep in mind that each instance will have those metrics because each instance has its own ProxySQL service.\n","usages#Usages":"PHP using PDO Using PDO, you have to use the unix_socket option in your DSN:\n\u0026lt;?php // Get the database name from the environment $db = getenv(\u0026#34;MYSQL_ADDON_DB\u0026#34;); // Get the database user from the environment $user = getenv(\u0026#34;MYSQL_ADDON_USER\u0026#34;); // Get the database password from the environment $pass = getenv(\u0026#34;MYSQL_ADDON_PASSWORD\u0026#34;); // This variable is injected during the deployment $socket = getenv(\u0026#34;CC_MYSQL_PROXYSQL_SOCKET_PATH\u0026#34;); $dsn = \u0026#34;mysql:unix_socket=$socket;dbname=$db\u0026#34;; try { $pdo = new PDO($dsn, $user, $pass); } catch (PDOException $e) { throw new PDOException($e-\u0026gt;getMessage(), (int)$e-\u0026gt;getCode()); } Wordpress For Wordpress, you can change the DB_HOST variable in your wp-config.php:\n// To connect using a socket, the syntax is: `localhost:/path/to/socket` define( \u0026#39;DB_HOST\u0026#39;, \u0026#34;localhost:\u0026#34; . getenv(\u0026#34;CC_MYSQL_PROXYSQL_SOCKET_PATH\u0026#34;) ); Symfony For symfony, you will need to edit its configuration.\nA working example would be:\ndbal: unix_socket: \u0026#39;%env(CC_MYSQL_PROXYSQL_SOCKET_PATH)%\u0026#39; url: \u0026#39;mysql://%env(MYSQL_ADDON_USER)%:%env(MYSQL_ADDON_PASSWORD)%@localhost/%env(MYSQL_ADDON_DB)%?serverVersion=%env(MYSQL_ADDON_VERSION)%\u0026#39; Node.js On Node.js, using the mysql npm package, you have to set the socketPath property:\nconst mysql = require(\u0026#39;mysql\u0026#39;); const connection = mysql.createConnection({ // Get ProxySQL unix domain socket path from the environment socketPath : process.env[\u0026#34;CC_MYSQL_PROXYSQL_SOCKET_PATH\u0026#34;], // Get the database user from the environment user : process.env[\u0026#34;MYSQL_ADDON_USER\u0026#34;], // Get the database password from the environment password : process.env[\u0026#34;MYSQL_ADDON_PASSWORD\u0026#34;], // Get the database name from the environment database : process.env[\u0026#34;MYSQL_ADDON_DB\u0026#34;] }); connection.connect(function(err) { if (err) { console.error(\u0026#39;error connecting: \u0026#39; + err.stack); return; } console.log(\u0026#39;connected as id \u0026#39; + connection.threadId); }); ","what-is-proxysql#What is ProxySQL":" ProxySQL is a tool that acts like a proxy between your application and your MySQL add-on. Instead of connecting to your MySQL add-on, you can connect to the local ProxySQL and it will forward all your requests to your MySQL add-on.\nThis allows you to let ProxySQL take care of some interesting features like connection pooling or leader / follower setup.\n","when-do-ineed-proxysql#When do I¬†need ProxySQL":"You might need ProxySQL if your application can\u0026rsquo;t manage a connection pool. This is usually the case with PHP applications or any other application that do not have a connection pooling policy in place.\n‚ÑπÔ∏è A connection pool will cache your database connections and keep them open for future requests. The connections can then be reused if needed or closed if they weren\u0026rsquo;t used after a certain time. By using connection pooling from ProxySQL to your MySQL add-on, you make sure that a certain number of connections stay open to your add-on, leading to faster requests.\nFor example, on a PHP application, each HTTP request will spawn a new Apache worker and your PHP code will be executed. If your application does an SQL request, a new TCP connection will be open to the remote MySQL add-on. Once your SQL request is done, the TCP connection will be closed and a new one will need to be opened on the next SQL query.\nEach new connection means a new TCP handshake which takes some time. If you use TLS to secure the connection, then there is an aditionnal handshake. All of this, multiplied by the number of connections you make to your add-on can greatly increase your application\u0026rsquo;s response time.\nOne of the goals of ProxySQL is to keep the connections open to your MySQL add-on. Your application can then connect to the local proxy using a Unix Domain Socket for each SQL request it has to do. Unix Domain Sockets are faster than TCP sockets because there are no handshakes and the connection is made locally on the same machine.\nWhen ProxySQL receives a new SQL query, it will open a new connection to the remote MySQL add-on if no connection is currently available. But if one is available, it will be reused and the query should take less time. The connection will then be kept for further use.\n"},"title":"ProxySQL for MySQL add-ons"},"/doc/deploy/addon/postgresql/pgpool/":{"data":{"":"Pgpool-II is a tool available on application instances to help manage your connection pool and load balancing of your PostgreSQL add-ons.\n‚ö†Ô∏è Pgpool-II is not available on Docker instances. If you want to use Pgpool-II, you can add it and configure it in your Dockerfile. ","how-to-configure-pgpool-ii#How to configure Pgpool-II":"Generate direct variables for your PostgreSQL add-ons. Go to the \u0026ldquo;Add-on dashboard\u0026rdquo; tab of your PostgreSQL add-ons and click on the \u0026ldquo;Generate direct hostname and port\u0026rdquo; button.\nEnable Pgpool-II for your application In order to configure Pgpool-II, the first thing to do is to link your PostgreSQL add-on. To do that, you can go to the Service Dependencies page of your application and select your PostgreSQL add-on.\nOnce linked, you can enable the Pgpool-II feature by defining the following environment variable: CC_ENABLE_PGPOOL=true. If you ever need to stop using Pgpool-II, you can remove this variable or set it to false.\nYour application will use a Unix Domain Socket to connect to Pgpool-II. Unix domain sockets are faster than TCP sockets because there is no handshake and the connection is made locally on the same machine. A special environment variable will be injected to your environment variables: CC_PGPOOL_SOCKET_PATH. This variable contains the path to the Unix Domain Socket you have to connect to. See Usages below for some examples on how to use it.\nThe available Pgpool-II variables and their descriptions are available on our environment variables reference page.\nConcurrent session and pool size You can use the CC_PGPOOL_NUM_INIT_CHILDREN and CC_PGPOOL_MAX_POOL environment variables to set the number of concurrent sessions and the number of connection pool caches per connection.\nLet\u0026rsquo;s take an example where you have 3 PostgreSQL servers, and the CC_PGPOOL_NUM_INIT_CHILDREN variable configured with a value of 32.\nOn startup, Pgpool-II will start 32 processes, one process per connection. The CC_PGPOOL_MAX_POOL variable is used to configure the number of cached connections per connection (process). This option is mostly used when you have different credentials for the same PostgreSQL server (database, user\u0026hellip;). But in the case of Streaming mode on Clever Cloud, you have access to only one database, and the credentials are the same on all add-ons with binary replication. You should not need to change the default value of this variable (1 by default).\nAn example of the SHOW POOL_POOLS; command with CC_PGPOOL_NUM_INIT_CHILDREN=32 and CC_PGPOOL_MAX_POOL=1:\npsql -U u5dh6v2ymn********** -d bjzfhkl5qc********** bjzfhkl5qc**********=\u0026gt; show pool_pools; pool_pid | start_time | pool_id | backend_id | database | username | create_time | pool_backendpid | ----------+---------------------+---------+------------+----------------------+----------------------+---------------------+-----------------+ 3526 | 2021-06-02 15:22:12 | 0 | 0 | bjzfhkl5qc********** | u5dh6v2ymn********** | 2021-06-02 15:22:35 | 1520665 | 3526 | 2021-06-02 15:22:12 | 0 | 1 | bjzfhkl5qc********** | u5dh6v2ymn********** | 2021-06-02 15:22:35 | 1665071 | 3526 | 2021-06-02 15:22:12 | 0 | 2 | bjzfhkl5qc********** | u5dh6v2ymn********** | 2021-06-02 15:22:35 | 531483 | 3527 | 2021-06-02 15:22:12 | 0 | 0 | | | | 0 | 3527 | 2021-06-02 15:22:12 | 0 | 1 | | | | 0 | 3527 | 2021-06-02 15:22:12 | 0 | 2 | | | | 0 | 3528 | 2021-06-02 15:22:12 | 0 | 0 | | | | 0 | 3528 | 2021-06-02 15:22:12 | 0 | 1 | | | | 0 | 3528 | 2021-06-02 15:22:12 | 0 | 2 | | | | 0 | ... | ... | . | . | | | | . | We can see the 32 available processes (3526, 3527, 3528\u0026hellip;), and active connections for process 3526, with an open connection for each PostgreSQL server (1520665, 1665071 and 531483).\nIf a process remains inactive for more than 300 seconds, it will be deleted and a new process will take its place. This value can be configured with the CC_PGPOOL_CHILD_LIFE_TIME variable. This is a measure to prevent memory leaks and other unexpected errors in Pgpool-II children.\nCached connections for each process do not have a default expiration time, but you can set one if needed with the CC_PGPOOL_CONNECTION_LIFE_TIME variable.\nIt\u0026rsquo;s also possible to specify the lifetime of a Pgpool-II child process (CC_PGPOOL_CHILD_MAX_CONNECTIONS) and the time in seconds to disconnect a client if it remains inactive since the last request (CC_PGPOOL_CLIENT_IDLE_LIMIT).\nReplication and load balancing Use Pgpool-II to distribute the load and separate WRITE and READ queries between your PostgreSQL servers.\nWhen using the Streaming mode, it\u0026rsquo;s not Pgpool-II that manages the replication of your databases. Replication must be set up on the PostgreSQL side, otherwise known as binary, Hot Standby or Streaming replication. To schedule this procedure, you can contact our support at support@clever-cloud.com or make a request via our sales form.\nOnce replication is in place, you can use the CC_PGPOOL_FOLLOWERS environment variable to add the follower(s) to your Pgpool-II configuration. This variable is in JSON format, and must contain the host, port and weight of each follower.\n‚ÑπÔ∏è For the HOST and PORT, you must use the values of the POSTGRESQL_ADDON_DIRECT_HOST and POSTGRESQL_ADDON_DIRECT_PORT variables. An example of the CC_PGPOOL_FOLLOWERS variable with two followers:\n[ { \u0026#34;hostname\u0026#34;: \u0026#34;\u0026lt;HOST\u0026gt;\u0026#34;, \u0026#34;port\u0026#34;: \u0026#34;\u0026lt;PORT\u0026gt;\u0026#34;, \u0026#34;weight\u0026#34;: \u0026#34;1\u0026#34; }, { \u0026#34;hostname\u0026#34;: \u0026#34;\u0026lt;HOST\u0026gt;\u0026#34;, \u0026#34;port\u0026#34;: \u0026#34;\u0026lt;PORT\u0026gt;\u0026#34;, \u0026#34;weight\u0026#34;: \u0026#34;1\u0026#34; } ] The weight is used to specify the load balance ratio of the backends, you can also configure the weight of the leader with the CC_PGPOOL_LEADER_WEIGHT variable.\n‚ÑπÔ∏è You can set a higher value for followers to avoid overloading the leader with SELECT queries that could be made on followers. Many other load balancing options are configurable with environment variables. You can refer to our environment variables reference page and the official Pgpool-II documentation for more information.\nHealth check Pgpool-II periodically connects to the configured PostgreSQL backends to detect any error on the servers or networks. If an error is detected, Pgpool-II performs failover or degeneration depending on the configurations.\nThe health check is not activated by default, but you can activate it with the CC_PGPOOL_HEALTH_CHECK_PERIOD variable.\nMany other health check options are configurable with environment variables, such as:\nCC_PGPOOL_HEALTH_CHECK_TIMEOUT: Specifies the timeout in seconds to give up connecting to the backend PostgreSQL if the TCP connect does not succeed within this time. CC_PGPOOL_HEALTH_CHECK_MAX_RETRIES: Specifies the maximum number of retries before giving up and initiating failover when health check fails. CC_PGPOOL_HEALTH_CHECK_RETRY_DELAY: Specifies the amount of time (in seconds) to sleep before retrying after a failed health check retries. CC_PGPOOL_CONNECT_TIMEOUT: Specifies the amount of time in milliseconds before giving up connecting to backend using connect() system call. You can consult the official Pgpool-II documentation to get more information about the health check.\nIn memory cache In memory cache saves the pair of SELECT statement and its result. If the same SELECT comes in, Pgpool-II returns the value from cache. This feature can be activated with the CC_PGPOOL_MEMORY_CACHE_ENABLED=on variable.\nMany other in memory cache options are configurable with environment variables, such as:\nCC_PGPOOL_MEMQCACHE_TOTAL_SIZE: Specifies the shared memory cache size in bytes. CC_PGPOOL_MEMQCACHE_MAX_NUM_CACHE: Specifies the number of cache entries. This is used to define the size of cache management space. CC_PGPOOL_MEMQCACHE_CACHE_BLOCK_SIZE: Specifies the cache block size. CC_PGPOOL_MEMQCACHE_EXPIRE: Specifies the life time of query cache in seconds. CC_PGPOOL_MEMQCACHE_AUTO_CACHE_INVALIDATION: Automatically deletes the cache related to the updated tables. CC_PGPOOL_MEMQCACHE_MAXCACHE: Specifies the maximum size in bytes of the SELECT query result to be cached. CC_PGPOOL_CACHE_SAFE_MEMQCACHE_TABLE_LIST: Specifies a comma-separated list of table names whose SELECT results should be cached by Pgpool-II. CC_PGPOOL_CACHE_UNSAFE_MEMQCACHE_TABLE_LIST: Specifies a comma-separated list of table names whose SELECT results should NOT be cached by Pgpool-II. You can consult the official Pgpool-II documentation to get more information about the in memory cache.\nScalability When the scalability of your application is enabled, you may need to tweak the CC_PGPOOL_NUM_INIT_CHILDREN value. This is what we are going to see here.\nAuto scalability will add or remove instances following your needs. This means that you may have multiple instances running at the same time for a certain period of time. If your application restarts, you will have your current instance number * 2 instances running in parallel while the deployment finishes and the old instances are stopped. A new deployment starts new instances alongsides the old ones.\nThis means that have up to maximum scalability * 2 instances can run at the same time. And if all of your instances open the maximum connections they are allowed to, it means there will be up to maximum scalability * 2 * CC_PGPOOL_NUM_INIT_CHILDREN connections at the same time. We will call this result MaxCon.\n‚ö†Ô∏è Each PostgreSQL add-on has a connection limit which varies following the plan you are using. You must be sure that MaxCon doesn\u0026rsquo;t exceed your plan\u0026rsquo;s max connections. If it does, you might have issues connecting to the remote PostgreSQL add-on. You have to adjust CC_PGPOOL_NUM_INIT_CHILDREN to a number that makes sense for your scalability parameters. Example Let\u0026rsquo;s say that I\u0026rsquo;m hosting a simple PHP application on 1 XS instance, with a scalability that can go up to 4 M instances. And I\u0026rsquo;m using the PostgreSQL S Small Space plan which has a connection limit of 125.\nNow my application receives a lot of traffic and scales up to 4 M instances. But at the same time, I also need to deploy a hot fix. This means that 4 new M instances will be started, alongside the already existing 4 M instances. I need to make sure that MaxCon doesn\u0026rsquo;t go above 125.\nHere is the summary:\n8 instances: 4 currently running, 4 currently deploying my hot fix 125 max connections: the maximum number of connections of my PostgreSQL add-on\u0026rsquo;s plan 5 other connections: I want to be able to use PG Studio or any CLI tool at the same time, in case I need it CC_PGPOOL_NUM_INIT_CHILDREN = ( (125 - 5) / 8 ) = 15. If I set CC_PGPOOL_NUM_INIT_CHILDREN to 15, each instance should have enough connections to query the database without errors. And it also leaves me some spare connections (5) available if anything goes wrong and I need to connect to my database using a CLI tool or PG Studio.\n","tips--debug#Tips / debug":"How can I access Pgpool-II from my application? Connect via ssh to your application and use the psql command.\nssh -t ssh@sshgateway-clevercloud-customers.services.clever-cloud.com \u0026lt;app_id\u0026gt; psql How can I see the configured nodes? You can use the SHOW POOL_NODES; command.\nbjzfhkl5qc**********=\u0026gt; SHOW POOL_NODES; node_id | hostname | port | status | lb_weight | role | select_cnt | load_balance_node | ---------+-----------------------------------------------------------+------+--------+-----------+---------+------------+-------------------+ 0 | bjzfhkl5qc**********-postgresql.services.clever-cloud.com | 57** | up | 0.333333 | primary | 0 | false | 1 | b3diajq7iy**********-postgresql.services.clever-cloud.com | 57** | up | 0.333333 | standby | 2 | false | 2 | bmtwtemn40**********-postgresql.services.clever-cloud.com | 57** | up | 0.333333 | standby | 1 | true | How can I see the Pgpool-II processes waiting for connections and processing a connection? You can use the SHOW POOL_PROCESSES; command.\nbjzfhkl5qc**********=\u0026gt; SHOW POOL_PROCESSES; pool_pid | start_time | database | username | create_time | pool_counter ----------+---------------------+----------------------+----------------------+---------------------+-------------- 21554 | 2021-06-03 11:28:36 | bjzfhkl5qc********** | u5dh6v2ymn********** | 2021-06-03 11:28:48 | 1 11409 | 2021-06-02 19:54:53 | | | | 11410 | 2021-06-02 19:54:53 | | | | 21566 | 2021-06-03 11:29:20 | | | | How can I see the list of pools managed by Pgpool-II? You can use the SHOW POOL_POOLS; command.\nbjzfhkl5qc**********=\u0026gt; SHOW POOL_POOLS; pool_pid | start_time | pool_id | backend_id | database | username | create_time | pool_backendpid | ----------+---------------------+---------+------------+----------------------+----------------------+---------------------+-----------------+ 21554 | 2021-06-03 11:28:36 | 0 | 0 | bjzfhkl5qc********** | u5dh6v2ymn********** | 2021-06-03 11:28:48 | 1549123 | 21554 | 2021-06-03 11:28:36 | 0 | 1 | bjzfhkl5qc********** | u5dh6v2ymn********** | 2021-06-03 11:28:48 | 1695967 | 21554 | 2021-06-03 11:28:36 | 0 | 2 | bjzfhkl5qc********** | u5dh6v2ymn********** | 2021-06-03 11:28:48 | 562378 | 11409 | 2021-06-02 19:54:53 | 0 | 0 | | | | 0 | 11409 | 2021-06-02 19:54:53 | 0 | 1 | | | | 0 | 11409 | 2021-06-02 19:54:53 | 0 | 2 | | | | 0 | 11410 | 2021-06-02 19:54:53 | 0 | 0 | | | | 0 | 11410 | 2021-06-02 19:54:53 | 0 | 1 | | | | 0 | 11410 | 2021-06-02 19:54:53 | 0 | 2 | | | | 0 | 21566 | 2021-06-03 11:29:20 | 0 | 0 | | | | 0 | 21566 | 2021-06-03 11:29:20 | 0 | 1 | | | | 0 | 21566 | 2021-06-03 11:29:20 | 0 | 2 | | | | 0 | How can I see the statistics of SQL commands? You can use the SHOW POOL_BACKEND_STATS; command.\nbjzfhkl5qc**********=\u0026gt; SHOW POOL_BACKEND_STATS; node_id | hostname | port | status | role | select_cnt | insert_cnt | update_cnt | delete_cnt | ---------+-----------------------------------------------------------+------+--------+---------+------------+------------+------------+------------+ 0 | bjzfhkl5qc**********-postgresql.services.clever-cloud.com | 57** | up | primary | 0 | 0 | 0 | 1 | 1 | b3diajq7iy**********-postgresql.services.clever-cloud.com | 57** | up | standby | 2 | 0 | 0 | 0 | 2 | bmtwtemn40**********-postgresql.services.clever-cloud.com | 57** | up | standby | 1 | 0 | 0 | 0 | Is it possible to use the PCP command? Yes, the PCP tool is preconfigured and available on your application.\npcp_pool_status -h /tmp -U pcp -w Attach or detach a given node to Pgpool-II: pcp_pool_status -h /tmp -U pcp -w -n 0 pcp_pool_status -h /tmp -U pcp -w -n 0 Display the statistical data of the health check on the given node ID: pcp_pool_status -h /tmp -U pcp -w -n 0 -v Node Id : 0 Host Name : bjzfhkl5qc**********-postgresql.services.clever-cloud.com Port : 57** Status : up Role : primary Last Status Change : 2021-06-02 19:54:53 Total Count : 0 Success Count : 0 Fail Count : 0 Skip Count : 0 Retry Count : 0 Average Retry Count : 0.000000 Max Retry Count : 0 Max Health Check Duration : 0 Minimum Health Check Duration : 0 Average Health Check Duration : 0.000000 Last Health Check : Last Successful Health Check : Last Skip Health Check : Last Failed Health Check : You can find all PCP commands in the official Pgpool-II documentation.\n","usage#Usage":" ‚ÑπÔ∏è Please note that to connect to Pgpool-II, the default port 5432 must be used. So if you already have a different port set in your code, you have to change it or simply remove the port from the connection information. PHP using PDO Using PDO, you have to use the unix_socket option in your DSN:\n\u0026lt;?php // This variable is injected during deployment $host = getenv(\u0026#34;CC_PGPOOL_SOCKET_PATH\u0026#34;); // Get the database name from the environment $database = getenv(\u0026#34;POSTGRESQL_ADDON_DB\u0026#34;); // Get the database user from the environment $user = getenv(\u0026#34;POSTGRESQL_ADDON_USER\u0026#34;); // Get the database password from the environment $password = getenv(\u0026#34;POSTGRESQL_ADDON_PASSWORD\u0026#34;); $dsn = \u0026#34;pgsql:host=$host;dbname=$database;user=$user;password=$password\u0026#34;; try { $conn = new PDO($dsn); if($conn){ echo \u0026#34;Successfully connected to $dbname!\u0026#34;; } } catch (PDOException $e){ echo $e-\u0026gt;getMessage(); } ?\u0026gt; Wordpress For WordPress, you can change the DB_HOST variable in your wp-config.php:\n// To connect using a socket, the syntax is: `localhost:/path/to/socket` define( \u0026#39;DB_HOST\u0026#39;, \u0026#34;localhost:\u0026#34; . getenv(\u0026#34;CC_PGPOOL_SOCKET_PATH\u0026#34;) ); Node.js On Node.js, using the pg npm package:\nconst { Client } = require(\u0026#39;pg\u0026#39;); client = new Client({ // This variable is injected during the deployment host: process.env[\u0026#34;CC_PGPOOL_SOCKET_PATH\u0026#34;], // Get the database name from the environment database: process.env[\u0026#34;POSTGRESQL_ADDON_DB\u0026#34;], // Get the database user from the environment user: process.env[\u0026#34;POSTGRESQL_ADDON_USER\u0026#34;], // Get the database password from the environment password: process.env[\u0026#34;POSTGRESQL_ADDON_PASSWORD\u0026#34;], }); client.connect(); ","what-is-pgpool-ii#What is Pgpool-II?":" Pgpool-II is a proxy software that sits between PostgreSQL servers and a PostgreSQL database client.\nYou can read the official project page for more information.\n","why-use-pgpool-ii#Why use Pgpool-II?":"Connection pooling: Pgpool-II maintains established connections to the PostgreSQL servers, and reuses them whenever a new connection with the same properties (i.e. user name, database, protocol version, and other connection parameters if any) comes in. It reduces the connection overhead, and improves the system\u0026rsquo;s overall throughput.\nLoad balancing: If a database is replicated (because running in either replication mode or native replication mode), performing a SELECT query on any server will return the same result. Pgpool-II takes advantage of the replication feature in order to reduce the load on each PostgreSQL server. It does that by distributing SELECT queries among available servers, improving the system\u0026rsquo;s overall throughput. In an ideal scenario, read performance could improve proportionally to the number of PostgreSQL servers. Load balancing works best in a scenario where a lot of users execute many read-only queries at the same time.\nAutomated fail over: If one of the database servers goes down or becomes unreachable, Pgpool-II will detach it and will continue operations by using the rest of the database servers. Some sophisticated features that help for automated failovers including timeouts and retries.\nLimiting Exceeding Connections: PostgreSQL puts a limit on the amount of concurrent connections, so that new connections are rejected when this number is reached. Raising this maximum number of connections, however, increases resource consumption and has a negative impact on overall system performance. Pgpool-II also limits the number of concurrent connections, but extra connections will be queued instead of returning an error immediately. Or you can configure it to return an error when the connection limit is exceeded (4.1 or later).\nIn Memory Query Cache: In memory query cache allows to save a SELECT statement with its result. If an identical SELECT comes in, Pgpool-II returns the value from cache. Since neither SQL parsing nor access to PostgreSQL are involved, using in memory cache is extremely fast. On the other hand, it might be slower than the normal path in some cases, because it adds some overhead of storing cache data.\nThe various features are available in the official Pgpool documentation.\n‚ÑπÔ∏è We only support the Streaming mode, which is the most used and recommended mode for Pgpool-II. If you need other modes or features that are not supported on Clever Cloud, please contact us at support@clever-cloud.com "},"title":"Pgpool-II for PostgreSQL add-ons"},"/doc/deploy/addon/postgresql/postgresql/":{"data":{"":"","automatic-vacuuming#Automatic vacuuming":"","default-extensions#Default extensions":"","direct-access#Direct access":"","encryption-at-rest#Encryption at rest":"","migrating-from-an-old-database#Migrating from an old database":"","note-on-shared-databases#Note on shared databases":"","pg_activity#\u003ccode\u003epg_activity\u003c/code\u003e":"PostgreSQL is an object-relational database management system (ORDBMS) with an emphasis on extensibility and on standards-compliance.\nVersions The version currently installed by the add-on is :\non shared plans (DEV) : PostgreSQL 11 on newly created dedicated databases (plans XS Small Space and above) : PostgreSQL 10, 11, 12, 13, 14 Database Daily Backup and Retention By default, Clever Cloud performs a free backup every day, with a retention of seven days. Retention and frequency can be customized for Premium customers.\nEach backup can be found in the add-on dashboard in the web console, along with the credentials.\nMigrating from an old database Some applications require a populated database to run properly. If you want to import your SQL dump, you can use several methods:\nOur WebGUI (Adminer). Command line tool for PostgreSQL administration like psql. Any PostgreSQL client such as pgAdmin. Direct access All our dedicated PostgreSQL databases are served via a proxy. To reduce the latency you can bypass this proxy by generating direct hostname and port for the addon. You can do it by clicking the \u0026ldquo;Generate direct hostname and port\u0026rdquo; on the addon dashboard.\nThis action will add new environment variables to reach the addon without any proxy.\nKeep in mind that usage of direct access is a trade-off: when you migrate your addon, you will need to to generate hostname and port again so your application must update these environment while proxy usage changes nothing.\nEncryption at rest Encryption at rest is available on PostgreSQL. You can have more information on the dedicated page\nNote on shared databases Free databases are instantiated from a shared cluster. The way postgresql works on shared clusters is that a \u0026ldquo;pg_database\u0026rdquo; table references the name, and only the name, of other databases in that same cluster. The data, on the other hand, is not accessible.\nThis referencing does not exist for dedicated databases.\nPgpool-II Pgpool-II is a proxy software that sits between PostgreSQL servers and a PostgreSQL database client.\nYou can read the official project page for more information.\nYou can learn more about Pgpool-II on the dedicated documentation page\nDefault extensions Every PostgreSQL database managed by Clever Cloud comes with the following default extensions: adminpack, autoinc, btree_gin, btree_gist, citext, cube, dblink, dict_int, dict_xsyn, earthdistance, file_fdw, fuzzystrmatch, hstore, insert_username, intagg, intarray, isn, lo, ltree, moddatetime, pageinspect, pg_buffercache, pgcrypto, pg_freespacemap, pgrowlocks, pg_stat_statements, pgstattuple, pg_trgm, plcoffee, plls, plv8, postgis, postgis_tiger_geocoder, postgis_topology postgres_fdw, refint, seg, sslinfo, tablefunc, tcn, timetravel, unaccent, \u0026quot;uuid-ossp\u0026quot;, xml2\nAutomatic vacuuming Autovacuum is automatically enabled on PostgreSQL add-ons.\nThe autovacuum will proceed when a given percentage of rows of a table will be updated/inserted/deleted.\nUsually this threshold is set to 20%.\npg_activity If you want to use pg_activity on an PostgreSQL addon but you get an Exception: Must be run with database superuser privileges. you need to add the flag --rds when you start it.\n","pgpool-ii#Pgpool-II":"","plans#Plans":" ","versions#Versions":""},"title":"PostgreSQL"},"/doc/deploy/addon/pulsar/":{"data":{"":" ‚ö†Ô∏è Pulsar is still in beta. ","authorization#Authorization":"Pulsar add-on uses Biscuit for Pulsar implementation which is directly pluggable to the Pulsar authentication and authorization system. Each add-on exposes its own Biscuit token.\nAs Biscuit is a token, you can use AuthenticationToken($ADDON_PULSAR_TOKEN) provided by clients libraries to authenticate to our clusters without any tweak.\nAttenuation The Pulsar add-on given Biscuit token can be attenuated, here is an attenuation example using biscuit-cli from the given Biscuit token to produce/consume topics starting with a custom topic prefix called \u0026quot;my-own-prefix\u0026quot;.\nPut your Biscuit token in a file:\necho $ADDON_PULSAR_TOKEN \u0026gt; addon.biscuit Inspect your Biscuit token:\nbiscuit inspect addon.biscuit Authority block: == Datalog == right(\u0026#34;admin\u0026#34;); == Revocation id == 0392cdc4dbda294fd254269ad0ce5d1ad2e9c6301b189945074dd051890e495dd16bf5390f84e8499a2045bde85795636f2e156309f9b425270979957e50280a ========== Block n¬∞1: == Datalog == check if namespace(\u0026#34;user_1235678-f54e-4e09-848c-1953af6e3e89\u0026#34;, \u0026#34;pulsar_1235678-6b36-4af2-be1f-d97862c0c41c\u0026#34;) or topic(\u0026#34;user_1235678-f54e-4e09-848c-1953af6e3e89\u0026#34;, \u0026#34;pulsar_1235678-6b36-4af2-be1f-d97862c0c41c\u0026#34;, $topic); == Revocation id == 4a72ca17001b173853f5cd6cce7b46ba4113b1d6e934a3e13e717f91e276c3230861ee49c843c4aafd7d11b14903a7ff32f9e2b35bd6f84794ba3dc6e3c0450c ========== The authority block is the cluster authentication block (the cluster admin Biscuit token). The block n¬∞1 is an attenuation of the authority block to only authorize operations on tenant = \u0026quot;user_1235678-f54e-4e09-848c-1953af6e3e89\u0026quot; and namespace = \u0026quot;pulsar_1235678-6b36-4af2-be1f-d97862c0c41c\u0026quot;. Attenuate it:\nbiscuit attenuate addon.biscuit This will open your $EDITOR to type the attenuation.\nPut\ncheck if topic_operation($operation), $topic.starts_with(\u0026#34;my-own-prefix\u0026#34;) Then it outputs the attenuated token. Inspect it to ensure your attenuation:\nAuthority block: == Datalog == right(\u0026#34;admin\u0026#34;); == Revocation id == 0392cdc4dbda294fd254269ad0ce5d1ad2e9c6301b189945074dd051890e495dd16bf5390f84e8499a2045bde85795636f2e156309f9b425270979957e50280a ========== Block n¬∞1: == Datalog == check if namespace(\u0026#34;user_1235678-f54e-4e09-848c-1953af6e3e89\u0026#34;, \u0026#34;pulsar_1235678-6b36-4af2-be1f-d97862c0c41c\u0026#34;) or topic(\u0026#34;user_1235678-f54e-4e09-848c-1953af6e3e89\u0026#34;, \u0026#34;pulsar_1235678-6b36-4af2-be1f-d97862c0c41c\u0026#34;, $topic); == Revocation id == 4a72ca17001b173853f5cd6cce7b46ba4113b1d6e934a3e13e717f91e276c3230861ee49c843c4aafd7d11b14903a7ff32f9e2b35bd6f84794ba3dc6e3c0450c ========== Block n¬∞2: == Datalog == check if topic_operation($operation), $topic.starts_with(\u0026#34;my-own-prefix\u0026#34;); == Revocation ids == 3b71ba17001b173853f5cd6cce7b46ba4113b1d6e934a3e13e717f91e276c3230861ee49c843c4aafd7d11b14903a7ff32f9e2b35bd6f84794ba3dc6e3c0450d ========== Now the block n¬∞2 ensures that topics must start with \u0026quot;my-own-prefix\u0026quot;.\nYou can find more examples on the biscuit-pulsar authorization java tests.\n","common-use-cases#Common use cases":" Replicating data among databases using Pulsar IO is commonly used to distribute change events from databases. Parallel processing and workflows. You can efficiently distribute a large number of tasks among multiple workers (compressing text files, sending email notifications). Data streaming from IoT devices. For example, a residential sensor can stream data to backend servers. Refreshing distributed caches. For example, an application can publish invalidation events to update the IDs of objects that have changed. Real-time event distribution. Events, raw or processed, may be made available to multiple applications across your team and organization for real time processing. ","create-a-pulsar-add-on#Create a Pulsar add-on":"It is as simple and straightforward as creating any other add-on. In your personnal space, click on Create \u0026gt; an add-on \u0026gt; Pulsar. Choose your plan, link an app to it (or not), give it a name and a zone, and it\u0026rsquo;s done.","overview#Overview":"Pulsar works on a publisher/subscriber model. It allows services to communicate asynchronously, with latencies ranging around 100 milliseconds. It is used for streaming analytics and data integration pipelines to ingest and distribute data. It is equally effective as messaging-oriented middleware for service integration or as a queue to parallelize tasks. It also enables you to create systems of event producers and consumers. Publishers communicate with subscribers asynchronously by broadcasting events.\nclient Pulsar client publishes to =\u0026gt; topic \u0026lt;= subscribes to \u0026#34;producer\u0026#34; \u0026#34;consumer\u0026#34; They are several modes of subscription. A consumer may subscribe exclusively, or share the subscription with other consumers. There is the subscription mode types:\nExclusive (only one consumer for the subscription) Failover (if a consumer fails, another one receives the message) Shared (messages are distributed to several consumers) Key_Shared (messages come with keys and go to consumers with the corresponding key) More on this in the official documentation.\nA topic is defined this way:\n{persistent|non-persistent}://tenant/namespace/topic\nTenants and namespaces allow for grouping and subgrouping of topics.\nA Clever Cloud Pulsar add-on is basically an immutable tenant/namespace where the tenant is your user id, and the namespace is the add-on id. It allows you to create and use topics following this pattern:\n{persistent|non-persistent}://\u0026lt;CLEVERCLOUD_TENANT_ID\u0026gt;/\u0026lt;ADDON_ID\u0026gt;/\u0026lt;TOPIC_NAME\u0026gt;\n","pricing#Pricing":"Clever Cloud Pulsar add-on pricing is comsumption based, here is a pricing simulator:\n","storage#Storage":"Retention A Pulsar add-on is provided with infinite retention policies, which can be changed using:\n# Example to set retention of namespace to 2 weeks and/or 100 GB pulsarctl --admin-service-url $ADDON_PULSAR_HTTP_URL \\ --auth-params $ADDON_PULSAR_TOKEN \\ --auth-plugin org.apache.pulsar.client.impl.auth.AuthenticationToken \\ namespaces set-retention $ADDON_PULSAR_TENANT/$ADDON_PULSAR_NAMESPACE --time 2w --size 100G Offload storage to Cellar (S3) Pulsar has a tiered storage feature allowing to offload heavy data to cold storage once a threshold is reached.\nFor each Pulsar add-on we provide, we also provide a hidden Cellar add-on, our object storage add-on. This Cellar add-on is bound to the Pulsar namespace offload policies and will store your offloaded data.\nThe offload threshold of the namespace is deactivated by default, you can activate it with:\n# Example to set offload to run when hot storage is \u0026gt; 10G and put data to Cellar Addon pulsarctl --admin-service-url $ADDON_PULSAR_HTTP_URL \\ --auth-params $ADDON_PULSAR_TOKEN \\ --auth-plugin org.apache.pulsar.client.impl.auth.AuthenticationToken \\ namespaces set-offload-treshold $ADDON_PULSAR_TENANT/$ADDON_PULSAR_NAMESPACE 10G ","usage#Usage":"We advise you to use pulsarctl provided by StreamNative. Here is an example to list topics in your add-on (in your namespace):\npulsarctl --admin-service-url $ADDON_PULSAR_HTTP_URL \\ --auth-params $ADDON_PULSAR_TOKEN \\ --auth-plugin org.apache.pulsar.client.impl.auth.AuthenticationToken \\ namespaces topics $ADDON_PULSAR_TENANT/$ADDON_PULSAR_NAMESPACE Rust example Clever Cloud maintains pulsar\u0026rsquo;s asynchronous Rust client, which support biscuits. Here is a minimal example that produces (publishes) a \u0026ldquo;Hello, World!\u0026rdquo; on the topic my-own-topic:\n# Cargo.toml [dependencies] tokio = {version = \u0026#34;1.9.0\u0026#34;, features = [\u0026#34;full\u0026#34;] } pulsar = \u0026#34;4.0.0\u0026#34; serde_json = \u0026#34;1.0.66\u0026#34; serde = { version = \u0026#34;1.0.127\u0026#34;, features = [\u0026#34;derive\u0026#34;] } use pulsar::{ message::proto, producer, Error as PulsarError, Pulsar, SerializeMessage, TokioExecutor, }; use serde::{Deserialize, Serialize}; #[derive(Serialize, Deserialize)] struct TestData { data: String, } impl SerializeMessage for TestData { fn serialize_message(input: Self) -\u0026gt; Result\u0026lt;producer::Message, PulsarError\u0026gt; { let payload = serde_json::to_vec(\u0026amp;input).map_err(|e| PulsarError::Custom(e.to_string()))?; Ok(producer::Message { payload, ..Default::default() }) } } #[tokio::main] async fn main() -\u0026gt; Result\u0026lt;(), pulsar::Error\u0026gt; { let pulsar_addon_url = std::env::var(\u0026#34;ADDON_PULSAR_BINARY_URL\u0026#34;).unwrap(); let biscuit = std::env::var(\u0026#34;ADDON_PULSAR_TOKEN\u0026#34;).unwrap(); let tenant = std::env::var(\u0026#34;ADDON_PULSAR_TENANT\u0026#34;).unwrap(); let namespace = std::env::var(\u0026#34;ADDON_PULSAR_NAMESPACE\u0026#34;).unwrap(); let topic = format!(\u0026#34;non-persistent://{}/{}/my-own-topic\u0026#34;, tenant, namespace); let auth = pulsar::Authentication { name: \u0026#34;token\u0026#34;.to_string(), data: biscuit.clone().into_bytes(), }; let pulsar: Pulsar\u0026lt;_\u0026gt; = Pulsar::builder(pulsar_addon_url, TokioExecutor) .with_auth(auth) .build() .await?; let mut producer = pulsar .producer() .with_topic(topic) .with_name(\u0026#34;my-producer\u0026#34;) .with_options(producer::ProducerOptions { schema: Some(proto::Schema { r#type: proto::schema::Type::String as i32, ..Default::default() }), ..Default::default() }) .build() .await?; producer .send(TestData { data: \u0026#34;Hello world!\u0026#34;.to_string(), }) .await?; Ok(()) } Java example There is an official Java Pulsar Client, import it in your pom.xml:\n\u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.apache.pulsar\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;pulsar-client\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.8.0\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; PulsarClient client = PulsarClient.builder() .authentication(new AuthenticationToken(\u0026#34;ADDON_PULSAR_TOKEN\u0026#34;)) .serviceUrl(\u0026#34;ADDON_PULSAR_BINARY_URL\u0026#34;) .build(); String TOPIC = \u0026#34;non-persistent://{}/{}/my-own-topic\u0026#34; Producer\u0026lt;String\u0026gt; producer = client.newProducer(Schema.STRING) .topic(TOPIC) .create(); producer.send(\u0026#34;Hello world!\u0026#34;); Consumer consumer = client.newConsumer() .topics(Arrays.asList(TOPIC)) .consumerName(\u0026#34;my-consumer-name\u0026#34;) .subscriptionName(\u0026#34;my-subscription-name\u0026#34;) .subscriptionInitialPosition(SubscriptionInitialPosition.Earliest) .subscribe(); while (!consumer.hasReachedEndOfTopic()) { Message\u0026lt;String\u0026gt; msg = consumer.receive(); // Got the message! } Python example There is an official Python Pulsar Client, import it in your requirements.txt:\npulsar-client==2.10.2 import pulsar import os import json from pulsar import AuthenticationToken from transfer import transfer client = pulsar.Client( os.getenv(\u0026#34;ADDON_PULSAR_BINARY_URL\u0026#34;), authentication=AuthenticationToken(os.getenv(\u0026#34;ADDON_PULSAR_TOKEN\u0026#34;)), ) tenant = os.getenv(\u0026#34;ADDON_PULSAR_TENANT\u0026#34;) namespace = os.getenv(\u0026#34;ADDON_PULSAR_NAMESPACE\u0026#34;) topic = \u0026#34;persistent://{}/{}/TOPIC_NAME\u0026#34;.format(tenant, namespace) producer = client.create_producer(topic) for i in range(10): producer.send((\u0026#39;Hello-%d\u0026#39; % i).encode(\u0026#39;utf-8\u0026#39;)) while True: msg = consumer.receive() print(\u0026#34;Received message id=\u0026#39;{}\u0026#39; with data\\n{}\\n\u0026#34;.format(msg.message_id(), msg.data())) # Acknowledge successful processing of the message consumer.acknowledge(msg) # Message failed to be processed client.close() Operations The Biscuit token provided by the Pulsar add-on allows you to run several operations on namespace, its policies and the related topics.\nThese operations might change in the future. Don\u0026rsquo;t hesitate to write to our support to ask for new operations!\nNamespace Authorized namespace operations:\nCREATE_TOPIC GET_TOPIC GET_TOPICS DELETE_TOPIC GET_BUNDLE CLEAR_BACKLOG UNSUBSCRIBE Topics Authorized topics operations:\nLOOKUP PRODUCE CONSUME COMPACT EXPIRE_MESSAGES OFFLOAD PEEK_MESSAGES RESET_CURSOR SKIP TERMINATE GET_BUNDLE_RANGE SUBSCRIBE GET_SUBSCRIPTIONS UNSUBSCRIBE GET_STATS GET_METADATA GET_BACKLOG_SIZE SET_REPLICATED_SUBSCRIPTION_STATUS Namespace and topic policies Authorized namespace/topic policies operations:\nALL_READ ANTI_AFFINITY_READ AUTO_SUBSCRIPTION_CREATION_READ AUTO_SUBSCRIPTION_CREATION_WRITE AUTO_TOPIC_CREATION_READ AUTO_TOPIC_CREATION_WRITE BACKLOG_READ BACKLOG_WRITE COMPACTION_READ COMPACTION_WRITE DEDUPLICATION_READ DEDUPLICATION_SNAPSHOT_READ DEDUPLICATION_SNAPSHOT_WRITE DEDUPLICATION_WRITE DELAYED_DELIVERY_READ DELAYED_DELIVERY_WRITE ENCRYPTION_READ ENCRYPTION_WRITE INACTIVE_TOPIC_READ INACTIVE_TOPIC_WRITE MAX_CONSUMERS_READ MAX_CONSUMERS_WRITE MAX_PRODUCERS_READ MAX_PRODUCERS_WRITE MAX_SUBSCRIPTIONS_READ MAX_SUBSCRIPTIONS_WRITE MAX_TOPICS_READ MAX_TOPICS_WRITE MAX_UNACKED_READ MAX_UNACKED_WRITE OFFLOAD_READ PARTITION_READ PARTITION_WRITE PERSISTENCE_READ PERSISTENCE_WRITE RATE_READ RATE_WRITE REPLICATION_RATE_READ REPLICATION_READ RESOURCEGROUP_READ RESOURCEGROUP_WRITE RETENTION_READ RETENTION_WRITE SCHEMA_COMPATIBILITY_STRATEGY_READ SCHEMA_COMPATIBILITY_STRATEGY_WRITE SUBSCRIPTION_AUTH_MODE_READ SUBSCRIPTION_AUTH_MODE_WRITE SUBSCRIPTION_EXPIRATION_TIME_READ SUBSCRIPTION_EXPIRATION_TIME_WRITE TTL_READ TTL_WRITE ","version#Version":"We maintain up-to-date Pulsar clusters based on the official Apache Pulsar release process. Your Pulsar add-on version is available in your add-on dashboard. Updates will be notified using Clever Cloud weekly updates on the blog."},"title":"Pulsar"},"/doc/deploy/addon/redis/":{"data":{"":"Redis is an open source, in-memory data structure store, used as database, cache and message broker.","administration-with-redsmin#Administration with Redsmin":"Each Redis add-on provides a Redsmin dashboard, which allows you to query and monitor your redis database activity.\nDatabase Daily Backup and Retention By default, Clever Cloud performs a free backup every day, with a retention of seven days. Retention and frequency can be customized for Premium customers.\nEach backup can be found in the add-on dashboard in the web console, along with the credentials.\nA backup is a tar.gz archive containing both the .rdb and .aof files. You can extract this archive and run redis-server in the extracted folder to access data.\n","default-retention-policy#Default retention policy":"By default, the eviction policy is noeviction. If you plan to use Redis as a LRU cache, please contact the support to change its policy.","leader--follower-topology#Leader / follower topology":"By default, all redis add-ons are configured as leaders. You can set up a redis add-on as a follower from the add-on panel (in the \u0026ldquo;Add-on information\u0026rdquo; tab). You need to set the leader information (host, port, password) to start the replication. The add-on panel will display the sync process status so that you know when the synchronisation is done.\nWhile a redis database is configured as a follower, it\u0026rsquo;s read-only.\n","plans#Plans":" ","redis-cli-usage#Redis-cli usage":"You can use Redis URI to connect to your databases with -u option. However, the generated URI in the information tab (REDIS_URL) of you add-on is not a legal syntax to use redis-cli.\nThis is the correct syntax for redis-cli URI : redis ://password@host:port[/database]\n","version#Version":"The version currently installed by the add-on is : Redis 7.0.11"},"title":"Redis"},"/doc/deploy/application/docker/docker/":{"data":{"":"","overview#Overview":"Docker is an easy, lightweight virtualized environment for portable applications.\nDocker containers can encapsulate any payload, and will run consistently on and between virtually any server. The same container that a developer builds and tests on a laptop will run at scale, in production, on VMs, bare-metal servers, public instances, or combinations of the above.\nClever Cloud allows you to deploy any application running inside a Docker container. This page will explain how to set up your application to run it on our service.\n‚ö†Ô∏è Docker at Clever Cloud does not yet support FS Buckets, validation of your Dockerfile, or compose of sorts. Create an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nConfigure your Docker application Mandatory configuration Be sure that you:\npush on the master branch. have and commit a file named Dockerfile or use the CC_DOCKERFILE environment variable if your Dockerfile has a different name, Here is what it will look like. run the application with CMD or ENTRYPOINT in your Dockerfile. listen on HTTP port 8080 by default (you can set your own port using CC_DOCKER_EXPOSED_HTTP_PORT=\u0026lt;port\u0026gt; environment variable). Dockerfile contents You can virtually put everything you want in your Dockerfile. The only mandatory (for us) instruction to put in it is:\nCMD \u0026lt;command to run\u0026gt; command to run: this is the command that starts your application. Your application must listen on port 8080. It can be easier for you to put a script in your docker image and call it with the CMD instruction.\nMemory usage during building If the building step of your app crashes because it uses more memory that it\u0026rsquo;s available, you\u0026rsquo;ll have to split the building and running steps and enable Dedicated build instance\n# The base image FROM outlinewiki/outline:version-0.44.0 # Run the memory intensive build on an instance with 4 GB of memory (M) RUN yarn install \u0026amp;\u0026amp; yarn build # Start the app on a smaller instance (nano) CMD yarn start TCP support Clever Cloud enables you to use TCP over Docker applications using using the environment variable CC_DOCKER_EXPOSED_TCP_PORT=\u0026lt;port\u0026gt;. Refer to the documentation page to know how to create [TCP redirections](https://devcenter.clever-cloud.com/doc/administrate/tcp-redirections/].\nDocker socket access Some containers require access to the docker socket, to spawn sibling containers for instance.\n‚ö†Ô∏è \u0026lt;p\u0026gt; Giving access to the docker socket breaks all isolation provided by docker. **DO NOT** give socket access to untrusted code. \u0026lt;/p\u0026gt; \u0026lt;/p\u0026gt; You can make the docker socket available from inside the container by adding the CC_MOUNT_DOCKER_SOCKET=true environment variable. In that case, docker is started in the namespaced mode, and in bridge network mode.\nPrivate registry We support pulling private images through the docker build command. To login to a private registry, you need to set a few environment variables:\nCC_DOCKER_LOGIN_USERNAME: the username to use to login CC_DOCKER_LOGIN_PASSWORD:¬†the password of your username CC_DOCKER_LOGIN_SERVER (optional): the server of your private registry. Defaults to Docker\u0026rsquo;s public registry. This uses the docker login command under the hood.\nEnable IPv6 networking You can activate the support of IPv6 with a IPv6 subnet in the docker daemon by adding the CC_DOCKER_FIXED-CIDR-V6=\u0026lt;IP\u0026gt; environment variable.\nBuild-time variables You can use the ARG instruction to define build-time environment variables.\nEvery environment variable defined for your application will be passed as a build environment variable using the --build-arg=\u0026lt;ENV\u0026gt; parameter during the docker build phase.\nDockerized Rust application Deployment To make your dockerized application run on clever Cloud, you need to:\nexpose port 8080 in your docker file run the application with CMD or ENTRYPOINT For instance, here is the Dockerfile used for the Rust application:\n# rust tooling is provided by `archlinux-rust` FROM geal/archlinux-rust MAINTAINER Geoffroy Couprie, contact@geoffroycouprie.com # needed by rust ENV LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib # relevant files are in `./source` ADD . /source WORKDIR /source # Clever Cloud expects your app to listen on port 8080 EXPOSE 8080 RUN rustc -V # Build your application RUN cargo build # Run the application with `CMD` CMD cargo run Dockerized HHVM application Deployment Deploying a HHVM application is a bit trickier as it needs to have both HHVM and nginx running as daemons. To be able to have them running both, we need to put them in a start script:\n#!/bin/sh hhvm --mode server -vServer.Type=fastcgi -vServer.Port=9000\u0026amp; service nginx start composer install echo \u0026#34;App running on port 8080\u0026#34; tail -f /var/log/hhvm/error.log Since the two servers are running as daemons, we need to start a long-running process. In this case we use tail -f. We then add start.sh as the CMD in the Dockerfile\n# We need HHVM FROM jolicode/hhvm # We need nginx RUN sudo apt-get update \\ \u0026amp;\u0026amp; sudo apt-get install -y nginx ADD . /root RUN sudo chmod +x /root/start.sh # Nginx configuration ADD hhvm.hdf /etc/hhvm/server.hdf ADD nginx.conf /etc/nginx/sites-available/hack.conf RUN sudo ln -s /etc/nginx/sites-available/hack.conf /etc/nginx/sites-enabled/hack.conf # Checking nginx config RUN sudo nginx -t RUN sudo chown -R www-data:www-data /root WORKDIR /root # The app needs to listen on port 8080 EXPOSE 8080 # Launch the start script CMD [\u0026#34;sudo\u0026#34;,\u0026#34;/root/start.sh\u0026#34;] Sample dockerized applications We provide a few examples of dockerized applications on Clever Cloud.\nElixir App Haskell App Hack / HHVM App Seaside / Smalltalk App Rust App Environment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. Git Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n"},"title":"Deploy Docker images"},"/doc/deploy/application/docker/tutorials/fluentd/":{"data":{"":"","configure-your-fluentd--docker-application#Configure your Fluentd + Docker application":"Mandatory configuration To follow this tutorial, you will need:\nRuby \u0026gt;= 2.4.4 (w/ Rubygems) Bundler Docker Git curl a Ruby versions manager ‚ÑπÔ∏è To manage your gems and ruby versions, we recommend rbenv. My application does not exists already Create a fluentd application locally mkdir myFluentd cd myFluentd touch Gemfile Dockerfile go.sh td-agent.conf chmod +x go.sh Inside Gemfile put the following:\nsource \u0026#39;https://rubygems.org\u0026#39; ruby \u0026#39;2.4.4\u0026#39; gem \u0026#39;fluentd\u0026#39; gem \u0026#39;fluent-plugin-td\u0026#39; Then run bundler to install dependencies and generate your Gemfile.lock\nbundle install Clever Cloud needs that your application answers on requests made on 0.0.0.0:8080, we\u0026rsquo;ll use a PORT environment variable for local test purposes (this variable is automatically setup on each application). Inside td-agent.conf put the following:\n\u0026lt;source\u0026gt; @type monitor_agent bind 0.0.0.0 port \u0026#34;#{ENV[\u0026#39;PORT\u0026#39;]}\u0026#34; \u0026lt;/source\u0026gt; Inside go.sh put the following:\n#!/bin/sh bundle exec fluentd --use-v1-config -c td-agent.conf echo \u0026#34;üåç Fluentd server started\u0026#34; Test locally Start you service\nPORT=9292 ./go.sh Verify that it responds to requests\ncurl 0.0.0.0:9292 You can now read My application already exists\nFine tune you application You can update your configuration with all inputs, filters and outputs you need or check for a community based plugin.\nMy application already exists Prepare your application for deployment Create a Dockerfile at the root of your project and put inside the following (assuming your start script is in go.sh):\nFROM ruby:2.4.4 EXPOSE 8080 COPY Gemfile Gemfile.lock td-agent.conf go.sh ./ RUN bundle config --global frozen 1 RUN bundle install RUN chmod +x go.sh CMD [ \u0026#34;/go.sh\u0026#34; ] Environment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. Git Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n","overview#Overview":"Since you deploy microservices on Clever Cloud, you may need some data pipes between your services to:\ncollect data from your PostgreSQL to create Elasticsearch indexes for your website search engine collect application logs to analyze them with Elasticsearch, then archive them with S3 collect Apache access logs to analyze them in MongoDB extract data from the database of your PHP/MySQL application to transform then load them in your other node.js/PostgreSQL application and many more \u0026hellip; Fluentd is an open source data collector written in Ruby, which lets you unify the data collection and consumption for a better use and understanding of data.\n‚ÑπÔ∏è Ruby application on Clever Cloud requires Puma webserver but fluentd is using excon. Create an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\n"},"title":"Deploy a fluentd"},"/doc/deploy/application/dotnet/dotnet/":{"data":{"":"","overview#Overview":"Clever Cloud allows you to deploy .NET web applications. This page will explain you how to set up your application to run it on our service.\nYou do not need to change a lot in your application, the requirements will help you to configure your apps with some mandatory files to add, and properties to setup.\n‚ö†Ô∏è If you encounter an issue, please contact the support. Create an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nConfigure your Dotnet application .NET version The default version used on Clever Cloud is 6.0. You can change it to 5.0 by setting the CC_DOTNET_VERSION environment variable to 5.0. No support will be provided for end-of-life versions.\nRequirements Be sure that:\nYou have pushed in master branch. You listen on port 8080, by default each .NET application is created with the ASPNETCORE_URLS=\u0026quot;http://0.0.0.0:8080\u0026quot; environment variable. You have committed the different files of your project and the corresponding project file (.csproj, .fsproj or .vbproj). Let\u0026rsquo;s take an example with the simple-feed-reader project.\nFirst, you need to add the APP_FOLDER=SimpleFeedReader environment variable to define the application folder inside the Git repository.\nDuring deployment, the SimpleFeedReader.csproj file and the target framework net5.0 are automatically detected. Then, the .NET project is published:\ndotnet publish --framework net5.0 --configuration Release No additional configuration is required (unless multiple project files or target frameworks are present, see the documentation below).\nMultiple project files in the repository If multiple project files are present in your repository, you can specify the file to use (without the .*proj extension) with the CC_DOTNET_PROJ environment variable.\nCC_DOTNET_PROJ=SimpleFeedReader Multiple binary targets If your project file defines multiple targets, like :\n\u0026lt;Project Sdk=\u0026#34;Microsoft.NET.Sdk.Web\u0026#34;\u0026gt; \u0026lt;PropertyGroup\u0026gt; \u0026lt;TargetFramework\u0026gt;net5.0;net6.0\u0026lt;/TargetFramework\u0026gt; \u0026lt;/PropertyGroup\u0026gt; ... You must specify the one you want to run, with the CC_DOTNET_TFM environment variable.\nIf CC_DOTNET_TFM is specified, then the executable produced by this target is used to start the application.\nCC_DOTNET_TFM=net5.0 Dependencies Make sure to list all your dependencies in your project file. For example:\n... \u0026lt;ItemGroup\u0026gt; \u0026lt;PackageReference Include=\u0026#34;AutoMapper.Extensions.Microsoft.DependencyInjection\u0026#34; Version=\u0026#34;5.0.1\u0026#34; /\u0026gt; \u0026lt;PackageReference Include=\u0026#34;Microsoft.SyndicationFeed.ReaderWriter\u0026#34; Version=\u0026#34;1.0.2\u0026#34; /\u0026gt; \u0026lt;/ItemGroup\u0026gt; \u0026lt;/ItemGroup\u0026gt; \u0026lt;/Project\u0026gt; Compiled dependencies are cached by default to speed up deployments. You can disable dependencies caching completely by removing the CC_CACHE_DEPENDENCIES environment variable.\nIf you want to rebuild your application from scratch, you can select \u0026ldquo;rebuild and restart\u0026rdquo; from the console or launch clever restart --without-cache from CLI\nConfigure profile The default profile is Release but you can use the CC_DOTNET_PROFILE environment variable to change this configuration.\nCC_DOTNET_PROFILE=Debug Custom run command If you need to run a custom command (or just pass options to the program), you can specify it through the CC_RUN_COMMAND environment variable.\nFor instance, you can have CC_RUN_COMMAND=./bin/Release/net5.0/myapp \u0026lt;options\u0026gt;.\nPrivate dependencies Support for private dependencies will be available soon.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. To access environment variables from your code, you can use System.Environment.GetEnvironmentVariable(\u0026quot;MY_VARIABLE\u0026quot;)\u0026quot;.\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n"},"title":"Deploy .NET apps"},"/doc/deploy/application/elixir/elixir/":{"data":{"":"","overview#Overview":"Clever Cloud supports Elixir based applications.\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nConfigure your Elixir application Mandatory configuration Get your Elixir version in your console with $ elixir -v and set the environment variable CC_ELIXIR_VERSION to its value (available versions as of today are 1.8, 1.9, 1.10, 1.11, 1.12, 1.13 or 1.14). Compatibility between Elixir and Erlang/OTP Each version of Elixir uses the most recent compatible version of Erlang, based on the compatibility table provided in the official Elixir documentation. If you deploy a Phoenix application Edit the file config/prod.secret.exs to replace System.get_env(\u0026quot;DATABASE_URL\u0026quot;) with System.get_env(\u0026quot;POSTGRESQL_ADDON_URI\u0026quot;). Generate a secret token with $ mix phx.gen.secret. set environment variable SECRET_KEY_BASE to the value obtained with $ mix phx.gen.secret previously set envrionment variable CC_PHOENIX_RUN_ECTO_MIGRATE to true if you need to trigger the command $ mix ecto.migrate Build, deployment phases and custom configuration Once you push your code to Clever Cloud, the following commands are run:\nmix deps.get mix deps.compile npm install These commands will compile your dependencies at the root of your project folder. If you want to use another folder for npm install, specify it via the environment variable CC_PHOENIX_ASSETS_DIR. To change the folder for the entire build / run process, you should use APP_FOLDER environment variable.\nThen mix compile is run. If you want to override this behavior, you can set the environment variable CC_MIX_BUILD_GOAL to the value you desire.\nAt this point, there is the command npm run deploy.\nThen mix phx.digest is run. You can override this one with the variable CC_PHOENIX_DIGEST_GOAL.\nFinally, mix phx.server is invoked, and as always, you can override this behavior, either with CC_RUN_COMMAND where you have to specify the full command, or CC_PHOENIX_SERVER_GOAL where it will be a mix task by default.\nNote: If you need to specify the timezone of your application, you can do it with the variable TZ set to the usual timezone format, for instance Europe/Paris.\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n"},"title":"Deploy Elixir applications"},"/doc/deploy/application/golang/go/":{"data":{"":"","overview#Overview":"Clever Cloud allows you to deploy any Go application. This page will explain you how to set up your application to run it on our service.\nWe currently support single module applications only. That means that your sources files just need to be at the project\u0026rsquo;s root, and you can\u0026rsquo;t have multiple modules running.\nYou do not need to change a lot in your application, the requirements will help you configure your applications with some mandatory files to add, and properties to setup.\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nConfigure your Go application Mandatory configuration Be sure that:\nYour application listens to the wild network 0.0.0.0, not only localhost or 127.0.0.1 Your application listens on port 8080 You put your main code in a file named main.go (if you do not do that, Go will generate a library and not an executable) Apart from listening on port 8080, there is nothing to change on your application.\nGo production build on Clever Cloud We automatically build and run your application, see Build the application. By default, we consider that your repository contains a single application. We put your application in ${GOPATH}/src/{app_id} and then run go get {app_id}. Refer to clevercloud/go.json settings if you want to override this behaviour. By default, we deploy your application as a Go project named \u0026ldquo;\u0026lt;app_id\u0026gt;\u0026rdquo;. You can find the app_id of your application under the environment variable APP_ID. Please refer to environment injection to know how to query it in your application. The executable is run with the application\u0026rsquo;s root as its current path. So if your application has a static folder at its root, it will be accessible via ./static in your application. Build the application To build your application, you can use one of the three methods available:\ngo modules go build go get (default) Go modules If your project is compatible with go modules, be sure that the go.mod file is in your git tree. Note that it must be at the root of your application (see the APP_FOLDER environment variable if it isn\u0026rsquo;t\nFor now, you have to add the environment variable CC_GO_BUILD_TOOL=gomod to build using the go modules. In a future release, we will automatically build with go modules if the go.mod file is present at the root of your git tree.\nYour project\u0026rsquo;s entrypoint should be in the same folder as the go.mod file and be named main.go. If it isn\u0026rsquo;t, you have to specify it using the following environment variable:\nCC_GO_PKG=./path/to/entrypoint.go\nGo build If your project does not support go modules, it may include your vendored dependencies. In this case, go build must be used.\nTo use go build, you have to set the CC_GO_BUILD_TOOL=gobuild environment variable. We will then deploy your project in a classic GOPATH hierarchy using go build.\nThe CC_GO_PKG environment variable can be used to define the main file of your application. Defaults to main.go.\nGo get If your application has submodules and imports them with their full path or your main project is an external package hosted, for instance on GitHub (like github.com/me/myproject), you can define the environment variable CC_GO_PKG=github.com/me/myproject. We will now run go get ${CC_GO_PKG} instead of go get \u0026lt;app_id\u0026gt;. Also, go get requires that you put your main code in a file named main.go. If you do not do that, go will generate a library and not an executable. So if you get a Nothing listening on port 8080, please check that your main file is named main.go.\nYou can also force the use of go get by setting the environment variable CC_GO_BUILD_TOOL=goget. This is currently the default.\nNote: if you get a Nothing listening on port 8080 error, please check that your main file is named main.go.\nCustomize build using environment variables Variable Usage CC_GO_PKG Makes the deployer run go get ${CC_GO_PKG} instead of go get or go install ${CC_GO_PKG} instead of go install mypackage. CC_GO_BUILD_TOOL Available values: gomod, goget, gobuild. Makes the deployer use go modules, go get or go build to build your application. If not specified, defaults to goget. CC_GO_RUNDIR Makes the deployer use the specified directory to run your binary. If your application must be in $GOPATH/src/company/project for your vendored dependencies, set this variable to company/project. clevercloud/go.json This configuration file is optional.\nIf you want to configure precisely your dependencies (e.g. have private libraries, or specific versions of some libraries), here is the way:\nMake your repository have a GOPATH structure:\n./ src/ myapp/ foo/ module1/ module2/ module3/ Here you have the modules myapp, foo/module1, foo/module2 and module3.\nCreate a clevercloud/go.json file at the top of your repository:\n./ clevercloud/ go.json src/ myapp/ ... In the go.json file, put the following:\n{ \u0026#34;deploy\u0026#34;: { \u0026#34;appIsGoPath\u0026#34;: true, \u0026#34;main\u0026#34;: \u0026#34;myapp\u0026#34; } } If appIsGoPath is present and equals true, then we consider that your repo root is the GOPATH.\nThe main field then becomes mandatory and must be the name of the module you want to run.\nE.g. if you want to run module1, main must be foo/module1.\n(Optional) Add a \u0026ldquo;execDir\u0026rdquo; field to the \u0026ldquo;deploy\u0026rdquo; object:\n{ \u0026#34;deploy\u0026#34;: { \u0026#34;appIsGoPath\u0026#34;: true, \u0026#34;main\u0026#34;: \u0026#34;myapp\u0026#34;, \u0026#34;execDir\u0026#34;: \u0026#34;src/myapp\u0026#34; } } The execDir value must be relative to the root of your repo.\nIn the example above, we will run the application in the src/myapp directory.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. To access environment variables from your code, just get them from the environment with PATH: os.Getenv(\u0026quot;MY_VARIABLE\u0026quot;).\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n"},"title":"Deploy Go applications"},"/doc/deploy/application/haskell/haskell/":{"data":{"":"","overview#Overview":"Haskell is a purely functional language, especially suited for robust web applications.\nThere are many ways to write web applications in haskell, from raw WAI to full-stack frameworks like Yesod, simple libraries like scotty or type-safe solutions like servant.\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nConfigure your Haskell application Mandatory configuration Be sure that:\nyou have pushed in master branch you listen on port 8080 you have one and only one binary target in your .cabal file your project has a stack.yaml file The steps ran in order are:\nstack setup stack install --only-dependencies stack install ./\u0026lt;path\u0026gt;/my-exe (or the contents of CC_RUN_COMMAND) The executable built by stack build (or the command you specify) must start a web server listening on 0.0.0.0:8080.\nFor instance, a minimal scotty application can look like this:\n{-# LANGUAGE OverloadedStrings #-} import Web.Scotty main = scotty 8080 $ do get \u0026#34;/\u0026#34; $ do html $ \u0026#34;Hello world\u0026#34; Dependencies Make sure to list all your dependencies in your .cabal file.\nFor the example above, you need:\nexecutable myfirstapp main-is: Main.hs build-depends: base , scotty Cached dependencies You can enable dependencies caching by adding the CC_CACHE_DEPENDENCIES=true.\nIt is enabled by default only for rust and haskell applications.\nTo disable dependencies caching completely, you can remove the CC_CACHE_DEPENDENCIES environment variable or by setting it to false.\nTo fully remove cached dependencies, you have to rebuild your application from scratch.\nYou can select rebuild and restart from the console or launch clever restart --without-cache with the Clever Tools CLI.\nCustom run command If you need to run a custom command (or just pass options to the binary built by stack), you can specify it through the CC_RUN_COMMAND environment variable.\nFor instance, for a hakyll website, you can define:\nCC_RUN_COMMAND=\u0026#34;~./local/bin/site server --host 0.0.0.0 --port 8080\u0026#34; To access environment variables from your code, just get them from the environment with getEnv :: String -\u0026gt; IO String in System.Environment.\nIf some environment variables are critical to your application, here is an approach you can use:\n{-# LANGUAGE OverloadedStrings #-} module Main where import Data.Text.Lazy (pack) import System.Environment (getEnv) import Web.Scotty (get, html, scotty) envVar = getEnv \u0026#34;MY_VAR\u0026#34; main = do myVar \u0026lt;- envVar scotty 8080 $ do get \u0026#34;/\u0026#34; $ do html . pack $ \u0026#34;Hello world \u0026#34; ++ myVar This loads the environment variable in your main function and tests it. This way, the application will refuse to start with an helpful error message if MY_VAR is not defined.\nSpecify Stack package target You may have several packages in your application which can be time consuming when building them, if you don\u0026rsquo;t want to build every packages you can target a package by using the CC_HASKELL_STACK_TARGET environnement variable.\nCC_HASKELL_STACK_TARGET=\u0026#34;mypackage\u0026#34; Git Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n"},"title":"Deploy Haskell applications"},"/doc/deploy/application/haskell/tutorials/ekg-statsd-haskell-metrics/":{"data":{"":"","overview#Overview":"In Haskell, metrics are usually gathered with EKG.\nThe package ekg-statsd allows to push EKG metrics over statsd. EKG allows you to have access to GC metrics, make sure you compile your application with \u0026quot;-with-rtsopts=-T -N\u0026quot; to enable profiling.\nIf you\u0026rsquo;re using warp, you can use wai-middleware-metrics to report request distributions (request count, responses count aggregated by status code, responses latency distribution).\nConfigure logs for your Haskell application You need the following packages in your dependencies:\nekg-core ekg-statsd scotty wai-middleware-metrics Then add this Hello World code to your application and modify it to fit your needs:\n{-# LANGUAGE OverloadedStrings #-} import Control.Monad (when) import Network.Wai.Metrics (WaiMetrics, metrics, registerWaiMetrics) import System.Metrics (newStore, registerGcMetrics) import System.Remote.Monitoring.Statsd (defaultStatsdOptions, forkStatsd) import Web.Scotty handleMetrics :: IO WaiMetrics handleMetrics = do store \u0026lt;- newStore registerGcMetrics store waiMetrics \u0026lt;- registerWaiMetrics store sendMetrics \u0026lt;- maybe False (== \u0026#34;true\u0026#34;) \u0026lt;$\u0026gt; lookupEnv \u0026#34;ENABLE_METRICS\u0026#34; when sendMetrics $ do putStrLn \u0026#34;statsd reporting enabled\u0026#34; forkStatsd defaultStatsdOptions store return () return waiMetrics main = do waiMetrics \u0026lt;- handleMetrics scotty 8080 $ do middleware $ metrics waiMetrics get \u0026#34;/\u0026#34; $ html $ \u0026#34;Hello world\u0026#34; "},"title":"Using ekg-statsd to push custom metrics"},"/doc/deploy/application/java/by-framework/play-framework-1/":{"data":{"":"","configure-your-java--playframework-1-application#Configure your Java + Playframework 1 application":"Mandatory configuration The application must be located at the root of the git repository. The application needs listen on 0.0.0.0:8080 Select Play! version Clever Cloud supports Play! 1.2, 1.3, 1.4 and 1.5. You can select the Play! version for your application by creating a play1_version file in the /clevercloud folder (you must create it at the root of your application\u0026rsquo;s folder).\nThe play1_version file can contain one of the following values:\n1.2 or 12 for Play! 1.2. 1.3 or 13 for Play! 1.3. 1.4 or 14 for Play! 1.4. 1.5 or 15 for Play! 1.5. Play! configuration By default, your application will run on Clever Cloud with the option --%clevercloud.\nIt means that you can define special keys in your application.conf file that will be used only on Clever Cloud.\nYou can for example:\nset production mode so the files are compiled at startup time and the errors are logged in a file: %clevercloud.application.mode=prod set up a mysql database %clevercloud.db.url=jdbc:mysql://{yourcleverdbhost}/{dbname} %clevercloud.db.driver=com.mysql.jdbc.Driver %clevercloud.db.user={yourcleveruser} %clevercloud.db.pass={yourcleverpass} More information on playframework.com.\nHTTPS support HTTPS is handled by Clever Cloud ahead of your application, your application retrieves the traffic in plain http. To be able to use request.secure, you have to add XForwardedSupport=all in application.conf.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. To access environment variables from your code, you need to reference them in your application.conf file with my.option=${MY_VARIABLE} and then use the configuration item my.option in your application.\nMonitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n","overview#Overview":"Clever Cloud supports Play 1.x applications natively. This guide explains how to set up your application to run on Clever Cloud.\nPlay is an open source web application framework, written in Scala and Java, which follows the model‚Äìview‚Äìcontroller (MVC) architectural pattern. It aims at optimizing developer productivity by using convention over configuration, hot code reloading and display of errors in the browser.\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\n"},"title":"Deploy Play Framework 1.x"},"/doc/deploy/application/java/by-framework/play-framework-2/":{"data":{"":"","configure-your-java--playframework-2-application#Configure your Java + Playframework 2 application":"Mandatory configuration The application must be located at the root of the git repository. Starting from Play 2.4, your application needs Java 8 to run. Please read Available Java Versions. Your Java application needs to listen on 0.0.0.0:8080 Configuration file You can configure your application start command by adding a ./clevercloud/sbt.json file with the following fields:\n{ \u0026#34;deploy\u0026#34;:{ \u0026#34;goal\u0026#34;: \u0026#34;yourgoal\u0026#34; } } You can use the following properties:\nUsage Field Description Required deploy -\u0026gt; goal the goal/target and options you want to execute to deploy/run you project Available Java versions Simply set the environment variable CC_JAVA_VERSION to the version you want.\n‚ÑπÔ∏è \u0026lt;p\u0026gt;We are using Java version 11 by default.\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;New applications will have the \u0026lt;strong\u0026gt;CC_JAVA_VERSION\u0026lt;/strong\u0026gt; environment variable set to 11.\u0026lt;/p\u0026gt; \u0026lt;/p\u0026gt; Accepted values are 7, 8, 11, 17 or graalvm-ce (for GraalVM 21.0.0.2, based on OpenJDK 11.0).\nWe follow the official Java roadmap by supporting both LTS and latest non-LTS versions.\nWe are using OpenJDK distribution for mentionned Java versions.\n‚ö†Ô∏è \u0026lt;p\u0026gt;Every non-LTS versions where \u0026lt;i\u0026gt;Premier support\u0026lt;/i\u0026gt; ends will be removed without warning as you should be able to switch to the next available non-LTS version without any trouble.\u0026lt;/p\u0026gt; \u0026lt;/p\u0026gt; HTTPS support HTTPS is handled by Clever Cloud ahead of your application, your application retrieves the traffic in plain http. To be able to use request.secure, you have to add trustxforwarded=true in application.conf.\nKnown problems with Play! 2 Please read the following if your project fails with this error:\nsbt.ResolveException: unresolved dependency: play#sbt-plugin;2.0: not found\nSome versions of Play2 try to retrieve a nonexistent version of \u0026ldquo;sbt-plugin\u0026rdquo; which is required by the framework to work. You have two options to fix this problem:\nYou can set the \u0026ldquo;play.version\u0026rdquo; environment variable in the clevercloud/sbt.json file. For example, for Play 2.0.4:\n{ \u0026#34;deploy\u0026#34;: { \u0026#34;goal\u0026#34;: \u0026#34;-Dplay.version=2.0.4\u0026#34; } } Otherwise, you can modify plugins.sbt in the project folder of your app like the following:\n// Comment to get more information during initialization logLevel := Level.Warn // The Typesafe repository resolvers += \u0026#34;Typesafe repository\u0026#34; at \u0026#34;https://repo.typesafe.com/typesafe/releases/\u0026#34; // Use the Play sbt plugin for Play projects addSbtPlugin(\u0026#34;play\u0026#34; % \u0026#34;sbt-plugin\u0026#34; % \u0026#34;2.0.4\u0026#34;) // The important part of the configuration The two solutions do the job, you can pick your favorite.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. To access environment variables from your code, you need to reference them in your application.conf file with my.option=${MY_VARIABLE} and then use the configuration item my.option in your application.\nYou can also use the System.getenv(\u0026quot;MY_VARIABLE\u0026quot;) method. Be aware that it can return null.\nMonitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n","overview#Overview":"Clever Cloud supports Play! 2 applications natively. The following guide explains how to set up your application to run on Clever Cloud.\nPlay is an open source web application framework, written in Scala and Java, which follows the model‚Äìview‚Äìcontroller (MVC) architectural pattern. It aims at optimizing developer productivity by using convention over configuration, hot code reloading and display of errors in the browser.\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\n"},"title":"Deploy Play Framework 2"},"/doc/deploy/application/java/java-gradle/":{"data":{"":"","configure-your-java-application#Configure your Java application":"You must provide a clevercloud/gradle.json file (gradle.json file in clevercloud folder which is at the root of your repository) that contains at least the following:\n{ \u0026#34;deploy\u0026#34;: { \u0026#34;goal\u0026#34;: \u0026#34;grails:run\u0026#34; } } That is the only option you really need to supply.\nOptional configuration The full configuration can look like the following:\n{ \u0026#34;build\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;\u0026lt;string\u0026gt;\u0026#34;, \u0026#34;goal\u0026#34;: \u0026#34;\u0026lt;string\u0026gt;\u0026#34; }, \u0026#34;deploy\u0026#34;: { \u0026#34;goal\u0026#34;: \u0026#34;\u0026lt;string\u0026gt;\u0026#34; } } You can use the following properties:\nUsage Field Description Optional build -\u0026gt; type can be maven, gradle or ant Optional build -\u0026gt; goal is the target you want to use to build your project Required deploy -\u0026gt; goal the goal/target and options you want to execute to deploy/run you project ","custom-run-command#Custom run command":"If you need to run a custom command you can specify it through the CC_RUN_COMMAND environment variable. This will override the default way of runing your application.\nExample:\nCC_RUN_COMMAND=\u0026#34;java -jar somefile.jar \u0026lt;options\u0026gt;\u0026#34; Environment injection Clever Cloud can inject environment variables that are defined in the dashboard and by add-ons linked to your application.\nFor Java applications, the environment is injected in the System.getProperties() object.\nSo, to use a variable, you just need System.getProperties().getProperty(\u0026quot;MY_VARIABLE\u0026quot;).\nFor Groovy applications, just use the System.getProperty(\u0026quot;MY_VARIABLE\u0026quot;).\n","overview#Overview":"Clever Cloud offers you to run your Gradle projects. You can deploy this kind of project without changing your code, but running it on Clever Cloud needs some configuration files or environment variables, to add parameters like your gradle task for example.\nGradle is a project automation tool that builds upon the concepts of Apache Ant and Apache Maven and introduces a Groovy-based domain-specific language (DSL) instead of the more traditional XML form of declaring the project configuration.\nNote : like other runtimes, Java application need listen on 0.0.0.0:8080\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nAvailable Java versions Simply set the environment variable CC_JAVA_VERSION to the version you want.\n‚ÑπÔ∏è \u0026lt;p\u0026gt;We are using Java version 11 by default.\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;New applications will have the \u0026lt;strong\u0026gt;CC_JAVA_VERSION\u0026lt;/strong\u0026gt; environment variable set to 11.\u0026lt;/p\u0026gt; \u0026lt;/p\u0026gt; Accepted values are 7, 8, 11, 17 or graalvm-ce (for GraalVM 21.0.0.2, based on OpenJDK 11.0).\nWe follow the official Java roadmap by supporting both LTS and latest non-LTS versions.\nWe are using OpenJDK distribution for mentionned Java versions.\n‚ö†Ô∏è \u0026lt;p\u0026gt;Every non-LTS versions where \u0026lt;i\u0026gt;Premier support\u0026lt;/i\u0026gt; ends will be removed without warning as you should be able to switch to the next available non-LTS version without any trouble.\u0026lt;/p\u0026gt; \u0026lt;/p\u0026gt; ","the-gradle-wrapper#The Gradle Wrapper":"Since Gradle can come in many versions, Clever Cloud automatically support the [Gradle Wrapper|https://www.gradle.org/docs/current/userguide/gradle_wrapper.html].\nJust create and commit the gradlew file and the wrapper jar and properties files:\n./ clevercloud/ gradle.json gradlew gradle/wrapper/ gradle-wrapper.jar gradle-wrapper.properties src/ Monitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n"},"title":"Gradle deployment"},"/doc/deploy/application/java/java-jar/":{"data":{"":"","configure-your-java-application#Configure your Java application":"You must either have the CC_JAR_PATH environment variable containing the path to your jar or provide a clevercloud/jar.json file (jar.json file in clevercloud folder which is at the root of your repository) that contains at least the following:\n{ \u0026#34;deploy\u0026#34;: { \u0026#34;jarName\u0026#34;: \u0026#34;path/to/jar\u0026#34; } } That is the least you need to do. Note that path/to/jar must not start with a / and that the path should be relative to your repository\u0026rsquo;s root.\nBuild options You do not need to build and commit a JAR. Instead you can push your sources and build them with either gradle, ant or maven. Here is the configuration you need to provide in the clevercloud/jar.json file:\n{ \u0026#34;build\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;maven\u0026#34;|\u0026#34;gradle\u0026#34;|\u0026#34;ant\u0026#34;, \u0026#34;goal\u0026#34;: \u0026#34;package\u0026#34; } } The goal field is what will be asked to the build command, like mvn package for a maven build with the package goal.\nAn configuration example with a maven build that generates a JAR with embedded dependencies is:\n{ \u0026#34;build\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;maven\u0026#34;, \u0026#34;goal\u0026#34;: \u0026#34;package\u0026#34; }, \u0026#34;deploy\u0026#34;: { \u0026#34;jarName\u0026#34;: \u0026#34;target/myproject-1.0-jar-with-dependencies.jar\u0026#34; } } An example of full configuration You can pass extra arguments to the java command by using the environment variable CC_EXTRA_JAVA_ARGS and to your JAR by using CC_JAR_ARGS\nThe full configuration can look like the following:\n{ \u0026#34;build\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;\u0026lt;string\u0026gt;\u0026#34;, \u0026#34;goal\u0026#34;: \u0026#34;\u0026lt;string\u0026gt;\u0026#34; }, \u0026#34;deploy\u0026#34;: { \u0026#34;goal\u0026#34;: \u0026#34;\u0026lt;string\u0026gt;\u0026#34;, \u0026#34;jarName\u0026#34;: \u0026#34;\u0026lt;string\u0026gt;\u0026#34; } } You can use the following properties:\nUsage Field Description Optional build -\u0026gt; type can be maven, gradle or ant Optional build -\u0026gt; goal is the target you want to use to build your project Optional deploy -\u0026gt; goal the goal/target and options you want to execute to deploy/run you project Required build -\u0026gt; jarName jar file name of your application Monitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\n","custom-run-command#Custom run command":"If you need to run a custom command (or just pass options to the program), you can specify it through the CC_RUN_COMMAND environment variable. This will override the default way of running your application.\nExample:\nCC_RUN_COMMAND=\u0026#34;java -jar somefile.jar \u0026lt;options\u0026gt;\u0026#34; Environment injection Clever Cloud can inject environment variables that are defined in the dashboard and by add-ons linked to your application.\nFor Java applications, the environment is injected in the System.getProperties() object.\nSo, to use a variable, you just need System.getProperties().getProperty(\u0026quot;MY_VARIABLE\u0026quot;).\nFor Groovy applications, just use the System.getProperty(\u0026quot;MY_VARIABLE\u0026quot;).\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n","overview#Overview":"Clever Cloud offers you to run any Java ARchive file. You do not need to change your code, but running it on Clever Cloud needs some configuration files or environment variable to specify the the JAR path.\nNote : like other runtimes, Java application needs to listen on 0.0.0.0:8080\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nAvailable Java versions Simply set the environment variable CC_JAVA_VERSION to the version you want.\n‚ÑπÔ∏è \u0026lt;p\u0026gt;We are using Java version 11 by default.\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;New applications will have the \u0026lt;strong\u0026gt;CC_JAVA_VERSION\u0026lt;/strong\u0026gt; environment variable set to 11.\u0026lt;/p\u0026gt; \u0026lt;/p\u0026gt; Accepted values are 7, 8, 11, 17 or graalvm-ce (for GraalVM 21.0.0.2, based on OpenJDK 11.0).\nWe follow the official Java roadmap by supporting both LTS and latest non-LTS versions.\nWe are using OpenJDK distribution for mentionned Java versions.\n‚ö†Ô∏è \u0026lt;p\u0026gt;Every non-LTS versions where \u0026lt;i\u0026gt;Premier support\u0026lt;/i\u0026gt; ends will be removed without warning as you should be able to switch to the next available non-LTS version without any trouble.\u0026lt;/p\u0026gt; \u0026lt;/p\u0026gt; "},"title":"Jar deployment"},"/doc/deploy/application/java/java-maven/":{"data":{"":"","configure-your-java-application#Configure your Java application":"About Cargo To run your app, you can, for example, use plugins like cargo (Find it here). Your application must be set to listen on the port 8080.\nAvailable Java versions Simply set the environment variable CC_JAVA_VERSION to the version you want.\n‚ÑπÔ∏è \u0026lt;p\u0026gt;We are using Java version 11 by default.\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;New applications will have the \u0026lt;strong\u0026gt;CC_JAVA_VERSION\u0026lt;/strong\u0026gt; environment variable set to 11.\u0026lt;/p\u0026gt; \u0026lt;/p\u0026gt; Accepted values are 7, 8, 11, 17 or graalvm-ce (for GraalVM 21.0.0.2, based on OpenJDK 11.0).\nWe follow the official Java roadmap by supporting both LTS and latest non-LTS versions.\nWe are using OpenJDK distribution for mentionned Java versions.\n‚ö†Ô∏è \u0026lt;p\u0026gt;Every non-LTS versions where \u0026lt;i\u0026gt;Premier support\u0026lt;/i\u0026gt; ends will be removed without warning as you should be able to switch to the next available non-LTS version without any trouble.\u0026lt;/p\u0026gt; \u0026lt;/p\u0026gt; Mandatory configuration Option 1: JSON file in repository The clevercloud/maven.json (maven.json file in clevercloud folder which is at the root of your repository) file must contain the goal field to indicate how to start your application:\n{ \u0026#34;deploy\u0026#34;: { \u0026#34;goal\u0026#34;: \u0026#34;yourgoal\u0026#34; } } An example of what can be found as a goal value is:\n\u0026#34;-Dtest.active=false -Dexec.mainClass=\\\u0026#34;com.example.Main\\\u0026#34; assembly:jar-with-dependencies exec:java\u0026#34; Option 2: Environment variable If you don\u0026rsquo;t want to add a file to your repository, or if you\u0026rsquo;re using a monorepository with multiple applications in directories configured with the APP_FOLDER environment variable, you\u0026rsquo;ll probably prefer to use an environment variable for deployment configuration.\nSimply define MAVEN_DEPLOY_GOAL=\u0026quot;yourgoal\u0026quot; and it\u0026rsquo;s OK!\nEg. MAVEN_DEPLOY_GOAL=\u0026quot;spring-boot:run\u0026quot; for a Spring Boot application with spring-boot-maven-plugin\nOptional configuration The full configuration can look like the following:\n{ \u0026#34;build\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;\u0026lt;string\u0026gt;\u0026#34;, \u0026#34;goal\u0026#34;: \u0026#34;\u0026lt;string\u0026gt;\u0026#34; }, \u0026#34;deploy\u0026#34;: { \u0026#34;goal\u0026#34;: \u0026#34;\u0026lt;string\u0026gt;\u0026#34; } } You can use the following properties:\nUsage Field Description Optional build -\u0026gt; type can be maven, gradle or ant Optional build -\u0026gt; goal is the target you want to use to build your project Required deploy -\u0026gt; goal the goal/target and options you want to execute to deploy/run you project Specifying a profile If you need to specify a maven profile (either for the build or the deploy goal, you can add it in the goal section:\n\u0026#34;-Pmyprofile package\u0026#34; Or use the CC_MAVEN_PROFILES environment variable.\nEg. CC_MAVEN_PROFILES=\u0026quot;prod\u0026quot;.\n","custom-run-command#Custom run command":"If you need to run a custom command you can specify it through the CC_RUN_COMMAND environment variable. This will override the default maven run we use to run your application.\nExample:\nCC_RUN_COMMAND=\u0026#34;java -jar somefile.jar \u0026lt;options\u0026gt;\u0026#34; Monitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n","overview#Overview":"Clever Cloud offers you to run your Java Maven projects. You can deploy this kind of project without changing your code, but running it on Clever Cloud needs specific environment variables or configuration files, to add parameters like your targeted container for instance.\nNote : like other runtimes, Java application needs to listen on 0.0.0.0:8080\nMaven is essentially a project management and comprehension tool and as such provides a way to help with managing:\nBuilds Documentation Reporting Dependencies SCMs Releases Distribution Create an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\n"},"title":"Java Maven deployment"},"/doc/deploy/application/java/java-war/":{"data":{"":"","available-containers#Available containers":"Clever Cloud supports many servlet containers. The supported containers are listed below:\nApache Jetty Jboss Glassfish Payara Resin Wildfly Apache Tomcat 4.1 (TOMCAT4) Jetty 6.1 (JETTY6) Jboss 6.1 (JBOSS6) Glassfish 3.1 (GLASSFISH3) Payara 4.1 (PAYARA4) Resin 3.1 (RESIN3) WildFly 9.0.2 (WILDFLY9) Apache Tomcat 5.5 (TOMCAT5) Jetty 7.6 (JETTY7) Jboss AS 7.1 (JBOSS7) Glassfish 4.1 (GLASSFISH4) WildFly 17.0.1 (WILDFLY17) Apache Tomcat 6.0 (TOMCAT6) Jetty 8.1 (JETTY8) WildFly 23.0.2 (WILDFLY23) Apache Tomcat 7.0 (TOMCAT7) Jetty 9.0 (JETTY9) WildFly 24.0.1 (WILDFLY24) Apache Tomcat 8.8 (TOMCAT8) Create an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nAvailable Java versions Simply set the environment variable CC_JAVA_VERSION to the version you want.\n‚ÑπÔ∏è \u0026lt;p\u0026gt;We are using Java version 11 by default.\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;New applications will have the \u0026lt;strong\u0026gt;CC_JAVA_VERSION\u0026lt;/strong\u0026gt; environment variable set to 11.\u0026lt;/p\u0026gt; \u0026lt;/p\u0026gt; Accepted values are 7, 8, 11, 17 or graalvm-ce (for GraalVM 21.0.0.2, based on OpenJDK 11.0).\nWe follow the official Java roadmap by supporting both LTS and latest non-LTS versions.\nWe are using OpenJDK distribution for mentionned Java versions.\n‚ö†Ô∏è \u0026lt;p\u0026gt;Every non-LTS versions where \u0026lt;i\u0026gt;Premier support\u0026lt;/i\u0026gt; ends will be removed without warning as you should be able to switch to the next available non-LTS version without any trouble.\u0026lt;/p\u0026gt; \u0026lt;/p\u0026gt; ","available-containers-1#Available containers":"Here\u0026rsquo;s the list of the configuration values for the \u0026ldquo;container\u0026rdquo; field in war.json:\nValue Description GLASSFISH3 Use Glassfish 3.x (see https://glassfish.java.net/) GLASSFISH4 Use Glassfish 4.x (see https://glassfish.java.net/) JBOSS6 Use JBoss AS 6.x (see https://www.jboss.org/jbossas) JBOSS7 Use JBoss AS 7.x (see https://www.jboss.org/jbossas) RESIN3 Use Resin AS 3.x (see https://www.caucho.com/resin-3.1/doc/) RESIN4 Use Resin AS 4.x (see https://www.caucho.com/resin-4/doc/) JETTY6 Use Jetty servlet container 6.x (see https://jetty.codehaus.org/jetty/) JETTY7 Use Jetty servlet container 7.x (see https://www.eclipse.org/jetty/) JETTY8 Use Jetty servlet container 8.x (see https://www.eclipse.org/jetty/) JETTY9 Use Jetty servlet container 9.x (see https://www.eclipse.org/jetty/documentation/current/) TOMCAT4 Use Tomcat servlet container 4.x (see https://tomcat.apache.org/) TOMCAT5 Use Tomcat servlet container 5.x (see https://tomcat.apache.org/) TOMCAT6 Use Tomcat servlet container 6.x (see https://tomcat.apache.org/) TOMCAT7 Use Tomcat servlet container 7.x (see https://tomcat.apache.org/) TOMCAT8 Use Tomcat servlet container 8.x (see https://tomcat.apache.org/) PAYARA4 Use Payara servlet container 4.x (see https://www.payara.fish/) WILDFLY9 Use Wildfly servlet container 9.x (see https://wildfly.org/) WILDFLY17 Use Wildfly servlet container 17.x (see https://wildfly.org/) WILDFLY23 Use Wildfly servlet container 23.x (see https://wildfly.org/) ","configure-your-java-application#Configure your Java application":" ‚ö†Ô∏è You must provide a clevercloud/war.json file in your application repository. Full configuration example Here\u0026rsquo;s what your configuration file can look like:\n{ \u0026#34;build\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;maven\u0026#34;, \u0026#34;goal\u0026#34;: \u0026#34;package\u0026#34; }, \u0026#34;deploy\u0026#34;: { \u0026#34;container\u0026#34;: \u0026#34;TOMCAT8\u0026#34;, \u0026#34;war\u0026#34;: [ { \u0026#34;file\u0026#34;: \u0026#34;target/my-app-1.0-SNAPSHOT.war\u0026#34;, \u0026#34;context\u0026#34;: \u0026#34;/app1\u0026#34;, \u0026#34;checkMe\u0026#34;: \u0026#34;/app1/ping\u0026#34; }, { \u0026#34;file\u0026#34;: \u0026#34;my-second-app.war\u0026#34;, \u0026#34;context\u0026#34;: \u0026#34;/app2\u0026#34;, \u0026#34;checkMe\u0026#34;: \u0026#34;/app2/web/foobar\u0026#34; } ] } } Ok, but what does all this configuration mean? Let\u0026rsquo;s start with the mandatory part { \u0026#34;deploy\u0026#34;: { \u0026#34;container\u0026#34;:\u0026#34;\u0026lt;string\u0026gt;\u0026#34;, \u0026#34;war\u0026#34;: [ { \u0026#34;file\u0026#34;: \u0026#34;\u0026lt;string\u0026gt;\u0026#34;, \u0026#34;context\u0026#34;: \u0026#34;/\u0026lt;string\u0026gt;\u0026#34;, \u0026#34;checkMe\u0026#34;: \u0026#34;/\u0026lt;string\u0026gt;\u0026#34; } ] } } Usage Field Description Required container Name of the container to use. Should contain one of the values inside parentheses in the containers table (in uppercase and all). Required file Should contain the path of the war/ear file relative to your application root. Optional context Must start with a slash (/), can be \"/\". Defines the base path you want your app to be under. If your app has a /foobar endpoint, it will be available under the /{my-context}/foobar path. Not needed for an ear file. The default value for a war is the name of the war without the extensions: helloworld-1.0.war will be deployed under the /helloworld-1.0 context. Optional checkMe This field is recommended A path to GET in order to test if the application is really running. By default we will consider that the application is up if the container is up. With this option, we will try to GET /{checkMe} for each one of your wars and consider the app down until every single checkMe path that replies a 200. Let Clever Cloud build your application The mandatory part alone is enough‚Ä¶ if you directly push a dry war file to deploy. You might want to just push your code to Clever Cloud and let us build the app and generate the war.\nThat you can do, by setting the \u0026ldquo;build\u0026rdquo; field object in the war.json file:\n{ \u0026#34;build\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;\u0026lt;string\u0026gt;\u0026#34;, \u0026#34;goal\u0026#34;: \u0026#34;\u0026lt;string\u0026gt;\u0026#34; } } Usage Field Description Required type The tool you want to use to build your app Can be \"maven\", \"gradle\", \"sbt\" or \"ant\" Required goal The goal you want the tool to execute. Basically, for maven, you want to put \"package\" in here. ","custom-run-command#Custom run command":"If you need to run a custom command you can specify it through the CC_RUN_COMMAND environment variable. This will override the default way of running your application.\nExample:\nCC_RUN_COMMAND=\u0026#34;java -jar somefile.jar \u0026lt;options\u0026gt;\u0026#34; Monitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n","overview#Overview":"Clever Cloud allows you to run WAR or EAR applications. You can deploy these projects without changing your code. We just need a configuration file with your targeted container.\nIn JEE, application modules are packaged as EAR and WAR based on their purpose.\nWAR: Web modules which contains Servlet class files, JSP FIles, supporting files, GIF and HTML files are packaged as JAR file with .war extension.\nEAR: .war and .jar files are packaged as JAR file with .ear extension and deployed into Application Server. EAR file contains configuration such as application security role mapping, EJB reference mapping and context root url mapping of web modules.\nNote : like other runtimes, Java application needs to listen on 0.0.0.0:8080\n"},"title":"Java War/Ear deployment"},"/doc/deploy/application/javascript/by-framework/meteor/":{"data":{"":"","configure-your-meteorjs-based-application#Configure your Meteor.js based application":"Mandatory configuration Set up environment variables To run your Meteor.js application you need a few mandatory environment variables:\nMONGO_URL: this is the mongo uri you can find in your mongodb\u0026rsquo;s dashboard, it has to start with mongodb:// ROOT_URL: this is your application\u0026rsquo;s root url. It has to start with http:// or https:// PORT: keep the current value of 8080 With Meteor 2.6.n comes MongoDB 5.n and the new npm driver. You need to append ?directConnection=true in your MONGO_URL to avoid the new mongo driver Service Discovery feature.\nOptional Meteor settings as environment variable Some application require a settings.json file to store api keys and other various private and public Meteor variables. You can declare a METEOR_SETTINGS environment variable and past the content of the json file as the value of this key.\n","migrate-from-a-nodejs-instance#Migrate from a Node.js instance":"If you want to migrate from your classic node.js app to a meteor application, contact our support in the console or at support@clever-cloud.com with the application id.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n","overview#Overview":"Clever Cloud allows you to deploy any Meteor.js application. This page will explain how to set up your application to run it on our services.\nBe sure your .meteor folder is in your git repository.\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\n","specify-required-nodejs-version#Specify required Node.js version":"Since building with the latest version of Node.js might fail, you should specify in the package.json file of the application the version needed for your Meteor application ; as shown in Deploying Node.js apps documentation. To find out which version is required by your application type the following command meteor node -v inside root folder.\nCurrently with Meteor 2.6.1 the Node.js version is 14.18.3 so you should add the following inside the package.json file.\n... \u0026#34;engines\u0026#34;: { \u0026#34;node\u0026#34;: \u0026#34;14.18.3\u0026#34; }, ... You may change the node version value according to the application requirements.\nActivate the dedicated build Meteor.js uses a lot of memory during the build. You most likely will need to activate the dedicated build feature and set your vertical scaling size at least to M.\nIf your build still fails after you enabled the feature, please contact us on the support so we can set you a bigger scaler.\nAutomatic HTTPS redirection You can use the force-ssl atmosphere package to redirect your users to the HTTPS version of your application.\nCustom start parameters If you want to set custom start parameters, the main entry point of built meteor applications is: .build/bundle/main.js. Add in the scripts.start field of the package.json: node .build/bundle/main.js \u0026lt;parameters\u0026gt;\nDeployment process on Clever Cloud At each deployment, the needed Meteor.js version will be read from .meteor/release and installed. Your application will then be built using meteor build --server-only and deployed from the files created by this command.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. Git Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nOplog Tailing Oplog tailing is supported on dedicated databases (starting from Hazelnut size). Contact the support to enable oplog. Once enabled, set the following environment variable:\nMONGO_OPLOG_URL: mongodb://[‚Ä¶]mongodb.services.clever-cloud.com:{DB_PORT}/local?authSource={DB_NAME} Since Meteor 2.6.n the mongo driver detect the MONGO_OPLOG_URL by itself and you should not add this to your environment variables.\n"},"title":"Deploy Meteor.js applications"},"/doc/deploy/application/javascript/by-framework/nodejs/":{"data":{"":"","deployment-video#Deployment video":"","overview#Overview":"Clever Cloud allows you to deploy any Node.js application. We do support any stable version of node \u0026gt;= 0.6. This page will explain you how to set up your application to run it on our service.\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nConfigure your Node.js application Mandatory configuration Be sure that:\nyou listen on HTTP port 0.0.0.0:8080 you have a package.json file your package.json either has a scripts.start or main field the folder /node_modules is mentioned in your .gitignore file you enable production mode by setting the environment variable NODE_ENV=production Select node version You can use the engines.node field in package.json to define the wanted version, if not provided we will use the latest LTS version.\nAbout package.json The package.json file should look like the following:\n{ \u0026#34;name\u0026#34; : \u0026#34;myapp\u0026#34;, \u0026#34;version\u0026#34; : \u0026#34;0.1.0\u0026#34;, \u0026#34;main\u0026#34; : \u0026#34;myapp.js\u0026#34;, \u0026#34;scripts\u0026#34; : { \u0026#34;start\u0026#34; : \u0026#34;node myapp.js\u0026#34; }, \u0026#34;engines\u0026#34; : { \u0026#34;node\u0026#34; : \u0026#34;^10\u0026#34; } } The json fields The following table describes each of the fields formerly mentioned.\nUsage Field Description At least one scripts.start This field provides a command line to run. If defined, npm start will be launched. Otherwise we will use the main field. See below to know how and when to use the scripts.start field main This field allows you to specify the file you want to run. It should be the relative path of the file starting at the project's root. It's used to launch your application if scripts.start is not defined. Optional engines.node Sets the node engine version you app runs with. Any \"A.B.x\" or \"^A.B.C\" or \"~A.B\" version will lead to run the application with the latest \"A.B\" local version. If this field is missing, we use the latest LTS available. If you want to ensure that your app will always run, please put something of the form \"^A.B.C\" and avoid setting only \"\u003e=A.B.C\". NPM modules dependencies If you need some modules you can easily add some with the dependencies field in your package.json. Here is an example:\n{ \u0026#34;name\u0026#34; : { ... }, \u0026#34;engines\u0026#34;: { ... }, \u0026#34;dependencies\u0026#34;: { \u0026#34;express\u0026#34;: \u0026#34;3.x\u0026#34;, \u0026#34;socket.io\u0026#34;: \u0026#34;0.9.x\u0026#34;, \u0026#34;underscore\u0026#34;: \u0026#34;1.4.3\u0026#34; } } Private dependencies If your application has private dependencies, you can add a Private SSH Key.\nSupported package managers We support npm and yarn as package managers.\nThe environment variable CC_NODE_BUILD_TOOL allows you to define which build tool you want to use. The default value is set to npm but it can be any of these values:\nnpm-install: uses npm install npm-ci: uses npm ci npm: Defaults to npm-install for now yarn: uses yarn yarn2: uses yarn@2 custom: uses the build tool set with CC_CUSTOM_BUILD_TOOL If a yarn.lock file exists in your application\u0026rsquo;s main folder, then the yarn package manager will be automatically used. To overwrite this behaviour, either delete the yarn.lock file or set the CC_NODE_BUILD_TOOL environment variable.\nIf none of the above package managers fit your needs, you can put your own using CC_CUSTOM_BUILD_TOOL.\nAutomatic HTTPS redirection You can use the X-Forwarded-Proto header to enable it.\nIf you are using Express.js, you can use express-sslify by adding:\napp.use(enforce.HTTPS({ trustProtoHeader: true })); Custom build phase The build phase installs the dependencies and executes the scripts.install you might have defined in your package.json. It\u0026rsquo;s meant to build the whole application including dependencies and / or assets (if there are any).\nAll the build part should be written into the scripts.install field of the package.json file. You can also add a custom bash script and execute it with:¬†\u0026quot;scripts.install\u0026quot;: \u0026quot;./build.sh\u0026quot;\nFor more information, see the npm documentation\nDevelopment Dependencies Development dependencies will not be automatically installed during the deployment. You can control their installation by using the CC_NODE_DEV_DEPENDENCIES environment variable which takes install or ignore as its value. This variable overrides the default behaviour of NODE_ENV.\nHere are various scenarios:\nCC_NODE_DEV_DEPENDENCIES=install: Development dependencies will be installed. CC_NODE_DEV_DEPENDENCIES=ignore: Development dependencies will not be installed. NODE_ENV=production, CC_NODE_DEV_DEPENDENCIES=install: Development dependencies will be installed. NODE_ENV=production, CC_NODE_DEV_DEPENDENCIES=ignore: Development dependencies will not be installed. NODE_ENV=production: Package manager (NPM / Yarn) default behaviour. Development dependencies will not be installed. Neither NODE_ENV nor CC_NODE_DEV_DEPENDENCIES are defined: Package manager (NPM / Yarn) default behaviour. Development dependencies will be installed. Custom run command If you need to run a custom command (or just pass options to the program), you can specify it through the CC_RUN_COMMAND environment variable.\nFor instance, for a meteor application, you can have CC_RUN_COMMAND=\u0026quot;node .build/bundle/main.js \u0026lt;options\u0026gt;\u0026quot;.\nCustom run phase The run phase is executed from scripts.start if defined. This phase is only meant to start your application and should not contain any build task.\nUse private repositories with CC_NPM_REGISTRY and NPM_TOKEN Since April 2015, npmjs.com allows you to have private repositories. If you want to use a private repository on npmjs.com (the default one), you only need to provide the token part. To register your auth token, you need to add to your application the NPM_TOKEN environment variable.\nNPM_TOKEN=\u0026#34;00000000-0000-0000-0000-000000000000\u0026#34; Then, the .npmrc file will be created automatically for your application, with the registry url and the token.\n//registry.npmjs.org/:_authToken=00000000-0000-0000-0000-000000000000 To authenticate to another registry (like github), you can use the CC_NPM_REGISTRY environment variable to define the registry\u0026rsquo;s host.\nCC_NPM_REGISTRY=\u0026#34;npm.pkg.github.com\u0026#34; NPM_TOKEN=\u0026#34;00000000-0000-0000-0000-000000000000\u0026#34; //npm.pkg.github.com/:_authToken=00000000-0000-0000-0000-000000000000 Monitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. To access environment variables from your code, you can use process.env.MY_VARIABLE.\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\n","troubleshooting-your-application#Troubleshooting your application":"If you are often experiencing auto restart of your Node.js instance, maybe you have an application crashing that we automatically restart. To target this behaviour, you can gracefully shutdown with events handlers on uncaughtExeption unhandledRejection sigint and sigterm and log at this moment so you can fix the problem.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n"},"title":"Deploy Node.js applications"},"/doc/deploy/application/javascript/tutorials/node-js-mongo-db/":{"data":{"":"","configure-your-database#Configure your database":"Make sure you have created a MongoDB add-on in the Clever Cloud console, and that it\u0026rsquo;s linked to your application. When it\u0026rsquo;s done, you will be able to access all of your add-on environment variables from the application.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n","configure-your-nodejs--mongodb-application#Configure your Node.js + MongoDB application":"My application does not exists already If you want to test easily a Node.js deployment on Clever Cloud, just clone the GitHub repo and jump to My application already exists\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. Git Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\n","overview#Overview":"The goal of this article is to show you how to deploy a Node.js + MongoDB application on Clever Cloud. The application is a very simple todo list. You can add and delete values. More information about the application:\nGitHub repo Clever Cloud demo Create an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\n"},"title":"Node.js + MongoDB sample application"},"/doc/deploy/application/javascript/tutorials/node-statsd-nodejs-metrics/":{"data":{"":"","overview#Overview":"In Node.js, you can use the node-statsd package to push custom metrics.\nConfigure metrics for your Node.js application You only need the node-statsd package in your dependencies:\nThen add this Hello World code to your application and modify it to fit your needs:\n// npm install node-statsd const StatsD = require(\u0026#39;node-statsd\u0026#39;), client = new StatsD(); // Increment: Increments a stat by a value (default is 1) client.increment(\u0026#39;my_counter\u0026#39;); // Gauge: Gauge a stat by a specified amount client.gauge(\u0026#39;my_gauge\u0026#39;, 123.45); "},"title":"Push custom metrics with node-statsd for Node.js"},"/doc/deploy/application/php/php-apps/":{"data":{"":"","deploy-on-clever-cloud#Deploy on Clever Cloud":"Application deployment on Clever Cloud is via Git or FTP.\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nFTP Deployment Make sure you have Filezilla or an other FTP software installed in your machine.\nWhen you have chosen to deploy your application via FTP at the application creation, a free FS Bucket has been created with an ID matching your application\u0026rsquo;s ID.\nYou will find the FTP credentials in the configuration tab of this particular FS Bucket.\nJust follow the instructions of your FTP Software to send code to Clever Cloud.\n‚ö†Ô∏è An FTP application is automatically started once the application is created, even if no code has been sent. Refer to our Quick Start - FTP deployment for more details.\n","overview#Overview":"PHP is a widely-used general-purpose scripting language that is especially suited for Web development and can be embedded into HTML.\nPHP is available on our platform with the branches 5.6, 7.2, 7.3, 7.4, 8.0, 8.1 and 8.2. You can use FTP or Git to deploy your applications.\nThe HTTP server is Apache 2, and the PHP code is executed by PHP-FPM.\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nConfigure your PHP application Choose your PHP version Set the CC_PHP_VERSION environment variable to one of the following values:\n5.6 7.2 7.3 7.4 8.0 8.1 8.2 All new PHP applications are created with a default CC_PHP_VERSION, set to 7, which means latest php 7 version available.\nYou can of course change it whenever you want then redeploy your application to use the version you want. We only support values based on the first two digits X.Y not X.Y.Z.\nThe configuration file for your PHP application must be /clevercloud/php.json, that is a php.json file in a /clevercloud folder at the root of your application.\nChange the webroot Since one of the best practices of PHP development is to take the libraries and core files outside the webroot, you may want to set another webroot than the default one (the root of your application).\nUsing an environment variable Add a new environment variable called CC_WEBROOT and set /public as its value.\nclever env set CC_WEBROOT /public Using a configuration file To change the webroot, just set the key webroot in the deploy part of the configuration file clevercloud/php.json with the absolute path (from the root of your application) of your new public folder.\nIn the following example we want to set the webroot to the folder /public:\n{ \u0026#34;deploy\u0026#34;: { \u0026#34;webroot\u0026#34;: \u0026#34;/public\u0026#34; } } ‚ö†Ô∏è Please note the absolute path style: `/public`. The change of the webroot will be rejected during the deployment if the target directory does not exist or is not a directory. \u0026lt;/p\u0026gt; Change PHP settings PHP settings Most PHP settings can be changed using a .user.ini file.\nIf you want the settings to be applied to the whole application, you should put this file in your webroot. If you did not change it (see above), then your webroot is the root of the repository.\nIf you put the .user.ini file in a sub-directory; settings will be applied recursively starting from this sub-directory.\nNote: .user.ini files are not loaded by the PHP CLI by default.\nTo do so, you can use a tiny trick:\nAdd the PHP_INI_SCAN_DIR=:/home/bas environment variable in your application. This way the PHP CLI will try to find a .ini file in /home/bas after loading all other configuration files.\nRun the following script in a deployment hook (e.g. in the pre-run hook):\n#!/bin/bash -l test -f ${APP_HOME}${CC_WEBROOT}/.user.ini \u0026amp;\u0026amp; \\ cp ${APP_HOME}${CC_WEBROOT}/.user.ini ${HOME}/user.ini Timezone configuration All instances on Clever Cloud run on the UTC timezone. We recommend to handle all your dates in UTC internally, and only handle timezones when reading or displaying dates.\nAdditionally, you can set PHP\u0026rsquo;s time zone setting with .user.ini. For instance, to use the french time zone, edit .user.ini to add this line:\ndate.timezone=Europe/Paris Header injection Usually, you can use an .htaccess file to create / update / delete headers. You won\u0026rsquo;t be able to do it from the .htaccess file if the headers come from a .php file, because php-fpm ignores the mod_headers plugin. It works fine for static files directly served by apache.\nSo if you need to inject headers on HTTP responses (for instance for CORS), you have to do it from PHP (you can\u0026rsquo;t do it from .htaccess).\nheader(\u0026#34;Access-Control-Allow-Origin: *\u0026#34;); If you want to keep this separate from your application, you can configure the application to execute some code on every request.\nIn .user.ini, add the following line (you need to create inject_headers.php first):\nauto_prepend_file=./inject_headers.php Please refer to the official documentation for more information.\nYou can review the available directives; all the PHP_INI_USER, PHP_INI_PERDIR, and PHP_INI_ALL directives can be set from within .user.ini.\nclevercloud/php.json settings Other settings than the one mentioned above can be changed by adding the following line in clevercloud/php.json:\n{ \u0026#34;configuration\u0026#34;: { \u0026#34;my.setting\u0026#34;: \u0026#34;value\u0026#34; } } Here is the list of available settings:\nmbstring.func_overload pm.max_children Note: You can send a request to the support if you need to change a setting which cannot be changed via a .user.ini file and is not in this list.\nMemory Limit When php-fpm spawns a worker it allocates a smaller part of the application\u0026rsquo;s memory to the worker, here is the allocated memory for each flavor:\nFlavor Memory Limit Pico 64M Nano 64M XS 128M S 256M M 384M L 512M XL 768M 2XL 1024M 3XL 1536M 4XL+ 2048M To change this limit you can define MEMORY_LIMIT environment variable.\nIf you define a limit exceeding the application memory it will use the default one.\npm.max_children: Maximum PHP Children per instance You can fix the maximum number of PHP running processes per instance by setting pm.max_children (see above).\nThis setting is useful if you need to limit the number of running processes according to the maximum connections limit of your MySQL or PostgreSQL database.\nBy default, pm.max_children is set to 10.\nConfigure Apache We use Apache 2 as HTTP Server. In order to configure it, you can create a .htaccess file and set directives inside this file.\nhtaccess The .htaccess file can be created everywhere in you app, depending of the part of the application covered by directives.\nHowever, directives who applies to the entire application must be declared in a .htaccess file to the application root.\nhtpasswd You can configure basic authentication using environment variables. You will need to set CC_HTTP_BASIC_AUTH variable to your own login:password pair. If you need to allow access to multiple users, you can create additional environment CC_HTTP_BASIC_AUTH_n (where n is a number) variables.\nDefine a custom HTTP timeout You can define the timeout of an HTTP request in Apache using the HTTP_TIMEOUT environment variable.\nBy default, the HTTP timeout is se to 3 minutes (180 seconds).\nForce HTTPS traffic Load balancers handle HTTPS traffic ahead of your application. You can use the X-Forwarded-Proto header to know the original protocol (http or https).\nPlace the following snippet in a .htaccess file to ensure that your visitors only access your application through HTTPS.\nRewriteEngine On RewriteCond %{HTTPS} off RewriteCond %{HTTP:X-Forwarded-Proto} !https RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] Prevent Apache to redirect HTTPS calls to HTTP when adding a trailing slash DirectorySlash is enabled by default on the PHP scalers, therefore Apache will add a trailing slash to a resource when it detects that it is a directory.\nE.g. if foobar is a directory, Apache will automatically redirect http://example.com/foobar to http://example.com/foobar/.\nUnfortunately the module is unable to detect if the request comes from a secure connection or not. As a result it will force an HTTPS call to be redirected to HTTP.\nIn order to prevent this behavior, you can add the following statements in a .htaccess file:\nDirectorySlash Off RewriteEngine On RewriteCond %{REQUEST_FILENAME} -d RewriteRule ^(.+[^/])$ %{HTTP:X-Forwarded-Proto}://%{HTTP_HOST}/$1/ [R=301,L,QSA] These statements will keep the former protocol of the request when issuying the redirect. Assuming that the header X-Forwarded-Proto is always filled (which is the case on our platform).\nIf you want to force all redirects to HTTPS, you can replace %{HTTP:X-Forwarded-Proto} with https.\nChange the FastCGI module You can choose between two FastCGI modules, fastcgi and proxy_fcgi.\nTo choose between these two modules you must use the CC_CGI_IMPLEMENTATION environment variable with fastcgi or proxy_fcgi as a value.\n‚ÑπÔ∏è We recommend preferring proxy_fcgi over fastcgi. The fastcgi implementation is not maintained anymore, but has been kept as default to prevent unexpected behaviors with historical applications. If you have issues with downloading content, it could be related to the fastcgi module not working correctly in combination with the deflate module, as the Content-Length header is not updated to the new size of the encoded content.\nTo resolve this issue, we advise you to switch the value of CC_CGI_IMPLEMENTATION from default to proxy_fcgi.\nEnvironment injection As mentionned above, Clever Cloud can inject environment variables that are defined in the dashboard and by add-ons linked to your application.\nTo access the variables, use the getenv function. So, for example, if your application has a postgresql add-on linked:\n$host = getenv(\u0026#34;POSTGRESQL_ADDON_HOST\u0026#34;); $database = getenv(\u0026#34;POSTGRESQL_ADDON_DB\u0026#34;); $username = getenv(\u0026#34;POSTGRESQL_ADDON_USER\u0026#34;); $password = getenv(\u0026#34;POSTGRESQL_ADDON_PASSWORD\u0026#34;); $pg = new PDO(\u0026#34;postgresql:host={$host};dbname={$database}, $username, $password); ‚ö†Ô∏è \u0026lt;p\u0026gt;Environment variables are displayed in the default output of `phpinfo()`. If you want to use `phpinfo()` without exposing environment variables, you have to call it this way: \u0026lt;/p\u0026gt; \u0026lt;code\u0026gt;phpinfo(INFO_GENERAL | INFO_CREDITS | INFO_CONFIGURATION | INFO_MODULES | INFO_LICENSE)\u0026lt;/code\u0026gt; \u0026lt;/p\u0026gt; Composer We support Composer build out of the box. You just need to provide a composer.json file in the root of your repository and we will run composer.phar install --no-ansi --no-progress --no-interaction --no-dev for you.\nYou can also set the CC_COMPOSER_VERSION to 1 or 2 to select the composer version to use.\n‚ÑπÔ∏è If you encounter any issues, add your own `composer.phar` file in the root of your repository which will override the version we use. You can perform your own composer.phar install by using the Post Build hook.\nExample of a composer.json file:\n{ \u0026#34;require\u0026#34;: { \u0026#34;laravel/framework\u0026#34;: \u0026#34;4.1.*\u0026#34;, \u0026#34;ruflin/Elastica\u0026#34;: \u0026#34;dev-master\u0026#34;, \u0026#34;shift31/laravel-elasticsearch\u0026#34;: \u0026#34;dev-master\u0026#34;, \u0026#34;natxet/CssMin\u0026#34;: \u0026#34;dev-master\u0026#34; }, \u0026#34;repositories\u0026#34;: [ { \u0026#34;type\u0026#34;: \u0026#34;vcs\u0026#34;, \u0026#34;url\u0026#34;: \u0026#34;https://GitHub.com/timothylhuillier/laravel-elasticsearch.git\u0026#34; } ], \u0026#34;autoload\u0026#34;: { \u0026#34;classmap\u0026#34;: [ \u0026#34;app/controllers\u0026#34;, \u0026#34;app/models\u0026#34;, \u0026#34;app/database/migrations\u0026#34;, \u0026#34;app/database/seeds\u0026#34; ], \u0026#34;psr-0\u0026#34;: { \u0026#34;SomeApp\u0026#34;: \u0026#34;app\u0026#34; } }, \u0026#34;config\u0026#34;: { \u0026#34;preferred-install\u0026#34;: \u0026#34;dist\u0026#34; }, \u0026#34;minimum-stability\u0026#34;: \u0026#34;dev\u0026#34; } Example of a minimalist PHP application using composer and custom scripts: php-composer-demo\nDevelopment Dependencies Development dependencies will not be automatically installed during the deployment. You can control their installation by using the CC_PHP_DEV_DEPENDENCIES environment variable which takes install value.\nAny other value than install will prevent developement dependencies from being installed.\nGitHub rate limit Sometimes, you can encounter the following error when downloading dependencies:\nFailed to download symfony/symfony from dist: Could not authenticate against GitHub.com To prevent this download dependencies\u0026rsquo;s fails that is often caused by rate limit of GitHub API while deploying your apps, we recommend you to add oauth token in your composer configuration file or in separate file named as described in composer FAQ (API rate limit and OAuth tokens).\nYou can find more documentation about composer configuration at getcomposer.com.\nExample You use Artisan to manage your project and you want to execute artisan migrate before running your app.\nTo do this, we use a post build hook, you have to set a new environment variable on your Clever application as following:\nCC_POST_BUILD_HOOK=php artisan migrate --force Note: You must add the execute permission to your file (chmod u+x yourfile) before pushing it.\nFrameworks and CMS The following is the list of tested CMS by our team.\nIt\u0026rsquo;s quite not exhaustive, so it does not mean that other CMS can\u0026rsquo;t work on the Clever Cloud platform.\nWordPress Prestashop Dokuwiki Joomla SugarCRM Drupal Magento Status.net Symfony Thelia Laravel Sylius Available extensions and modules You can check enabled extensions and versions by viewing our phpinfo() example for:\nPHP 5.6. PHP 7.2. PHP 7.3. PHP 7.4. PHP 8.0. PHP 8.1. PHP 8.2. Warning: some extensions need to be enabled explicitely\nThe following extensions are enabled by default: amqp, imagick, libsodium, mcrypt, memcached, memcache, mongodb, opcache, redis, solr, ssh2, zip, gRPC, protobuf, Pspell.\nYou can add DISABLE_\u0026lt;extension_name\u0026gt;: true in your environment variable to disable them.\nIf you have a request about modules, feel free to contact our support at support@clever-cloud.com.\n‚ö†Ô∏è On PHP 7, the memcache extension is not available; only memcached is available Enable specific extensions Some extensions need to be enabled explicitly. To enable these extensions, you\u0026rsquo;ll need to set the corresponding environment variable:\nAPCu: set ENABLE_APCU to true.\nAPCu is an in-memory key-value store for PHP. Keys are of type string and values can be any PHP variables.\nCouchbase: set ENABLE_COUCHBASE and ENABLE_PCS to true\nCouchbase is a document database with a SQL-based query language that is engineered to deliver performance at scale.\nElastic APM Agent: set ENABLE_ELASTIC_APM_AGENT to true (default if ELASTIC_APM_SERVER_URL is defined).\nElastic APM agent is Elastic\u0026rsquo;s APM agent extension for PHP. The PHP agent enables you to trace the execution of operations in your application, sending performance metrics and errors to the Elastic APM server. Warning: This extension is available starting PHP 7.2.\nEvent: set ENABLE_EVENT to true.\nEvent is an extension to schedule I/O, time and signal based events.\nGEOS: set ENABLE_GEOS to true.\nGEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).\nGnuPG: set ENABLE_GNUPG to true.\nGnuPG is an extension that provides methods to interact with GNU Privacy Guard (OpenPGP implementation).\nIonCube: set ENABLE_IONCUBE to true.\nIonCube is a tool to obfuscate PHP code. It\u0026rsquo;s often used by paying Prestashop and WordPress plugins.\nMailparse: set ENABLE_MAILPARSE to true.\nMailparse is an extension for parsing and working with email messages. It can deal with RFC 822 and RFC 2045 (MIME) compliant messages.\nMongo: set ENABLE_MONGO to true.\nMongoDB is a NoSQL Database. This extension allows to use it from PHP. Warning: this extension is now superseded by the mongodb extension. We provide it for backward compatibility.\nNewRelic: set ENABLE_NEWRELIC to true.\nNewrelic Agent for PHP. Newrelic is a software analytics tool.\nOAuth: set ENABLE_OAUTH to true.\nOAuth consumer extension. OAuth is an authorization protocol built on top of HTTP.\nPCS: set ENABLE_PCS to true.\nPCS provides a fast and easy way to mix C and PHP code in your PHP extension.\nRdkafka: set ENABLE_RDKAFKA to true.\nPHP-rdkafka is a thin librdkafka binding providing a working PHP 5 / PHP 7 Kafka client.\nSqreen: The Sqreen agent is started automatically after adding the environment variables (SQREEN_API_APP_NAME and SQREEN_API_TOKEN).\nUopz: set ENABLE_UOPZ to true. The uopz extension is focused on providing utilities to aid with unit testing PHP code.\nUploadprogress: set ENABLE_UPLOADPROGRESS to true. The uploadprogress extension is used to track the progress of a file download.\nXDebug: set ENABLE_XDEBUG to true.\nXDebug is a debugger and profiler tool for PHP.\nConfigure the session storage By default, a FS Bucket is created for each PHP applications. It is used to store session files, so that session data is available on each instance.\nThis FS Bucket is also used to store TMP files by default. You can change this behaviour by setting the TMPDIR environment variable. You can set it to /tmp for example.\nSpeed up or disable the session FS Bucket You can set the following environment variables:\nCC_PHP_ASYNC_APP_BUCKET=async to mount the session FS Bucket with the async option. It speeds up the FS Bucket usage, but it can corrupt files in case of a network outage. CC_PHP_DISABLE_APP_BUCKET=(true|yes|disable) to entirely prevent the session FS Bucket from being mounted. Use this if you don\u0026rsquo;t use the default PHP session library. It will speed up your application but users might lose their session across instances and deployments. Use Redis to store PHP Sessions We provide the possibility to store the PHP sessions in a Redis database to improve reliability.\nIf your application is under heavy load, redis persistence for sessions can improve latency.\nTo enable this feature, you need to:\nenable Redis support on the application (create an environment variable named ENABLE_REDIS with the value true.) create and link a Redis add-on create an environment variable named SESSION_TYPE with the value redis. ‚ö†Ô∏è You must have a [Redis](https://devcenter.clever-cloud.com/doc/deploy/addon/redis/) add-on [linked with your application](#linking-a-database-or-any-other-add-on-to-your-application) to enable PHP session storage in Redis. If no Redis add-on is linked with your application, the deployment will fail. \u0026lt;/p\u0026gt; Sending emails The PHP language has the mail function to directly send emails. While we do not provide a SMTP server (needed to send the emails), you can configure one through environment variables.\nWe provide Mailpace addon to send emails through PHP mail() function. You have to turn TLS on with port 465 (environment variable CC_MTA_SERVER_USE_TLS=true) to make Mailpace working.\nWe also recommend you to use Mailgun or Mailjet if your project supports it. These services already have everything you need to send emails from your code.\nConfigure the SMTP server Services like Mailgun or Mailjet provide SMTP servers. If your application has no other way but to use the mail function of PHP to send emails, you have to configure a SMTP server. This can be done through environment variables:\nCC_MTA_SERVER_HOST: Host of the SMTP server. CC_MTA_SERVER_PORT: Port of the SMTP server. Defaults to 465 whether TLS is enabled or not. CC_MTA_AUTH_USER: User to authenticate to the SMTP server. CC_MTA_AUTH_PASSWORD: Password to authenticate to the SMTP server. CC_MTA_SERVER_USE_TLS: Enable or disable TLS. Defaults to true. CC_MTA_SERVER_STARTTLS: Enable or disable STARTTLS. Defaults to false. CC_MTA_SERVER_AUTH_METHOD: Enable or disable authentication. Defaults to on. Configure Monolog A lot of frameworks (including Symfony) use Monolog to handle logging. The default configuration of Monolog doesn\u0026rsquo;t allow to log errors into the console.\nHere is a basic configuration of Monolog to send your application\u0026rsquo;s logs into our logging system and access them into the Console:\nmonolog: handlers: clever_logs: type: error_log level: warning You can change the level to whatever level you desire. For Symfony, the configuration file is app/config/config_prod.yml.\nLaravel doesn\u0026rsquo;t need Monolog to retrieve logs via Clever console or Clever CLI. Here, ensure that you have the following line in config/app.php:\nreturn [ // ... \u0026#39;log\u0026#39; =\u0026gt; env(\u0026#39;APP_LOG\u0026#39;), // ... ]; Then, set APP_LOG=syslog as Clever application environment variable.\nUsing HTTP authentication Using basic HTTP authentication, PHP usually handles the values of user and password in variables named $_SERVER['PHP_AUTH_USER'] and $_SERVER['PHP_AUTH_PW'].\nAt Clever Cloud, we have enabled an Apache option to pass directly the Authorization header, even though we are using FastCGI; still, the header is not used by PHP, and the aforementioned variables are empty.\nYou can do this to fill them using the Authorization header:\nlist($_SERVER[\u0026#39;PHP_AUTH_USER\u0026#39;], $_SERVER[\u0026#39;PHP_AUTH_PW\u0026#39;]) = explode(\u0026#39;:\u0026#39; , base64_decode(substr($_SERVER[\u0026#39;Authorization\u0026#39;], 6))); Monitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\nMonitor your application with Blackfire You can use Blackfire to monitor your application on Clever Cloud.\nPlease refer to our Blackfire documentation to configure it for your application.\n","proxysql#ProxySQL":" ProxySQL is a tool that acts like a proxy between your application and your MySQL add-on. Instead of connecting to your MySQL add-on, you can connect to the local ProxySQL and it will forward all your requests to your MySQL add-on.\nThis allows you to let ProxySQL take care of some interesting features like connection pooling or leader / follower setup.\nYou can learn more about ProxySQL on the dedicated documentation page\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n"},"title":"Deploy PHP applications"},"/doc/deploy/application/php/tutorials/tutorial-drupal/":{"data":{"":"","configure-your-database#Configure your database":"Make sure you have created a MySQL database add-on in the Clever Cloud console, and that it\u0026rsquo;s linked to your application. When it\u0026rsquo;s done, you will be able to access all of your add-on environment variables from the application. You can use them as DATABASE_URL=$MYSQL_ADDON_URI.\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nGit specific Drupal instructions We at this point assume you have downloaded the source files of drupal from drupal.org and already have linked your MySQL add-on.\nOpen .gitignore file and delete sites/*/settings*.php line Copy the file sites/default/default.settings.php to sites/default/settings.php Open sites/default/settings.php and line 213, replace $databases = array(); by\n$databases = array ( \u0026#39;default\u0026#39; =\u0026gt; array ( \u0026#39;default\u0026#39; =\u0026gt; array ( \u0026#39;database\u0026#39; =\u0026gt; getenv(\u0026#39;MYSQL_ADDON_DB\u0026#39;), \u0026#39;username\u0026#39; =\u0026gt; getenv(\u0026#39;MYSQL_ADDON_USER\u0026#39;), \u0026#39;password\u0026#39; =\u0026gt; getenv(\u0026#39;MYSQL_ADDON_PASSWORD\u0026#39;), \u0026#39;host\u0026#39; =\u0026gt; getenv(\u0026#39;MYSQL_ADDON_HOST\u0026#39;), \u0026#39;port\u0026#39; =\u0026gt; getenv(\u0026#39;MYSQL_ADDON_PORT\u0026#39;), \u0026#39;driver\u0026#39; =\u0026gt; \u0026#39;mysql\u0026#39;, \u0026#39;prefix\u0026#39; =\u0026gt; \u0026#39;\u0026#39;, ), ), ); Replace the line $settings['hash_salt'] = '' ($drupal_hash_salt for Drupal 7) with $settings['hash_salt'] = getenv('DRUPAL_SALT'). You can generate salts with this link. Add a new DRUPAL_SALT environment variable to the application with the salt you have generated. As mentioned in this article, with Git deployments, files that are uploaded by users must be persisted in a File System Bucket. In order to do so, add a File Bucket via the console. At the root of your application, create a clevercloud/buckets.json file (create a clevercloud folder in which you create a buckets.json file). Copy the bucket.json content from the FS bucket addon dashboard (make sure to edit the folder field): [ { \u0026#34;bucket_host\u0026#34;: \u0026#34;\u0026lt;bucket-id\u0026gt;-fsbucket.services.clever-cloud.com\u0026#34;, \u0026#34;folder\u0026#34;: \u0026#34;/sites/default/files\u0026#34; } ] Send these Drupal files via Git. When finished, get the url that you can find in the domains panel in the left sidebar. Then open the following link: https://yourapplication.cleverapps.io/install.php\nDo not forget the /install.php page otherwise installation will not happen.\nFTP Deployment Make sure you have Filezilla or an other FTP software installed in your machine.\nWhen you have chosen to deploy your application via FTP at the application creation, a free FS Bucket has been created with an ID matching your application\u0026rsquo;s ID.\nYou will find the FTP credentials in the configuration tab of this particular FS Bucket.\nJust follow the instructions of your FTP Software to send code to Clever Cloud.\n‚ö†Ô∏è An FTP application is automatically started once the application is created, even if no code has been sent. Refer to our Quick Start - FTP deployment for more details.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n","overview#Overview":"Drupal applications almost work out of the box on Clever Cloud, you just have a few adjustments to make.\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nMonitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. Linking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\n"},"title":"Deploy a Drupal website"},"/doc/deploy/application/php/tutorials/tutorial-laravel/":{"data":{"":"","configure-storage#Configure storage":"Create a FS Bucket add-on and link it to your application. Note its host (you can see it from the addon configuration panel, or in the environment variables exported by the addon). It looks like bucket-01234567-0123-0123-0123-012345678987-fsbucket.services.clever-cloud.com.\nCreate a new environment variable called CC_FS_BUCKET and set /storage/app:\u0026lt;bucket-host\u0026gt; as its value.\nOptional: configure task scheduling If your app uses task scheduling, you need to configure a cron to run the scheduling process:\nCreate a clevercloud/cron.json file in your project, containing: [ \u0026#34;* * * * * $ROOT/clevercloud/cron.sh\u0026#34; ] This installs a cron that will run clevercloud/cron.sh every minute.\nCreate a clevercloud/cron.sh file in your project (with execute permissions), containing: #!/bin/bash -l set -euo pipefail pushd \u0026#34;$APP_HOME\u0026#34; php artisan schedule:run \u0026gt;\u0026gt; /dev/null 2\u0026gt;\u0026amp;1 Note: the PHP CLI process will use a memory_limit configuration value that depends on the instance\u0026rsquo;s size (you can check it by connecting to your app using SSH and running php -i). If one of your scheduled tasks needs to allocate more memory than this limit, the php artisan schedule:run process will silently crash. To allow it to use more memory, you can call ini_set() inside a php_sapi_name() === 'cli' condition from an early hook to the app\u0026rsquo;s lifecycle (like the AppServiceProvider). See this Gist for an example implementation.\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nFTP Deployment Make sure you have Filezilla or an other FTP software installed in your machine.\nWhen you have chosen to deploy your application via FTP at the application creation, a free FS Bucket has been created with an ID matching your application\u0026rsquo;s ID.\nYou will find the FTP credentials in the configuration tab of this particular FS Bucket.\nJust follow the instructions of your FTP Software to send code to Clever Cloud.\n‚ö†Ô∏è An FTP application is automatically started once the application is created, even if no code has been sent. Refer to our Quick Start - FTP deployment for more details.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n","configure-your-database#Configure your database":"Make sure you have created a database add-on in the Clever Cloud console, and that it\u0026rsquo;s linked to your application. When it\u0026rsquo;s done, edit config/database.php to set the correct environment variable names (MYSQL_ADDON_xxx instead of DB_xxx for a mysql database).\nFor instance for MySQL:\n// ... \u0026#39;connections\u0026#39; =\u0026gt; [ // ... \u0026#39;mysql\u0026#39; =\u0026gt; [ \u0026#39;driver\u0026#39; =\u0026gt; \u0026#39;mysql\u0026#39;, \u0026#39;host\u0026#39; =\u0026gt; env(\u0026#39;MYSQL_ADDON_HOST\u0026#39;, \u0026#39;127.0.0.1\u0026#39;), \u0026#39;port\u0026#39; =\u0026gt; env(\u0026#39;MYSQL_ADDON_PORT\u0026#39;, \u0026#39;3306\u0026#39;), \u0026#39;database\u0026#39; =\u0026gt; env(\u0026#39;MYSQL_ADDON_DB\u0026#39;, \u0026#39;forge\u0026#39;), \u0026#39;username\u0026#39; =\u0026gt; env(\u0026#39;MYSQL_ADDON_USER\u0026#39;, \u0026#39;forge\u0026#39;), \u0026#39;password\u0026#39; =\u0026gt; env(\u0026#39;MYSQL_ADDON_PASSWORD\u0026#39;, \u0026#39;\u0026#39;), \u0026#39;unix_socket\u0026#39; =\u0026gt; env(\u0026#39;DB_SOCKET\u0026#39;, \u0026#39;\u0026#39;), \u0026#39;charset\u0026#39; =\u0026gt; \u0026#39;utf8mb4\u0026#39;, \u0026#39;collation\u0026#39; =\u0026gt; \u0026#39;utf8mb4_unicode_ci\u0026#39;, \u0026#39;prefix\u0026#39; =\u0026gt; \u0026#39;\u0026#39;, \u0026#39;strict\u0026#39; =\u0026gt; true, \u0026#39;engine\u0026#39; =\u0026gt; null, ], // ... ] // ... Optional: automatically run migrations upon deployment If you want to have database migrations automatically run during each deployment, add this hook instruction to the application\u0026rsquo;s environment variables CC_POST_BUILD_HOOK=php artisan migrate --force\n","configure-your-laravel-application#Configure your Laravel application":"Configure DocumentRoot Add a new environment variable called CC_WEBROOT and set /public as its value.\nclever env set CC_WEBROOT /public Configure your application key Locally, run php artisan key:generate. It should output something like base64:tQbFzxwUfOfKKqNlbjXuduwaUFDQUy+NL8DBfgb3o3s=. Copy this value and add an environment variable named APP_KEY, with this value.\nMake sure config/app.php contains the following line:\n\u0026#39;key\u0026#39; =\u0026gt; env(\u0026#39;APP_KEY\u0026#39;), Configure monolog to use syslog In your environment variables, add the LOG_CHANNEL=syslog environment variable. This will allow you to read your application logs directly from the console or the CLI tool.\nMake sure config/logging.php contains the following line:\n\u0026#39;default\u0026#39; =\u0026gt; env(\u0026#39;LOG_CHANNEL\u0026#39;, \u0026#39;stack\u0026#39;), Optional:¬†configure the front-end build If you need to build your frontend assets (eg. javascript or CSS files), you can either add it as a step in your composer file, or you can add a post build hook with the CC_POST_BUILD_HOOK environment variable.\nFor example, if you launch the build with npm run prod: CC_POST_BUILD_HOOK=npm install \u0026amp;\u0026amp; npm run prod.\nMonitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. Linking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\n","overview#Overview":"Laravel applications almost work out of the box on Clever Cloud, you just have a few adjustments to make.\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\n"},"title":"Deploy a Laravel application"},"/doc/deploy/application/php/tutorials/tutorial-symfony/":{"data":{"":"","configure-your-database#Configure your database":"Make sure you have created a database add-on in the Clever Cloud console, and that it\u0026rsquo;s linked to your application. When it\u0026rsquo;s done, you will be able to access all of your add-on environment variables from the application.\nChange the default DATABASE_URL environment variable used in your config/packages/doctrine.yaml to \u0026lt;ADDON_PREFIX\u0026gt;_ADDON_URI where \u0026lt;ADDON_PREFIX\u0026gt; depending on the database addon you created (e.g. MYSQL for MySQL, POSTGRESQL for PostgreSQL or MONGODB for MongoDB) or be sure to use the environment variable in your production configuration file as explained in the configuration documentation of Symfony.\nConfigure ProxySQL for MySQL To manage your connection pool towards your MySQL add-on, you can set-up a ProxySQL.\nOnce you have activated the ProxySQL (through the environment variable), a configuration example would be:\ndbal: unix_socket: \u0026#39;%env(CC_MYSQL_PROXYSQL_SOCKET_PATH)%\u0026#39; url: \u0026#39;mysql://%env(MYSQL_ADDON_USER)%:%env(MYSQL_ADDON_PASSWORD)%@localhost/%env(MYSQL_ADDON_DB)%?serverVersion=%env(MYSQL_ADDON_VERSION)%\u0026#39; Optional: run tasks after build step If you want to have database migrations automatically run during each deployment, or frontend assets which must be built, you can write all these commands in clevercloud/post_build.sh like this one:\n# Database migrations ./bin/console doctrine:migrations:migrate --no-interaction # Frontend build yarn install \u0026amp;\u0026amp; yarn run build Make sure this file is executable:\nchmod \u0026#43;x clevercloud/post_build.sh Then, add this to the application\u0026rsquo;s environment variables CC_POST_BUILD_HOOK=./clevercloud/post_build.sh.\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nFTP Deployment Make sure you have Filezilla or an other FTP software installed in your machine.\nWhen you have chosen to deploy your application via FTP at the application creation, a free FS Bucket has been created with an ID matching your application\u0026rsquo;s ID.\nYou will find the FTP credentials in the configuration tab of this particular FS Bucket.\nJust follow the instructions of your FTP Software to send code to Clever Cloud.\n‚ö†Ô∏è An FTP application is automatically started once the application is created, even if no code has been sent. Refer to our Quick Start - FTP deployment for more details.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n","configure-your-symfony-application#Configure your Symfony application":"Configure DocumentRoot Add a new environment variable called CC_WEBROOT and set /public as its value CC_WEBROOT=/public.\nConfigure your application secret APP_SECRET environment variable is required to generate CSRF tokens. By default for symfony/framework-bundle generates one when it\u0026rsquo;s installed via Symfony Flex. If you do not use Flex, make sure to change your APP_SECRET. The default value is ThisTokenIsNotSoSecretChangeIt, change it.\nConfigure the Symfony environment If you\u0026rsquo;re using .env file in your application, please don\u0026rsquo;t commit productions credentials in this file or in a .env.production file. They are not meant to be committed alongside your applications. Clever Cloud allows you to inject environment in your app, so you can dynamically link databases and have separate environments with the same code base.\nFrom the console, you can edit the application\u0026rsquo;s environment variables. Click on \u0026ldquo;expert mode\u0026rdquo;, you\u0026rsquo;ll be able to directly paste the contents of the .env file.\nFrom the CLI, it\u0026rsquo;s even simpler: clever env import \u0026lt; .env.\nYou will also need to set the environment variable APP_ENV to one of:\ndev test prod You can anyway add your environment with any of the methods mentionned in Setting up environment variables on Clever Cloud.\nConfigure monolog to get application logs For your application logs to be collected and available in the console and CLI, you need to configure monolog to use its error_log output. That does not mean that it will only output error level logs, you can set it to use any level, here is an exemple with the info level (and above):\nmonolog: handlers: filter_for_errors: type: fingers_crossed action_level: error handler: error_log_handler excluded_404s: # regex: exclude all 404 errors from the logs - ^/ error_log_handler: type: error_log level: info Configure Symfony to work behind Clever Cloud reverse proxies You can use the CC_REVERSE_PROXY_IPS environment variable that contains a list of trusted IP addresses, separated by commas.\n# .env TRUSTED_PROXIES=127.0.0.1,${CC_REVERSE_PROXY_IPS} # config/packages/framework.yaml framework: # ... trusted_proxies: \u0026#39;%env(TRUSTED_PROXIES)%\u0026#39; For more information on configuring symfony behind a reverse proxy, you can read the official documentation.\nApache 404 error after deployment If everything looks fine and you still get 404 errors, remember that CleverCloud works with an Apache server, so you\u0026rsquo;ll need an htaccess in the /public directory. Symfony got your back on this: just run composer require symfony/apache-pack. See the official documentation of Symfony for more information.\nMonitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. Linking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\n","overview#Overview":"This tutorial assumes that your application is based on Symfony \u0026gt;= 3.4 and Symfony Flex. Symfony applications almost work out of the box on Clever Cloud, you just have a few adjustments to make.\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\n"},"title":"Deploy a Symfony application"},"/doc/deploy/application/php/tutorials/tutorial-wordpress/":{"data":{"":"","configure-your-wordpress-application#Configure your WordPress application":"Configuration file Rename the file wp-config-sample.php to wp-config.php. All the PHP code for the configuration should be written in this file.\nConfigure your database Make sure you have created a MySQL database add-on in the Clever Cloud console, and that it\u0026rsquo;s linked to your application. When it\u0026rsquo;s done, you will be able to access all of your add-on environment variables from the application. You can use them, in wp-config.php, as :\ndefine( \u0026#39;DB_NAME\u0026#39;, getenv(\u0026#34;MYSQL_ADDON_DB\u0026#34;) ); define( \u0026#39;DB_USER\u0026#39;, getenv(\u0026#34;MYSQL_ADDON_USER\u0026#34;) ); define( \u0026#39;DB_PASSWORD\u0026#39;, getenv(\u0026#34;MYSQL_ADDON_PASSWORD\u0026#34;) ); define( \u0026#39;DB_HOST\u0026#39;, getenv(\u0026#34;MYSQL_ADDON_HOST\u0026#34;).\u0026#39;:\u0026#39;.getenv(\u0026#34;MYSQL_ADDON_PORT\u0026#34;) ); ‚ö†Ô∏è Excepting MySQL DEV plan, you have to figure the port out in wp-config.php with the environment variable MYSQL_ADDON_HOST because it is not the default port which is used. SSL Configuration Since your website is behind a reverse proxy managed by Clever Cloud, you need to detect specific headers like X_FORWARDED_PROTO or HTTP_X_FORWARDED_PROTO to enable SSL. To do so edit wp-config.php and add the following code above the last require_once call.\nif (isset($_SERVER[\u0026#39;HTTP_X_FORWARDED_PROTO\u0026#39;]) \u0026amp;\u0026amp; $_SERVER[\u0026#39;HTTP_X_FORWARDED_PROTO\u0026#39;] == \u0026#39;https\u0026#39;) { $_SERVER[\u0026#39;HTTPS\u0026#39;] = \u0026#39;on\u0026#39;; } elseif (isset($_SERVER[\u0026#39;X_FORWARDED_PROTO\u0026#39;]) \u0026amp;\u0026amp; $_SERVER[\u0026#39;X_FORWARDED_PROTO\u0026#39;] == \u0026#39;https\u0026#39;) { $_SERVER[\u0026#39;HTTPS\u0026#39;] = \u0026#39;on\u0026#39;; } Using a CDN as Cloudflare with SSL (avoid infinite loops) As with SSL configuration, you need to detect specific headers like X_FORWARDED_PROTO or HTTP_X_FORWARDED_PROTO to enable SSL. In this case, the chained proxies might concatenate those headers. As a result, headers values can look like php [HTTP_X_FORWARDED_PROTO] =\u0026gt; https, https The previous code snippet would not enable SSL on the Clever Cloud application, resulting in mixed content or infinite loop.\nIn order to avoid this, you\u0026rsquo;ll need to add the following code snippet to your wp-config.php file (it replaces the previous code snippet). Add the following code above the last require_once call or at the beginning of the wp-config.php file.\nTo do so edit wp-config.php and add the following code above the last require_once call.\nfunction check_proto_set_ssl($forwarded_protocols){ $secure = \u0026#39;off\u0026#39;; if ( strstr($forwarded_protocols , \u0026#34;,\u0026#34;) ) { $previous = null; foreach ( explode(\u0026#34;,\u0026#34;, $forwarded_protocols) as $value ) { if ( $previous ) { trim($value) == $previous \u0026amp;\u0026amp; trim($value) == \u0026#39;https\u0026#39; ? $secure = \u0026#39;on\u0026#39; : $secure = \u0026#39;off\u0026#39;; } $previous = trim($value); } $_SERVER[\u0026#34;HTTPS\u0026#34;] = $secure; }else{ $forwarded_protocols == \u0026#39;https\u0026#39; ? $_SERVER[\u0026#34;HTTPS\u0026#34;] = \u0026#39;on\u0026#39; : $_SERVER[\u0026#34;HTTPS\u0026#34;] = $secure = \u0026#39;off\u0026#39;; } } if (isset($_SERVER[\u0026#39;HTTP_X_FORWARDED_PROTO\u0026#39;])) { check_proto_set_ssl($_SERVER[\u0026#39;HTTP_X_FORWARDED_PROTO\u0026#39;]); } elseif (isset($_SERVER[\u0026#39;X_FORWARDED_PROTO\u0026#39;])) { check_proto_set_ssl($_SERVER[\u0026#39;X_FORWARDED_PROTO\u0026#39;]); } Configure storage To store static files, you need to configure a FS Bucket.\nCreate a FS Bucket add-on and link it to your application. Note its host (you can see it from the addon configuration panel, or in the environment variables exported by the addon). It looks like bucket-01234567-0123-0123-0123-012345678987-fsbucket.services.clever-cloud.com.\nTo use the bucket in your wordpress app, there are 2 methods :\nEnvironment variables Create a new environment variable called CC_FS_BUCKET and set /\u0026lt;path-to-static-files\u0026gt;:\u0026lt;bucket-host\u0026gt; as its value.\nIf you need to have many associated buckets with your app, you need to create en new encironment variable, with a suffix : CC_FS_BUCKET_1, CC_FS_BUCKET_2\u0026hellip;\nJSON ‚ö†Ô∏è This method is deprecated, we strongly recommend that you use environment variables.\nIf you want to switch from this method to the environment variables, you need to remove the buckets.json file. Otherwise, the environment variables will be ignored.\nAt the root of your application, create a clevercloud/buckets.json file (create a clevercloud folder in which you create a buckets.json file). Add the following lines in this file. Do not forget to replace bucketId by the bucketId displayed in the information section of the FS Bucket add-on.\n[ { \u0026#34;bucket\u0026#34; : \u0026#34;bucketId\u0026#34;, \u0026#34;folder\u0026#34; : \u0026#34;/\u0026lt;path-to-static-files\u0026gt;\u0026#34; } ] Install a WordPress plugin with Git If you choose git deployment over FTP, the code of your plugins won\u0026rsquo;t be tracked by git. This implies that you will not be able to install plugins from the administration panel and persist them between two deployments.\nTo solve this problem, we recommend to install the plugin manually by copying the content of the plugin to the /wp-content/plugins/ folder, add the new files to git and then deploy your application.\nThe plugin will then be available in the Extensions section of your admin panel and you will be able to manage it as others WordPress plugins. To uninstall the plugin, the procedure is the same as before except that you have to delete the folder corresponding to the plugin you want to delete. The extension will be automatically disabled, but we recommend you to delete it from you admin panel before removing the file, in order to clean your database and all files that the plugin could have created.\n","deploy-wordpress-the-immutable-way#Deploy WordPress the immutable way":"Discover a new way to deploy Wordpress using Composer with Bedrock\u0026rsquo;s boilerplate : our tutorial on GitHub\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n","optimise-and-speed-up-your-wordpress#Optimise and speed-up your WordPress":"There are multiple ways to optimise your WordPress and speed-up its response time. We provide different tools and software to help you in this task as Varnish for the HTTP cache, and Redis for the object caching.\nPerformance plugins ‚ö†Ô∏è We recommend you to not use performance plugins like W3 Total Cache or JetPack as they are intended to be used on a shared hosting server.\nWe noticed performances problems when performance plugins are enabled and we recommend to use Varnish and Redis if you need performance optimisations on Clever Cloud. HTTP Cache with Varnish Enabling Varnish for your application is very simple. All instances of PHP provide Varnish, you just have to configure your application to use it.\nTo use Varnish in your application, you have to create a varnish.vcl file in the clevercloud folder of your application. If this folder doesn\u0026rsquo;t exist, create it in the root of your project.\nCopy this code into the varnish.vcl file you just created. It\u0026rsquo;ll configure Varnish to work with your WordPress.\nTo properly purge the Varnish cache of your application when a post is created/updated, a comment is posted, \u0026hellip; we recommend you to install the Varnish HTTP Purge plugin to your WordPress. It\u0026rsquo;ll purge the Varnish cache for you and give you the possibility to purge it manually.\nIf you need to manually purge the Varnish cache, the plugin provides a Purge Varnish cache button on the top bar of your website.\nObject cache with Redis Redis is an add-on that offers you a good way to speed-up your application by caching some of the objects of your application, as the result of SQL queries of your application, improving the response time.\nTo enable Redis for your WordPress, you need to disable other Object Cache and Data Cache of your application (as those provided by W3 Total Cache for example). Make sure they aren\u0026rsquo;t enabled to avoid conflicts and performance problems.\nCreate a Redis add-on for your application.\nAdd the following lines to your wp-config.php file. Make sure they are before the require_once(ABSPATH . 'wp-settings.php'); line, otherwise the Redis connexion will not work for your application and your application will return only white pages!\ndefine(\u0026#39;WP_CACHE_KEY_SALT\u0026#39;, \u0026#39;tvm_\u0026#39;); define(\u0026#39;WP_REDIS_CLIENT\u0026#39;, \u0026#39;pecl\u0026#39;); define(\u0026#39;WP_REDIS_HOST\u0026#39;, getenv(\u0026#39;REDIS_HOST\u0026#39;)); define(\u0026#39;WP_REDIS_PORT\u0026#39;, getenv(\u0026#39;REDIS_PORT\u0026#39;)); define(\u0026#39;WP_REDIS_PASSWORD\u0026#39;, getenv(\u0026#39;REDIS_PASSWORD\u0026#39;)); Download this file who manages the connexion with Redis and WordPress and moves it to your /wp-content folder. The file must be named object-cache.php. Redis should now work with your WordPress.\nMonitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\n","overview#Overview":"WordPress applications almost work out of the box on Clever Cloud, you just have a few adjustments to make.\nFirst, you could check our global PHP documention.\nThis tutorial is mainly concerning a Git deployment. However, you can deploy using a classic FTP PHP app. Choose \u0026ldquo;FTP\u0026rdquo; when you create a new PHP app.\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nFTP Deployment Make sure you have Filezilla or an other FTP software installed in your machine.\nWhen you have chosen to deploy your application via FTP at the application creation, a free FS Bucket has been created with an ID matching your application\u0026rsquo;s ID.\nYou will find the FTP credentials in the configuration tab of this particular FS Bucket.\nJust follow the instructions of your FTP Software to send code to Clever Cloud.\n‚ö†Ô∏è An FTP application is automatically started once the application is created, even if no code has been sent. Refer to our Quick Start - FTP deployment for more details.\n"},"title":"Deploy a WordPress website"},"/doc/deploy/application/python/python_apps/":{"data":{"":"","overview#Overview":"Python is a programming language that lets you work more quickly and integrate your systems more efficiently.\nPython 2.7, 3.7, 3.8, 3.9, 3.10 and 3.11 are available on Clever Cloud. You can use Git to deploy your application.\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nConfigure your Python application General configuration Python apps can be launched in a variety of ways. You can specify how to start your application (for instance which module to run) by setting environment variables.\nTo select which module you want to start, use the CC_PYTHON_MODULE environment variable.\nCC_PYTHON_MODULE=\u0026#34;mymodule:app\u0026#34; The module (without .py) must be importable, i.e. be in PYTHONPATH. Basically, you should just point to a WSGI capable object.\nFor example with Flask, it\u0026rsquo;s gonna be the name of your main server file, followed by your Flask object: server:app for instance if you have a server.py file at the root of your project with a Flask app object inside.\nChoose Python version The default version of python on Clever Cloud is 2.7. If you want to use python 3.x instead, create an environment variable CC_PYTHON_VERSION equal to either 3 (which will default to the most up-to-date version), 3.7, 3.8, 3.9, 3.10 or 3.11.\nNote: the version is a number, do not use quotes. values allowed are 2, 2.7, 3, 3.7, 3.8, 3.9, 3.10, 3.11.\nChoose Pip version The default version of pip on Clever Cloud is 19. If you want to use pip 9 instead, create an environment variable like CC_PIP_VERSION=9.\nSelect the python backend Currently, we support daphne, gunicorn, uvicorn and uwsgi for Python backends. If not specified, the default backend is uwsgi.\nTo select one, set the CC_PYTHON_BACKEND environment variable with either daphne, gunicorn, uvicorn or uwsgi.\nPlease contact the support if you need another backend.\nDependencies If you do not have a requirements.txt file to commit you can obtain it via the command pip freeze \u0026gt; requirements.txt (or pip3 freeze \u0026gt; requirements.txt if you use Python 3.x) at the root of your project folder in your terminal.\nFor example to install PostgreSQL and don\u0026rsquo;t want to use the pip freeze command above you have to create a file requirements.txt at the root of your application folder:\npsycopg2\u0026gt;=2.7 --no-binary psycopg2 Note: We recommend using psycopg2\u0026gt;=2.7 --no-binary psycopg2 to avoid wsgi issues.\nYou can define a custom requirements.txt file with the environnement variable CC_PIP_REQUIREMENTS_FILE for example: CC_PIP_REQUIREMENTS_FILE=config/production.txt.\nCached dependencies Enabling dependencies caching You can enable dependencies caching by adding the CC_CACHE_DEPENDENCIES=true environment variable in your application. It is enabled by default only for rust and haskell applications.\nDisabling dependencies caching You can disable dependencies caching completely by removing the CC_CACHE_DEPENDENCIES environment variable from the Clever Cloud console, in the Environment variables menu of your application.\nOr by setting it to CC_CACHE_DEPENDENCIES=false\nTo fully remove cached dependencies, you have to rebuild your application from scratch.\nYou can select \u0026ldquo;rebuild and restart\u0026rdquo; from the Clever Cloud console or launch clever restart --without-cache with the Clever Tools CLI.\nUse setup.py We support execution of a single setup.py goal. Usually, this would be to execute custom tasks after the installation of dependencies.\nThe goal will be launched after the dependencies from requirements.txt have been installed.\nTo execute a goal, you can define the environment variable PYTHON_SETUP_PY_GOAL=\u0026quot;\u0026lt;your goal\u0026gt;\u0026quot;.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. To access environment variables from your code, just get them from the environment with:\nimport os os.getenv(\u0026#34;MY_VARIABLE\u0026#34;) Manage your static files To enable Nginx to serve your static resources, you have to set two environment variables.\nSTATIC_FILES_PATH: should point to a directory where your static files are stored.\nSTATIC_URL_PREFIX: the URL path under which you want to serve static files (e.g. /public).\nAlso, you are able to use a Filesystem Bucket to store your static files. Please refer to the File System Buckets section.\nNote: the path of your folder must be absolute regarding the root of your application.\nNote: setting the STATIC_URL_PREFIX to / will cause the deployment failure.\nStatic files example Here is how to serve static files, the test.png being the static file you want to serve:\n‚îú‚îÄ‚îÄ \u0026lt;app_root\u0026gt; ‚îÇ¬†‚îú‚îÄ‚îÄ flask-app.py ‚îÇ¬†‚îú‚îÄ‚îÄ static ‚îÇ¬†‚îÇ¬†‚îî‚îÄ‚îÄ test.png ‚îÇ¬†‚îî‚îÄ‚îÄ requirements.txt Using the environment variables STATIC_FILES_PATH=static/ and STATIC_URL_PREFIX=/public the test.png file will be accessed under: https://\u0026lt;domain.tld\u0026gt;/public/test.png.\nuWSGI, Gunicorn and Nginx configuration uWSGI, gunicorn and nginx settings can be configured by setting environment variables:\nuWSGI HARAKIRI: timeout (in seconds) after which an unresponding process is killed. (Default: 180) WSGI_BUFFER_SIZE: maximal size (in bytes) for the headers of a request. (Defaut: 4096) WSGI_POST_BUFFERING: buffer size (in bytes) for uploads. (Defaut: 4096) WSGI_WORKERS: number of workers. (Defaut: depends on the scaler) WSGI_THREADS: number of threads per worker. (Defaut: depends on the scaler) uWSGI asynchronous/non-blocking modes To enable uWSGI asynchronous mode, you can use these two environment variables:\nUWSGI_ASYNC: number of cores to use for uWSGI asynchronous/non-blocking modes. UWSGI_ASYNC_ENGINE: select the asynchronous engine for uWSGI (optional). Gunicorn GUNICORN_WORKER_CLASS: type of worker to use. Default to sync. Available workers CC_GUNICORN_TIMEOUT: gunicorn timeout. Defaults to 30 Nginx NGINX_READ_TIMEOUT: a bit like HARAKIRI, the response timeout in seconds. (Defaut: 300) ENABLE_GZIP_COMPRESSION: \u0026ldquo;on|yes|true\u0026rdquo; gzip-compress the output of uwsgi. GZIP_TYPES: the mime types to gzip. Defaults to text/* application/json application/xml application/javascript image/svg+xml. Basic authentication If you need basic authentication, you can enable it using environment variables. You will need to set CC_HTTP_BASIC_AUTH variable to your own login:password pair. If you need to allow access to multiple users, you can create additional environment CC_HTTP_BASIC_AUTH_n (where n is a number) variables.\nNginx optional configuration with clevercloud/http.json Nginx settings can be configured further in clevercloud/http.json. All its fields are optional.\nlanguages: configure a default language and redirections error_pages: configure custom files for error pages force_https: automatically redirect HTTP traffic to HTTPS aliases: set up redirections charset: force a specific charset { \u0026#34;languages\u0026#34;: { \u0026#34;default\u0026#34;: {\u0026#34;rewrite\u0026#34;: \u0026#34;en\u0026#34;}, \u0026#34;fr\u0026#34;: {\u0026#34;rewrite\u0026#34;: \u0026#34;en\u0026#34;} }, \u0026#34;error_pages\u0026#34;: { \u0026#34;404\u0026#34;: \u0026#34;path/to/page\u0026#34; }, \u0026#34;force_https\u0026#34;: true, \u0026#34;aliases\u0026#34;: { \u0026#34;/path\u0026#34;:¬†\u0026#34;redirection\u0026#34; }, \u0026#34;charset\u0026#34;: \u0026#34;latin-1\u0026#34; } Using the Gevent loop engine Whether you use uwsgi or gunicorn, you can enable the Gevent loop engine.\nTo do so, add the CC_PYTHON_USE_GEVENT environment variable to your application, with the true value.\nMonitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\nCelery apps Note: Please note that Celery support is not available yet for gunicorn.\nWe also support celery apps out of the box. To deploy a celery app, use the CC_PYTHON_CELERY_MODULE environment variable:\nCC_PYTHON_CELERY_MODULE=\u0026#34;mymodule\u0026#34; ‚ö†Ô∏è Celery needs to be defined as a dependency in your requirements.txt. Otherwise the deployment will be aborted if Celery support is enabled. You can also activate beat with CC_PYTHON_CELERY_USE_BEAT=true and provide a given log dir for celery with CC_PYTHON_CELERY_LOGFILE=\u0026quot;/path/to/logdir\u0026quot;.\nThe CC_PYTHON_CELERY_LOGFILE path is relative to the application\u0026rsquo;s path.\n‚ö†Ô∏è There is a bug in versions \u0026lt;4.2 of Celery. You need to add the CELERY_TIMEZONE = 'UTC' environment variable.\nThe bug is documented here: https://GitHub.com/celery/celery/issues/4184.\n\u0026lt;/p\u0026gt; Git Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n"},"title":"Deploy Python applications"},"/doc/deploy/application/python/tutorials/python-django-sample/":{"data":{"":"","configure-your-django-application#Configure your Django application":"Note :\nSelect at least a nano instance (pico doesn\u0026rsquo;t have enough resources for a Django project). Connect your Django project to Postgresql version 12+ if you\u0026rsquo;re using django 4.2+ (postgresql 11 is deprecated since this version). My application does not exists already If you want to test easily a Django deployment on Clever Cloud, just clone the GitHub repo and go the next section.\nMy application already exists ‚ö†Ô∏è Do not forget to add the CC_PYTHON_MODULE environment variable or the file clevercloud/python.json in any Python project so that we get your required modules. Fine tuning the application You can find a lot more configuration options such as choosing python version and more on our dedicated Python documentation.\nMonitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\nManage.py tasks Clever Cloud supports execution of multiple manage.py tasks.\nThe tasks are launched after the dependencies from requirements.txt have been installed, and before the web server starts.\nYou can declare the manage.py tasks with the environment variable CC_PYTHON_MANAGE_TASKS=\u0026quot;migrate\u0026quot;.\nValues must be separated by a comma:\nCC_PYTHON_MANAGE_TASKS=\u0026#34;migrate, assets:precompile\u0026#34; Environment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. To access environment variables from your code, just get them from the environment with:\nimport os os.getenv(\u0026#34;MY_VARIABLE\u0026#34;) Git Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n","overview#Overview":"The goal of this article is to show you how to deploy a Django application on Clever Cloud. The application is a very basic one. More information about the application:\nGitHub repo Clever Cloud demo Create an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\n"},"title":"Deploy Django application"},"/doc/deploy/application/python/tutorials/python-flask-sample-app/":{"data":{"":"","configure-your-flask-application#Configure your Flask application":"Build app in a subfolder In the /clevercloud/python.json file, we have the \u0026quot;build\u0026quot;.\u0026quot;folder\u0026quot; field that points to the app folder. We will build \u0026amp; run the app from this app folder.\nSelect your module Clever Cloud runs the \u0026ldquo;app\u0026rdquo; Flask application defined in the hello.py file. So the \u0026ldquo;module\u0026rdquo; field is hello:app.\nFine tuning the application You can find a lot more configuration options such as choosing python version and so here\nMonitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. To access environment variables from your code, just get them from the environment with:\nimport os os.getenv(\u0026#34;MY_VARIABLE\u0026#34;) Git Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n","overview#Overview":"The goal of this article is to show you how to deploy a Flask application on Clever Cloud. The application is a very basic one it just replies with a header dump to any request. More information about the application:\nGitHub repo Create an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\n"},"title":"Deploy Flask"},"/doc/deploy/application/ruby/by-framework/ruby-on-rails/":{"data":{"":"","overview#Overview":"Ruby on Rails is an open source web application framework which runs on the Ruby programming language. It is a full-stack framework: it allows creating pages and applications that gather information from the web server, talk to or query the database, and render templates out of the box. As a result, Rails features a routing system that is independent of the web server.\nClever Cloud allows you to deploy any Ruby on Rails application. This page will explain you how to set up your application to run it on our service. You do not need to change a lot in your application, the requirements will help you configure your applications with some mandatory files to add, and properties to setup.\nYou can find here an example of Ruby on Rails application on Clever Cloud.\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nConfigure your Ruby on Rails application Mandatory configuration Be sure that:\nyou push to the master branch you commit your gems.locked or Gemfile.lock file you have a config.ru file (this one is most of the time generated by rails) you have gem puma in your Gemfile (puma is the default application server from rails, when creating a new ruby application, an environment variable is automatically added: CC_RACKUP_SERVER=puma) You need to provide a gems.locked or Gemfile.lock file. To do that ensure you have at least once run bundle install in your terminal at the root of your rails project.\nChoose ruby version If you specify a ruby version in your gems.rb of Gemfile, we\u0026rsquo;ll use it, otherwise; keep reading.\nOn your Clever Cloud application create an environment variable CC_RUBY_VERSION=rubyversion where rubyversion represents:\n\u0026ldquo;2\u0026rdquo; will select the greatest \u0026ldquo;2.X.Y\u0026rdquo; version available. \u0026ldquo;2.5\u0026rdquo; will select the greatest \u0026ldquo;2.5.Y\u0026rdquo; version available. \u0026ldquo;2.5.3\u0026rdquo; will select the \u0026ldquo;2.5.3\u0026rdquo; version. Due to current landscape in ruby applications, the default version is the greatest 2.5.Y. We provide also the 2.4.Y and 2.3.Y version.\nIf given rubyversion does not match any available version, your deployment will fail.\nChoose your environment You can set the RUBY_ENV environment variable to the value you want. By default it is set to production. Most used values are production and development but you can use any custom one as long as you have setted up of the required variables for this environment in your ./config/ folder files.\nSecure configuration of secret key There are many way to add secret key to your env and each one is valid. Clever Cloud provides you a secure way so you don\u0026rsquo;t have to commit any file containing it.\ngenerate the secret key locally with rake secret add it to your environment in ./config/secret.yml with: production: secret_key_base: \u0026lt;%= ENV[\u0026#34;SECRET_KEY_BASE\u0026#34;] %\u0026gt; Configure Rake goals You can specify a list of rake goals to execute before the deployment of your application by using the CC_RAKEGOALS environment variable.\nThe value of this variable must be a comma-separated list of goals, for instance:\nCC_RAKEGOALS=\u0026#34;db:migrate, assets:precompile\u0026#34; We do not execute any rake goals by default.\nConfigure Sidekiq To run a Sidekiq process in background you will need to enable it with the CC_ENABLE_SIDEKIQ=true environment variable.\nPlease note you will need a redis instance to use this feature.\nYou can specify multiple Sidekiq configuration files with the CC_SIDEKIQ_FILES environment variable.\nThe value of this variable must be a comma-separated list of files:\nCC_SIDEKIQ_FILES=\u0026#34;./config/sidekiq_1.yml,./config/sidekiq_2.yml,./config/sidekiq_3.yml\u0026#34; Note: CC_SIDEKIQ_FILES have precedence over CC_ENABLE_SIDEKIQ which means that even if CC_SIDEKIQ_FILES is defined and CC_ENABLE_SIDEKIQ is set to false, Sidekiq will still be enabled.\nEach path is the path from the root of the repository to a sidekiq configuration file.\nEach file might contain something like this standard sidekiq.yml file:\n--- :concurrency: 4 :pidfile: tmp/pids/sidekiq_1.pid :queues: - [critical, 2] - default production: :logfile: ./log/sidekiq.log --- Manage your static files and assets Static files are configured with environment variables:\nSTATIC_FILES_PATH: should point to a directory where your static files are stored.\nSTATIC_URL_PREFIX: the URL path under which you want to serve static files (e.g. /public/)\nNote: the path of your folder must be absolute regarding the root of your application.\nNote: setting the STATIC_URL_PREFIX to / will make the deployment to fail.\nIf you use the asset pipeline, make sure to include the assets:precompile task in the CC_RAKEGOALS environment variable value.\nCC_RAKEGOALS=\u0026#34;db:migrate, assets:precompile\u0026#34; Note: if your project uses webpacker, make sure to enable the dedicated build instance option in the Information menu of your application in the Clever Cloud console because webpacker needs a lot a ressources when starting.\nUsing Active Storage and Cellar S3 Only for Rails \u0026gt;= 5.2.\nEnable Active Storage for your application: $ rails active_storage:install then $ rake db:migrate\nAdd gem \u0026quot;aws-sdk-s3\u0026quot;, require: false to your Gemfile, run $ bundle install\nAdd config.active_storage.service = :clevercloud in config/environments/production.yml\nAdd in config/storage.yml:\nclevercloud: service: S3 access_key_id: \u0026lt;%= ENV[\u0026#39;CELLAR_ADDON_KEY_ID\u0026#39;] %\u0026gt; secret_access_key: \u0026lt;%= ENV[\u0026#39;CELLAR_ADDON_KEY_SECRET\u0026#39;] %\u0026gt; region: us-east-1 bucket: \u0026lt;%= ENV[\u0026#39;CELLAR_ADDON_BUCKET_NAME\u0026#39;] %\u0026gt; endpoint: \u0026lt;%= ENV[\u0026#39;CELLAR_ADDON_ENDPOINT\u0026#39;] %\u0026gt; force_path_style: true In the clever cloud console create a Cellar S3 storage add-on, name it, link it to your rails application and create a bucket.\nIn the environment variables section of your Ruby on Rails application on Clever Cloud add the following environment variables:\nCELLAR_ADDON_BUCKET_NAME=\u0026#34;\u0026lt;your bucket name\u0026gt;\u0026#34; CELLAR_ADDON_ENDPOINT=\u0026#34;https://cellar-c2.services.clever-cloud.com\u0026#34; You can now commit and push your changes.\nAlso, you are able to use a Filesystem Bucket to store your static files. Please refer to the File System Buckets section.\nNginx configuration nginx settings can be configured with environment variables:\nNGINX_READ_TIMEOUT: the response timeout in seconds. (Defaut: 300) Basic authentication If you need basic authentication, you can enable it using environment variables. You will need to set CC_HTTP_BASIC_AUTH variable to your own login:password pair. If you need to allow access to multiple users, you can create additional environment CC_HTTP_BASIC_AUTH_n (where n is a number) variables.\nNginx optional configuration with clevercloud/http.json Nginx settings can be configured further in clevercloud/http.json. All its fields are optional.\nlanguages: configure a default language and redirections error_pages: configure custom files for error pages force_https: automatically redirect HTTP traffic to HTTPS aliases: set up redirections charset: force a specific charset { \u0026#34;languages\u0026#34;: { \u0026#34;default\u0026#34;: {\u0026#34;rewrite\u0026#34;: \u0026#34;en\u0026#34;}, \u0026#34;fr\u0026#34;: {\u0026#34;rewrite\u0026#34;: \u0026#34;en\u0026#34;} }, \u0026#34;error_pages\u0026#34;: { \u0026#34;404\u0026#34;: \u0026#34;path/to/page\u0026#34; }, \u0026#34;force_https\u0026#34;: true, \u0026#34;aliases\u0026#34;: { \u0026#34;/path\u0026#34;:¬†\u0026#34;redirection\u0026#34; }, \u0026#34;charset\u0026#34;: \u0026#34;latin-1\u0026#34; } Puma configuration Puma reads its configuration from the config/puma.rb file. See the puma documentation for more information.\nYou can override this configuration with environment variables. Each of them, when specified, will be be preferred over the setting from config/puma.rb.\nCC_PUMA_WORKERS overrides the number of workers (e.g. CC_PUMA_WORKERS=2) CC_PUMA_THREADS overrides the number of threads per worker, can be a raw number or a range (e.g. CC_PUMA_THREADS=6 or CC_PUMA_THREADS=4:8) If they are not defined in the environment nor in config/puma.rb we will setup the values depending on the size of the scaler your application is running on. We also fill the WEB_CONCURRENCY and RAILS_MAX_THREADS environment variable if they are not present as they may be used by rails\u0026rsquo; puma configuration.\nOverridding rackup application server You can override the puma default server by setting an environment variable CC_RACKUP_SERVER=yourserver. We do not recommend you do it.\nMonitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. To access environment variables from your code, just get them from the environment with ENV[\u0026quot;MY_VARIABLE\u0026quot;].\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n"},"title":"Deploy Ruby on Rails applications"},"/doc/deploy/application/ruby/ruby-rack/":{"data":{"":"","configure-your-ruby-and-rake-application#Configure your Ruby and Rake application":"Mandatory configuration Be sure that:\nBundler is installed locally (gem install bundler) you have a config.ru file Git (for the deploy part) you have a gems.rb or Gemfile containing your dependencies Tutorial and sample app You can find an hello world tutorial of a Ruby and Rack application here and find the source code of the demo here.\nMonitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. To access environment variables from your code, just get them from the environment with ENV[\u0026quot;MY_VARIABLE\u0026quot;].\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n","overview#Overview":"Currently, Clever Cloud supports Rack-based applications. Created in 2007, Rack has become the de-facto standard for ruby web applications and is used in many frameworks such as Ruby on Rails.\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\n"},"title":"Deploy Ruby and Rack-based applications"},"/doc/deploy/application/ruby/tutorials/ruby-rack-app-tutorial/":{"data":{"":"","configure-your-rack-based-application#Configure your Rack based application":"Mandatory configuration To follow this tutorial, you will need:\nRuby \u0026gt;= 1.9.2 (w/ Rubygems) Bundler (gem install bundler and you\u0026rsquo;re good to go!) Your preferred editor Git (for the deploy part) ‚ÑπÔ∏è To manage your gems and ruby versions, we recommend rbenv.\nIf you use a system-wide installation of ruby, You will have to use sudo with the gem and bundle commands, or use arguments that will make gem and bundle install the gem in directories you have write-permissions in.\nMy application does not exists already Create a Ruby + Rake application locally Our demo for this tutorial is here: https://helloworld-rack-demo.cleverapps.io/.\nYou can also doing it manually by following these instructions:\nmkdir helloworld-rack cd helloworld-rack touch hello.rb config.ru Gemfile ## or gems.rb Inside hello.rb put the following:\nclass HelloWorld def call(env) [200, {\u0026#34;Content-Type\u0026#34; =\u0026gt; \u0026#34;text/plain\u0026#34;}, [\u0026#34;Hello world!\u0026#34;]] end end Inside the config.ru (That is, the main Rack entry-point) put:\nrequire \u0026#39;./hello\u0026#39; run HelloWorld.new The gems.rb or Gemfile file will contain our dependencies:\nsource \u0026#39;https://rubygems.org\u0026#39; gem \u0026#39;rack\u0026#39;, \u0026#39;~\u0026gt;1.5.1\u0026#39; We don\u0026rsquo;t need any more dependencies. The gems.rb or Gemfile is mandatory to deploy on Clever Cloud.\nDo not forget to init an empty git repository with $ git init\nTest your application locally To test your application, just fetch the dependencies using bundler:\nbundle install Fetching gem metadata from https://rubygems.org/.......... Resolving dependencies... Using rack (1.5.2) Using bundler (1.3.5) Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed. And start your application:\nbundle exec rackup [2013-09-16 17:35:26] INFO WEBrick 1.3.1 [2013-09-16 17:35:26] INFO ruby 2.0.0 (2013-06-27) [x86_64-linux] [2013-09-16 17:35:26] INFO WEBrick::HTTPServer#start: pid=5656 port=9292 You can now test with your browser at localhost:9292.\nYou can now read My application already exists\nMy application already exists Create an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. To access environment variables from your code, just get them from the environment with ENV[\u0026quot;MY_VARIABLE\u0026quot;].\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n","overview-introduction#Overview Introduction":"Currently, Clever Cloud supports Rack-based applications.\nCreated in 2007, Rack has become the de-facto standard for ruby web applications and is used in many frameworks such as Ruby on Rails."},"title":"Deploy Rack-based applications"},"/doc/deploy/application/rust/rust/":{"data":{"":"","overview#Overview":"Rust is a system programming language that runs blazingly fast, prevents segfaults, and guarantees thread safety. You can build Rust web services with frameworks like Actix or Iron.\nClever Cloud allows you to deploy Rust web applications. This page will explain you how to set up your application to run it on our service.\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nConfigure your Rust application Mandatory configuration Make sure that:\nyou have pushed in master branch you listen on port 8080 you have committed Cargo.lock you have at least one binary target in Cargo.toml The result of cargo build --release --locked must be an executable which starts a web server listening on 0.0.0.0:8080.\nFor instance, a minimal iron application can look like this:\nextern crate iron; use iron::prelude::*; use iron::status; fn main() { fn hello_world(_: \u0026amp;mut Request) -\u0026gt; IronResult\u0026lt;Response\u0026gt; { Ok(Response::with((status::Ok, \u0026#34;Hello World!\u0026#34;))) } let _server = Iron::new(hello_world).http(\u0026#34;0.0.0.0:8080\u0026#34;).unwrap(); println!(\u0026#34;On 8080\u0026#34;); } Multiple binary targets If your Cargo.toml defines multiple targets, you must specify the one you want to run, with the CC_RUST_BIN environment variable. If CC_RUST_BIN is specified, then the executable produced by this target is used to start the application.\nCustom run command If you need to run a custom command (or just pass options to the program), you can specify it through the CC_RUN_COMMAND environment variable.\nFor instance, you can have CC_RUN_COMMAND=./target/release/myapp \u0026lt;options\u0026gt;.\nDependencies Make sure to list all your dependencies in Cargo.toml. For the example above, you need:\n[package] name = \u0026#34;my-app\u0026#34; version = \u0026#34;0.1.0\u0026#34; authors = [] [dependencies] iron = \u0026#34;0.4.0\u0026#34; Cached dependencies Enabling dependencies caching You can enable dependencies caching by adding the CC_CACHE_DEPENDENCIES=true environment variable in your application.\nDisabling dependencies caching You can disable dependencies caching completely by removing the CC_CACHE_DEPENDENCIES environment variable from the Clever Cloud console, in the Environment variables menu of your application. Or by setting it to CC_CACHE_DEPENDENCIES=false.\nTo fully remove cached dependencies, you have to rebuild your application from scratch. You can select \u0026ldquo;rebuild and restart\u0026rdquo; from the Clever Cloud console or launch clever restart --without-cache with the Clever Tools CLI.\nPrivate dependencies If you use dependencies on a private git repository inside your project, it needs a bit of configuration until this cargo issue has been resolved.\nFirst, you need to use the HTTPS url as the git url for your dependency in your Cargo.toml:\nprivate-dep = { git = \u0026quot;https://github.com/user/my-private-dep.git\u0026quot; }\nThen, you need to create a personal access token. It allows to not use your password:\nGithub: https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/ Gitlab: https://docs.gitlab.com/ce/user/profile/personal_access_tokens.html (API rights are needed) Once you have the token, we need to tell Git to use a credential store. For that, we are going to create it.\nCreate a clevercloud/pre-build.sh file at the root of your application and paste:\n#! /usr/bin/env bash git config --global credential.helper store echo \u0026#34;https://${GIT_USERNAME}:${GIT_PASSWORD}@gitlab.com\u0026#34; \u0026gt; ~/.git-credentials chmod 600 ~/.git-credentials If you have multiple private repositories, add them accordingly.\nNow, go into the environment variables page of your application and create those environment variables:\nGIT_USERNAME: your Github / gitlab / other username GIT_PASSWORD: your Github / gitlab / other password CC_PRE_BUILD_HOOK: clevercloud/pre-build.sh CC_POST_BUILD_HOOK: rm /home/bas/.git-credentials This adds the git configuration before the build start and it cleans it after the build has been done.\nRust channels By default, your application is built with the latest stable rust version. If you require beta, nightly or a specific Rust version, you can set CC_RUSTUP_CHANNEL environment variable value to beta, nightly or a specific version (eg. 1.36.0).\nThe build uses rustup to select the Rust version you need.\nCargo features You can enable specific features for your crate by settings the CC_RUST_FEATURES environment variable to the list of features to enable.\nTo access environment variables from your code, just get them from the environment with std::env::var(\u0026lt;KEY_NAME\u0026gt;).\nIf some environment variables are critical to your application, here is an approach you can use:\nuse std::env; fn main() { let my_config_value = env::var(\u0026#34;MY_VAR\u0026#34;).expect(\u0026#34;Missing env var `MY_VAR`\u0026#34;); something_that_runs_a_web_server(my_config_value); } This loads the environment variable in your main function and use .expect to fail early. This way, the application will refuse to start with an helpful error message if MY_VAR is not defined.\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nDeployment Video Linking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n"},"title":"Deploy Rust applications"},"/doc/deploy/application/scala/scala/":{"data":{"":"","overview#Overview":"Clever Cloud allows you to deploy Scala (and Java) applications built with SBT. This document will explain you how to set up your app to run it on our service.\nIf you\u0026rsquo;re looking to deploy a Play Framework application, you can have a look at our dedicated deployment guide for play framework applications\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nConfigure your Scala application Mandatory configuration Your application has to listen on port 8080 for worldwide connections (0.0.0.0). We set the system variable http.port to 8080 for you so in many cases (like for play applications) you don\u0026rsquo;t have anything to do. You need to use the sbt-native-packager in your project.\nThe sbt-native-packager We rely on sbt-native-packager to run applications. This plugin provides a stage task which is run during deployment.\nIf your project doesn\u0026rsquo;t already use sbt-native-packager, you need to add it to project/plugins.sbt. Please make sure you use an up-to-date version.\nIn project/plugins.sbt:\naddSbtPlugin(\u0026#34;com.typesafe.sbt\u0026#34; % \u0026#34;sbt-native-packager\u0026#34; % \u0026#34;1.7.0\u0026#34;) Then you need to configure the package type:\nIn build.sbt:\nenablePlugins(JavaAppPackaging) # Disable javadoc packaging mappings in (Compile, packageDoc) := Seq() For more information, please have a look at the documentation for sbt-native-packager\nCustom sbt goal By default, the deployment system execute sbt stage and runs the first binary found into /target/universal/stage/bin. If you want to run another goal, you can specify it with the SBT_DEPLOY_GOAL environment variable.\nMulti-module build If you have a single repository with multiple modules or want to build a specific module in a monorepo (and no top-level stage task), then you can specify the sbt task with SBT_DEPLOY_GOAL.\nCC_SBT_TARGET_DIR must be set to the relative path of the module and CC_SBT_TARGET_BIN to the name of the binary to run.\nFor instance, if you want to deploy a module named service1 that produce a binary named \u0026ldquo;my-binary\u0026rdquo;, you have to define the following variables:\nSBT_DEPLOY_GOAL=service1/stage CC_SBT_TARGET_DIR=service1 CC_SBT_TARGET_BIN=my-binary Check details on environment variables.\nOur engine will execute the sbt service1/stage and will run service1/target/universal/stage/bin/my-binary\nNote: even when CC_RUN_COMMAND is configured CC_SBT_TARGET_DIR and CC_SBT_TARGET_BIN should be set to the correct values.\nHOCON users If you\u0026rsquo;re using HOCON configuration files, then you can have direct acces to environment variables from the configuration file:\napplication.secret=${APPLICATION_SECRET} Monitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. To access environment variables from your code, just get them from the environment with System.getenv(\u0026quot;MY_VARIABLE\u0026quot;). Be aware that it can return null.\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n"},"title":"Deploy Scala applications with SBT"},"/doc/deploy/application/scala/tutorials/play-framework-1/":{"data":{"":"","configure-your-scala--play-1-application#Configure your Scala + Play! 1 application":"Select Play! 1.x version Clever Cloud supports Play! 1.2, 1.3, 1.4, 1.5. You can select the Play! version for your application by setting the PLAY1_VERSION environment variable (or by putting it in a file named clevercloud/play1_version).\nThe PLAY1_VERSION environment variable can contain one of the following values:\n1.2 or 12 for Play! 1.2. 1.3 or 12 for Play! 1.3. 1.4 or 14 for Play! 1.4. 1.5 or 15 for Play! 1.5. Play! configuration with application.conf By default, your application will run on Clever Cloud with the option --%clevercloud.\nIt means that you can define special keys in your application.conf file that will be used only on Clever Cloud.\nYou can for example:\nset production mode so the files are compiled at startup time and the errors are logged in a file:\n%clevercloud.application.mode=prod set up a mysql database (using environment variables)\n%clevercloud.db.url=\u0026#34;jdbc:mysql://\u0026#34;${MYSQL_ADDON_HOST}\u0026#34;/\u0026#34;${MYSQL_ADDON_DB} %clevercloud.db.driver=com.mysql.jdbc.Driver %clevercloud.db.user=${MYSQL_ADDON_USER} %clevercloud.db.pass=${MYSQL_ADDON_PASSWORD} More information on playframework.com.\nHTTPS support HTTPS is handled by Clever Cloud ahead of your application, your application retrieves the traffic in plain http. To be able to use request.secure, you have to add XForwardedSupport=all in application.conf.\nMonitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. To access the environment variables from your code, you need to add my.option=${MY_VARIABLE} in your application.conf file, and then use the configuration item my.option in your application. e.g %clevercloud.db.url=\u0026quot;jdbc:mysql://\u0026quot;${MYSQL_ADDON_HOST}\u0026quot;/\u0026quot;${MYSQL_ADDON_DB}\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n","overview#Overview":"Clever Cloud supports Play 1.x applications natively. The present guide explains how to set up your application to run on Clever Cloud.\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\n"},"title":"Deploy Play Framework 1.x Scala"},"/doc/deploy/application/scala/tutorials/play-framework-2/":{"data":{"":"","configure-your-scala--play-2-application#Configure your Scala + Play! 2 application":"Mandatory configuration Starting from Play 2.4, your application needs Java 8 to run. Please read select java version for more information. Play! 2 applications use sbt. Please have a look at deploy scala apps for a complete documentation on sbt deployment options.\nGenerate application secret To deploy a Play! application you have to set a secret in your conf/application.conf the environment variable name depends on your Play2! version:\n2.6.x: play.http.secret.key=${?APPLICATION_SECRET}, to generate secret use sbt playGenerateSecret; 2.4.x -\u0026gt; 2.5.x: play.crypto.secret=${?APPLICATION_SECRET} -\u0026gt; sbt playGenerateSecret; 2.3.x: application.secret=${?APPLICATION_SECRET} -\u0026gt; sbt play-generate-secret. Then, in your Clever Cloud application define APPLICATION_SECRET environment variable with the generated value.\nCustom config file If you don\u0026rsquo;t want to use the default conf/application.conf configuration file, you can use the SBT_DEPLOY_GOAL environment variable SBT_DEPLOY_GOAL=-Dconfig.resource=clevercloud.conf\nHTTPS support HTTPS is handled by Clever Cloud ahead of your application, your application retrieves the traffic in plain http.\nIf you want to redirect HTTP traffic to HTTPS, please have a look at How to Redirect to HTTPS With Play 2.4.\nHTTP support with Play! 2.x \u0026lt; 2.4 To be able to use request.secure, you have to add trustxforwarded=true in application.conf.\nMulti-module project If you have a single repository with multiple modules, then you can specify which module to run with CC_SBT_TARGET_DIR environment variable.\nFor instance, if your Sbt project contains a shared and play module and you want to execute the play module, then add CC_SBT_TARGET_DIR=play environment variable.\nMonitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. To access the environment variables from your code, you need to add my.option=${MY_VARIABLE} in your application.conf file, and then use the configuration item my.option in your application. e.g %clevercloud.db.url=\u0026quot;jdbc:mysql://\u0026quot;${MYSQL_ADDON_HOST}\u0026quot;/\u0026quot;${MYSQL_ADDON_DB}. You can also use the System.getenv(\u0026quot;MY_VARIABLE\u0026quot;) method. Be aware that it can return null.\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\n","known-problems-with-play-2#Known problems with Play! 2":"sbt-plugin unresolved dependency error If your project fails with the error sbt.ResolveException: unresolved dependency: play#sbt-plugin;2.0: not found this is because some versions of Play2 try to retrieve a nonexistent version of \u0026ldquo;sbt-plugin\u0026rdquo; which is required by the framework. You have two options to fix this problem:\nYou can set the \u0026ldquo;play.version\u0026rdquo; environment variable in the /clevercloud/sbt.json file. For example, for Play 2.0.4: { \u0026#34;deploy\u0026#34;: { \u0026#34;goal\u0026#34;: \u0026#34;-Dplay.version=2.0.4\u0026#34; } } You can modify plugins.sbt in the project folder of your app like the following: // Comment to get more information during initialization logLevel := Level.Warn // The Typesafe repository resolvers += \u0026#34;Typesafe repository\u0026#34; at \u0026#34;https://repo.typesafe.com/typesafe/releases/\u0026#34; // Use the Play sbt plugin for Play projects addSbtPlugin(\u0026#34;play\u0026#34; % \u0026#34;sbt-plugin\u0026#34; % \u0026#34;2.0.4\u0026#34;) // The important part of the configuration The two solutions do the job, you can pick your favorite.\nMore info on playframework.com.\nBad root server path error The error occurs when we cannot find a bin to execute your project.\nFailed to acquire connection: Too many connections You may run into this error during deployments:\n[error] c.j.b.h.AbstractConnectionHook - Failed to acquire connection to jdbc:\u0026lt;address\u0026gt; Sleeping for 1000ms and trying again. Attempts left: 10. Exception: null.Message:FATAL: too many connections for role \u0026#34;\u0026lt;user\u0026gt;\u0026#34; By default, Play! opens a pool of 10 connections, which is more than the connection limit allowed by DEV database plans. During a no-downtime deployment, there are at least two instances of the application running in parallel, so it\u0026rsquo;s 20 connections.\nTo avoid connection exhaustion, you should limit your pool at half the number of available connections (if you have horizontal scaling enabled, adjust accordingly).\n# conf/application.conf db.default.partitionCount=2 db.default.maxConnectionsPerPartition=5 db.default.minConnectionsPerPartition=5 More configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n","overview#Overview":"Clever Cloud supports Play! 2 applications natively. The following guide explains how to set up your application to run on Clever Cloud.\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\n"},"title":"Deploy Play Framework 2 Scala"},"/doc/deploy/application/static/static/":{"data":{"":"","overview#Overview":"If you only need to serve static files without executing any code on the backend, for instance for a javascript Single Page Application (SPA), you can create a static application.\nThis runtime is based on apache, so shares a lot with the PHP runtime. This means you can use .htaccess files for redirection or access control.\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. Application deployment on Clever Cloud is via Git or FTP.\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nFTP Deployment Make sure you have Filezilla or an other FTP software installed in your machine.\nWhen you have chosen to deploy your application via FTP at the application creation, a free FS Bucket has been created with an ID matching your application\u0026rsquo;s ID.\nYou will find the FTP credentials in the configuration tab of this particular FS Bucket.\nJust follow the instructions of your FTP Software to send code to Clever Cloud.\n‚ö†Ô∏è An FTP application is automatically started once the application is created, even if no code has been sent. Refer to our Quick Start - FTP deployment for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n","serving-indexhtml-for-spa-single-page-application-routers#Serving index.html for SPA (Single Page Application) routers":"When you work with an SPA framework like React, Vue.js, Angular\u0026hellip;, you\u0026rsquo;re using client side routing. This means when you click on a link going to /the-page, your browser doesn\u0026rsquo;t make an HTTP request for /the-page. Instead, the client side router highjacks the clicks on links, changes the DOM to display the page and ask the browser to change the URL in the address bar to /the-page.\nWhat happens if you try to refresh the page? If you do this, the browser will try to make an HTTP request for /the-page. In most situations, SPA only have one HTML document at the root called index.html. This is why, you\u0026rsquo;ll probably get a 404 error.\nTo fix this, most people using SPA frameworks configure their HTTP server to serve the index.html for all unkown requests. By this we mean for all requests that don\u0026rsquo;t have a matching file on disk to serve.\nTo do this with our static applications, you need a .htaccess file like this at the root of your project:\nRewriteEngine On # If an existing asset or directory is requested, serve it RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -f [OR] RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -d RewriteRule ^ - [L] # If the requested resource doesn\u0026#39;t exist, use index.html RewriteRule ^ /index.html "},"title":"Deploy static files"},"/doc/deploy/clever-grid/clevergrid/":{"data":{"":"","billing#Billing":"Clever Grid application are reports on the Clever Cloud platform to billing purpose\n1 GPU cost 10 euros by day. Charged per minute. Storage add-ons are based on the Clever Cloud billing : https://www.clever-cloud.com/en/pricing ","command-line-management#Command line management":"In addition to the Clever Grid console, you can manage your add-ons and applications from the command line with Clever Tools.\nsee : https://www.clever-cloud.com/doc/clever-tools/getting_started/\n","concepts-in-clever-grid#Concepts in Clever Grid":"Clever Grid is the machine learning oriented platform by Clever Cloud. It provides a unified GPU ecosystem to run your scripts.\nOrganization, Application, Add-on In Clever Grid you create some applications under one organization. Organization is useful to manage roles and team collaboration.\nAn application is a stateless virtual machine which runs your code.\nAdditionally to an application, you can link one or more stateful virtual machine called add-on in Clever Grid. That lets you keep your data\nApplication as Runner, Application as Webapp In some case, you may just need a one run of a script. To train a model or proceed a huge calculation for example. That the interest of Runner. A Runner runs a script and then go away.\nA Webapp keeps the application up and serve via HTTP.\n","create-an-add-on#Create an add-on":" Go to https://dashboard.clevergrid.io, Add a ‚Äúa storage service‚Äù. Addons Select the storage plan you need Link it to your applications ‚ÑπÔ∏è Add-ons's credentials will be automatically set up in your application. Yet it can be found on the \u0026quot;Add-on dashboard\u0026quot; tabs of your dashboard by the Clever Cloud console. ","create-an-application#Create an application":" ‚ö†Ô∏è Remember that an application is **stateless**. To save your data, you need to use an add-on. Go to https://dashboard.clevergrid.io, create a ‚Äúbrand new application‚Äù. Create application. Select the application type : Docker (Runner | Webapp) Docker Python (Runner | Webapp) Python Java (Runner | Webapp) Java Select the size of your instance(s) and the number of nodes (optional) You can choose a Template for your application ‚ÑπÔ∏è Template will set up for you a compete ecosystem for a specific application. It provides add-ons and environment variables for you.\nJupyter Notebook R Notebook ‚Ä¶ ","send-your-code#Send your code":"Your Clever Grid application is now set up to receive your code.\nGo to your project and add the Clever Grid repository to your repository :\ngit remote add clever-grid git+ssh://git@push-clevergrid-clevercloud-customers.services.clever-cloud.com/\u0026lt;APP_ID\u0026gt; ‚ÑπÔ∏è You can find the repository address on the overview page of your application \u0026lt;figure class=\u0026quot;cc-content-img\u0026quot;style=\u0026quot;width:100%\u0026quot;\u0026gt; \u0026lt;img src=\u0026quot;/images/git-url.png\u0026quot; alt=\u0026quot;git-url\u0026quot; class=\u0026quot;img-fluid\u0026quot; data-action=\u0026quot;zoom\u0026quot; /\u0026gt; \u0026lt;figcaption\u0026gt; git-url \u0026lt;/figcaption\u0026gt; \u0026lt;/figure\u0026gt; Push your code\n","set-up-an-application#Set-up an application":"You can pass some parameter to your application by environments variables.\n‚ö†Ô∏è If you deploy a Webapp, Clever Grid expects an exposed `PORT` as environment variable listening the port `8080` Go to dashboard.clevergrid.io and select your application Manage your environment variables by the tab \u0026ldquo;Environment variables\u0026rdquo; Environment selection Python applications If there is a requirements.txt in the root folder of your application, dependencies will be installed during the deployment.\nStarting file Clever Grid need to know which file runs to start your application. That can be a python file, declare in the CC_MLPYTHON_RUN_MAIN environment variable or custom bash script in CC_MLPYTHON_START_SCRIPT environment variable. ‚ö†Ô∏è It should contain the path of your main file. The path should be relative to the root of your repository. For example, ‚Äúpytorch.py‚Äù and ‚Äú./pytorch.py are both valid. Bash scripts are expected to be executable (via chmod+x)\nPython version : You can select the python version with the PYTHON_VERSION environment variable. Valid values are documented here: www.clever-cloud.com/doc/python/python_apps/#choose-python-version Docker application Refer to the Clever Cloud documentation : https://www.clever-cloud.com/doc/docker/\nJava application Refer to the Clever Cloud documentation : https://www.clever-cloud.com/doc/java/java-jar/\nHooking build steps Between the build steps and before running the script, you can hook scripts. The hooks are documented here: https://www.clever-cloud.com/doc/clever-cloud-overview/hooks/ E.g. you can have a post build hook to initialize conda and stuff.\n","support#Support":"If you are having issues, please let us know support@clever-cloud.com"},"title":"Machine Learning with Clever Grid"},"/doc/deploy/not-supported/":{"data":{"":"If your favorite runtime is not available, you can deploy it on Clever Cloud by Dockerizing it and make it run in a Docker instance. You will probably find a basic Docker file for your technology on the Docker hub.\nPlease refer to the Docker section of the Deploy an application section of this documentation to know how to deploy your Dockerized application.\nIf you are out of options please contact our support team and we\u0026rsquo;ll come up with a solution with you.\n"},"title":"How to deploy X if it is not natively supported"},"/doc/develop/best-practices/12-factors/":{"data":{"":"The twelve-factor app is a methodology for writing software delivered as a service, which is what you are doing by pushing your code to Clever Cloud and for container deployment in general. By writing code following these principles, your application will be cloud ready by design.\nAs a lot has already been written on the subject, we strongly recommend that you read some of the following links to begin with this methodology:\nhttps://en.wikipedia.org/wiki/Twelve-Factor_App_methodology https://www.clearlytech.com/2014/01/04/12-factor-apps-plain-english/ https://12factor.net/ Happy learning !\n"},"title":"The Twelve-Factor App"},"/doc/develop/best-practices/blue-green/":{"data":{"":"Blue/Green deployment is a technique used in automated deployment of applications, databases and services. Its main goal is to minimize the downtime and risks of an application by running two identical environment instances, one called Blue and the other one called Green.","contextual-example#Contextual example":"Let\u0026rsquo;s say you have a production environment called Blue, running for instance an e-commerce application. Your customers are routed to this Blue instance. In parallel, you will have a \u0026ldquo;sleeping clone\u0026rdquo; of Blue, named Green. Now let\u0026rsquo;s say you have achieved a new feature and want your customers to benefit of it. Using the \u0026ldquo;Blue/Green\u0026rdquo; technique, the new code will be used in Green. Once Green is ready, you will redirect your customers to Green, and we will put Blue in \u0026ldquo;sleeping mode\u0026rdquo;. When you will add new modification you will do it on Blue this time, then on Green again, and so on.\nThere are many benefits to this approach:\nif Green fails to deploy there will be no downtime for your customers or users as you will not use the broken Green and stay on \u0026ldquo;Blue\u0026rdquo; until you fix your code so it can start if you are not happy with the changes you added in Green, you can \u0026ldquo;awake\u0026rdquo; Blue and get back to the previous version easily by routing the traffic to it ","in-the-clever-cloud-context#In the Clever Cloud context":"When you push your source code to the Clever Cloud git remote, Clever Cloud will automatically use the \u0026ldquo;Blue/Green\u0026rdquo; pattern to apply your changes to your production.\nA new VM, let\u0026rsquo;s call it Blue is created. The deployment is successful when there\u0026rsquo;s no error in the build phase and the server answers on :8080/ with a non error code. And that\u0026rsquo;s it, you will use the new version on production within seconds.\nIf you push new changes, a Green VM will be created.\nDeployment succeeds If the deployment succeeds, Green will be the version in production and Blue will be turned off minutes later. This way, if you are not happy with the changes you made, just go the Clever Cloud web console, select your application and in the Overview menu, click the \u0026ldquo;Start last pushed commit\u0026rdquo; button, this will \u0026ldquo;awake\u0026rdquo; Blue and reverse your changes in production within a few minutes.\nDeployment fails If there is an error during the build phase or if the Green servers answers an error code on :8080/, we will alert you by email and Blue will remain the production server.\nNext time you push code a new Green VM will be created, then a Blue one, and so on.\nYou also may see some deployments that you haven\u0026rsquo;t triggered in your logs. It is because Clever Cloud uses \u0026ldquo;Blue/Green\u0026rdquo; pattern to update VMs, either security patches or versions updates.\n"},"title":"Blue/Green Deployments"},"/doc/develop/best-practices/cloud-storage/":{"data":{"":"You want to store files but you can\u0026rsquo;t decide between FS Buckets and Cellar. This article will compare them: usage, pros/cons, pricing.\nClever Cloud uses immutable disposable VMs. Every time you redeploy your application, you lose the old instances and all the files stored on their filesystems. If you want to avoid that, you have to store your important files outside of your instances.\nCellar and FS Buckets both allow you to store files outside of your instances for later use. But there are some differences between them.\n‚ÑπÔ∏è If you are coding a new project and need to store files, use Cellar. It will be cheaper and give you way more flexibility.\u0026lt;br /\u0026gt; If your want to run a WordPress site or some OSS PHP application and are in a hurry, you may not get to choose: use FS Buckets. ","what-is-cellar#What is Cellar?":"Cellar is an Amazon S3 API implementation using Ceph Rados Gateway. It provides an HTTP API that can be used with any S3 API Client. Clients exist for a lot of languages. You can use any S3 Client, from the official Amazon ones to the community ones.\nIf you already use S3, you will be in your element.\nTo store a file, issue a PUT HTTP request to Cellar\u0026rsquo;s API. To get a file, issue a GET request to the API. You need secret and public keys to authenticate your requests. You can manage ACLs and generate signed URLs with an expiration date.\nUpsides You can move the file uploads to your client entirely. Just give it a temporary signed URL (generated by your backend) and it will be able to upload directly to Cellar. That way, you don\u0026rsquo;t have to handle the receive-and-upload part on the server side.\nYour files are stored in a secure way outside of your apps FS. So an attacker will have a harder time to find it.\nYou can delegate the authorization part to Cellar by giving signed urls for file downloads and uploads.\nThe files are stored with a replication factor of 3, meaning that there are 2 replicas in addition of the original data.\nDownsides When deploying an application you did not write, file uploads may already be developed using local files. Like in WordPress, PrestaShop, etc. So you would have to use plugins or hack it to upload to Cellar.\n","what-is-fs-bucket#What is FS Bucket?":"Configuring FS Buckets in your application will give you a folder in your filesystem. This folder is shared between instances/applications. It\u0026rsquo;s mounted over the network. As for any network filesystem there are upsides and downsides.\nUpsides If your application manages files on a filesystem, you don\u0026rsquo;t have to change anything. Just setup your FS Bucket to mount on a given folder, setup your application to write in that folder and you are good to go!\nSince the folder is mounted over the network, multiple instances/applications can read it like any file on the system. At the same time.\nDownsides Since it\u0026rsquo;s a file on a filesystem, you can be tempted to store a SQLite (or equivalent) database in it. This would be wrong. If many instances try to write in it at the same time, you might end up with a corrupted database.\nFor the same reason, anything accessing a file in write at the same time might corrupt the data you put in it.\n","what-should-i-choose#What should I choose?":"Well, you read the upsides and downsides of both. You may understand where our preference goes, by now! If you can, use Cellar. S3 Client library exist in almost all languages. It\u0026rsquo;s cheaper. It\u0026rsquo;s more resilient to hardware failures. It gives you free processing power: when using files on your filesystem, you have to process them yourself. When using Cellar, you can delegate the handling of the upload to Cellar itself.\nIf you don\u0026rsquo;t have a choice, use whatever you have to use.\n"},"title":"Cloud Storage"},"/doc/develop/best-practices/load-testing/":{"data":{"":"","considerations-to-take-into-account#Considerations to take into account":"In the event that you use public front-ends, it is necessary to notify the support. Indeed, depending on the nature of the load, it is possible that a form of network blocking is performed by our teams if they are not notified.\nIn case you have dedicated frontends, note that too much load could impact your other applications behind this frontend. Because in general, the amount of private front-ends is lower than the number of public front-ends (new public front-ends are added on a regular basis).\n","online-and-local-load-tools#Online and local load tools":"Choosing a load-testing solution will depend on several factors. If simplicity and speed are the most important factors, online tools are the most appropriate. On the other hand, if you have to test particular protocols, and have fine configuration options via a little programming / scripting and for a lower cost, you may want to use dedicated, local solutions.\nOnline Online services are available to perform your tests. Most offer typical user journey scenarios to allow you to simulate a user:\nK6 Octoperf Loader.io Local, with open-source alternatives Some open source services to be installed on an infrastructure (workstation or IaaS in the best case) are also available:\nGatling Drill Locust Jmeter ","overview#Overview":"Overview Performing a performance test is the best way to determine how your application will perform under heavy load.\nIn general, these tests make it possible to identify:\nthe maximum number of concurrent users whether the current resources are sufficient to operate your application in good conditions and the maximum operational capacity of your application ","why-carry-out-these-tests#Why carry out these tests":"Performing these tests will allow you:\nto have perspective on the performance and stability of your infrastructure. to be able to identify bottlenecks in particular stress scenarios to identify and remove any weaknesses in architectures via supervision and performance management strategies and increase scalability The determining elements are:\nThe response time of your transactions (poorly optimized requests, etc.) The performance of the application (single-threaded application, expectations of external services, generation of logs in a file, etc.) The performance of managed services such as databases (lack of indexes, unnecessary iterations, etc.) Software design in general Hardware limitations such as CPU, RAM, network, etc. bad middleware configurations (databases, server, etc.) The response time between the client and the application "},"title":"Load testing"},"/doc/develop/build-hooks/":{"data":{"":"","cant-i-use-build_tool#Can\u0026rsquo;t I use \u003ccode\u003e$BUILD_TOOL\u003c/code\u003e?":"Deployment lifecycle An application deployed on Clever Cloud goes through two distinct phases. The build phase where dependencies are fetched and the application built, and the run phase where the application is launched. Hooks allow you to run specific tasks before and after those phases.\nThe available hooks are:\nPre Build Post Build Pre Run On Run Succeeded On Run Failed Setting hooks up Hooks are set up through environment variables. To set up a Post Build hook, you need to define a CC_POST_BUILD_HOOK variable:\nCC_POST_BUILD_HOOK=echo \u0026quot;it works!\u0026quot; You can directly put commands in the hook. Hooks have access to the environnement variables as well as a working Node.js installation.\nIf you have complex things to do, the best way is to put the logic in a bash script (dont forget to make it executable!) To use it, set the hook you want to trigger to the path of your script, relative to the root path of your repository. E.g. if your script is in a clevercloud folder at the root of your project then you can define CC_POST_BUILD_HOOK=./clevercloud/script.sh\nCan\u0026rsquo;t I use $BUILD_TOOL? Hooks are designed as an escape hatch for steps you can\u0026rsquo;t integrate properly in your build tool. In many case, you can (and you should) integrate as much as possible with your build tool, but sometimes it\u0026rsquo;s not possible.¬†Another reason to use hooks is to integrate Clever Cloud-specific tasks which don\u0026rsquo;t belong in the project\u0026rsquo;s build configuration.\n","deployment-lifecycle#Deployment lifecycle":"","exceptions#Exceptions":"Some application types do not have hooks support or only some of them.\nDocker For Docker, because you can do pretty much anything yourself inside your Dockerfile, only the following hooks are available:\nCC_RUN_SUCCEEDED_HOOK If you need support for other hooks, please reach out to our support and explain your use case.\n","hooks-types#Hooks types":"Pre Build (CC_PRE_BUILD_HOOK) This hook is ran before the dependencies are fetched. If it fails, the deployment fails.\nThis hook is ran every time.\nThis hook is perfect for:\nbuild tool configuration (eg setting up a .npmrc with private tokens) extra dependencies fetching (eg npm install for frontend deps) Post Build (CC_POST_BUILD_HOOK) This hook is ran after the project is built, and before the cache archive is generated. If it fails, the deployment fails.\nThis hook is not ran during deployments from cache.\nThis hook is perfect for:\nextra build steps that you want to cache (eg bundling your frontend assets) Pre Run (CC_PRE_RUN_HOOK) This hook is ran before the application is started, but after the cache archive has been generated. If it fails, the deployment fails.\nThis hook is ran every time.\nThis hook is perfect for:\npreparation tasks that need to be ran every time (eg a database migration check) Run Succeeded (CC_RUN_SUCCEEDED_HOOK) or Failed (CC_RUN_FAILED_HOOK) These hooks are ran once the application has started (or has failed starting). Their failure doesn\u0026rsquo;t cause the deployment to fail.\nOne of these hooks is ran every time.\nThese hooks are perfect for:\nnotifications clean-up hooks.postDeploy is deprecated These hooks replace the older postDeploy hook, which is now deprecated.\n","setting-hooks-up#Setting hooks up":""},"title":"Deployment Hooks"},"/doc/develop/env-variables/":{"data":{"":"Clever Cloud allows you to define environment variables that will be\ninjected in your application\u0026rsquo;s environment.","environment-variables-rules-and-formats#Environment variables rules and formats":"You will find below a list of rules applied to our environment variables keys and examples of the formats available on our different modes.\nRules Letters (ASCII only, upper and lower case) Valid: user_id, USER_ID, UsERId, userid, USERID Invalid: user_id?, ?userid, user.id, user id Digits (but not for first character) Valid: user2id, userid42 Invalid: 2userid, 1user_Id Underscores Valid: user_id, all_user_id, _user_id, _user_id__ Everything else is not allowed Java properties rules exception In case of a Java application you can also use:\nDashes Valid: spring-boot, spring-boot-database, --spring-boot, --spring Dots Valid: spring.boot, spring.datasource.url, .spring.url Format Here are some formats that you can use when editing your variables in our \u0026ldquo;expert\u0026rdquo; and JSON modes.\nExpert The format of an expert variable is VAR_NAME=\u0026quot;VAR_VALUE\u0026quot;.\nHere are some examples:\nMultiple variables examples:\nEMPTY=\u0026#34;\u0026#34; MULTI=\u0026#34;line one line two line three\u0026#34; ONE=\u0026#34;value ONE\u0026#34; TWO=\u0026#34;value TWO\u0026#34; Multiline:\nMULTI=\u0026#34;line one line two line three\u0026#34; Empty value:\nEMPTY=\u0026#34;\u0026#34; JSON The format of a JSON variable is { \u0026quot;name\u0026quot;: \u0026quot;VAR_NAME\u0026quot;, \u0026quot;value\u0026quot;: \u0026quot;VAR_VALUE\u0026quot; }.\nNote: You must put these variables in an array (see the multiple variable example to see how it goes).\nHere are some examples:\nMultiline:\n{ \u0026#34;name\u0026#34;: \u0026#34;MULTI\u0026#34;, \u0026#34;value\u0026#34;: \u0026#34;line one\\nline two\\nline three\u0026#34; } Empty value:\n{ \u0026#34;name\u0026#34;: \u0026#34;EMPTY\u0026#34;, \u0026#34;value\u0026#34;: \u0026#34;\u0026#34; } Multiple variables examples:\n[ { \u0026#34;name\u0026#34;: \u0026#34;EMPTY\u0026#34;, \u0026#34;value\u0026#34;: \u0026#34;\u0026#34; }, { \u0026#34;name\u0026#34;: \u0026#34;MULTI\u0026#34;, \u0026#34;value\u0026#34;: \u0026#34;line one\\nline two\\nline three\u0026#34; }, { \u0026#34;name\u0026#34;: \u0026#34;ONE\u0026#34;, \u0026#34;value\u0026#34;: \u0026#34;value ONE\u0026#34; }, { \u0026#34;name\u0026#34;: \u0026#34;TWO\u0026#34;, \u0026#34;value\u0026#34;: \u0026#34;value TWO\u0026#34; } ] ","how-are-variables-defined#How are variables defined?":"Variables are defined on a per-application basis. They are defined in four ways:\nBy provisioned add-ons linked to applications. The variables names are listed in the add-on\u0026rsquo;s information panel.\nBy linked applications with exposed configuration.\nBy adding variables yourself in the \u0026ldquo;Environment variables\u0026rdquo; panel of your application.\nSome environment variables are added automatically for each application.\nPlease note that if you define or modify environment variables, you will need to redeploy your application to make it use the new variables.\nCheck out our environment variable reference.\n","how-do-i-use-these-variables#How do I use these variables?":"Depending on the type of your application, the code will differ. You can find more information in the documentation pages related to your application type.\nHere is a non-exhaustive summary:\nLanguage Usage Go os.Getenv(\u0026quot;MY_VAR\u0026quot;) Haskell Os.Getenv[\u0026quot;MY_VAR\u0026quot;] Node.js process.env[\u0026quot;MY_VAR\u0026quot;] Java WAR System.getProperties().getProperty(\u0026quot;MY_VAR\u0026quot;) PHP getenv(\u0026quot;MY_VAR\u0026quot;) Play! Framework 1 \u0026amp; Play! Framework 2 System.getenv(\u0026quot;MY_VAR\u0026quot;) or ${MY_VAR} in application.conf Python os.getenv(\u0026quot;MY_VAR\u0026quot;) Ruby ENV[\u0026quot;MY_VAR\u0026quot;] Rust std::env::var(\u0026quot;MY_VAR\u0026quot;) Scala System.getenv(\u0026quot;MY_VAR\u0026quot;) .NET System.Environment.GetEnvironmentVariable(\u0026quot;MY_VAR\u0026quot;) ‚ÑπÔ∏è Please note that the variables are available at build time for runtimes that support build time instructions, such as Java WAR, Play! Framework 1, Play! Framework 2 or Scala. ","settings-you-can-define-using-environment-variables#Settings you can define using environment variables":"We use environment variables for some settings:\nIGNORE_FROM_BUILDCACHE: allows you to specify paths to ignore when the build cache archive is created. Must be relative to your application root. (e.g. foo/bar:foo/baz where bar or baz can be either a directory or a file)\nCC_OVERRIDE_BUILDCACHE: allows you to specify paths that will be in the build cache. Only those files/directories will be cached (e.g. foo/bar:foo/baz where bar or baz can be either a directory or a file).\n","special-environment-variables#Special environment variables":"Some variables are injected to the environment of your application when you deploy it, to inform you about the current context of your application and about the application itself.\nThey can be accessed as classic environment variables.\nAPP_ID: the ID of the application. Each application has a unique identifier used to identify it in our system. This ID is the same than the one you can find in the information section of your application.\nINSTANCE_ID: the ID of the current instance (scaler) of your application. It\u0026rsquo;s unique for each instance of your application and changes every time you deploy it.\nINSTANCE_TYPE: The type of the instance (scaler). Its value can be build or production. build is when your application is being built on a dedicated instance.\nCOMMIT_ID: the commit ID used as a base to deploy your application. As we remove the .git directory before the deployment (to avoid security problems), it can be used to know which version of your application is running on the server.\nAPP_HOME: The absolute path of your application on the server. Can be used to create absolute links in your application (e.g. ${APP_HOME}/foo/bar).\nCC_PRETTY_INSTANCE_NAME: A random string name generated for each instance using pokemon names.\nINSTANCE_NUMBER: See below\nWhat is the INSTANCE_NUMBER variable used for? This variable allows your application to differentiate each running node on the application level.\nIt will contain a different number for each instance of your application.\nFor example, if three instances are running, it will contain 0 for the first, 1 for the second and 2 for the third. It\u0026rsquo;s handy if you want to only run crons on 1 instance (e.g. only on instance 0).\n"},"title":"Environment variables"},"/doc/develop/workers/":{"data":{"":"","workers#Workers":" ‚ÑπÔ∏è Note that workers are not available for docker applications. You can run background tasks running in parallel of your application. They will be restarted automatically on error. Those are especially useful for environments where you can\u0026rsquo;t have long-running processes such as PHP, Ruby or Python.\nThe workers run in the same environment as your application. They are launched as services by systemd, in the application\u0026rsquo;s directory.\nAll you need to do is add one (or several) environment variables as such:\nCC_WORKER_COMMAND=my-awesome-worker Or\nCC_WORKER_COMMAND_0=my-awesome-worker CC_WORKER_COMMAND_1=my-other-worker By default, workers will be restarted if they exit with an error code. You can customise this behavior by setting the environment variable CC_WORKER_RESTART to one of always, on-failure (the default) or no.\nYou can define a delay to restart your worker with the environement variable CC_WORKER_RESTART_DELAY, the value is in seconds with a default value of 1. It will apply to all registered workers.\n‚ö†Ô∏è If the CC_WORKER_RESTART_DELAY value is too low and the restart policy is set to always, your worker might hit the restart burst limit, which may prevent your worker from being correctly restarted. If you want to have a restart delay less than 1 second and expect your script to restart multiple times in a very short time, please let us know on our support.\n"},"title":"Workers"},"/doc/extend/add-ons-api/":{"data":{"":"Clever Cloud offers you to sell your service as an add-on through the dashboard. This article will document how you can technically plug into the platform to provide add-on provision, deprovision, and configuration via the dashboard.\nThere are two faces here:\nThe add-on provider API - The API you need to provide and document to allow Clever Cloud\u0026rsquo;s backend to request provision and deprovision of add-ons.\nThe add-on infos API - The API Clever Cloud provides to allow you to get informations about provisioned add-ons and their owners.\n","add-on-infos-api#Add-on Infos API":"This API is part of the Clever Cloud API. The base URL for the Clever Cloud API is:\nhttps://api.clever-cloud.com/v2 You should prefix your calls by this base URL.\nAuthentication To secure the calls between your API and Clever Cloud, The Clever Cloud API is behind a HTTPS connection. The second step to secure your calls is to use a Basic authentication. The username must be your provider id (in our example, it is \u0026lsquo;addon-name\u0026rsquo;), and the password must be the password field set in your manifest.\nExample call to Clever Cloud add-on infos API $ curl -XGET https://api.clever-cloud.com/v2/vendor/apps -u addon-name:44ca82ddf8d4e74d52494ce2895152ee Endpoints List all add-ons provided by you GET /vendor/apps Response Body: [ { \u0026#34;provider_id\u0026#34;: \u0026#34;addon-name\u0026#34;, \u0026#34;addon_id\u0026#34;: \u0026#34;addon_xxx\u0026#34;, \u0026#34;callback_url\u0026#34;: \u0026#34;https://api.clever-cloud.com/v2/vendor/apps/addon_xxx\u0026#34;, \u0026#34;plan\u0026#34;: \u0026#34;test\u0026#34;, \u0026#34;owner_id\u0026#34;: \u0026#34;user_foobar\u0026#34; }, { \u0026#34;provider_id\u0026#34;: \u0026#34;addon-name\u0026#34;, \u0026#34;addon_id\u0026#34;: \u0026#34;addon_yyy\u0026#34;, \u0026#34;callback_url\u0026#34;: \u0026#34;https://api.clever-cloud.com/v2/vendor/apps/addon_yyy\u0026#34;, \u0026#34;plan\u0026#34;: \u0026#34;premium\u0026#34;, \u0026#34;owner_id\u0026#34;: \u0026#34;orga_baz\u0026#34; } ] provider_id - Should be the same as the \u0026ldquo;id\u0026rdquo; field of your uploaded manifest.\naddon_id - The add-on\u0026rsquo;s id from Clever Cloud\u0026rsquo;s POV.\ncallback_url - URL to call to get more informations about this add-on.\nplan - The current plan of this add-on.\nowner_id - The id of the owner that provisioned the add-on. This should never change.\nGet informations about a specific add-on Caution: this endpoint is not available during the provisioning call. If you want informations, you need to reply to the provisioning call, then you can call this endpoint.\nGET /vendor/apps/{addonId} Response Body: { \u0026#34;id\u0026#34;: \u0026#34;addon_xxx\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;My addon-name instance\u0026#34;, \u0026#34;config\u0026#34;: {\u0026#34;MYADDON_URL\u0026#34;: \u0026#34;http://myaddon.com/52e82f5d73\u0026#34;}, \u0026#34;callback_url\u0026#34;: \u0026#34;https://api.clever-cloud.com/v2/vendor/apps/addon_xxx\u0026#34;, \u0026#34;owner_email\u0026#34;: \u0026#34;user@example.com\u0026#34;, \u0026#34;owner_id\u0026#34;: \u0026#34;orga_baz\u0026#34;, \u0026#34;owner_emails\u0026#34;: [\u0026#34;user@example.com\u0026#34;, \u0026#34;foobar@baz.com\u0026#34;], \u0026#34;region\u0026#34;: \u0026#34;eu\u0026#34;, \u0026#34;domains\u0026#34;: [] } This endpoint gives you more informations about a provisioned add-on.\nid - The add-on id from Clever Cloud\u0026rsquo;s POV.\nname - The name the user gave to this add-on in the Clever Cloud dashboard.\nconfig - Config vars as you defined during the provision call.\ncallback_url - The URL you just called.\nowner_email - One of the owner\u0026rsquo;s email address.\nowner_emails - All the owner\u0026rsquo;s email addresses.\nowner_id - The id of the owner that provisioned the add-on. This should never change.\nregion - The region this add-on is located in. As for now, we only support \u0026ldquo;eu\u0026rdquo;.\ndomains - Originally the domains names for the application owning the add-on. We return an empty list.\nUpdate the config vars for an add-on Caution: this endpoint is not available during the provisioning call. If you want informations, you need to reply to the provisioning call, then you can call this endpoint.\nPUT /vendor/apps/{addonId} Request Body: { \u0026#34;config\u0026#34;: { \u0026#34;ADDON_NAME_URL\u0026#34;: \u0026#34;http://myaddon.com/ABC123\u0026#34; } } Response Status: 200 OK The object should only contain the config object your API returned during the provisioning.\n","add-on-provider-api#Add-on Provider API":"This is the API you need to provide to allow Clever Cloud to provision an add-on for a customer.\nHow it works When a Clever Cloud customer uses the marketplace to provision an add-on, Clever Cloud sends a request to your service which provides a new add-on for this app.\nBuild an add-on To become an add-on provider, you need to provide the provisioning API as defined below. You can implement your API in any language. The Sample Code section will show you examples in various languages / frameworks.\nTo document your API, and start the process of becoming an add-on provider, you need to send to support@clever-cloud.com a manifest file. This file contains a JSON that describes your add-on.\nExample manifest Here is what the manifest JSON must look like:\n{ \u0026#34;id\u0026#34;: \u0026#34;addon-name\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;Addon Name\u0026#34;, \u0026#34;api\u0026#34;: { \u0026#34;config_vars\u0026#34;: [ \u0026#34;ADDON_NAME_MY_VAR\u0026#34; ], \u0026#34;regions\u0026#34;: [ \u0026#34;eu\u0026#34; ], \u0026#34;password\u0026#34;: \u0026#34;44ca82ddf8d4e74d52494ce2895152ee\u0026#34;, \u0026#34;sso_salt\u0026#34;: \u0026#34;fcb5b3add85d65e1dddda87a115b429f\u0026#34;, \u0026#34;production\u0026#34;: { \u0026#34;base_url\u0026#34;: \u0026#34;https://yourservice.com/clevercloud/resources\u0026#34;, \u0026#34;sso_url\u0026#34;: \u0026#34;https://yourservice.com/clevercloud/sso/login\u0026#34; }, \u0026#34;test\u0026#34;: { \u0026#34;base_url\u0026#34;: \u0026#34;http://localhost:9000/clevercloud/resources\u0026#34;, \u0026#34;sso_url\u0026#34;: \u0026#34;http://localhost:9000/clevercloud/sso/login\u0026#34; } } } Fields\nid - An id for your add-on. All lower case, no spaces or punctuation. Underscores and dashes are allowed. This can‚Äôt be changed after the first push. It is also used for HTTP basic auth when making provisioning calls.\nname (Optional) - A human readable name for your add-on. You will be able to change it later in the dashboard, so you don\u0026rsquo;t even have to provide it right now.\napi/config_vars - A list of config vars that will be returned on provisioning calls. Each config_var name MUST start with the capitalized, underscorized add-on id, as in the example.\napi/password - Password that Clever Cloud will send in HTTP basic auth when making provisioning calls. You should generate a long random string for that field.\napi/sso_salt - Shared secret used in single sign-on between the Clever Cloud admin panel and your service‚Äôs admin panel. You should generate a long random string for that field.\napi/regions - The list of geographical zones supported by your add-on. It cannot be empty. As for now, it MUST contain the element \u0026ldquo;eu\u0026rdquo;. More will be supported.\napi/production/base_url - The production endpoint for Clever Cloud api actions (provision, deprovision, and plan change).\napi/production/sso_url - The production endpoint for single sign-on.\napi/test/base_url - The test endpoint for Clever Cloud api actions. Used to test your service when you create an add-on provider. Then it is the api/production/sso_url which is used.\napi/test/sso_url - The test endpoint for single sign-on. Used to test your service when you create an add-on provider. Then it is the api/production/base_url which is used.\nAuthentication To secure the calls between your Clever Cloud and API, please provide a HTTPS connection. The second step to secure the calls is to use a Basic authentication. The username must be your provider id (in our example, it is \u0026lsquo;addon-name\u0026rsquo;), and the password must be the the password field set in your manifest.\nSo your provider API must check that all calls to it are authenticated with these user and password.\nSample with Flask in Python from functools import wraps from flask import request, Response def check_auth(username, password): \u0026#34;\u0026#34;\u0026#34;This function is called to check if a username / password combination is valid. \u0026#34;\u0026#34;\u0026#34; return password == \u0026#39;44ca82ddf8d4e74d52494ce2895152ee\u0026#39; def authenticate(): \u0026#34;\u0026#34;\u0026#34;Sends a 401 response that enables basic auth\u0026#34;\u0026#34;\u0026#34; return Response( \u0026#39;Could not verify your access level for that URL.\\n\u0026#39; \u0026#39;You have to login with proper credentials\u0026#39;, 401, {\u0026#39;WWW-Authenticate\u0026#39;: \u0026#39;Basic realm=\u0026#34;Poney required\u0026#34;\u0026#39;}) def requires_auth(f): @wraps(f) def decorated(*args, **kwargs): auth = request.authorization if not auth or not check_auth(auth.username, auth.password): return authenticate() return f(*args, **kwargs) return decorated Provisioning When a customer installs your add-on, Clever Cloud issues a POST request to your service to provision a ressource for his app.\nThe request will be the following:\nRequest: POST {base_url} Request Body: { \u0026#34;addon_id\u0026#34;: \u0026#34;addon_xxx\u0026#34;, \u0026#34;owner_id\u0026#34;: \u0026#34;orga_xxx\u0026#34;, \u0026#34;owner_name\u0026#34;: \u0026#34;My Company\u0026#34;, \u0026#34;user_id\u0026#34;: \u0026#34;user_yyy\u0026#34;, \u0026#34;plan\u0026#34;: \u0026#34;basic\u0026#34;, \u0026#34;region\u0026#34;: \u0026#34;EU\u0026#34;, \u0026#34;callback_url\u0026#34;: \u0026#34;https://api.clever-cloud.com/v2/vendor/apps/addon_xxx\u0026#34;, \u0026#34;logplex_token\u0026#34;: \u0026#34;logtoken_yyy\u0026#34;, \u0026#34;options\u0026#34;: {} } Response Body: { \u0026#34;id\u0026#34;: \u0026#34;myaddon_id\u0026#34;, \u0026#34;config\u0026#34;: { \u0026#34;ADDON_NAME_MY_VAR\u0026#34;: \u0026#34;some value\u0026#34; }, \u0026#34;message\u0026#34;: \u0026#34;Some provisioning message\u0026#34; } The request body contains the following fields:\naddon_id - The id we give to your add-on to identify it on our side.\nowner_id - The id of the customer this add-on will belong to.\nowner_name - The name of the customer. (Actually, the name of the organisation)\nuser_id - The id of the user that is performing the action of provisioning this add-on. (The user will do it for the account of owner_id).\nplan - The slug field for the plan the user chose. You can create plans in the dashboard once your add-on manifest has been uploaded to the Clever Cloud platform. We send you the slug of the given plan, not its name.\nregion - The region to provision the add-on. As for now, only \u0026ldquo;EU\u0026rdquo; will be sent.\ncallback_url - The URL you can use to get informations about the add-on and the user. This URL is available as soon as the provisioning is done. You can\u0026rsquo;t use this URL during the POST call.\nlogplex_token - Token used to identify what you send to our log collector. The log collector API doc is here: /clever-cloud-addons-api/add-ons-log-collector/\noptions - String -\u0026gt; String map with options. We don\u0026rsquo;t currently support this, so it will be empty for now.\nThe response body contains the following fields:\nid - The add-on id as seen from your side. It MUST be a String.\nconfig (Optional) - A String -\u0026gt; String map with value for each config_var defined in your manifest. A key that is not in your config_vars will be ignored.\nmessage (Optional) - A creation message we will display in the dashboard.\nDeprovisioning When a customer deletes your add-on, Clever Cloud issues a DELETE request to your service to deprovision a ressource for his app.\nThe request will be the following:\nRequest: DELETE {base_url}/{addon_id} Request Body: none Response Status: 200 addon_id - This is the same as the id field set in the response to the provisioning call. Plan change When a customer wants to change it\u0026rsquo;s add-on\u0026rsquo;s plan, Clever Cloud issues a PUT request to your service.\nThe request will be the following:\nRequest: PUT {base_url}/{addon_id} Request Body: { \u0026#34;addon_id\u0026#34;: \u0026#34;addon_xxx\u0026#34;, \u0026#34;plan\u0026#34;: \u0026#34;premium\u0026#34; } Response Body: { \u0026#34;config\u0026#34;: { ... }, \u0026#34;message\u0026#34;: \u0026#34;your message here\u0026#34; } addon_id - This is the same as the id field set in the response to the provisioning call. The request body contains:\naddon_id - The add-on\u0026rsquo;s id as seen from our side.\nplan - The name of the new plan.\nThe response body contains:\nconfig - The value for the new config map. Same constraints as in the provisioning response.\nmessage - A message displayed in our dashboard.\nSSO Your service probably has a web UI admin panel that your users log into to manage and view their resources.\nClever Cloud customers will be able to access the admin panel for their resource if you implement single sign-on.\nClever Cloud will generate a single sign-on token by combining the salt (a shared secret), timestamp, and resource ID. The user‚Äôs browser will be redirected to your site with this token. Your site can confirm the authenticity of the token, then set a cookie for the user session and redirect them to the admin panel for their resource.\nWhen the user clicks your add-on in their add-on menu, they will be directed via HTTP POST to a URL defined in your manifest.\nPOST \u0026lt;production/sso_url\u0026gt; Request Body: id=\u0026lt;id\u0026gt;\u0026amp;token=\u0026lt;token\u0026gt;\u0026amp;timestamp=\u0026lt;timestamp\u0026gt;\u0026amp;nav-data=\u0026lt;nav-data\u0026gt;\u0026amp;email=\u0026lt;email\u0026gt; The hostname or sso_url comes from your add-on manifest. The id is the ID for the previously provisioned resource. The timestamp is a millisecond timestamp. You SHOULD verify that the timestamp is not older than 15 minutes. the token is computed using the formula below. Nav data contains information like the current app name and installed add-ons for Clever Cloud Dashboard. Token The token field in the sso call, is created as follow:\nsha1sum(id + \u0026#39;:\u0026#39; + sso_salt + \u0026#39;:\u0026#39; + timestamp) Where:\nid - The id of the connecting add-on. This is the id you returned on the provision call.\nsso_salt - The sso_salt field defined in your manifest.\ntimestamp - The timestamp field of the sso request.\nSample in Python from hashlib import sha1 import time id = \u0026#34;1234\u0026#34; salt = \u0026#34;fcb5b3add85d65e1dddda87a115b429f\u0026#34; timestamp = str(time.time()) token = sha1(id + \u0026#39;:\u0026#39; + salt + \u0026#39;:\u0026#39; + timestamp).hexdigest() print token This will return:\n\u0026#39;aca601ba464437cbaa12b2fedd7db755c32ddb5e\u0026#39; ","sample-code#Sample code":"Add-on Skeleton in Python #!/usr/bin/env/python # -*- coding:utf-8 -*- \u0026#34;\u0026#34;\u0026#34; api.py \u0026#34;\u0026#34;\u0026#34; from flask import Flask, redirect, Response, jsonify, request import auth import provision app = Flask(__name__) @app.route(\u0026#39;/\u0026#39;) def index(): \u0026#34;\u0026#34;\u0026#34; Render the home template \u0026#34;\u0026#34;\u0026#34; return redirect(\u0026#34;https://google.com/\u0026#34;) @app.route(\u0026#39;/clevercloud/resources\u0026#39;, methods=[\u0026#39;POST\u0026#39;]) @auth.requires_auth def clevercloud_create_resource(): data = request.json msg = provision.add(**data) return jsonify(msg) @app.route(\u0026#39;/clevercloud/resources/\u0026lt;string:id\u0026gt;\u0026#39;, methods=[\u0026#39;DELETE\u0026#39;,\u0026#39;PUT\u0026#39;]) @auth.requires_auth def clevercloud_action_resource(id): data = request.json if request.method == \u0026#39;POST\u0026#39;: msg = provision.del(id,**data) if request.method == \u0026#39;PUT\u0026#39;: msg = provision.update(id,**data) return jsonify(msg) @app.route(\u0026#39;/clevercloud/sso/login\u0026#39;) def clevercloud_sso_login(): return Response(status=200) if __name__ == \u0026#34;__main__\u0026#34;: app.run(host=\u0026#39;0.0.0.0\u0026#39;,port=9000,debug=True) Add-on API template using scala and Play! framework 2. https://GitHub.com/CleverCloud/addon-provider-template\nAdd-on API template using Node.js https://GitHub.com/Redsmin/passport-clevercloud\n"},"title":"Add-on API"},"/doc/extend/add-ons-log-collector/":{"data":{"":"This article targets the add-on providers who want to integrate logs\nfrom their add-ons to Clever Cloud\u0026rsquo;s logging system. Doing this\nallows the users to get their add-on\u0026rsquo;s logs in Clever Cloud\u0026rsquo;s\ndashboard.","send-a-line-of-log#Send a line of log":"Log lines must be sent via https. See the following example with the curl command:\n$ curl -X POST \u0026#34;https://logs.cleverapps.io/logs\u0026#34; \\ --user \u0026#34;token:logtoken_foobar\u0026#34; \\ -d \u0026#34;72 \u0026lt;190\u0026gt;1 2013-03-27T20:02:24+00:00 hostname logtoken_foobar procid - - foo72 \u0026lt;190\u0026gt;1 2013-03-27T20:02:24+00:00 hostname logtoken_foobar procid - - bar\u0026#34; \\ -H \u0026#34;Content-Length: 150\u0026#34; \\ -H \u0026#34;Content-Type: application/logplex-1\u0026#34; Let\u0026rsquo;s explain this request:\n-X POST - This request is obvioulsy a POST one, since you need to send new data.\n--user token:logtoken_foobar - This is the basic authentication content. The user must be the string \u0026rsquo;token\u0026rsquo;, and the password must be your log token, as sent on a provisioning call.\nContent-Length: 150 - Length of the body. Must be set.\nContent-Type: application/logplex-1 - This is the expected content type.\n72 \u0026lt;190\u0026gt;1 2013-03-27T20:02:24+00:00 hostname logtoken_foobar procid - - foo - This a a log line. It is expected to respect the RFC 5424 notation. You can send multiple log lines in one request. Here is the log line decrypted:\nlength \u0026lt;prival\u0026gt;version time hostname logtoken procid msgid structured-data msg This message format is documented by the RFC 5424.\nlength - 72 in the example. It is the length in bytes of the encoded log line minus the length field and the following space. It is not the number of chars. In our example, this is how it could be done in java: (\u0026#34;\u0026lt;190\u0026gt;1 2013-03-27T20:02:24+00:00 \u0026#34; + \u0026#34;hostname logtoken_foobar procid - - foo\u0026#34;).getBytes().length prival - The priority value of the message. Here 190 means \u0026ldquo;local7.info\u0026rdquo;. (More doc)\nversion - The syslog protocol version. Use 1 here. (More doc)\ntime - The time the log line was created. The format must follow the RFC 3339. (More doc)\nhostname - Make it your add-on id.\nlogtoken - The same token as in the Basic authentication password.\nprocid - Id of the process emitting the log. Not really used by the log collector since it\u0026rsquo;s more relevant for you to use in your own log system to debug processes.\nmsgid - Not used, should be -.\nstructured-data - Not used, should be -.\n"},"title":"Add-on Log Collector"},"/doc/extend/cc-api/":{"data":{"":"The Clever Cloud console and clever-tools are built on top of an API that\nallows you to manage your account and products. This article will explain how\nto connect to this API and use it.","http-calls#HTTP calls":"Authentication Clever Cloud API has an OAuth1 based authentication.\nThere are 3 supported methods for the signature: PLAINTEXT, HMAC-SHA1 and HMAC-SHA512.\nWhile PLAINTEXT is way easier for testing, you should use HMAC-SHA512 when it comes to production. This ensures that the request is totally verified.\nWe have a JavaScript client on GitHub where you can find a lot of informations. Especially in the esm/login.js file\nThis client is being used by our web Console and CLI. Also, the Console gives you a lot of information in the \u0026ldquo;Network\u0026rdquo; panel of the devtools. If you\u0026rsquo;re stuck, this is one way for debugging.\nFor the Authorization header, make sure to have something like:\nAuthorization: OAuth key=\u0026#34;value\u0026#34;, key2=\u0026#34;value2\u0026#34; The OAuth and doubles quotes around values are mandatory.\nCreate consumers tokens You need to create an OAuth consumer token in the Clever Cloud console.\nA link Create an oauth consumer is available under your organization\u0026rsquo;s addons list.\nAll created consumers will appear below that link, like your applications and addons.\nThese consumers allow you to register an application. By creating a consumer, users will be able to grant (or decline) privileges for your application.\nFor example, the Clever Cloud Console is using an oauth consumer. You (most of the time) give it full access to manage your account.\nYou need to set a callback URL, this is the url your user will be redirected to after he has been authenticated.\nGet a request token You have to make a POSTrequest to get a request token to the API.\nGet the authorization URL Ask the API for the authorization URL and go to this URL with a browser. Log in with your account and it will send you to the callback URL.\nGet the verifier token In the callback URL, you have the verifier token:\nhttps://www.example.com/callback?oauth_verifier=\u0026lt;verifierToken\u0026gt;\nWhere \u0026lt;verifierToken\u0026gt; is your token.\nGet the access token Make a POST request to get the access token with your request token and the verifier. You can use this access token to make OAuth1 signed requests.\nMore information about OAuth dance.\nThis seems cumbersome, is there an easier way? Yes the OAuth dance can be complicated, we created a small application that you can deploy on Clever Cloud. It will automate most of the pain away from you.\nThe code and tutorial are on https://github.com/CleverCloud/oauth-consumer-server.\nAPI endpoints documentation All the API endpoints are referenced in a swagger documentation.\nhttps://www.clever-cloud.com/doc/api/ The base URL for the API is :\nhttps://api.clever-cloud.com/v2/ ","websocket-api-requests#WebSocket API requests":"Connection protocol Clever Cloud API can handle WebSocket-Security requests for the logs or events. To connect to a WebSocket API URL follow this guide.\nTake a URL in the API for the WebSocket. Ex: https://api.clever-cloud.com/v2/events/event-socket Sign the OAuth request with this URL. Replace https:// by wss:// wss://api.clever-cloud.com/v2/events/event-socket Connect to this URL in WebSocket. When the WebSocket connection is opened, you need to send the OAuth1 header in this format :\n{ \u0026#34;message_type\u0026#34;: \u0026#34;oauth\u0026#34;, \u0026#34;authorization\u0026#34;: \u0026#34;\u0026lt;oauth_header\u0026gt;\u0026#34; } You need to replace \u0026lt;oauth_header\u0026gt; by the signed OAuth1 header.\nWebSocket endpoints Logs This endpoint allows you to receive real-time logs of an application via WebSocket.\nEvents This endpoint allows you to receive a stream of events emitted on your account.\nEvents like git push, add or remove an application / addon, deployments success / failed are available.\n"},"title":"Clever Cloud API"},"/doc/find-help/community/":{"data":{"":"Engage in our Developer Community by seeking or providing advice on application and development level questions. We have a community of developers using our platform and you can help and be helped there.","gitter#Gitter":" English room: https://gitter.im/CleverCloud/chatroom-en French room: https://gitter.im/CleverCloud/chatroom-fr ","public-irc-channel#Public IRC Channel":"We‚Äôre also available on IRC. You can join our channel:\n#clevercloud on irc.freenode.net "},"title":"Community"},"/doc/find-help/faq/":{"data":{"":"","can-i-scp-something-in-a-vm#Can I \u003ccode\u003escp\u003c/code\u003e something in a VM":"","does-clever-cloud-support-tlsssl-https#Does Clever Cloud support TLS/SSL (HTTPS)?":"","how-can-i-disable-one-of-my-existing-applications#How can I disable one of my existing applications?":"","how-do-i-add-or-remove-members-in-my-organizations#How do I add or remove members in my organizations?":"","how-do-i-define-cron-jobs-for-my-application#How do I define cron jobs for my application?":"","how-do-i-report-an-application-that-is-in-violation-of-your-terms-and-conditions#How do I report an application that is in violation of your Terms and Conditions?":"","how-many-applications-can-i-create-with-clever-cloud#How many applications can I create with Clever Cloud?":"","how-to-get-the-users-ip-address#How to get the user\u0026rsquo;s IP address?":"","how-to-know-if-a-user-comes-from-a-secure-connection#How to know if a user comes from a secure connection?":"","how-to-setup-a-firewall-on-clever-cloud#How to setup a firewall on Clever Cloud?":"","how-to-setup-domain-names-i-own#How to setup domain names I own?":"","i-get-a-unsupported-majorminor-version-error-how-can-i-fix-it#I get a \u003ccode\u003eUnsupported major.minor version\u003c/code\u003e error. How can I fix it?":"","i-need-a-private-ssh-key-to-fetch-my-private-dependencies-how-do-i-do-that#I need a private ssh key to fetch my private dependencies. How do I do that?":"","i-need-to-convert-something-to-pdf-with-wkhtmltopdf#I need to convert something to PDF with \u003ccode\u003ewkhtmltopdf\u003c/code\u003e":"","i-received-an-email-saying-addon-my-add-on-disk-is-nearly-full-what-do-i-do#I received an email saying \u0026ldquo;Addon [my add-on] disk is nearly full\u0026rdquo;. What do I do?":"What is a Scaler? A scaler is an individual instance hosting your app. You can attribute one or more Scalers to your apps. Scalers come in many sizes based on each language requirements from Pico to XL.\nEach scaler is given a fixed set of resources. When enabling auto-scalability, you have to set a minimum and a maximum of active scalers in your apps settings. This way you can precisely control your monthly fee.\nWhat languages and frameworks are supported by Clever Cloud? Currently Clever Cloud supports:\nJava (Play¬†Framework 1 \u0026amp; 2, Maven, War files‚Ä¶ ) Node.js PHP (see frameworks and CMS) Python (Django) Ruby Go Haskell Scala Rust Docker How many applications can I create with Clever Cloud? As many as you want. We\u0026rsquo;ve not set a limited number of apps by developer.\nHow to setup domain names I own? You can bind custom domain names to your applications. Please have a look at Custom Domain Names.\nHow can I disable one of my existing applications? Log in with your account to console.clever-cloud.com, and select the appropriate organization and app in the left column. Then click on the application name and select Overview. Click on the Stop button to stop your app.\nWhat type of content is allowed on Clever Cloud? Please refer to our Terms and Conditions, article 6, Obligations and responsibilities of the client.\nHow do I add or remove members in my organizations? Log in with your account to console.clever-cloud.com, and select the appropriate organization in the left panel. Then click on Members in the mid pane. You\u0026rsquo;ll see a list of the organization\u0026rsquo;s members. If your are an admin, you can revoke or grant permissions.\nHow do I report an application that is in violation of your Terms and Conditions? To report an application that is in violation of Clever Cloud\u0026rsquo;s Terms and Conditions, please contact us at abuse@clever-cloud.com.\nWe will investigate and contact the application\u0026rsquo;s owner over the violation if needed.\nDoes Clever Cloud support TLS/SSL (HTTPS)? Absolutely! For testing purposes, cleverapps.io domains support TLS out of the box. For custom SSL certificates, you can either order one from us or use an existing one. Have a look at installing SSL certificates, and feel free to contact us at contact@clever-cloud.com if you have questions.\nI\u0026rsquo;d like to have two applications available on the same domain name Please refer to prefix routing to learn how to have two applications share a domain name.\nHow do I define cron jobs for my application? See Cron Configuration File for more information.\nHow to know if a user comes from a secure connection? All connections are handled by load-balancers ahead of your applications and forwarded in plain http, you cannot rely on the server port to know the scheme used by the user.\nInstead, you can use the X-Forwarded-Proto HTTP header to get the information, it is set to either \u0026lsquo;http\u0026rsquo; or \u0026lsquo;https\u0026rsquo;.\n‚ö†Ô∏è In order to use `request.secure` instead of using the header, you must add `XForwardedSupport=all` in your *application.conf*. ‚ö†Ô∏è In order to use `request.secure` instead of accessing the header, you must add `trustxforwarded=true` in your *application.conf*. PHP: $_SERVER auth variables are always empty, how do I make this work? It\u0026rsquo;s explained here.\nHow to get the user\u0026rsquo;s IP address? All connections are handled by load-balancers ahead of your applications and forwarded in plain http.\nSo if you get the REMOTE_ADDR or Client-IP header, you will only get the IP of the front load balancer that forwarded the user request.\nInstead of these headers you need to use the X-Forwarded-For HTTP header, which is set by our load balancer to the client\u0026rsquo;s address. Please remember that it is a list, containing the address of each proxy the request has been through, if the said proxy has modified the X-Forwarded-For header: Read the Wikipedia page for more informations\nWhen my application runs on multiple instances, how can I differentiate them? If your application needs to differentiate all the running nodes internally, you can use the INSTANCE_NUMBER environment variable.\nFor example, if 3 instances are running for your application, this environment variable will contain 0 on the first, 1 on the second and 2 on the third.\nI need a private ssh key to fetch my private dependencies. How do I do that? If your company manages its own artifacts in a private repository (like, you can only access them via git+ssh or sftp), and you need a private key to connect to the server, you can commit them in your application\u0026rsquo;s Clever Cloud repository and then add a clevercloud/ssh.json file.\nThe ssh.json file is documented here.\nI get a Unsupported major.minor version error. How can I fix it? If you get this error on a Java (or any JVM language) application, it means that your application requires a specific version of Java.\nBy default, Java 8 is used; but you can change it. Please head over here for more information.\nI want SSH access to my server Clever Cloud does not give you access to a server or a VPS, it makes your application run. Each instance is started and configured automatically, and can be stopped at any moment.\nIf however, you still need SSH access for debugging purposes, please have a look at SSH access, but keep in mind that changes made on an instance are not persistent across deployments.\nI want to user Clever Cloud on my own premises, is that possible? Yes, since 2016 Clever Cloud is packaged for private datacenter. This offer called \u0026ldquo;Clever Cloud On Premises\u0026rdquo; is avaialble upon request: you can send a mail to sales@clever-cloud.com or visit https://www.clever-cloud.com/on-premises for more infos.\nWhere are my applications and add-ons located? Applications and add-ons are located in either Paris, France or Montreal, Canada. You can choose where you want it to be when you create an application and a Clever Cloud add-on.\nClever Cloud is based in Nantes, France.\nI want to run Kubernetes on top of Clever CLoud, is that possible? It\u0026rsquo;s currently not possible to use Kubernetes on our platform. It is however on our Roadmap.\nHow to setup a firewall on Clever Cloud? Specific firewall rules can be enabled on demand to the support or in case of attack.\nCan I scp something in a VM You cannot scp something to the VM, you can however easily scp something from the VM to the outside.\nI need to convert something to PDF with wkhtmltopdf wkhtmltopdf is available and fully functional but we deeply recommend to use use chromium headless instead.\nWhat is the timezone used by my application/add-on? All instances on Clever Cloud run on the UTC timezone. We recommend to handle all your dates in UTC internally, and only handle timezones when reading or displaying dates.\nI received an email saying \u0026ldquo;Addon [my add-on] disk is nearly full\u0026rdquo;. What do I do? A full disk can cause your database to crash or become unresponsive. We advise you to check how many free space there is. You might want to do one of the following:\nRemove data from your database Only you know your data!\nYou can take a snapshot of your database and export the obsolete data to a cold storage. Then you can remove records from your database, reindex your tables and try to perform a VACUUM operation if the database software allows it.\nMigrate your add-on to a bigger plan ‚Ä¶ Or to the same plan!\nYou can buy more disk space by migrating your add-on to a higher plan. If a VACUUM operation needs more disk that there is remaining, migrating to the same plan will clean up the file on disk and regain space.\n","i-want-ssh-access-to-my-server#I want SSH access to my server":"","i-want-to-run-kubernetes-on-top-of-clever-cloud-is-that-possible#I want to run Kubernetes on top of Clever CLoud, is that possible?":"","i-want-to-user-clever-cloud-on-my-own-premises-is-that-possible#I want to user Clever Cloud on my own premises, is that possible?":"","id-like-to-have-two-applications-available-on-the-same-domain-name#I\u0026rsquo;d like to have two applications available on the same domain name":"","php-_server-auth-variables-are-always-empty-how-do-i-make-this-work#PHP: \u003ccode\u003e$_SERVER\u003c/code\u003e auth variables are always empty, how do I make this work?":"","what-is-a-scaler#What is a Scaler?":"","what-is-the-timezone-used-by-my-applicationadd-on#What is the timezone used by my application/add-on?":"","what-languages-and-frameworks-are-supported-by-clever-cloud#What languages and frameworks are supported by Clever Cloud?":"","what-type-of-content-is-allowed-on-clever-cloud#What type of content is allowed on Clever Cloud?":"","when-my-application-runs-on-multiple-instances-how-can-i-differentiate-them#When my application runs on multiple instances, how can I differentiate them?":"","where-are-my-applications-and-add-ons-located#Where are my applications and add-ons located?":""},"title":"FAQ"},"/doc/find-help/support/":{"data":{"":"We provide basic support free-of-charge to all our users, even those who are not paying customers.","critical-application-support#Critical application support":"Clever Cloud offers a premium support option providing 24/7 a direct line to our team of support engineers. Our team‚Äôs focus is investigating and solving new problems, getting feedback on the service and working hard to improve the core service.\nGet more information and contact our sales team at:\nsales@clever-cloud.com ","email#Email":"Seek help by querying us by email, allowing you to quickly gain answers to your Clever Cloud specific questions and open a ticket directly with our support staff. We will respond to your email within a few hours, or two business days in the worst case.\nsupport@clever-cloud.com ","ticket-center#Ticket Center":"You can find in the console a button to start a conversation with our engineers. For each new ticket it will create a new thread, on a specific subject. Therefore, you can create several tickets for each issue.\nIf you open a ticket inside an organisation with members, they will be added to the discussion by e-mail.\nFeel free to use it when this service available, from 9 a.m to 6 p.m CEST+2 during open business days.\n"},"title":"Support"},"/doc/find-help/troubleshooting/":{"data":{"":"","file-persistence-issues#File Persistence issues":" \u0026ldquo;Why are my files disappearing after an application restart?‚Äù\nClever Cloud use Git to transfer your code and application\u0026rsquo;s assets from your local host to your scaler. If your application writes files on the local file system, those files are not committed: so you can\u0026rsquo;t save these files from a instance to an other.\nFor most of Cloud providers, the use of the file system is not a good practice. But we know it could be sometimes pretty useful. That\u0026rsquo;s why we provide an on-demand file system, easily pluggable to your app. In that case, your files will not be stored on the Git file system, but on a clustered file system, dedicated to it, accessible via FTP. This is the FS Bucket add-on.\nFollow the File System buckets documentation page to set up an FS Bucket for your application.\n","git-issues#Git issues":"warning: You appear to have cloned an empty repository ‚ÄúLogs are telling me \u0026quot;warning: You appear to have cloned an empty repository\u0026quot;‚Äù\nThis usually means that you created an application and asked to start it in the console without having pushed any source code to it before.\nUnder the Clever Cloud console, in your application\u0026rsquo;s information menu you will find a deployment url. Add it to your local repository git remotes with $ git remote add clever \u0026lt;your deployment url\u0026gt;. You can now push your commits to the new remote with $ git push clever master.\nIt may also be because you are working on another branch than master and pushed this specific branch to Clever Cloud and you encountered this error:\nremote: You tried to push to a custom branch. remote: This is not allowed. remote: error: hook declined to update refs/heads/\u0026lt;yourSpecificBranchName\u0026gt; ... error: failed to push some refs to \u0026#39;\u0026lt;yourSpecificBranchName\u0026gt;\u0026#39; Clever Cloud uses the master branch to deploy your application but this does not mean that you cannot use another one on your computer. What differs if you use another branch than master on your computer is that you need to explicitly tell Clever to consider the specific branch as the master one.\n$ git push \u0026lt;cleverRemote\u0026gt; \u0026lt;yourSpecificBranchName\u0026gt;:master If you called the Clever Cloud remote clever and your local branch is production, this becomes\n$ git push clever production:master fatal: Not a git repository (or any of the parent directories) This means that the folder in which you are is not a git repository. In your console, at the root of your project, type $ git init. This will create a new git repository for your folder locally. Link it to Clever Cloud by going under the Clever Cloud console. In your application\u0026rsquo;s information menu you will find a deployment url. Add it to your local repository git remotes with $ git remote add clever \u0026lt;your deployment url\u0026gt;. You can add all your files with $ git add ., then you need to commit the files with $ git commit -m \u0026quot;\u0026lt;your commit message\u0026gt;\u0026quot;. You will finally push your code with $ git push clever master.\nfatal: \u0026lsquo;clever\u0026rsquo; does not appear to be a git repository \u0026ldquo;clever\u0026rdquo; is a name used in our examples to represent the Clever Cloud servers. In order to be able to use the same name for yourself, you will need to create a git remote named clever like this:\n$ git remote add clever \u0026lt;your-git-deployment-url\u0026gt; You can find your deployment url under the Clever Cloud console in your application\u0026rsquo;s information menu.\nFail to push to a repository It might be because your SSH agent is not properly configured. Please check the SSH documentation page.\n","my-github-organization-is-not-listed-on-the-application-creation-page#My GitHub organization is not listed on the application creation page":"GitHub does not give us access to organizations created or joined after you\u0026rsquo;ve linked your GitHub account to Clever Cloud (which is a good thing). So you need to let the Clever Cloud API access it. You can do that on https://GitHub.com/settings/applications.\nYou can of course reach to support@clever-cloud.com if this page was not helpful enough.\n","node-application-failed-to-deploy-silently#Node application failed to deploy silently":" ‚ÄúMy Node.js application is unable to start. Logs are not helping‚Äù\nThis kind of silent error may be due to the server port your have setup in your application. Make sure your application is listening on port 8080. Most of the time, this simple line could do the trick in your main JS file:\n// Listen on port 8080 server.listen(8080); ","troubleshoot-mode#TROUBLESHOOT Mode":"Sometimes, when something goes wrong during the deployment, it can be hard to find out what happens. The troubleshoot mode allows you to keep the instances up while you find out what has happened. Additionally, the troubleshoot modes increases the overall verbosity of the deployment process.\nTo enable the troubleshoot mode, simply add CC_TROUBLESHOOT=true to your environment variables.\nIn addition to this, here are some common issues and how to fix them.\n","websites-are-not-accessible#Websites are not accessible":"Check the status of the services on clevercloudstatus.com."},"title":"Troubleshooting"},"/doc/getting-started/":{"data":{"":"Explore the following sections to learn to compose content using Hextra:\nOrganize Files Configuration Markdown Syntax Highlighting LaTeX Diagrams Shortcodes "},"title":"Getting Started"},"/doc/getting-started/authentication/":{"data":{"":" The API of Clever Cloud uses OAuth 1 to perform authentication actions. There are two ways to signup to Clever Cloud: email or GitHub login.\nGo to the Clever Cloud Console and select the method you prefer.\n@ Email Authentication This kind of auth requires a valid and non-temporary disposable e-mail, and a password having at least 6 characters. Do not forget to validate your email by clicking the link you will receive.\nGitHub Authentication The GitHub signup allows you to create an account or link your existing one to GitHub, in one click. This process asks the following permissions:¬†Read your Public Key Read User Repositories The \u0026ldquo;repository permission\u0026rdquo; is used to deploy your GitHub apps directly to Clever Cloud, with a simple step.\nIf you need to give access to Clever Cloud\u0026rsquo;s API to a specific GitHub organization, you can do it here.\nüîê Two Factor Authentication (2FA) Clever Cloud supports 2FA. You can enable it here: https://console.clever-cloud.com/users/me/authentication\nPlease, backup your recovery codes, we won\u0026rsquo;t be able to restore access to your account if you lose access to your regular codes.\n"},"title":"Authentication"},"/doc/getting-started/by-language/docker/":{"data":{"":" The API of Clever Cloud uses OAuth 1 to perform authentication actions. There are two ways to signup to Clever Cloud: email or GitHub login.\nGo to the Clever Cloud Console and select the method you prefer.\n@ Email Authentication This kind of auth requires a valid and non-temporary disposable e-mail, and a password having at least 6 characters. Do not forget to validate your email by clicking the link you will receive.\nGitHub Authentication The GitHub signup allows you to create an account or link your existing one to GitHub, in one click. This process asks the following permissions:¬†Read your Public Key Read User Repositories The \u0026ldquo;repository permission\u0026rdquo; is used to deploy your GitHub apps directly to Clever Cloud, with a simple step.\nIf you need to give access to Clever Cloud\u0026rsquo;s API to a specific GitHub organization, you can do it here.\nüîê Two Factor Authentication (2FA) Clever Cloud supports 2FA. You can enable it here: https://console.clever-cloud.com/users/me/authentication\nPlease, backup your recovery codes, we won\u0026rsquo;t be able to restore access to your account if you lose access to your regular codes.\nYou need to add a SSH key to your Clever Cloud\u0026rsquo;s account to deploy via Git. SSH keys are used to establish a secure connection between your computer and Clever Cloud. A user can have multiple SSH keys.\nI need to create my SSH key In your Terminal, enter the following bash line:\nssh-keygen -t ed25519 -C \u0026#34;your_email@youremail.com\u0026#34; This command creates a new ssh key using the provided email, so that the owner of the key can be identified.\nWhen prompted in which file you want to save the key, just press enter. If it says that the file already exists, enter n for no. Type ls, verify the presence of the file and jump to Add your SSH key on Clever Cloud.\nWhen asked, enter a passphrase:\nGenerating public/private ed25519 key pair. Enter file in which to save the key (/your_home_path/.ssh/id_ed25519): # Now you should enter a passphrase. Enter passphrase (empty for no passphrase): [Type a passphrase] Enter same passphrase again: [Type passphrase again] Which should give you something like this:\nYour identification has been saved in /your_home_path/.ssh/id_ed25519. Your public key has been saved in /your_home_path/.ssh/id_ed25519.pub. The key fingerprint is: 01:0e:e5:2d:ab:98:d6:17:a1:6d:f0:68:9f:d0:a2:db your_email@youremail.com I created my account with GitHub If your account is linked to GitHub, a panel with your GitHub SSH keys will appear in the \u0026ldquo;SSH Keys\u0026rdquo; tab. You can add any key already present in your GitHub account by clicking on the import button next to it.\nAdd your SSH key on Clever Cloud Public SSH Key To declare your public SSH Key on Clever Cloud, in the left navigation bar, go in \u0026ldquo;Profile\u0026rdquo; and in the \u0026ldquo;SSH Keys\u0026rdquo; tab, add the key by entering a name and the public SSH key. The key is the entire content of the id_[ed25519/rsa].pub file including the id_ed25519/ssh-rsa part and your email.\nPrivate SSH Key If you want to clone a repository from a private repository, you can add a Private SSH Key to an application by creating a folder clevercloud at the root of your application and creating the file clevercloud/ssh.json with the following content:\n{ \u0026#34;privateKeyFile\u0026#34;: \u0026#34;path/to/file\u0026#34; } Of course you need to provide a valid path to a file that contains a valid key and that you will push on the Clever Cloud git remote.\nIf you have trouble configuring this key you can refer to this extended documentation\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nConfigure your Docker application Mandatory configuration Be sure that you:\npush on the master branch. have and commit a file named Dockerfile or use the CC_DOCKERFILE environment variable if your Dockerfile has a different name, Here is what it will look like. run the application with CMD or ENTRYPOINT in your Dockerfile. listen on HTTP port 8080 by default (you can set your own port using CC_DOCKER_EXPOSED_HTTP_PORT=\u0026lt;port\u0026gt; environment variable). Dockerfile contents You can virtually put everything you want in your Dockerfile. The only mandatory (for us) instruction to put in it is:\nCMD \u0026lt;command to run\u0026gt; command to run: this is the command that starts your application. Your application must listen on port 8080. It can be easier for you to put a script in your docker image and call it with the CMD instruction.\nMemory usage during building If the building step of your app crashes because it uses more memory that it\u0026rsquo;s available, you\u0026rsquo;ll have to split the building and running steps and enable Dedicated build instance\n# The base image FROM outlinewiki/outline:version-0.44.0 # Run the memory intensive build on an instance with 4 GB of memory (M) RUN yarn install \u0026amp;\u0026amp; yarn build # Start the app on a smaller instance (nano) CMD yarn start TCP support Clever Cloud enables you to use TCP over Docker applications using using the environment variable CC_DOCKER_EXPOSED_TCP_PORT=\u0026lt;port\u0026gt;. Refer to the documentation page to know how to create [TCP redirections](https://devcenter.clever-cloud.com/doc/administrate/tcp-redirections/].\nDocker socket access Some containers require access to the docker socket, to spawn sibling containers for instance.\n‚ö†Ô∏è \u0026lt;p\u0026gt; Giving access to the docker socket breaks all isolation provided by docker. **DO NOT** give socket access to untrusted code. \u0026lt;/p\u0026gt; \u0026lt;/p\u0026gt; You can make the docker socket available from inside the container by adding the CC_MOUNT_DOCKER_SOCKET=true environment variable. In that case, docker is started in the namespaced mode, and in bridge network mode.\nPrivate registry We support pulling private images through the docker build command. To login to a private registry, you need to set a few environment variables:\nCC_DOCKER_LOGIN_USERNAME: the username to use to login CC_DOCKER_LOGIN_PASSWORD:¬†the password of your username CC_DOCKER_LOGIN_SERVER (optional): the server of your private registry. Defaults to Docker\u0026rsquo;s public registry. This uses the docker login command under the hood.\nEnable IPv6 networking You can activate the support of IPv6 with a IPv6 subnet in the docker daemon by adding the CC_DOCKER_FIXED-CIDR-V6=\u0026lt;IP\u0026gt; environment variable.\nBuild-time variables You can use the ARG instruction to define build-time environment variables.\nEvery environment variable defined for your application will be passed as a build environment variable using the --build-arg=\u0026lt;ENV\u0026gt; parameter during the docker build phase.\nDockerized Rust application Deployment To make your dockerized application run on clever Cloud, you need to:\nexpose port 8080 in your docker file run the application with CMD or ENTRYPOINT For instance, here is the Dockerfile used for the Rust application:\n# rust tooling is provided by `archlinux-rust` FROM geal/archlinux-rust MAINTAINER Geoffroy Couprie, contact@geoffroycouprie.com # needed by rust ENV LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib # relevant files are in `./source` ADD . /source WORKDIR /source # Clever Cloud expects your app to listen on port 8080 EXPOSE 8080 RUN rustc -V # Build your application RUN cargo build # Run the application with `CMD` CMD cargo run Dockerized HHVM application Deployment Deploying a HHVM application is a bit trickier as it needs to have both HHVM and nginx running as daemons. To be able to have them running both, we need to put them in a start script:\n#!/bin/sh hhvm --mode server -vServer.Type=fastcgi -vServer.Port=9000\u0026amp; service nginx start composer install echo \u0026#34;App running on port 8080\u0026#34; tail -f /var/log/hhvm/error.log Since the two servers are running as daemons, we need to start a long-running process. In this case we use tail -f. We then add start.sh as the CMD in the Dockerfile\n# We need HHVM FROM jolicode/hhvm # We need nginx RUN sudo apt-get update \\ \u0026amp;\u0026amp; sudo apt-get install -y nginx ADD . /root RUN sudo chmod +x /root/start.sh # Nginx configuration ADD hhvm.hdf /etc/hhvm/server.hdf ADD nginx.conf /etc/nginx/sites-available/hack.conf RUN sudo ln -s /etc/nginx/sites-available/hack.conf /etc/nginx/sites-enabled/hack.conf # Checking nginx config RUN sudo nginx -t RUN sudo chown -R www-data:www-data /root WORKDIR /root # The app needs to listen on port 8080 EXPOSE 8080 # Launch the start script CMD [\u0026#34;sudo\u0026#34;,\u0026#34;/root/start.sh\u0026#34;] Sample dockerized applications We provide a few examples of dockerized applications on Clever Cloud.\nElixir App Haskell App Hack / HHVM App Seaside / Smalltalk App Rust App Environment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. Git Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n"},"title":"Docker"},"/doc/getting-started/by-language/elixir/":{"data":{"":" The API of Clever Cloud uses OAuth 1 to perform authentication actions. There are two ways to signup to Clever Cloud: email or GitHub login.\nGo to the Clever Cloud Console and select the method you prefer.\n@ Email Authentication This kind of auth requires a valid and non-temporary disposable e-mail, and a password having at least 6 characters. Do not forget to validate your email by clicking the link you will receive.\nGitHub Authentication The GitHub signup allows you to create an account or link your existing one to GitHub, in one click. This process asks the following permissions:¬†Read your Public Key Read User Repositories The \u0026ldquo;repository permission\u0026rdquo; is used to deploy your GitHub apps directly to Clever Cloud, with a simple step.\nIf you need to give access to Clever Cloud\u0026rsquo;s API to a specific GitHub organization, you can do it here.\nüîê Two Factor Authentication (2FA) Clever Cloud supports 2FA. You can enable it here: https://console.clever-cloud.com/users/me/authentication\nPlease, backup your recovery codes, we won\u0026rsquo;t be able to restore access to your account if you lose access to your regular codes.\nYou need to add a SSH key to your Clever Cloud\u0026rsquo;s account to deploy via Git. SSH keys are used to establish a secure connection between your computer and Clever Cloud. A user can have multiple SSH keys.\nI need to create my SSH key In your Terminal, enter the following bash line:\nssh-keygen -t ed25519 -C \u0026#34;your_email@youremail.com\u0026#34; This command creates a new ssh key using the provided email, so that the owner of the key can be identified.\nWhen prompted in which file you want to save the key, just press enter. If it says that the file already exists, enter n for no. Type ls, verify the presence of the file and jump to Add your SSH key on Clever Cloud.\nWhen asked, enter a passphrase:\nGenerating public/private ed25519 key pair. Enter file in which to save the key (/your_home_path/.ssh/id_ed25519): # Now you should enter a passphrase. Enter passphrase (empty for no passphrase): [Type a passphrase] Enter same passphrase again: [Type passphrase again] Which should give you something like this:\nYour identification has been saved in /your_home_path/.ssh/id_ed25519. Your public key has been saved in /your_home_path/.ssh/id_ed25519.pub. The key fingerprint is: 01:0e:e5:2d:ab:98:d6:17:a1:6d:f0:68:9f:d0:a2:db your_email@youremail.com I created my account with GitHub If your account is linked to GitHub, a panel with your GitHub SSH keys will appear in the \u0026ldquo;SSH Keys\u0026rdquo; tab. You can add any key already present in your GitHub account by clicking on the import button next to it.\nAdd your SSH key on Clever Cloud Public SSH Key To declare your public SSH Key on Clever Cloud, in the left navigation bar, go in \u0026ldquo;Profile\u0026rdquo; and in the \u0026ldquo;SSH Keys\u0026rdquo; tab, add the key by entering a name and the public SSH key. The key is the entire content of the id_[ed25519/rsa].pub file including the id_ed25519/ssh-rsa part and your email.\nPrivate SSH Key If you want to clone a repository from a private repository, you can add a Private SSH Key to an application by creating a folder clevercloud at the root of your application and creating the file clevercloud/ssh.json with the following content:\n{ \u0026#34;privateKeyFile\u0026#34;: \u0026#34;path/to/file\u0026#34; } Of course you need to provide a valid path to a file that contains a valid key and that you will push on the Clever Cloud git remote.\nIf you have trouble configuring this key you can refer to this extended documentation\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nYou must select PostgreSQL add-on for a Phoenix application.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nConfigure your Elixir application Mandatory configuration Get your Elixir version in your console with $ elixir -v and set the environment variable CC_ELIXIR_VERSION to its value (available versions as of today are 1.8, 1.9, 1.10, 1.11, 1.12, 1.13 or 1.14). Compatibility between Elixir and Erlang/OTP Each version of Elixir uses the most recent compatible version of Erlang, based on the compatibility table provided in the official Elixir documentation. If you deploy a Phoenix application Edit the file config/prod.secret.exs to replace System.get_env(\u0026quot;DATABASE_URL\u0026quot;) with System.get_env(\u0026quot;POSTGRESQL_ADDON_URI\u0026quot;). Generate a secret token with $ mix phx.gen.secret. set environment variable SECRET_KEY_BASE to the value obtained with $ mix phx.gen.secret previously set envrionment variable CC_PHOENIX_RUN_ECTO_MIGRATE to true if you need to trigger the command $ mix ecto.migrate Build, deployment phases and custom configuration Once you push your code to Clever Cloud, the following commands are run:\nmix deps.get mix deps.compile npm install These commands will compile your dependencies at the root of your project folder. If you want to use another folder for npm install, specify it via the environment variable CC_PHOENIX_ASSETS_DIR. To change the folder for the entire build / run process, you should use APP_FOLDER environment variable.\nThen mix compile is run. If you want to override this behavior, you can set the environment variable CC_MIX_BUILD_GOAL to the value you desire.\nAt this point, there is the command npm run deploy.\nThen mix phx.digest is run. You can override this one with the variable CC_PHOENIX_DIGEST_GOAL.\nFinally, mix phx.server is invoked, and as always, you can override this behavior, either with CC_RUN_COMMAND where you have to specify the full command, or CC_PHOENIX_SERVER_GOAL where it will be a mix task by default.\nNote: If you need to specify the timezone of your application, you can do it with the variable TZ set to the usual timezone format, for instance Europe/Paris.\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n"},"title":"Elixir"},"/doc/getting-started/by-language/go/":{"data":{"":" The API of Clever Cloud uses OAuth 1 to perform authentication actions. There are two ways to signup to Clever Cloud: email or GitHub login.\nGo to the Clever Cloud Console and select the method you prefer.\n@ Email Authentication This kind of auth requires a valid and non-temporary disposable e-mail, and a password having at least 6 characters. Do not forget to validate your email by clicking the link you will receive.\nGitHub Authentication The GitHub signup allows you to create an account or link your existing one to GitHub, in one click. This process asks the following permissions:¬†Read your Public Key Read User Repositories The \u0026ldquo;repository permission\u0026rdquo; is used to deploy your GitHub apps directly to Clever Cloud, with a simple step.\nIf you need to give access to Clever Cloud\u0026rsquo;s API to a specific GitHub organization, you can do it here.\nüîê Two Factor Authentication (2FA) Clever Cloud supports 2FA. You can enable it here: https://console.clever-cloud.com/users/me/authentication\nPlease, backup your recovery codes, we won\u0026rsquo;t be able to restore access to your account if you lose access to your regular codes.\nYou need to add a SSH key to your Clever Cloud\u0026rsquo;s account to deploy via Git. SSH keys are used to establish a secure connection between your computer and Clever Cloud. A user can have multiple SSH keys.\nI need to create my SSH key In your Terminal, enter the following bash line:\nssh-keygen -t ed25519 -C \u0026#34;your_email@youremail.com\u0026#34; This command creates a new ssh key using the provided email, so that the owner of the key can be identified.\nWhen prompted in which file you want to save the key, just press enter. If it says that the file already exists, enter n for no. Type ls, verify the presence of the file and jump to Add your SSH key on Clever Cloud.\nWhen asked, enter a passphrase:\nGenerating public/private ed25519 key pair. Enter file in which to save the key (/your_home_path/.ssh/id_ed25519): # Now you should enter a passphrase. Enter passphrase (empty for no passphrase): [Type a passphrase] Enter same passphrase again: [Type passphrase again] Which should give you something like this:\nYour identification has been saved in /your_home_path/.ssh/id_ed25519. Your public key has been saved in /your_home_path/.ssh/id_ed25519.pub. The key fingerprint is: 01:0e:e5:2d:ab:98:d6:17:a1:6d:f0:68:9f:d0:a2:db your_email@youremail.com I created my account with GitHub If your account is linked to GitHub, a panel with your GitHub SSH keys will appear in the \u0026ldquo;SSH Keys\u0026rdquo; tab. You can add any key already present in your GitHub account by clicking on the import button next to it.\nAdd your SSH key on Clever Cloud Public SSH Key To declare your public SSH Key on Clever Cloud, in the left navigation bar, go in \u0026ldquo;Profile\u0026rdquo; and in the \u0026ldquo;SSH Keys\u0026rdquo; tab, add the key by entering a name and the public SSH key. The key is the entire content of the id_[ed25519/rsa].pub file including the id_ed25519/ssh-rsa part and your email.\nPrivate SSH Key If you want to clone a repository from a private repository, you can add a Private SSH Key to an application by creating a folder clevercloud at the root of your application and creating the file clevercloud/ssh.json with the following content:\n{ \u0026#34;privateKeyFile\u0026#34;: \u0026#34;path/to/file\u0026#34; } Of course you need to provide a valid path to a file that contains a valid key and that you will push on the Clever Cloud git remote.\nIf you have trouble configuring this key you can refer to this extended documentation\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nConfigure your Go application Mandatory configuration Be sure that:\nYour application listens to the wild network 0.0.0.0, not only localhost or 127.0.0.1 Your application listens on port 8080 You put your main code in a file named main.go (if you do not do that, Go will generate a library and not an executable) Apart from listening on port 8080, there is nothing to change on your application.\nGo production build on Clever Cloud We automatically build and run your application, see Build the application. By default, we consider that your repository contains a single application. We put your application in ${GOPATH}/src/{app_id} and then run go get {app_id}. Refer to clevercloud/go.json settings if you want to override this behaviour. By default, we deploy your application as a Go project named \u0026ldquo;\u0026lt;app_id\u0026gt;\u0026rdquo;. You can find the app_id of your application under the environment variable APP_ID. Please refer to environment injection to know how to query it in your application. The executable is run with the application\u0026rsquo;s root as its current path. So if your application has a static folder at its root, it will be accessible via ./static in your application. Build the application To build your application, you can use one of the three methods available:\ngo modules go build go get (default) Go modules If your project is compatible with go modules, be sure that the go.mod file is in your git tree. Note that it must be at the root of your application (see the APP_FOLDER environment variable if it isn\u0026rsquo;t\nFor now, you have to add the environment variable CC_GO_BUILD_TOOL=gomod to build using the go modules. In a future release, we will automatically build with go modules if the go.mod file is present at the root of your git tree.\nYour project\u0026rsquo;s entrypoint should be in the same folder as the go.mod file and be named main.go. If it isn\u0026rsquo;t, you have to specify it using the following environment variable:\nCC_GO_PKG=./path/to/entrypoint.go\nGo build If your project does not support go modules, it may include your vendored dependencies. In this case, go build must be used.\nTo use go build, you have to set the CC_GO_BUILD_TOOL=gobuild environment variable. We will then deploy your project in a classic GOPATH hierarchy using go build.\nThe CC_GO_PKG environment variable can be used to define the main file of your application. Defaults to main.go.\nGo get If your application has submodules and imports them with their full path or your main project is an external package hosted, for instance on GitHub (like github.com/me/myproject), you can define the environment variable CC_GO_PKG=github.com/me/myproject. We will now run go get ${CC_GO_PKG} instead of go get \u0026lt;app_id\u0026gt;. Also, go get requires that you put your main code in a file named main.go. If you do not do that, go will generate a library and not an executable. So if you get a Nothing listening on port 8080, please check that your main file is named main.go.\nYou can also force the use of go get by setting the environment variable CC_GO_BUILD_TOOL=goget. This is currently the default.\nNote: if you get a Nothing listening on port 8080 error, please check that your main file is named main.go.\nCustomize build using environment variables Variable Usage CC_GO_PKG Makes the deployer run go get ${CC_GO_PKG} instead of go get or go install ${CC_GO_PKG} instead of go install mypackage. CC_GO_BUILD_TOOL Available values: gomod, goget, gobuild. Makes the deployer use go modules, go get or go build to build your application. If not specified, defaults to goget. CC_GO_RUNDIR Makes the deployer use the specified directory to run your binary. If your application must be in $GOPATH/src/company/project for your vendored dependencies, set this variable to company/project. clevercloud/go.json This configuration file is optional.\nIf you want to configure precisely your dependencies (e.g. have private libraries, or specific versions of some libraries), here is the way:\nMake your repository have a GOPATH structure:\n./ src/ myapp/ foo/ module1/ module2/ module3/ Here you have the modules myapp, foo/module1, foo/module2 and module3.\nCreate a clevercloud/go.json file at the top of your repository:\n./ clevercloud/ go.json src/ myapp/ ... In the go.json file, put the following:\n{ \u0026#34;deploy\u0026#34;: { \u0026#34;appIsGoPath\u0026#34;: true, \u0026#34;main\u0026#34;: \u0026#34;myapp\u0026#34; } } If appIsGoPath is present and equals true, then we consider that your repo root is the GOPATH.\nThe main field then becomes mandatory and must be the name of the module you want to run.\nE.g. if you want to run module1, main must be foo/module1.\n(Optional) Add a \u0026ldquo;execDir\u0026rdquo; field to the \u0026ldquo;deploy\u0026rdquo; object:\n{ \u0026#34;deploy\u0026#34;: { \u0026#34;appIsGoPath\u0026#34;: true, \u0026#34;main\u0026#34;: \u0026#34;myapp\u0026#34;, \u0026#34;execDir\u0026#34;: \u0026#34;src/myapp\u0026#34; } } The execDir value must be relative to the root of your repo.\nIn the example above, we will run the application in the src/myapp directory.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. To access environment variables from your code, just get them from the environment with PATH: os.Getenv(\u0026quot;MY_VARIABLE\u0026quot;).\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n"},"title":"Go"},"/doc/getting-started/by-language/haskell/":{"data":{"":" The API of Clever Cloud uses OAuth 1 to perform authentication actions. There are two ways to signup to Clever Cloud: email or GitHub login.\nGo to the Clever Cloud Console and select the method you prefer.\n@ Email Authentication This kind of auth requires a valid and non-temporary disposable e-mail, and a password having at least 6 characters. Do not forget to validate your email by clicking the link you will receive.\nGitHub Authentication The GitHub signup allows you to create an account or link your existing one to GitHub, in one click. This process asks the following permissions:¬†Read your Public Key Read User Repositories The \u0026ldquo;repository permission\u0026rdquo; is used to deploy your GitHub apps directly to Clever Cloud, with a simple step.\nIf you need to give access to Clever Cloud\u0026rsquo;s API to a specific GitHub organization, you can do it here.\nüîê Two Factor Authentication (2FA) Clever Cloud supports 2FA. You can enable it here: https://console.clever-cloud.com/users/me/authentication\nPlease, backup your recovery codes, we won\u0026rsquo;t be able to restore access to your account if you lose access to your regular codes.\nYou need to add a SSH key to your Clever Cloud\u0026rsquo;s account to deploy via Git. SSH keys are used to establish a secure connection between your computer and Clever Cloud. A user can have multiple SSH keys.\nI need to create my SSH key In your Terminal, enter the following bash line:\nssh-keygen -t ed25519 -C \u0026#34;your_email@youremail.com\u0026#34; This command creates a new ssh key using the provided email, so that the owner of the key can be identified.\nWhen prompted in which file you want to save the key, just press enter. If it says that the file already exists, enter n for no. Type ls, verify the presence of the file and jump to Add your SSH key on Clever Cloud.\nWhen asked, enter a passphrase:\nGenerating public/private ed25519 key pair. Enter file in which to save the key (/your_home_path/.ssh/id_ed25519): # Now you should enter a passphrase. Enter passphrase (empty for no passphrase): [Type a passphrase] Enter same passphrase again: [Type passphrase again] Which should give you something like this:\nYour identification has been saved in /your_home_path/.ssh/id_ed25519. Your public key has been saved in /your_home_path/.ssh/id_ed25519.pub. The key fingerprint is: 01:0e:e5:2d:ab:98:d6:17:a1:6d:f0:68:9f:d0:a2:db your_email@youremail.com I created my account with GitHub If your account is linked to GitHub, a panel with your GitHub SSH keys will appear in the \u0026ldquo;SSH Keys\u0026rdquo; tab. You can add any key already present in your GitHub account by clicking on the import button next to it.\nAdd your SSH key on Clever Cloud Public SSH Key To declare your public SSH Key on Clever Cloud, in the left navigation bar, go in \u0026ldquo;Profile\u0026rdquo; and in the \u0026ldquo;SSH Keys\u0026rdquo; tab, add the key by entering a name and the public SSH key. The key is the entire content of the id_[ed25519/rsa].pub file including the id_ed25519/ssh-rsa part and your email.\nPrivate SSH Key If you want to clone a repository from a private repository, you can add a Private SSH Key to an application by creating a folder clevercloud at the root of your application and creating the file clevercloud/ssh.json with the following content:\n{ \u0026#34;privateKeyFile\u0026#34;: \u0026#34;path/to/file\u0026#34; } Of course you need to provide a valid path to a file that contains a valid key and that you will push on the Clever Cloud git remote.\nIf you have trouble configuring this key you can refer to this extended documentation\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nConfigure your Haskell application Mandatory configuration Be sure that:\nyou have pushed in master branch you listen on port 8080 you have one and only one binary target in your .cabal file your project has a stack.yaml file The steps ran in order are:\nstack setup stack install --only-dependencies stack install ./\u0026lt;path\u0026gt;/my-exe (or the contents of CC_RUN_COMMAND) The executable built by stack build (or the command you specify) must start a web server listening on 0.0.0.0:8080.\nFor instance, a minimal scotty application can look like this:\n{-# LANGUAGE OverloadedStrings #-} import Web.Scotty main = scotty 8080 $ do get \u0026#34;/\u0026#34; $ do html $ \u0026#34;Hello world\u0026#34; Dependencies Make sure to list all your dependencies in your .cabal file.\nFor the example above, you need:\nexecutable myfirstapp main-is: Main.hs build-depends: base , scotty Cached dependencies You can enable dependencies caching by adding the CC_CACHE_DEPENDENCIES=true.\nIt is enabled by default only for rust and haskell applications.\nTo disable dependencies caching completely, you can remove the CC_CACHE_DEPENDENCIES environment variable or by setting it to false.\nTo fully remove cached dependencies, you have to rebuild your application from scratch.\nYou can select rebuild and restart from the console or launch clever restart --without-cache with the Clever Tools CLI.\nCustom run command If you need to run a custom command (or just pass options to the binary built by stack), you can specify it through the CC_RUN_COMMAND environment variable.\nFor instance, for a hakyll website, you can define:\nCC_RUN_COMMAND=\u0026#34;~./local/bin/site server --host 0.0.0.0 --port 8080\u0026#34; To access environment variables from your code, just get them from the environment with getEnv :: String -\u0026gt; IO String in System.Environment.\nIf some environment variables are critical to your application, here is an approach you can use:\n{-# LANGUAGE OverloadedStrings #-} module Main where import Data.Text.Lazy (pack) import System.Environment (getEnv) import Web.Scotty (get, html, scotty) envVar = getEnv \u0026#34;MY_VAR\u0026#34; main = do myVar \u0026lt;- envVar scotty 8080 $ do get \u0026#34;/\u0026#34; $ do html . pack $ \u0026#34;Hello world \u0026#34; ++ myVar This loads the environment variable in your main function and tests it. This way, the application will refuse to start with an helpful error message if MY_VAR is not defined.\nSpecify Stack package target You may have several packages in your application which can be time consuming when building them, if you don\u0026rsquo;t want to build every packages you can target a package by using the CC_HASKELL_STACK_TARGET environnement variable.\nCC_HASKELL_STACK_TARGET=\u0026#34;mypackage\u0026#34; Git Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n"},"title":"Haskell"},"/doc/getting-started/by-language/java/":{"data":{"":" The API of Clever Cloud uses OAuth 1 to perform authentication actions. There are two ways to signup to Clever Cloud: email or GitHub login.\nGo to the Clever Cloud Console and select the method you prefer.\n@ Email Authentication This kind of auth requires a valid and non-temporary disposable e-mail, and a password having at least 6 characters. Do not forget to validate your email by clicking the link you will receive.\nGitHub Authentication The GitHub signup allows you to create an account or link your existing one to GitHub, in one click. This process asks the following permissions:¬†Read your Public Key Read User Repositories The \u0026ldquo;repository permission\u0026rdquo; is used to deploy your GitHub apps directly to Clever Cloud, with a simple step.\nIf you need to give access to Clever Cloud\u0026rsquo;s API to a specific GitHub organization, you can do it here.\nüîê Two Factor Authentication (2FA) Clever Cloud supports 2FA. You can enable it here: https://console.clever-cloud.com/users/me/authentication\nPlease, backup your recovery codes, we won\u0026rsquo;t be able to restore access to your account if you lose access to your regular codes.\nYou need to add a SSH key to your Clever Cloud\u0026rsquo;s account to deploy via Git. SSH keys are used to establish a secure connection between your computer and Clever Cloud. A user can have multiple SSH keys.\nI need to create my SSH key In your Terminal, enter the following bash line:\nssh-keygen -t ed25519 -C \u0026#34;your_email@youremail.com\u0026#34; This command creates a new ssh key using the provided email, so that the owner of the key can be identified.\nWhen prompted in which file you want to save the key, just press enter. If it says that the file already exists, enter n for no. Type ls, verify the presence of the file and jump to Add your SSH key on Clever Cloud.\nWhen asked, enter a passphrase:\nGenerating public/private ed25519 key pair. Enter file in which to save the key (/your_home_path/.ssh/id_ed25519): # Now you should enter a passphrase. Enter passphrase (empty for no passphrase): [Type a passphrase] Enter same passphrase again: [Type passphrase again] Which should give you something like this:\nYour identification has been saved in /your_home_path/.ssh/id_ed25519. Your public key has been saved in /your_home_path/.ssh/id_ed25519.pub. The key fingerprint is: 01:0e:e5:2d:ab:98:d6:17:a1:6d:f0:68:9f:d0:a2:db your_email@youremail.com I created my account with GitHub If your account is linked to GitHub, a panel with your GitHub SSH keys will appear in the \u0026ldquo;SSH Keys\u0026rdquo; tab. You can add any key already present in your GitHub account by clicking on the import button next to it.\nAdd your SSH key on Clever Cloud Public SSH Key To declare your public SSH Key on Clever Cloud, in the left navigation bar, go in \u0026ldquo;Profile\u0026rdquo; and in the \u0026ldquo;SSH Keys\u0026rdquo; tab, add the key by entering a name and the public SSH key. The key is the entire content of the id_[ed25519/rsa].pub file including the id_ed25519/ssh-rsa part and your email.\nPrivate SSH Key If you want to clone a repository from a private repository, you can add a Private SSH Key to an application by creating a folder clevercloud at the root of your application and creating the file clevercloud/ssh.json with the following content:\n{ \u0026#34;privateKeyFile\u0026#34;: \u0026#34;path/to/file\u0026#34; } Of course you need to provide a valid path to a file that contains a valid key and that you will push on the Clever Cloud git remote.\nIf you have trouble configuring this key you can refer to this extended documentation\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n"},"title":"Java"},"/doc/getting-started/by-language/node/":{"data":{"":" The API of Clever Cloud uses OAuth 1 to perform authentication actions. There are two ways to signup to Clever Cloud: email or GitHub login.\nGo to the Clever Cloud Console and select the method you prefer.\n@ Email Authentication This kind of auth requires a valid and non-temporary disposable e-mail, and a password having at least 6 characters. Do not forget to validate your email by clicking the link you will receive.\nGitHub Authentication The GitHub signup allows you to create an account or link your existing one to GitHub, in one click. This process asks the following permissions:¬†Read your Public Key Read User Repositories The \u0026ldquo;repository permission\u0026rdquo; is used to deploy your GitHub apps directly to Clever Cloud, with a simple step.\nIf you need to give access to Clever Cloud\u0026rsquo;s API to a specific GitHub organization, you can do it here.\nüîê Two Factor Authentication (2FA) Clever Cloud supports 2FA. You can enable it here: https://console.clever-cloud.com/users/me/authentication\nPlease, backup your recovery codes, we won\u0026rsquo;t be able to restore access to your account if you lose access to your regular codes.\nYou need to add a SSH key to your Clever Cloud\u0026rsquo;s account to deploy via Git. SSH keys are used to establish a secure connection between your computer and Clever Cloud. A user can have multiple SSH keys.\nI need to create my SSH key In your Terminal, enter the following bash line:\nssh-keygen -t ed25519 -C \u0026#34;your_email@youremail.com\u0026#34; This command creates a new ssh key using the provided email, so that the owner of the key can be identified.\nWhen prompted in which file you want to save the key, just press enter. If it says that the file already exists, enter n for no. Type ls, verify the presence of the file and jump to Add your SSH key on Clever Cloud.\nWhen asked, enter a passphrase:\nGenerating public/private ed25519 key pair. Enter file in which to save the key (/your_home_path/.ssh/id_ed25519): # Now you should enter a passphrase. Enter passphrase (empty for no passphrase): [Type a passphrase] Enter same passphrase again: [Type passphrase again] Which should give you something like this:\nYour identification has been saved in /your_home_path/.ssh/id_ed25519. Your public key has been saved in /your_home_path/.ssh/id_ed25519.pub. The key fingerprint is: 01:0e:e5:2d:ab:98:d6:17:a1:6d:f0:68:9f:d0:a2:db your_email@youremail.com I created my account with GitHub If your account is linked to GitHub, a panel with your GitHub SSH keys will appear in the \u0026ldquo;SSH Keys\u0026rdquo; tab. You can add any key already present in your GitHub account by clicking on the import button next to it.\nAdd your SSH key on Clever Cloud Public SSH Key To declare your public SSH Key on Clever Cloud, in the left navigation bar, go in \u0026ldquo;Profile\u0026rdquo; and in the \u0026ldquo;SSH Keys\u0026rdquo; tab, add the key by entering a name and the public SSH key. The key is the entire content of the id_[ed25519/rsa].pub file including the id_ed25519/ssh-rsa part and your email.\nPrivate SSH Key If you want to clone a repository from a private repository, you can add a Private SSH Key to an application by creating a folder clevercloud at the root of your application and creating the file clevercloud/ssh.json with the following content:\n{ \u0026#34;privateKeyFile\u0026#34;: \u0026#34;path/to/file\u0026#34; } Of course you need to provide a valid path to a file that contains a valid key and that you will push on the Clever Cloud git remote.\nIf you have trouble configuring this key you can refer to this extended documentation\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nConfigure your Node.js application Mandatory configuration Be sure that:\nyou listen on HTTP port 0.0.0.0:8080 you have a package.json file your package.json either has a scripts.start or main field the folder /node_modules is mentioned in your .gitignore file you enable production mode by setting the environment variable NODE_ENV=production Select node version You can use the engines.node field in package.json to define the wanted version, if not provided we will use the latest LTS version.\nAbout package.json The package.json file should look like the following:\n{ \u0026#34;name\u0026#34; : \u0026#34;myapp\u0026#34;, \u0026#34;version\u0026#34; : \u0026#34;0.1.0\u0026#34;, \u0026#34;main\u0026#34; : \u0026#34;myapp.js\u0026#34;, \u0026#34;scripts\u0026#34; : { \u0026#34;start\u0026#34; : \u0026#34;node myapp.js\u0026#34; }, \u0026#34;engines\u0026#34; : { \u0026#34;node\u0026#34; : \u0026#34;^10\u0026#34; } } The json fields The following table describes each of the fields formerly mentioned.\nUsage Field Description At least one scripts.start This field provides a command line to run. If defined, npm start will be launched. Otherwise we will use the main field. See below to know how and when to use the scripts.start field main This field allows you to specify the file you want to run. It should be the relative path of the file starting at the project's root. It's used to launch your application if scripts.start is not defined. Optional engines.node Sets the node engine version you app runs with. Any \"A.B.x\" or \"^A.B.C\" or \"~A.B\" version will lead to run the application with the latest \"A.B\" local version. If this field is missing, we use the latest LTS available. If you want to ensure that your app will always run, please put something of the form \"^A.B.C\" and avoid setting only \"\u003e=A.B.C\". NPM modules dependencies If you need some modules you can easily add some with the dependencies field in your package.json. Here is an example:\n{ \u0026#34;name\u0026#34; : { ... }, \u0026#34;engines\u0026#34;: { ... }, \u0026#34;dependencies\u0026#34;: { \u0026#34;express\u0026#34;: \u0026#34;3.x\u0026#34;, \u0026#34;socket.io\u0026#34;: \u0026#34;0.9.x\u0026#34;, \u0026#34;underscore\u0026#34;: \u0026#34;1.4.3\u0026#34; } } Private dependencies If your application has private dependencies, you can add a Private SSH Key.\nSupported package managers We support npm and yarn as package managers.\nThe environment variable CC_NODE_BUILD_TOOL allows you to define which build tool you want to use. The default value is set to npm but it can be any of these values:\nnpm-install: uses npm install npm-ci: uses npm ci npm: Defaults to npm-install for now yarn: uses yarn yarn2: uses yarn@2 custom: uses the build tool set with CC_CUSTOM_BUILD_TOOL If a yarn.lock file exists in your application\u0026rsquo;s main folder, then the yarn package manager will be automatically used. To overwrite this behaviour, either delete the yarn.lock file or set the CC_NODE_BUILD_TOOL environment variable.\nIf none of the above package managers fit your needs, you can put your own using CC_CUSTOM_BUILD_TOOL.\nAutomatic HTTPS redirection You can use the X-Forwarded-Proto header to enable it.\nIf you are using Express.js, you can use express-sslify by adding:\napp.use(enforce.HTTPS({ trustProtoHeader: true })); Custom build phase The build phase installs the dependencies and executes the scripts.install you might have defined in your package.json. It\u0026rsquo;s meant to build the whole application including dependencies and / or assets (if there are any).\nAll the build part should be written into the scripts.install field of the package.json file. You can also add a custom bash script and execute it with:¬†\u0026quot;scripts.install\u0026quot;: \u0026quot;./build.sh\u0026quot;\nFor more information, see the npm documentation\nDevelopment Dependencies Development dependencies will not be automatically installed during the deployment. You can control their installation by using the CC_NODE_DEV_DEPENDENCIES environment variable which takes install or ignore as its value. This variable overrides the default behaviour of NODE_ENV.\nHere are various scenarios:\nCC_NODE_DEV_DEPENDENCIES=install: Development dependencies will be installed. CC_NODE_DEV_DEPENDENCIES=ignore: Development dependencies will not be installed. NODE_ENV=production, CC_NODE_DEV_DEPENDENCIES=install: Development dependencies will be installed. NODE_ENV=production, CC_NODE_DEV_DEPENDENCIES=ignore: Development dependencies will not be installed. NODE_ENV=production: Package manager (NPM / Yarn) default behaviour. Development dependencies will not be installed. Neither NODE_ENV nor CC_NODE_DEV_DEPENDENCIES are defined: Package manager (NPM / Yarn) default behaviour. Development dependencies will be installed. Custom run command If you need to run a custom command (or just pass options to the program), you can specify it through the CC_RUN_COMMAND environment variable.\nFor instance, for a meteor application, you can have CC_RUN_COMMAND=\u0026quot;node .build/bundle/main.js \u0026lt;options\u0026gt;\u0026quot;.\nCustom run phase The run phase is executed from scripts.start if defined. This phase is only meant to start your application and should not contain any build task.\nUse private repositories with CC_NPM_REGISTRY and NPM_TOKEN Since April 2015, npmjs.com allows you to have private repositories. If you want to use a private repository on npmjs.com (the default one), you only need to provide the token part. To register your auth token, you need to add to your application the NPM_TOKEN environment variable.\nNPM_TOKEN=\u0026#34;00000000-0000-0000-0000-000000000000\u0026#34; Then, the .npmrc file will be created automatically for your application, with the registry url and the token.\n//registry.npmjs.org/:_authToken=00000000-0000-0000-0000-000000000000 To authenticate to another registry (like github), you can use the CC_NPM_REGISTRY environment variable to define the registry\u0026rsquo;s host.\nCC_NPM_REGISTRY=\u0026#34;npm.pkg.github.com\u0026#34; NPM_TOKEN=\u0026#34;00000000-0000-0000-0000-000000000000\u0026#34; //npm.pkg.github.com/:_authToken=00000000-0000-0000-0000-000000000000 Git Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n"},"title":"Node.js"},"/doc/getting-started/by-language/php/":{"data":{"":" The API of Clever Cloud uses OAuth 1 to perform authentication actions. There are two ways to signup to Clever Cloud: email or GitHub login.\nGo to the Clever Cloud Console and select the method you prefer.\n@ Email Authentication This kind of auth requires a valid and non-temporary disposable e-mail, and a password having at least 6 characters. Do not forget to validate your email by clicking the link you will receive.\nGitHub Authentication The GitHub signup allows you to create an account or link your existing one to GitHub, in one click. This process asks the following permissions:¬†Read your Public Key Read User Repositories The \u0026ldquo;repository permission\u0026rdquo; is used to deploy your GitHub apps directly to Clever Cloud, with a simple step.\nIf you need to give access to Clever Cloud\u0026rsquo;s API to a specific GitHub organization, you can do it here.\nüîê Two Factor Authentication (2FA) Clever Cloud supports 2FA. You can enable it here: https://console.clever-cloud.com/users/me/authentication\nPlease, backup your recovery codes, we won\u0026rsquo;t be able to restore access to your account if you lose access to your regular codes.\nYou need to add a SSH key to your Clever Cloud\u0026rsquo;s account to deploy via Git. SSH keys are used to establish a secure connection between your computer and Clever Cloud. A user can have multiple SSH keys.\nI need to create my SSH key In your Terminal, enter the following bash line:\nssh-keygen -t ed25519 -C \u0026#34;your_email@youremail.com\u0026#34; This command creates a new ssh key using the provided email, so that the owner of the key can be identified.\nWhen prompted in which file you want to save the key, just press enter. If it says that the file already exists, enter n for no. Type ls, verify the presence of the file and jump to Add your SSH key on Clever Cloud.\nWhen asked, enter a passphrase:\nGenerating public/private ed25519 key pair. Enter file in which to save the key (/your_home_path/.ssh/id_ed25519): # Now you should enter a passphrase. Enter passphrase (empty for no passphrase): [Type a passphrase] Enter same passphrase again: [Type passphrase again] Which should give you something like this:\nYour identification has been saved in /your_home_path/.ssh/id_ed25519. Your public key has been saved in /your_home_path/.ssh/id_ed25519.pub. The key fingerprint is: 01:0e:e5:2d:ab:98:d6:17:a1:6d:f0:68:9f:d0:a2:db your_email@youremail.com I created my account with GitHub If your account is linked to GitHub, a panel with your GitHub SSH keys will appear in the \u0026ldquo;SSH Keys\u0026rdquo; tab. You can add any key already present in your GitHub account by clicking on the import button next to it.\nAdd your SSH key on Clever Cloud Public SSH Key To declare your public SSH Key on Clever Cloud, in the left navigation bar, go in \u0026ldquo;Profile\u0026rdquo; and in the \u0026ldquo;SSH Keys\u0026rdquo; tab, add the key by entering a name and the public SSH key. The key is the entire content of the id_[ed25519/rsa].pub file including the id_ed25519/ssh-rsa part and your email.\nPrivate SSH Key If you want to clone a repository from a private repository, you can add a Private SSH Key to an application by creating a folder clevercloud at the root of your application and creating the file clevercloud/ssh.json with the following content:\n{ \u0026#34;privateKeyFile\u0026#34;: \u0026#34;path/to/file\u0026#34; } Of course you need to provide a valid path to a file that contains a valid key and that you will push on the Clever Cloud git remote.\nIf you have trouble configuring this key you can refer to this extended documentation\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nConfigure your PHP application Choose your PHP version Set the CC_PHP_VERSION environment variable to one of the following values:\n5.6 7.2 7.3 7.4 8.0 8.1 8.2 All new PHP applications are created with a default CC_PHP_VERSION, set to 7, which means latest php 7 version available.\nYou can of course change it whenever you want then redeploy your application to use the version you want. We only support values based on the first two digits X.Y not X.Y.Z.\nThe configuration file for your PHP application must be /clevercloud/php.json, that is a php.json file in a /clevercloud folder at the root of your application.\nChange the webroot Since one of the best practices of PHP development is to take the libraries and core files outside the webroot, you may want to set another webroot than the default one (the root of your application).\nUsing an environment variable Add a new environment variable called CC_WEBROOT and set /public as its value.\nclever env set CC_WEBROOT /public Using a configuration file To change the webroot, just set the key webroot in the deploy part of the configuration file clevercloud/php.json with the absolute path (from the root of your application) of your new public folder.\nIn the following example we want to set the webroot to the folder /public:\n{ \u0026#34;deploy\u0026#34;: { \u0026#34;webroot\u0026#34;: \u0026#34;/public\u0026#34; } } ‚ö†Ô∏è Please note the absolute path style: `/public`. The change of the webroot will be rejected during the deployment if the target directory does not exist or is not a directory. \u0026lt;/p\u0026gt; Change PHP settings PHP settings Most PHP settings can be changed using a .user.ini file.\nIf you want the settings to be applied to the whole application, you should put this file in your webroot. If you did not change it (see above), then your webroot is the root of the repository.\nIf you put the .user.ini file in a sub-directory; settings will be applied recursively starting from this sub-directory.\nNote: .user.ini files are not loaded by the PHP CLI by default.\nTo do so, you can use a tiny trick:\nAdd the PHP_INI_SCAN_DIR=:/home/bas environment variable in your application. This way the PHP CLI will try to find a .ini file in /home/bas after loading all other configuration files.\nRun the following script in a deployment hook (e.g. in the pre-run hook):\n#!/bin/bash -l test -f ${APP_HOME}${CC_WEBROOT}/.user.ini \u0026amp;\u0026amp; \\ cp ${APP_HOME}${CC_WEBROOT}/.user.ini ${HOME}/user.ini Timezone configuration All instances on Clever Cloud run on the UTC timezone. We recommend to handle all your dates in UTC internally, and only handle timezones when reading or displaying dates.\nAdditionally, you can set PHP\u0026rsquo;s time zone setting with .user.ini. For instance, to use the french time zone, edit .user.ini to add this line:\ndate.timezone=Europe/Paris Header injection Usually, you can use an .htaccess file to create / update / delete headers. You won\u0026rsquo;t be able to do it from the .htaccess file if the headers come from a .php file, because php-fpm ignores the mod_headers plugin. It works fine for static files directly served by apache.\nSo if you need to inject headers on HTTP responses (for instance for CORS), you have to do it from PHP (you can\u0026rsquo;t do it from .htaccess).\nheader(\u0026#34;Access-Control-Allow-Origin: *\u0026#34;); If you want to keep this separate from your application, you can configure the application to execute some code on every request.\nIn .user.ini, add the following line (you need to create inject_headers.php first):\nauto_prepend_file=./inject_headers.php Please refer to the official documentation for more information.\nYou can review the available directives; all the PHP_INI_USER, PHP_INI_PERDIR, and PHP_INI_ALL directives can be set from within .user.ini.\nclevercloud/php.json settings Other settings than the one mentioned above can be changed by adding the following line in clevercloud/php.json:\n{ \u0026#34;configuration\u0026#34;: { \u0026#34;my.setting\u0026#34;: \u0026#34;value\u0026#34; } } Here is the list of available settings:\nmbstring.func_overload pm.max_children Note: You can send a request to the support if you need to change a setting which cannot be changed via a .user.ini file and is not in this list.\nMemory Limit When php-fpm spawns a worker it allocates a smaller part of the application\u0026rsquo;s memory to the worker, here is the allocated memory for each flavor:\nFlavor Memory Limit Pico 64M Nano 64M XS 128M S 256M M 384M L 512M XL 768M 2XL 1024M 3XL 1536M 4XL+ 2048M To change this limit you can define MEMORY_LIMIT environment variable.\nIf you define a limit exceeding the application memory it will use the default one.\npm.max_children: Maximum PHP Children per instance You can fix the maximum number of PHP running processes per instance by setting pm.max_children (see above).\nThis setting is useful if you need to limit the number of running processes according to the maximum connections limit of your MySQL or PostgreSQL database.\nBy default, pm.max_children is set to 10.\nConfigure Apache We use Apache 2 as HTTP Server. In order to configure it, you can create a .htaccess file and set directives inside this file.\nhtaccess The .htaccess file can be created everywhere in you app, depending of the part of the application covered by directives.\nHowever, directives who applies to the entire application must be declared in a .htaccess file to the application root.\nhtpasswd You can configure basic authentication using environment variables. You will need to set CC_HTTP_BASIC_AUTH variable to your own login:password pair. If you need to allow access to multiple users, you can create additional environment CC_HTTP_BASIC_AUTH_n (where n is a number) variables.\nDefine a custom HTTP timeout You can define the timeout of an HTTP request in Apache using the HTTP_TIMEOUT environment variable.\nBy default, the HTTP timeout is se to 3 minutes (180 seconds).\nForce HTTPS traffic Load balancers handle HTTPS traffic ahead of your application. You can use the X-Forwarded-Proto header to know the original protocol (http or https).\nPlace the following snippet in a .htaccess file to ensure that your visitors only access your application through HTTPS.\nRewriteEngine On RewriteCond %{HTTPS} off RewriteCond %{HTTP:X-Forwarded-Proto} !https RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] Prevent Apache to redirect HTTPS calls to HTTP when adding a trailing slash DirectorySlash is enabled by default on the PHP scalers, therefore Apache will add a trailing slash to a resource when it detects that it is a directory.\nE.g. if foobar is a directory, Apache will automatically redirect http://example.com/foobar to http://example.com/foobar/.\nUnfortunately the module is unable to detect if the request comes from a secure connection or not. As a result it will force an HTTPS call to be redirected to HTTP.\nIn order to prevent this behavior, you can add the following statements in a .htaccess file:\nDirectorySlash Off RewriteEngine On RewriteCond %{REQUEST_FILENAME} -d RewriteRule ^(.+[^/])$ %{HTTP:X-Forwarded-Proto}://%{HTTP_HOST}/$1/ [R=301,L,QSA] These statements will keep the former protocol of the request when issuying the redirect. Assuming that the header X-Forwarded-Proto is always filled (which is the case on our platform).\nIf you want to force all redirects to HTTPS, you can replace %{HTTP:X-Forwarded-Proto} with https.\nChange the FastCGI module You can choose between two FastCGI modules, fastcgi and proxy_fcgi.\nTo choose between these two modules you must use the CC_CGI_IMPLEMENTATION environment variable with fastcgi or proxy_fcgi as a value.\n‚ÑπÔ∏è We recommend preferring proxy_fcgi over fastcgi. The fastcgi implementation is not maintained anymore, but has been kept as default to prevent unexpected behaviors with historical applications. If you have issues with downloading content, it could be related to the fastcgi module not working correctly in combination with the deflate module, as the Content-Length header is not updated to the new size of the encoded content.\nTo resolve this issue, we advise you to switch the value of CC_CGI_IMPLEMENTATION from default to proxy_fcgi.\nEnvironment injection As mentionned above, Clever Cloud can inject environment variables that are defined in the dashboard and by add-ons linked to your application.\nTo access the variables, use the getenv function. So, for example, if your application has a postgresql add-on linked:\n$host = getenv(\u0026#34;POSTGRESQL_ADDON_HOST\u0026#34;); $database = getenv(\u0026#34;POSTGRESQL_ADDON_DB\u0026#34;); $username = getenv(\u0026#34;POSTGRESQL_ADDON_USER\u0026#34;); $password = getenv(\u0026#34;POSTGRESQL_ADDON_PASSWORD\u0026#34;); $pg = new PDO(\u0026#34;postgresql:host={$host};dbname={$database}, $username, $password); ‚ö†Ô∏è \u0026lt;p\u0026gt;Environment variables are displayed in the default output of `phpinfo()`. If you want to use `phpinfo()` without exposing environment variables, you have to call it this way: \u0026lt;/p\u0026gt; \u0026lt;code\u0026gt;phpinfo(INFO_GENERAL | INFO_CREDITS | INFO_CONFIGURATION | INFO_MODULES | INFO_LICENSE)\u0026lt;/code\u0026gt; \u0026lt;/p\u0026gt; Composer We support Composer build out of the box. You just need to provide a composer.json file in the root of your repository and we will run composer.phar install --no-ansi --no-progress --no-interaction --no-dev for you.\nYou can also set the CC_COMPOSER_VERSION to 1 or 2 to select the composer version to use.\n‚ÑπÔ∏è If you encounter any issues, add your own `composer.phar` file in the root of your repository which will override the version we use. You can perform your own composer.phar install by using the Post Build hook.\nExample of a composer.json file:\n{ \u0026#34;require\u0026#34;: { \u0026#34;laravel/framework\u0026#34;: \u0026#34;4.1.*\u0026#34;, \u0026#34;ruflin/Elastica\u0026#34;: \u0026#34;dev-master\u0026#34;, \u0026#34;shift31/laravel-elasticsearch\u0026#34;: \u0026#34;dev-master\u0026#34;, \u0026#34;natxet/CssMin\u0026#34;: \u0026#34;dev-master\u0026#34; }, \u0026#34;repositories\u0026#34;: [ { \u0026#34;type\u0026#34;: \u0026#34;vcs\u0026#34;, \u0026#34;url\u0026#34;: \u0026#34;https://GitHub.com/timothylhuillier/laravel-elasticsearch.git\u0026#34; } ], \u0026#34;autoload\u0026#34;: { \u0026#34;classmap\u0026#34;: [ \u0026#34;app/controllers\u0026#34;, \u0026#34;app/models\u0026#34;, \u0026#34;app/database/migrations\u0026#34;, \u0026#34;app/database/seeds\u0026#34; ], \u0026#34;psr-0\u0026#34;: { \u0026#34;SomeApp\u0026#34;: \u0026#34;app\u0026#34; } }, \u0026#34;config\u0026#34;: { \u0026#34;preferred-install\u0026#34;: \u0026#34;dist\u0026#34; }, \u0026#34;minimum-stability\u0026#34;: \u0026#34;dev\u0026#34; } Example of a minimalist PHP application using composer and custom scripts: php-composer-demo\nDevelopment Dependencies Development dependencies will not be automatically installed during the deployment. You can control their installation by using the CC_PHP_DEV_DEPENDENCIES environment variable which takes install value.\nAny other value than install will prevent developement dependencies from being installed.\nGitHub rate limit Sometimes, you can encounter the following error when downloading dependencies:\nFailed to download symfony/symfony from dist: Could not authenticate against GitHub.com To prevent this download dependencies\u0026rsquo;s fails that is often caused by rate limit of GitHub API while deploying your apps, we recommend you to add oauth token in your composer configuration file or in separate file named as described in composer FAQ (API rate limit and OAuth tokens).\nYou can find more documentation about composer configuration at getcomposer.com.\nExample You use Artisan to manage your project and you want to execute artisan migrate before running your app.\nTo do this, we use a post build hook, you have to set a new environment variable on your Clever application as following:\nCC_POST_BUILD_HOOK=php artisan migrate --force Note: You must add the execute permission to your file (chmod u+x yourfile) before pushing it.\nFrameworks and CMS The following is the list of tested CMS by our team.\nIt\u0026rsquo;s quite not exhaustive, so it does not mean that other CMS can\u0026rsquo;t work on the Clever Cloud platform.\nWordPress Prestashop Dokuwiki Joomla SugarCRM Drupal Magento Status.net Symfony Thelia Laravel Sylius Available extensions and modules You can check enabled extensions and versions by viewing our phpinfo() example for:\nPHP 5.6. PHP 7.2. PHP 7.3. PHP 7.4. PHP 8.0. PHP 8.1. PHP 8.2. Warning: some extensions need to be enabled explicitely\nThe following extensions are enabled by default: amqp, imagick, libsodium, mcrypt, memcached, memcache, mongodb, opcache, redis, solr, ssh2, zip, gRPC, protobuf, Pspell.\nYou can add DISABLE_\u0026lt;extension_name\u0026gt;: true in your environment variable to disable them.\nIf you have a request about modules, feel free to contact our support at support@clever-cloud.com.\n‚ö†Ô∏è On PHP 7, the memcache extension is not available; only memcached is available Enable specific extensions Some extensions need to be enabled explicitly. To enable these extensions, you\u0026rsquo;ll need to set the corresponding environment variable:\nAPCu: set ENABLE_APCU to true.\nAPCu is an in-memory key-value store for PHP. Keys are of type string and values can be any PHP variables.\nCouchbase: set ENABLE_COUCHBASE and ENABLE_PCS to true\nCouchbase is a document database with a SQL-based query language that is engineered to deliver performance at scale.\nElastic APM Agent: set ENABLE_ELASTIC_APM_AGENT to true (default if ELASTIC_APM_SERVER_URL is defined).\nElastic APM agent is Elastic\u0026rsquo;s APM agent extension for PHP. The PHP agent enables you to trace the execution of operations in your application, sending performance metrics and errors to the Elastic APM server. Warning: This extension is available starting PHP 7.2.\nEvent: set ENABLE_EVENT to true.\nEvent is an extension to schedule I/O, time and signal based events.\nGEOS: set ENABLE_GEOS to true.\nGEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).\nGnuPG: set ENABLE_GNUPG to true.\nGnuPG is an extension that provides methods to interact with GNU Privacy Guard (OpenPGP implementation).\nIonCube: set ENABLE_IONCUBE to true.\nIonCube is a tool to obfuscate PHP code. It\u0026rsquo;s often used by paying Prestashop and WordPress plugins.\nMailparse: set ENABLE_MAILPARSE to true.\nMailparse is an extension for parsing and working with email messages. It can deal with RFC 822 and RFC 2045 (MIME) compliant messages.\nMongo: set ENABLE_MONGO to true.\nMongoDB is a NoSQL Database. This extension allows to use it from PHP. Warning: this extension is now superseded by the mongodb extension. We provide it for backward compatibility.\nNewRelic: set ENABLE_NEWRELIC to true.\nNewrelic Agent for PHP. Newrelic is a software analytics tool.\nOAuth: set ENABLE_OAUTH to true.\nOAuth consumer extension. OAuth is an authorization protocol built on top of HTTP.\nPCS: set ENABLE_PCS to true.\nPCS provides a fast and easy way to mix C and PHP code in your PHP extension.\nRdkafka: set ENABLE_RDKAFKA to true.\nPHP-rdkafka is a thin librdkafka binding providing a working PHP 5 / PHP 7 Kafka client.\nSqreen: The Sqreen agent is started automatically after adding the environment variables (SQREEN_API_APP_NAME and SQREEN_API_TOKEN).\nUopz: set ENABLE_UOPZ to true. The uopz extension is focused on providing utilities to aid with unit testing PHP code.\nUploadprogress: set ENABLE_UPLOADPROGRESS to true. The uploadprogress extension is used to track the progress of a file download.\nXDebug: set ENABLE_XDEBUG to true.\nXDebug is a debugger and profiler tool for PHP.\nConfigure the session storage By default, a FS Bucket is created for each PHP applications. It is used to store session files, so that session data is available on each instance.\nThis FS Bucket is also used to store TMP files by default. You can change this behaviour by setting the TMPDIR environment variable. You can set it to /tmp for example.\nSpeed up or disable the session FS Bucket You can set the following environment variables:\nCC_PHP_ASYNC_APP_BUCKET=async to mount the session FS Bucket with the async option. It speeds up the FS Bucket usage, but it can corrupt files in case of a network outage. CC_PHP_DISABLE_APP_BUCKET=(true|yes|disable) to entirely prevent the session FS Bucket from being mounted. Use this if you don\u0026rsquo;t use the default PHP session library. It will speed up your application but users might lose their session across instances and deployments. Use Redis to store PHP Sessions We provide the possibility to store the PHP sessions in a Redis database to improve reliability.\nIf your application is under heavy load, redis persistence for sessions can improve latency.\nTo enable this feature, you need to:\nenable Redis support on the application (create an environment variable named ENABLE_REDIS with the value true.) create and link a Redis add-on create an environment variable named SESSION_TYPE with the value redis. ‚ö†Ô∏è You must have a [Redis](https://devcenter.clever-cloud.com/doc/deploy/addon/redis/) add-on [linked with your application](#linking-a-database-or-any-other-add-on-to-your-application) to enable PHP session storage in Redis. If no Redis add-on is linked with your application, the deployment will fail. \u0026lt;/p\u0026gt; Sending emails The PHP language has the mail function to directly send emails. While we do not provide a SMTP server (needed to send the emails), you can configure one through environment variables.\nWe provide Mailpace addon to send emails through PHP mail() function. You have to turn TLS on with port 465 (environment variable CC_MTA_SERVER_USE_TLS=true) to make Mailpace working.\nWe also recommend you to use Mailgun or Mailjet if your project supports it. These services already have everything you need to send emails from your code.\nConfigure the SMTP server Services like Mailgun or Mailjet provide SMTP servers. If your application has no other way but to use the mail function of PHP to send emails, you have to configure a SMTP server. This can be done through environment variables:\nCC_MTA_SERVER_HOST: Host of the SMTP server. CC_MTA_SERVER_PORT: Port of the SMTP server. Defaults to 465 whether TLS is enabled or not. CC_MTA_AUTH_USER: User to authenticate to the SMTP server. CC_MTA_AUTH_PASSWORD: Password to authenticate to the SMTP server. CC_MTA_SERVER_USE_TLS: Enable or disable TLS. Defaults to true. CC_MTA_SERVER_STARTTLS: Enable or disable STARTTLS. Defaults to false. CC_MTA_SERVER_AUTH_METHOD: Enable or disable authentication. Defaults to on. Configure Monolog A lot of frameworks (including Symfony) use Monolog to handle logging. The default configuration of Monolog doesn\u0026rsquo;t allow to log errors into the console.\nHere is a basic configuration of Monolog to send your application\u0026rsquo;s logs into our logging system and access them into the Console:\nmonolog: handlers: clever_logs: type: error_log level: warning You can change the level to whatever level you desire. For Symfony, the configuration file is app/config/config_prod.yml.\nLaravel doesn\u0026rsquo;t need Monolog to retrieve logs via Clever console or Clever CLI. Here, ensure that you have the following line in config/app.php:\nreturn [ // ... \u0026#39;log\u0026#39; =\u0026gt; env(\u0026#39;APP_LOG\u0026#39;), // ... ]; Then, set APP_LOG=syslog as Clever application environment variable.\nUsing HTTP authentication Using basic HTTP authentication, PHP usually handles the values of user and password in variables named $_SERVER['PHP_AUTH_USER'] and $_SERVER['PHP_AUTH_PW'].\nAt Clever Cloud, we have enabled an Apache option to pass directly the Authorization header, even though we are using FastCGI; still, the header is not used by PHP, and the aforementioned variables are empty.\nYou can do this to fill them using the Authorization header:\nlist($_SERVER[\u0026#39;PHP_AUTH_USER\u0026#39;], $_SERVER[\u0026#39;PHP_AUTH_PW\u0026#39;]) = explode(\u0026#39;:\u0026#39; , base64_decode(substr($_SERVER[\u0026#39;Authorization\u0026#39;], 6))); Git Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n"},"title":"PHP"},"/doc/getting-started/by-language/python/":{"data":{"":" The API of Clever Cloud uses OAuth 1 to perform authentication actions. There are two ways to signup to Clever Cloud: email or GitHub login.\nGo to the Clever Cloud Console and select the method you prefer.\n@ Email Authentication This kind of auth requires a valid and non-temporary disposable e-mail, and a password having at least 6 characters. Do not forget to validate your email by clicking the link you will receive.\nGitHub Authentication The GitHub signup allows you to create an account or link your existing one to GitHub, in one click. This process asks the following permissions:¬†Read your Public Key Read User Repositories The \u0026ldquo;repository permission\u0026rdquo; is used to deploy your GitHub apps directly to Clever Cloud, with a simple step.\nIf you need to give access to Clever Cloud\u0026rsquo;s API to a specific GitHub organization, you can do it here.\nüîê Two Factor Authentication (2FA) Clever Cloud supports 2FA. You can enable it here: https://console.clever-cloud.com/users/me/authentication\nPlease, backup your recovery codes, we won\u0026rsquo;t be able to restore access to your account if you lose access to your regular codes.\nYou need to add a SSH key to your Clever Cloud\u0026rsquo;s account to deploy via Git. SSH keys are used to establish a secure connection between your computer and Clever Cloud. A user can have multiple SSH keys.\nI need to create my SSH key In your Terminal, enter the following bash line:\nssh-keygen -t ed25519 -C \u0026#34;your_email@youremail.com\u0026#34; This command creates a new ssh key using the provided email, so that the owner of the key can be identified.\nWhen prompted in which file you want to save the key, just press enter. If it says that the file already exists, enter n for no. Type ls, verify the presence of the file and jump to Add your SSH key on Clever Cloud.\nWhen asked, enter a passphrase:\nGenerating public/private ed25519 key pair. Enter file in which to save the key (/your_home_path/.ssh/id_ed25519): # Now you should enter a passphrase. Enter passphrase (empty for no passphrase): [Type a passphrase] Enter same passphrase again: [Type passphrase again] Which should give you something like this:\nYour identification has been saved in /your_home_path/.ssh/id_ed25519. Your public key has been saved in /your_home_path/.ssh/id_ed25519.pub. The key fingerprint is: 01:0e:e5:2d:ab:98:d6:17:a1:6d:f0:68:9f:d0:a2:db your_email@youremail.com I created my account with GitHub If your account is linked to GitHub, a panel with your GitHub SSH keys will appear in the \u0026ldquo;SSH Keys\u0026rdquo; tab. You can add any key already present in your GitHub account by clicking on the import button next to it.\nAdd your SSH key on Clever Cloud Public SSH Key To declare your public SSH Key on Clever Cloud, in the left navigation bar, go in \u0026ldquo;Profile\u0026rdquo; and in the \u0026ldquo;SSH Keys\u0026rdquo; tab, add the key by entering a name and the public SSH key. The key is the entire content of the id_[ed25519/rsa].pub file including the id_ed25519/ssh-rsa part and your email.\nPrivate SSH Key If you want to clone a repository from a private repository, you can add a Private SSH Key to an application by creating a folder clevercloud at the root of your application and creating the file clevercloud/ssh.json with the following content:\n{ \u0026#34;privateKeyFile\u0026#34;: \u0026#34;path/to/file\u0026#34; } Of course you need to provide a valid path to a file that contains a valid key and that you will push on the Clever Cloud git remote.\nIf you have trouble configuring this key you can refer to this extended documentation\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nConfigure your Python application General configuration Python apps can be launched in a variety of ways. You can specify how to start your application (for instance which module to run) by setting environment variables.\nTo select which module you want to start, use the CC_PYTHON_MODULE environment variable.\nCC_PYTHON_MODULE=\u0026#34;mymodule:app\u0026#34; The module (without .py) must be importable, i.e. be in PYTHONPATH. Basically, you should just point to a WSGI capable object.\nFor example with Flask, it\u0026rsquo;s gonna be the name of your main server file, followed by your Flask object: server:app for instance if you have a server.py file at the root of your project with a Flask app object inside.\nChoose Python version The default version of python on Clever Cloud is 2.7. If you want to use python 3.x instead, create an environment variable CC_PYTHON_VERSION equal to either 3 (which will default to the most up-to-date version), 3.7, 3.8, 3.9, 3.10 or 3.11.\nNote: the version is a number, do not use quotes. values allowed are 2, 2.7, 3, 3.7, 3.8, 3.9, 3.10, 3.11.\nChoose Pip version The default version of pip on Clever Cloud is 19. If you want to use pip 9 instead, create an environment variable like CC_PIP_VERSION=9.\nSelect the python backend Currently, we support daphne, gunicorn, uvicorn and uwsgi for Python backends. If not specified, the default backend is uwsgi.\nTo select one, set the CC_PYTHON_BACKEND environment variable with either daphne, gunicorn, uvicorn or uwsgi.\nPlease contact the support if you need another backend.\nDependencies If you do not have a requirements.txt file to commit you can obtain it via the command pip freeze \u0026gt; requirements.txt (or pip3 freeze \u0026gt; requirements.txt if you use Python 3.x) at the root of your project folder in your terminal.\nFor example to install PostgreSQL and don\u0026rsquo;t want to use the pip freeze command above you have to create a file requirements.txt at the root of your application folder:\npsycopg2\u0026gt;=2.7 --no-binary psycopg2 Note: We recommend using psycopg2\u0026gt;=2.7 --no-binary psycopg2 to avoid wsgi issues.\nYou can define a custom requirements.txt file with the environnement variable CC_PIP_REQUIREMENTS_FILE for example: CC_PIP_REQUIREMENTS_FILE=config/production.txt.\nCached dependencies Enabling dependencies caching You can enable dependencies caching by adding the CC_CACHE_DEPENDENCIES=true environment variable in your application. It is enabled by default only for rust and haskell applications.\nDisabling dependencies caching You can disable dependencies caching completely by removing the CC_CACHE_DEPENDENCIES environment variable from the Clever Cloud console, in the Environment variables menu of your application.\nOr by setting it to CC_CACHE_DEPENDENCIES=false\nTo fully remove cached dependencies, you have to rebuild your application from scratch.\nYou can select \u0026ldquo;rebuild and restart\u0026rdquo; from the Clever Cloud console or launch clever restart --without-cache with the Clever Tools CLI.\nUse setup.py We support execution of a single setup.py goal. Usually, this would be to execute custom tasks after the installation of dependencies.\nThe goal will be launched after the dependencies from requirements.txt have been installed.\nTo execute a goal, you can define the environment variable PYTHON_SETUP_PY_GOAL=\u0026quot;\u0026lt;your goal\u0026gt;\u0026quot;.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. To access environment variables from your code, just get them from the environment with:\nimport os os.getenv(\u0026#34;MY_VARIABLE\u0026#34;) Manage your static files To enable Nginx to serve your static resources, you have to set two environment variables.\nSTATIC_FILES_PATH: should point to a directory where your static files are stored.\nSTATIC_URL_PREFIX: the URL path under which you want to serve static files (e.g. /public).\nAlso, you are able to use a Filesystem Bucket to store your static files. Please refer to the File System Buckets section.\nNote: the path of your folder must be absolute regarding the root of your application.\nNote: setting the STATIC_URL_PREFIX to / will cause the deployment failure.\nStatic files example Here is how to serve static files, the test.png being the static file you want to serve:\n‚îú‚îÄ‚îÄ \u0026lt;app_root\u0026gt; ‚îÇ¬†‚îú‚îÄ‚îÄ flask-app.py ‚îÇ¬†‚îú‚îÄ‚îÄ static ‚îÇ¬†‚îÇ¬†‚îî‚îÄ‚îÄ test.png ‚îÇ¬†‚îî‚îÄ‚îÄ requirements.txt Using the environment variables STATIC_FILES_PATH=static/ and STATIC_URL_PREFIX=/public the test.png file will be accessed under: https://\u0026lt;domain.tld\u0026gt;/public/test.png.\nuWSGI, Gunicorn and Nginx configuration uWSGI, gunicorn and nginx settings can be configured by setting environment variables:\nuWSGI HARAKIRI: timeout (in seconds) after which an unresponding process is killed. (Default: 180) WSGI_BUFFER_SIZE: maximal size (in bytes) for the headers of a request. (Defaut: 4096) WSGI_POST_BUFFERING: buffer size (in bytes) for uploads. (Defaut: 4096) WSGI_WORKERS: number of workers. (Defaut: depends on the scaler) WSGI_THREADS: number of threads per worker. (Defaut: depends on the scaler) uWSGI asynchronous/non-blocking modes To enable uWSGI asynchronous mode, you can use these two environment variables:\nUWSGI_ASYNC: number of cores to use for uWSGI asynchronous/non-blocking modes. UWSGI_ASYNC_ENGINE: select the asynchronous engine for uWSGI (optional). Gunicorn GUNICORN_WORKER_CLASS: type of worker to use. Default to sync. Available workers CC_GUNICORN_TIMEOUT: gunicorn timeout. Defaults to 30 Nginx NGINX_READ_TIMEOUT: a bit like HARAKIRI, the response timeout in seconds. (Defaut: 300) ENABLE_GZIP_COMPRESSION: \u0026ldquo;on|yes|true\u0026rdquo; gzip-compress the output of uwsgi. GZIP_TYPES: the mime types to gzip. Defaults to text/* application/json application/xml application/javascript image/svg+xml. Basic authentication If you need basic authentication, you can enable it using environment variables. You will need to set CC_HTTP_BASIC_AUTH variable to your own login:password pair. If you need to allow access to multiple users, you can create additional environment CC_HTTP_BASIC_AUTH_n (where n is a number) variables.\nNginx optional configuration with clevercloud/http.json Nginx settings can be configured further in clevercloud/http.json. All its fields are optional.\nlanguages: configure a default language and redirections error_pages: configure custom files for error pages force_https: automatically redirect HTTP traffic to HTTPS aliases: set up redirections charset: force a specific charset { \u0026#34;languages\u0026#34;: { \u0026#34;default\u0026#34;: {\u0026#34;rewrite\u0026#34;: \u0026#34;en\u0026#34;}, \u0026#34;fr\u0026#34;: {\u0026#34;rewrite\u0026#34;: \u0026#34;en\u0026#34;} }, \u0026#34;error_pages\u0026#34;: { \u0026#34;404\u0026#34;: \u0026#34;path/to/page\u0026#34; }, \u0026#34;force_https\u0026#34;: true, \u0026#34;aliases\u0026#34;: { \u0026#34;/path\u0026#34;:¬†\u0026#34;redirection\u0026#34; }, \u0026#34;charset\u0026#34;: \u0026#34;latin-1\u0026#34; } Using the Gevent loop engine Whether you use uwsgi or gunicorn, you can enable the Gevent loop engine.\nTo do so, add the CC_PYTHON_USE_GEVENT environment variable to your application, with the true value.\nMonitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\nCelery apps Note: Please note that Celery support is not available yet for gunicorn.\nWe also support celery apps out of the box. To deploy a celery app, use the CC_PYTHON_CELERY_MODULE environment variable:\nCC_PYTHON_CELERY_MODULE=\u0026#34;mymodule\u0026#34; ‚ö†Ô∏è Celery needs to be defined as a dependency in your requirements.txt. Otherwise the deployment will be aborted if Celery support is enabled. You can also activate beat with CC_PYTHON_CELERY_USE_BEAT=true and provide a given log dir for celery with CC_PYTHON_CELERY_LOGFILE=\u0026quot;/path/to/logdir\u0026quot;.\nThe CC_PYTHON_CELERY_LOGFILE path is relative to the application\u0026rsquo;s path.\n‚ö†Ô∏è There is a bug in versions \u0026lt;4.2 of Celery. You need to add the CELERY_TIMEZONE = 'UTC' environment variable.\nThe bug is documented here: https://GitHub.com/celery/celery/issues/4184.\n\u0026lt;/p\u0026gt; Git Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n"},"title":"Python"},"/doc/getting-started/by-language/ruby/":{"data":{"":" The API of Clever Cloud uses OAuth 1 to perform authentication actions. There are two ways to signup to Clever Cloud: email or GitHub login.\nGo to the Clever Cloud Console and select the method you prefer.\n@ Email Authentication This kind of auth requires a valid and non-temporary disposable e-mail, and a password having at least 6 characters. Do not forget to validate your email by clicking the link you will receive.\nGitHub Authentication The GitHub signup allows you to create an account or link your existing one to GitHub, in one click. This process asks the following permissions:¬†Read your Public Key Read User Repositories The \u0026ldquo;repository permission\u0026rdquo; is used to deploy your GitHub apps directly to Clever Cloud, with a simple step.\nIf you need to give access to Clever Cloud\u0026rsquo;s API to a specific GitHub organization, you can do it here.\nüîê Two Factor Authentication (2FA) Clever Cloud supports 2FA. You can enable it here: https://console.clever-cloud.com/users/me/authentication\nPlease, backup your recovery codes, we won\u0026rsquo;t be able to restore access to your account if you lose access to your regular codes.\nYou need to add a SSH key to your Clever Cloud\u0026rsquo;s account to deploy via Git. SSH keys are used to establish a secure connection between your computer and Clever Cloud. A user can have multiple SSH keys.\nI need to create my SSH key In your Terminal, enter the following bash line:\nssh-keygen -t ed25519 -C \u0026#34;your_email@youremail.com\u0026#34; This command creates a new ssh key using the provided email, so that the owner of the key can be identified.\nWhen prompted in which file you want to save the key, just press enter. If it says that the file already exists, enter n for no. Type ls, verify the presence of the file and jump to Add your SSH key on Clever Cloud.\nWhen asked, enter a passphrase:\nGenerating public/private ed25519 key pair. Enter file in which to save the key (/your_home_path/.ssh/id_ed25519): # Now you should enter a passphrase. Enter passphrase (empty for no passphrase): [Type a passphrase] Enter same passphrase again: [Type passphrase again] Which should give you something like this:\nYour identification has been saved in /your_home_path/.ssh/id_ed25519. Your public key has been saved in /your_home_path/.ssh/id_ed25519.pub. The key fingerprint is: 01:0e:e5:2d:ab:98:d6:17:a1:6d:f0:68:9f:d0:a2:db your_email@youremail.com I created my account with GitHub If your account is linked to GitHub, a panel with your GitHub SSH keys will appear in the \u0026ldquo;SSH Keys\u0026rdquo; tab. You can add any key already present in your GitHub account by clicking on the import button next to it.\nAdd your SSH key on Clever Cloud Public SSH Key To declare your public SSH Key on Clever Cloud, in the left navigation bar, go in \u0026ldquo;Profile\u0026rdquo; and in the \u0026ldquo;SSH Keys\u0026rdquo; tab, add the key by entering a name and the public SSH key. The key is the entire content of the id_[ed25519/rsa].pub file including the id_ed25519/ssh-rsa part and your email.\nPrivate SSH Key If you want to clone a repository from a private repository, you can add a Private SSH Key to an application by creating a folder clevercloud at the root of your application and creating the file clevercloud/ssh.json with the following content:\n{ \u0026#34;privateKeyFile\u0026#34;: \u0026#34;path/to/file\u0026#34; } Of course you need to provide a valid path to a file that contains a valid key and that you will push on the Clever Cloud git remote.\nIf you have trouble configuring this key you can refer to this extended documentation\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nConfigure your Ruby on Rails application Mandatory configuration Be sure that:\nyou push to the master branch you commit your gems.locked or Gemfile.lock file you have a config.ru file (this one is most of the time generated by rails) you have gem puma in your Gemfile (puma is the default application server from rails, when creating a new ruby application, an environment variable is automatically added: CC_RACKUP_SERVER=puma) You need to provide a gems.locked or Gemfile.lock file. To do that ensure you have at least once run bundle install in your terminal at the root of your rails project.\nChoose ruby version If you specify a ruby version in your gems.rb of Gemfile, we\u0026rsquo;ll use it, otherwise; keep reading.\nOn your Clever Cloud application create an environment variable CC_RUBY_VERSION=rubyversion where rubyversion represents:\n\u0026ldquo;2\u0026rdquo; will select the greatest \u0026ldquo;2.X.Y\u0026rdquo; version available. \u0026ldquo;2.5\u0026rdquo; will select the greatest \u0026ldquo;2.5.Y\u0026rdquo; version available. \u0026ldquo;2.5.3\u0026rdquo; will select the \u0026ldquo;2.5.3\u0026rdquo; version. Due to current landscape in ruby applications, the default version is the greatest 2.5.Y. We provide also the 2.4.Y and 2.3.Y version.\nIf given rubyversion does not match any available version, your deployment will fail.\nChoose your environment You can set the RUBY_ENV environment variable to the value you want. By default it is set to production. Most used values are production and development but you can use any custom one as long as you have setted up of the required variables for this environment in your ./config/ folder files.\nSecure configuration of secret key There are many way to add secret key to your env and each one is valid. Clever Cloud provides you a secure way so you don\u0026rsquo;t have to commit any file containing it.\ngenerate the secret key locally with rake secret add it to your environment in ./config/secret.yml with: production: secret_key_base: \u0026lt;%= ENV[\u0026#34;SECRET_KEY_BASE\u0026#34;] %\u0026gt; Configure Rake goals You can specify a list of rake goals to execute before the deployment of your application by using the CC_RAKEGOALS environment variable.\nThe value of this variable must be a comma-separated list of goals, for instance:\nCC_RAKEGOALS=\u0026#34;db:migrate, assets:precompile\u0026#34; We do not execute any rake goals by default.\nConfigure Sidekiq To run a Sidekiq process in background you will need to enable it with the CC_ENABLE_SIDEKIQ=true environment variable.\nPlease note you will need a redis instance to use this feature.\nYou can specify multiple Sidekiq configuration files with the CC_SIDEKIQ_FILES environment variable.\nThe value of this variable must be a comma-separated list of files:\nCC_SIDEKIQ_FILES=\u0026#34;./config/sidekiq_1.yml,./config/sidekiq_2.yml,./config/sidekiq_3.yml\u0026#34; Note: CC_SIDEKIQ_FILES have precedence over CC_ENABLE_SIDEKIQ which means that even if CC_SIDEKIQ_FILES is defined and CC_ENABLE_SIDEKIQ is set to false, Sidekiq will still be enabled.\nEach path is the path from the root of the repository to a sidekiq configuration file.\nEach file might contain something like this standard sidekiq.yml file:\n--- :concurrency: 4 :pidfile: tmp/pids/sidekiq_1.pid :queues: - [critical, 2] - default production: :logfile: ./log/sidekiq.log --- Manage your static files and assets Static files are configured with environment variables:\nSTATIC_FILES_PATH: should point to a directory where your static files are stored.\nSTATIC_URL_PREFIX: the URL path under which you want to serve static files (e.g. /public/)\nNote: the path of your folder must be absolute regarding the root of your application.\nNote: setting the STATIC_URL_PREFIX to / will make the deployment to fail.\nIf you use the asset pipeline, make sure to include the assets:precompile task in the CC_RAKEGOALS environment variable value.\nCC_RAKEGOALS=\u0026#34;db:migrate, assets:precompile\u0026#34; Note: if your project uses webpacker, make sure to enable the dedicated build instance option in the Information menu of your application in the Clever Cloud console because webpacker needs a lot a ressources when starting.\nUsing Active Storage and Cellar S3 Only for Rails \u0026gt;= 5.2.\nEnable Active Storage for your application: $ rails active_storage:install then $ rake db:migrate\nAdd gem \u0026quot;aws-sdk-s3\u0026quot;, require: false to your Gemfile, run $ bundle install\nAdd config.active_storage.service = :clevercloud in config/environments/production.yml\nAdd in config/storage.yml:\nclevercloud: service: S3 access_key_id: \u0026lt;%= ENV[\u0026#39;CELLAR_ADDON_KEY_ID\u0026#39;] %\u0026gt; secret_access_key: \u0026lt;%= ENV[\u0026#39;CELLAR_ADDON_KEY_SECRET\u0026#39;] %\u0026gt; region: us-east-1 bucket: \u0026lt;%= ENV[\u0026#39;CELLAR_ADDON_BUCKET_NAME\u0026#39;] %\u0026gt; endpoint: \u0026lt;%= ENV[\u0026#39;CELLAR_ADDON_ENDPOINT\u0026#39;] %\u0026gt; force_path_style: true In the clever cloud console create a Cellar S3 storage add-on, name it, link it to your rails application and create a bucket.\nIn the environment variables section of your Ruby on Rails application on Clever Cloud add the following environment variables:\nCELLAR_ADDON_BUCKET_NAME=\u0026#34;\u0026lt;your bucket name\u0026gt;\u0026#34; CELLAR_ADDON_ENDPOINT=\u0026#34;https://cellar-c2.services.clever-cloud.com\u0026#34; You can now commit and push your changes.\nAlso, you are able to use a Filesystem Bucket to store your static files. Please refer to the File System Buckets section.\nNginx configuration nginx settings can be configured with environment variables:\nNGINX_READ_TIMEOUT: the response timeout in seconds. (Defaut: 300) Basic authentication If you need basic authentication, you can enable it using environment variables. You will need to set CC_HTTP_BASIC_AUTH variable to your own login:password pair. If you need to allow access to multiple users, you can create additional environment CC_HTTP_BASIC_AUTH_n (where n is a number) variables.\nNginx optional configuration with clevercloud/http.json Nginx settings can be configured further in clevercloud/http.json. All its fields are optional.\nlanguages: configure a default language and redirections error_pages: configure custom files for error pages force_https: automatically redirect HTTP traffic to HTTPS aliases: set up redirections charset: force a specific charset { \u0026#34;languages\u0026#34;: { \u0026#34;default\u0026#34;: {\u0026#34;rewrite\u0026#34;: \u0026#34;en\u0026#34;}, \u0026#34;fr\u0026#34;: {\u0026#34;rewrite\u0026#34;: \u0026#34;en\u0026#34;} }, \u0026#34;error_pages\u0026#34;: { \u0026#34;404\u0026#34;: \u0026#34;path/to/page\u0026#34; }, \u0026#34;force_https\u0026#34;: true, \u0026#34;aliases\u0026#34;: { \u0026#34;/path\u0026#34;:¬†\u0026#34;redirection\u0026#34; }, \u0026#34;charset\u0026#34;: \u0026#34;latin-1\u0026#34; } Puma configuration Puma reads its configuration from the config/puma.rb file. See the puma documentation for more information.\nYou can override this configuration with environment variables. Each of them, when specified, will be be preferred over the setting from config/puma.rb.\nCC_PUMA_WORKERS overrides the number of workers (e.g. CC_PUMA_WORKERS=2) CC_PUMA_THREADS overrides the number of threads per worker, can be a raw number or a range (e.g. CC_PUMA_THREADS=6 or CC_PUMA_THREADS=4:8) If they are not defined in the environment nor in config/puma.rb we will setup the values depending on the size of the scaler your application is running on. We also fill the WEB_CONCURRENCY and RAILS_MAX_THREADS environment variable if they are not present as they may be used by rails\u0026rsquo; puma configuration.\nOverridding rackup application server You can override the puma default server by setting an environment variable CC_RACKUP_SERVER=yourserver. We do not recommend you do it.\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n"},"title":"Ruby"},"/doc/getting-started/by-language/rust/":{"data":{"":" The API of Clever Cloud uses OAuth 1 to perform authentication actions. There are two ways to signup to Clever Cloud: email or GitHub login.\nGo to the Clever Cloud Console and select the method you prefer.\n@ Email Authentication This kind of auth requires a valid and non-temporary disposable e-mail, and a password having at least 6 characters. Do not forget to validate your email by clicking the link you will receive.\nGitHub Authentication The GitHub signup allows you to create an account or link your existing one to GitHub, in one click. This process asks the following permissions:¬†Read your Public Key Read User Repositories The \u0026ldquo;repository permission\u0026rdquo; is used to deploy your GitHub apps directly to Clever Cloud, with a simple step.\nIf you need to give access to Clever Cloud\u0026rsquo;s API to a specific GitHub organization, you can do it here.\nüîê Two Factor Authentication (2FA) Clever Cloud supports 2FA. You can enable it here: https://console.clever-cloud.com/users/me/authentication\nPlease, backup your recovery codes, we won\u0026rsquo;t be able to restore access to your account if you lose access to your regular codes.\nYou need to add a SSH key to your Clever Cloud\u0026rsquo;s account to deploy via Git. SSH keys are used to establish a secure connection between your computer and Clever Cloud. A user can have multiple SSH keys.\nI need to create my SSH key In your Terminal, enter the following bash line:\nssh-keygen -t ed25519 -C \u0026#34;your_email@youremail.com\u0026#34; This command creates a new ssh key using the provided email, so that the owner of the key can be identified.\nWhen prompted in which file you want to save the key, just press enter. If it says that the file already exists, enter n for no. Type ls, verify the presence of the file and jump to Add your SSH key on Clever Cloud.\nWhen asked, enter a passphrase:\nGenerating public/private ed25519 key pair. Enter file in which to save the key (/your_home_path/.ssh/id_ed25519): # Now you should enter a passphrase. Enter passphrase (empty for no passphrase): [Type a passphrase] Enter same passphrase again: [Type passphrase again] Which should give you something like this:\nYour identification has been saved in /your_home_path/.ssh/id_ed25519. Your public key has been saved in /your_home_path/.ssh/id_ed25519.pub. The key fingerprint is: 01:0e:e5:2d:ab:98:d6:17:a1:6d:f0:68:9f:d0:a2:db your_email@youremail.com I created my account with GitHub If your account is linked to GitHub, a panel with your GitHub SSH keys will appear in the \u0026ldquo;SSH Keys\u0026rdquo; tab. You can add any key already present in your GitHub account by clicking on the import button next to it.\nAdd your SSH key on Clever Cloud Public SSH Key To declare your public SSH Key on Clever Cloud, in the left navigation bar, go in \u0026ldquo;Profile\u0026rdquo; and in the \u0026ldquo;SSH Keys\u0026rdquo; tab, add the key by entering a name and the public SSH key. The key is the entire content of the id_[ed25519/rsa].pub file including the id_ed25519/ssh-rsa part and your email.\nPrivate SSH Key If you want to clone a repository from a private repository, you can add a Private SSH Key to an application by creating a folder clevercloud at the root of your application and creating the file clevercloud/ssh.json with the following content:\n{ \u0026#34;privateKeyFile\u0026#34;: \u0026#34;path/to/file\u0026#34; } Of course you need to provide a valid path to a file that contains a valid key and that you will push on the Clever Cloud git remote.\nIf you have trouble configuring this key you can refer to this extended documentation\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nConfigure your Rust application Mandatory configuration Make sure that:\nyou have pushed in master branch you listen on port 8080 you have committed Cargo.lock you have at least one binary target in Cargo.toml The result of cargo build --release --locked must be an executable which starts a web server listening on 0.0.0.0:8080.\nFor instance, a minimal iron application can look like this:\nextern crate iron; use iron::prelude::*; use iron::status; fn main() { fn hello_world(_: \u0026amp;mut Request) -\u0026gt; IronResult\u0026lt;Response\u0026gt; { Ok(Response::with((status::Ok, \u0026#34;Hello World!\u0026#34;))) } let _server = Iron::new(hello_world).http(\u0026#34;0.0.0.0:8080\u0026#34;).unwrap(); println!(\u0026#34;On 8080\u0026#34;); } Multiple binary targets If your Cargo.toml defines multiple targets, you must specify the one you want to run, with the CC_RUST_BIN environment variable. If CC_RUST_BIN is specified, then the executable produced by this target is used to start the application.\nCustom run command If you need to run a custom command (or just pass options to the program), you can specify it through the CC_RUN_COMMAND environment variable.\nFor instance, you can have CC_RUN_COMMAND=./target/release/myapp \u0026lt;options\u0026gt;.\nDependencies Make sure to list all your dependencies in Cargo.toml. For the example above, you need:\n[package] name = \u0026#34;my-app\u0026#34; version = \u0026#34;0.1.0\u0026#34; authors = [] [dependencies] iron = \u0026#34;0.4.0\u0026#34; Cached dependencies Enabling dependencies caching You can enable dependencies caching by adding the CC_CACHE_DEPENDENCIES=true environment variable in your application.\nDisabling dependencies caching You can disable dependencies caching completely by removing the CC_CACHE_DEPENDENCIES environment variable from the Clever Cloud console, in the Environment variables menu of your application. Or by setting it to CC_CACHE_DEPENDENCIES=false.\nTo fully remove cached dependencies, you have to rebuild your application from scratch. You can select \u0026ldquo;rebuild and restart\u0026rdquo; from the Clever Cloud console or launch clever restart --without-cache with the Clever Tools CLI.\nPrivate dependencies If you use dependencies on a private git repository inside your project, it needs a bit of configuration until this cargo issue has been resolved.\nFirst, you need to use the HTTPS url as the git url for your dependency in your Cargo.toml:\nprivate-dep = { git = \u0026quot;https://github.com/user/my-private-dep.git\u0026quot; }\nThen, you need to create a personal access token. It allows to not use your password:\nGithub: https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/ Gitlab: https://docs.gitlab.com/ce/user/profile/personal_access_tokens.html (API rights are needed) Once you have the token, we need to tell Git to use a credential store. For that, we are going to create it.\nCreate a clevercloud/pre-build.sh file at the root of your application and paste:\n#! /usr/bin/env bash git config --global credential.helper store echo \u0026#34;https://${GIT_USERNAME}:${GIT_PASSWORD}@gitlab.com\u0026#34; \u0026gt; ~/.git-credentials chmod 600 ~/.git-credentials If you have multiple private repositories, add them accordingly.\nNow, go into the environment variables page of your application and create those environment variables:\nGIT_USERNAME: your Github / gitlab / other username GIT_PASSWORD: your Github / gitlab / other password CC_PRE_BUILD_HOOK: clevercloud/pre-build.sh CC_POST_BUILD_HOOK: rm /home/bas/.git-credentials This adds the git configuration before the build start and it cleans it after the build has been done.\nRust channels By default, your application is built with the latest stable rust version. If you require beta, nightly or a specific Rust version, you can set CC_RUSTUP_CHANNEL environment variable value to beta, nightly or a specific version (eg. 1.36.0).\nThe build uses rustup to select the Rust version you need.\nCargo features You can enable specific features for your crate by settings the CC_RUST_FEATURES environment variable to the list of features to enable.\nTo access environment variables from your code, just get them from the environment with std::env::var(\u0026lt;KEY_NAME\u0026gt;).\nIf some environment variables are critical to your application, here is an approach you can use:\nuse std::env; fn main() { let my_config_value = env::var(\u0026#34;MY_VAR\u0026#34;).expect(\u0026#34;Missing env var `MY_VAR`\u0026#34;); something_that_runs_a_web_server(my_config_value); } This loads the environment variable in your main function and use .expect to fail early. This way, the application will refuse to start with an helpful error message if MY_VAR is not defined.\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n"},"title":"Rust"},"/doc/getting-started/by-language/scala/":{"data":{"":" The API of Clever Cloud uses OAuth 1 to perform authentication actions. There are two ways to signup to Clever Cloud: email or GitHub login.\nGo to the Clever Cloud Console and select the method you prefer.\n@ Email Authentication This kind of auth requires a valid and non-temporary disposable e-mail, and a password having at least 6 characters. Do not forget to validate your email by clicking the link you will receive.\nGitHub Authentication The GitHub signup allows you to create an account or link your existing one to GitHub, in one click. This process asks the following permissions:¬†Read your Public Key Read User Repositories The \u0026ldquo;repository permission\u0026rdquo; is used to deploy your GitHub apps directly to Clever Cloud, with a simple step.\nIf you need to give access to Clever Cloud\u0026rsquo;s API to a specific GitHub organization, you can do it here.\nüîê Two Factor Authentication (2FA) Clever Cloud supports 2FA. You can enable it here: https://console.clever-cloud.com/users/me/authentication\nPlease, backup your recovery codes, we won\u0026rsquo;t be able to restore access to your account if you lose access to your regular codes.\nYou need to add a SSH key to your Clever Cloud\u0026rsquo;s account to deploy via Git. SSH keys are used to establish a secure connection between your computer and Clever Cloud. A user can have multiple SSH keys.\nI need to create my SSH key In your Terminal, enter the following bash line:\nssh-keygen -t ed25519 -C \u0026#34;your_email@youremail.com\u0026#34; This command creates a new ssh key using the provided email, so that the owner of the key can be identified.\nWhen prompted in which file you want to save the key, just press enter. If it says that the file already exists, enter n for no. Type ls, verify the presence of the file and jump to Add your SSH key on Clever Cloud.\nWhen asked, enter a passphrase:\nGenerating public/private ed25519 key pair. Enter file in which to save the key (/your_home_path/.ssh/id_ed25519): # Now you should enter a passphrase. Enter passphrase (empty for no passphrase): [Type a passphrase] Enter same passphrase again: [Type passphrase again] Which should give you something like this:\nYour identification has been saved in /your_home_path/.ssh/id_ed25519. Your public key has been saved in /your_home_path/.ssh/id_ed25519.pub. The key fingerprint is: 01:0e:e5:2d:ab:98:d6:17:a1:6d:f0:68:9f:d0:a2:db your_email@youremail.com I created my account with GitHub If your account is linked to GitHub, a panel with your GitHub SSH keys will appear in the \u0026ldquo;SSH Keys\u0026rdquo; tab. You can add any key already present in your GitHub account by clicking on the import button next to it.\nAdd your SSH key on Clever Cloud Public SSH Key To declare your public SSH Key on Clever Cloud, in the left navigation bar, go in \u0026ldquo;Profile\u0026rdquo; and in the \u0026ldquo;SSH Keys\u0026rdquo; tab, add the key by entering a name and the public SSH key. The key is the entire content of the id_[ed25519/rsa].pub file including the id_ed25519/ssh-rsa part and your email.\nPrivate SSH Key If you want to clone a repository from a private repository, you can add a Private SSH Key to an application by creating a folder clevercloud at the root of your application and creating the file clevercloud/ssh.json with the following content:\n{ \u0026#34;privateKeyFile\u0026#34;: \u0026#34;path/to/file\u0026#34; } Of course you need to provide a valid path to a file that contains a valid key and that you will push on the Clever Cloud git remote.\nIf you have trouble configuring this key you can refer to this extended documentation\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nConfigure your Scala application Mandatory configuration Your application has to listen on port 8080 for worldwide connections (0.0.0.0). We set the system variable http.port to 8080 for you so in many cases (like for play applications) you don\u0026rsquo;t have anything to do. You need to use the sbt-native-packager in your project.\nThe sbt-native-packager We rely on sbt-native-packager to run applications. This plugin provides a stage task which is run during deployment.\nIf your project doesn\u0026rsquo;t already use sbt-native-packager, you need to add it to project/plugins.sbt. Please make sure you use an up-to-date version.\nIn project/plugins.sbt:\naddSbtPlugin(\u0026#34;com.typesafe.sbt\u0026#34; % \u0026#34;sbt-native-packager\u0026#34; % \u0026#34;1.7.0\u0026#34;) Then you need to configure the package type:\nIn build.sbt:\nenablePlugins(JavaAppPackaging) # Disable javadoc packaging mappings in (Compile, packageDoc) := Seq() For more information, please have a look at the documentation for sbt-native-packager\nCustom sbt goal By default, the deployment system execute sbt stage and runs the first binary found into /target/universal/stage/bin. If you want to run another goal, you can specify it with the SBT_DEPLOY_GOAL environment variable.\nMulti-module build If you have a single repository with multiple modules or want to build a specific module in a monorepo (and no top-level stage task), then you can specify the sbt task with SBT_DEPLOY_GOAL.\nCC_SBT_TARGET_DIR must be set to the relative path of the module and CC_SBT_TARGET_BIN to the name of the binary to run.\nFor instance, if you want to deploy a module named service1 that produce a binary named \u0026ldquo;my-binary\u0026rdquo;, you have to define the following variables:\nSBT_DEPLOY_GOAL=service1/stage CC_SBT_TARGET_DIR=service1 CC_SBT_TARGET_BIN=my-binary Check details on environment variables.\nOur engine will execute the sbt service1/stage and will run service1/target/universal/stage/bin/my-binary\nNote: even when CC_RUN_COMMAND is configured CC_SBT_TARGET_DIR and CC_SBT_TARGET_BIN should be set to the correct values.\nHOCON users If you\u0026rsquo;re using HOCON configuration files, then you can have direct acces to environment variables from the configuration file:\napplication.secret=${APPLICATION_SECRET} Git Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nLinking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n"},"title":"Scala"},"/doc/getting-started/cli/":{"data":{"":" clever-tools\nCommand Line Interface for Clever Cloud.\nInstallation The clever-tools CLI can be installed through many channels depending on your system setup.\nVia npm If you already have node/npm on your system, you can run:\nnpm install -g clever-tools If you want to install our latest beta release, you can run:\nnpm install -g clever-tools@beta On GNU/Linux Debian/Ubuntu (.deb) Warning We recently moved from Bintray to a self-hosted Nexus repository available at https://nexus.clever-cloud.com. If you were using Bintray to install our .deb packages, you will need to edit your /etc/apt/sources.list and remove the old entry with https://dl.bintray.com/clevercloud/deb before going further.\nIf you are using a GNU/Linux distribution that uses .deb packages like Debian or Ubuntu, you can run:\ncurl -fsSL https://clever-tools.clever-cloud.com/gpg/cc-nexus-deb.public.gpg.key | gpg --dearmor -o /usr/share/keyrings/cc-nexus-deb.gpg echo \u0026#34;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/cc-nexus-deb.gpg] https://nexus.clever-cloud.com/repository/deb stable main\u0026#34; | tee -a /etc/apt/sources.list apt-get update apt-get install clever-tools NOTES:\nThe .deb packages are hosted on Clever Cloud\u0026rsquo;s public Nexus instance available at https://nexus.clever-cloud.com. Our PGP key is required to trust the repository. If you want access to the beta channel, you can use this in your sources.list: echo \u0026#34;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/cc-nexus-deb.gpg] https://nexus.clever-cloud.com/repository/deb-beta beta main\u0026#34; | tee -a /etc/apt/sources.list CentOS/Fedora (.rpm) Warning We recently moved from Bintray to a self-hosted Nexus repository available at https://nexus.clever-cloud.com. If you were using Bintray to install our .rpm packages, you will need to remove the old /etc/yum.repos.d/bintray-clevercloud-rpm.repo before going further.\nIf you are using a GNU/Linux distribution that uses .rpm packages like CentOS or Fedora, you can run:\ncurl -s https://clever-tools.clever-cloud.com/repos/cc-nexus-rpm.repo \u0026gt; /etc/yum.repos.d/cc-nexus-rpm.repo yum update yum install clever-tools NOTES:\nThe .rpm packages are hosted on Clever Cloud\u0026rsquo;s public Nexus instance available at https://nexus.clever-cloud.com. If you want access to the beta channel, you will need to edit /etc/yum.repos.d/cc-nexus-rpm.repo and set enabled=1 for the [clever-tools-beta]. Arch Linux If you are using Arch Linux, the packages can be installed from AUR with this repo: clever-tools-bin. If you don\u0026rsquo;t know how to use this, you can run:\ngit clone https://aur.archlinux.org/clever-tools-bin.git clever-tools cd clever-tools makepkg -si NOTES:\nIf you want access to the beta channel, you can use this repo clever-tools-bin-beta. Exherbo If you are using Exherbo, you can run:\ncave resolve repository/CleverCloud -zx1 cave resolve clever-tools-bin -zx Other distributions (.tar.gz) If you are using another GNU/Linux distribution, you can download a .tar.gz archive and extract the binary in your PATH:\ncurl -O https://clever-tools.clever-cloud.com/releases/latest/clever-tools-latest_linux.tar.gz tar xvzf clever-tools-latest_linux.tar.gz cp clever-tools-latest_linux/clever ~/.local/bin/ NOTES:\nThe packages are available on Clever Cloud\u0026rsquo;s Cellar bucket: clever-tools-latest_linux.tar.gz. You can also retrieve any release (including beta) on this Cellar bucket by replacing latest (path and filename) with the version number you need. On macOS Using homebrew If you are using macOS and you have homebrew installed, you can run:\nbrew install CleverCloud/homebrew-tap/clever-tools NOTES:\nIf you want access to the beta channel, you can use CleverCloud/homebrew-tap-beta/clever-tools instead. Using the .tar.gz archive If you are using macOS, but you don\u0026rsquo;t have homebrew installed, you can download a .tar.gz archive and extract the binary in your PATH:\ncurl -O https://clever-tools.clever-cloud.com/releases/latest/clever-tools-latest_macos.tar.gz tar xvzf clever-tools-latest_macos.tar.gz cp clever-tools-latest_macos/clever ~/.local/bin/ NOTES:\nThe packages are available on Clever Cloud\u0026rsquo;s Cellar bucket: clever-tools-latest_macos.tar.gz. You can also retrieve any release (including beta) on this Cellar bucket by replacing latest (path and filename) with the version number you need. On Windows Using chocolatey Warning We recently moved from Bintray to a self-hosted Nexus repository available at https://nexus.clever-cloud.com. If you were using Bintray to install our .nupkg packages, you will need to remove the old source.\nIf you are using Windows and you have chocolatey installed, you can run:\nchoco sources add -n=clevercloud -s=\u0026#39;https://nexus.clever-cloud.com/repository/nupkg/\u0026#39; choco install clever-tools NOTES:\nIf you want access to the beta channel, you can use choco sources add -n=clevercloud -s='https://nexus.clever-cloud.com/repository/nupkg-beta/' instead. Using the .zip archive If you are using Windows, but you don\u0026rsquo;t have chocolatey installed, you can download a .zip archive and extract the binary in your PATH.\nNOTES:\nThe packages are available on Clever Cloud\u0026rsquo;s Cellar bucket: clever-tools-latest_win.tar.gz. You can also retrieve any release (including beta) on this Cellar bucket by replacing latest (path and filename) with the version number you need. Via Docker If you are using docker, you can use the image provided here.\ndocker pull clevercloud/clever-tools docker run --rm clever-tools \u0026lt;command\u0026gt; Dockerfile In your Dockerfile you can copy the clever-tools CLI from the image itself with a simple one liner:\nCOPY --from=clevercloud/clever-tools /bin/clever /usr/local/bin/clever Via Nix If you are using Nix, you will find a Nix derivation on Fretlink\u0026rsquo;s GitHub repository: https://github.com/fretlink/clever-tools-nix\nEnabling autocompletion The clever-tools CLI comes with a comprehensive auto-completion system. Some installation methods like .deb packages, .rpm packages or brew will try to enable it automatically. If it does not work, try this for bash:\nclever --bash-autocomplete-script $(which clever) | sudo tee /usr/share/bash-completion/completions/clever or this for zsh:\nclever --zsh-autocomplete-script $(which clever) | sudo tee /usr/share/zsh/site-functions How to use Login To use clever-tools, you have to login.\nclever login It will open the Web console in your browser and reuse your existing session if you\u0026rsquo;re already logged in.\nclever login tries to open a browser through xdg-open on GNU/Linux systems (and in bash for windows). Make sure you have xdg-utils available as well as a default browser set, or you can copy and paste the URL displayed in the console.\nCreate an application clever create \u0026lt;name\u0026gt; --type \u0026lt;type\u0026gt; \\ [--region \u0026lt;region\u0026gt;] \\ [--org \u0026lt;organisation\u0026gt;] \\ [--alias \u0026lt;alias\u0026gt;] Where type is one of:\ndocker: for Docker-based applications go: for Go applications gradle: for applications launched with gradle haskell: for haskell applications jar: for applications deployed as standalone jar files maven: for applications launched with maven node: for node.js applications php: for PHP applications play1: for Play1 applications play2: for Play2 applications python: for python27 and python3 applications ruby: for ruby applications rust: for rust applications sbt: for applications launched with SBT static-apache: for static (HTML only) websites war: for applications deployed as war files Where region is one of:\npar (for Paris) mtl (for Montreal) --org allows you to chose the organisation in which your app is created.\n--alias allows you to deploy the same application in multiple environments on Clever Cloud (eg: production, testing, ‚Ä¶)\nLink an existing application clever link [--org \u0026lt;ORG-NAME\u0026gt;] \u0026lt;APP-NAME\u0026gt; [--alias \u0026lt;alias\u0026gt;] Where APP-NAME is the name of your application, and ORG-NAME is the name of the organisation it\u0026rsquo;s in. You can specify a complete application id instead of its name (in that case, --org can be omitted).\nDeploy an application clever deploy [--alias \u0026lt;alias\u0026gt;] --alias allows you to deploy your application several times on Clever Cloud (eg: production, testing, ‚Ä¶)\nApplication status clever status [--alias \u0026lt;alias\u0026gt;] Change application scalability clever scale [--alias \u0026lt;alias\u0026gt;] [--min-flavor \u0026lt;minflavor\u0026gt;] [--max-flavor \u0026lt;maxflavor\u0026gt;] [--min-instances \u0026lt;mininstances\u0026gt;] [--max-instances \u0026lt;maxinstances\u0026gt;] Logs Drains # create drain clever drain create [--alias \u0026lt;alias\u0026gt;] \u0026lt;DRAIN-TYPE\u0026gt; \u0026lt;DRAIN-URL\u0026gt; [--username \u0026lt;username\u0026gt;] [--password \u0026lt;password\u0026gt;] # list drains clever drain [--alias \u0026lt;alias\u0026gt;] # remove drain clever drain remove [--alias \u0026lt;alias\u0026gt;] \u0026lt;DRAIN-ID\u0026gt; Where DRAIN-TYPE is one of:\nTCPSyslog: for TCP syslog endpoint; UDPSyslog: for UDP syslog endpoint; HTTP: for TCP syslog endpoint (note that this endpoint has optional username/passwordparameters as HTTP Basic Authentication); ElasticSearch: for ElasticSearch endpoint (note that this endpoint requires username/password parameters as HTTP Basic Authentication); DatadogHTTP: for Datadog endpoint (note that this endpoint needs your Datadog API Key). NewRelicHTTP: for NewRelic endpoint (note that this endpoint needs your NewRelic API Key). ElasticSearch logs drains ElasticSearch drains use the Elastic bulk API. To match this endpoint, specify /_bulk at the end of your ElasticSearch endpoint.\nDatadog logs drains Datadog has two zones, EU and COM. An account on one zone is not available on the other, make sure to target the good EU or COM intake endpoint.\nTo create a Datadog drain, you just need to use one of the following command depending on your zone:\n# EU clever drain create DatadogHTTP \u0026#34;https://http-intake.logs.datadoghq.eu/v1/input/\u0026lt;API_KEY\u0026gt;?ddsource=clevercloud\u0026amp;service=\u0026lt;SERVICE\u0026gt;\u0026amp;host=\u0026lt;HOST\u0026gt;\u0026#34; # US clever drain create DatadogHTTP \u0026#34;https://http-intake.logs.datadoghq.com/v1/input/\u0026lt;API_KEY\u0026gt;?ddsource=clevercloud\u0026amp;service=\u0026lt;SERVICE\u0026gt;\u0026amp;host=\u0026lt;HOST\u0026gt;\u0026#34; Please note that the host query parameter is not mandatory: in the Datadog pipeline configuration, you can map @source_host which is the host provided by Clever Cloud in logs as host property.\nNewRelic logs drains NewRelic has two zones, EU and US. An account on one zone is not available on the other, make sure to target the good EU or US intake endpoint.\nTo create a NewRelic drain, you just need to use:\nclever drain create NewRelicHTTP \u0026#34;https://log-api.eu.newrelic.com/log/v1\u0026#34; --api-key \u0026lt;API_KEY\u0026gt; Display help You can display help about each command with clever help.\nclever help clever help deploy Examples cd node_project clever login clever create \u0026#34;Node.js application\u0026#34; -t node -r mtl clever deploy How to send feedback? Send us an email! or submit an issue.\nAutomated testing This project uses Travis CI to launch unit tests and validate pull requests before they\u0026rsquo;re merged: https://travis-ci.org/CleverCloud/clever-tools\nAutomated releases This project uses Jenkins to build binaries, package them and release them automatically on the various repositories. If you want to know more or if you need to release a new version, please read RELEASE.md carefully.\n"},"title":"CLI"},"/doc/getting-started/dbaas/":{"data":{"":"If you are looking for Database as a Service or managed databases, some are available on Clever Cloud:\nMySQL PostgreSQL MongoDB Redis Elastic All Databases available on Clever Cloud have automated backups, monitoring, logs and metrics management.\n"},"title":"DBaaS"},"/doc/getting-started/quickstart/":{"data":{"":" The API of Clever Cloud uses OAuth 1 to perform authentication actions. There are two ways to signup to Clever Cloud: email or GitHub login.\nGo to the Clever Cloud Console and select the method you prefer.\n@ Email Authentication This kind of auth requires a valid and non-temporary disposable e-mail, and a password having at least 6 characters. Do not forget to validate your email by clicking the link you will receive.\nGitHub Authentication The GitHub signup allows you to create an account or link your existing one to GitHub, in one click. This process asks the following permissions:¬†Read your Public Key Read User Repositories The \u0026ldquo;repository permission\u0026rdquo; is used to deploy your GitHub apps directly to Clever Cloud, with a simple step.\nIf you need to give access to Clever Cloud\u0026rsquo;s API to a specific GitHub organization, you can do it here.\nüîê Two Factor Authentication (2FA) Clever Cloud supports 2FA. You can enable it here: https://console.clever-cloud.com/users/me/authentication\nPlease, backup your recovery codes, we won\u0026rsquo;t be able to restore access to your account if you lose access to your regular codes.\n","create-your-first-add-on#Create your first add-on":"Applications often requires one or more services in addition to the runtime itself. Add-ons are services you can use independently, or you can link them with your application(s). For instance, you may want to add a database or a caching system to your application or just have a database with no linked application.\nAn add-on can be shared by different applications to share data between them. It can be a database shared by two or three applications of your infrastructure for example, or they can be independent.\nMost of the add-ons catalog is provided by Clever Cloud, but vendors are also allowed to provide services external to Clever Cloud (See how to integrate your SaaS with Clever Cloud)\nAvailable add-ons Clever Cloud provides multiple add-ons to work with your applications:\nMySQL PostgreSQL MongoDB FS Bucket Cellar Redis Config Provider Add-on Billing There are two kinds of billing:\nPer-month billing: Add-ons with fixed resources (storage, CPU and RAM) Per-usage billing: Add-ons based on consumption, like FS Bucket and Cellar ‚ö†Ô∏è Add-ons having a free plan are meant for testing purposes, not production usage. These add-ons usually rely on shared resources, resulting in variable, non-guaranteed performances and stability. Shared clusters may not be running the same version as dedicated instances. Note: Per usage billing will be taken on runtime credits each day, while per-month add-ons will create a new line in the monthly invoice.\nCreate an add-on for an existing application Here we will assume you want to create a new add-on and link it to your application.\nIn order to create it:\nGo to the Clever Cloud Console.\nGo to the organization in which you want to create the add-on, for example your personal space.\nClick on Add an add-on. This space let you create and configure the add-on according to your needs.\nChoose which type of add-on you want to create. See above the list of available add-ons and their corresponding documentation pages for further information on how they work.\nSelect the plan you need for you add-on. You can find details about the pricing, the capacity of the add-on and other specifications on this page or in the corresponding documentation page.\nChoose with which application you want to link you add-on. Linking an add-on to an application will provide configuration to the application through environment variables. The environment variables provided by the add-on are available for use in the linked application.\nIf you want to use your add-on alone, just don\u0026rsquo;t link it to any application.\nChoose the name of the add-on and the region where the add-on will be hosted.\nClick on the Create button and the add-on will now be available in your organization, and corresponding environment variables will be available for the applications linked to the add-on you just created.\nLink an existing add-on to your application To link an already existing add-on with your application, just follow these steps:\nGo in the organization of your application. Click on the name of the application you want to link with your add-on. Go in the Service dependencies section. Select the add-on you want to link under the \u0026ldquo;Link addons\u0026rdquo; dropdown menu. Click on the Link button of the add-on you want to link to your application. Managing your add-on Once an add-on is created, at least two management tabs are available in the Clever Cloud console:\nthe Information tab the Configuration tab Other tabs may be available, depending on the add-on type.\nInformation screen This screen sums-up the characteristics of the selected add-on. Features and environment variables (if applicable) are shown.\nExample of the information tab of an add-on Configuration screen Add-ons can be managed from the Configuration tab. This screen is managed directly by the provider of the add-on.\nExample of the configuration tab of an add-on Delete an add-on To delete an add-on:\nGo to the Configuration page of the add-on. Click on Remove add-on. Warning: After deletion of the add-on, all associated data will be removed.\n","deploy-your-code#Deploy your code":"What is an application An application is defined on Clever Cloud by the following elements:\na dedicated language/framework; a deployment method (FTP and/or Git); resources consumption (CPU, RAM, Disk‚Ä¶), depending on the language or framework used; an optional configuration file you may add to your project. If one of these elements is missing, Clever Cloud can\u0026rsquo;t deploy your application properly (except the configuration file, optional in some cases).\nSupported platforms:\nDocker Go Haskell Java (Play¬†Framework 1 \u0026amp; 2, Maven, War files‚Ä¶ ) Node.js PHP Python Ruby Rust Scala Elixir How it works When you push an application\u0026rsquo;s code to git or via FTP, the platform receives it and checks the resource‚Äôs requirements. If they are complete, the deployment is launched. When finished and successful, the application is up and running.\nThe log system retrieves all output from the application and displays it in the logs tab of your application in the Clever Cloud console.\nCreate an application In the Clever Cloud Console:\nSelect the proper organization you want to add the application to. At this point you must only have the Personal Space but you can create one. Click on the Create an application button in the Organization Manager panel. This starts the application creation wizard. If your account has been linked to GitHub, you can select a repository from your GitHub account. If you want to deploy an application within a GitHub organisation, first grant the Clever Cloud API access to it.\nSelect the language or the framework you need Optional: For PHP applications, you can choose between FTP and Git deployment. Fine-tune your scaling configuration. Horizontal scaling is the number of instances that can run at the same time. Vertical scaling sets the minimum and maximum size the instance can be. Enter the name and description of your application. Optional: The wizard will offer you to add an add-on to your application. Optional: The wizard will offer you to add environment variables to your application. Git Deployment To deploy via Git, you need it installed on your machine. You can find more information on Git website: git-scm.com\nNote: During the deployment, the .git folder is automatically deleted to avoid security problems. If you need to know which version is used on the server please use the COMMIT_ID environment variable.\nFollow these steps to deploy your application:\nGet the git deployment url in the application information page, which looks like: git+ssh://git@push.\u0026lt;zone\u0026gt;.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git.\nIn your terminal, go to your application repository. If you do not already track your app with git, start by typing:\ngit init git add . git commit -m \u0026#34;first commit\u0026#34; Then, link your local repository to Clever Cloud by providing the Git remote url: git remote add \u0026lt;remote-name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt; Push your application to Clever Cloud: git push \u0026lt;remote-name\u0026gt; \u0026lt;branch-name\u0026gt;:master ‚ö†Ô∏è You can only push to the master branch for deployment. Trying to push to another branch will trigger an error.\nYou cannot push a tag (which refers to a commit) to the remote repository. If you do so, no deployment will be triggered.\nIn order to push to master from a non-master local branch, use this syntax:\ngit push \u0026lt;remote\u0026gt; \u0026lt;your branch\u0026gt;:master You can see your application logs in the dashboard to monitor the deployment.\n‚ö†Ô∏è If the remote asks you for a password right after a git push attempt, this may be due to a SSH¬†Key misconfiguration. Add your SSH key to your profile here: https://console.clever-cloud.com/users/me/ssh-keys\nThe full tutorial about adding SSH key is here: Adding SSH keys Automated Deployment with GitHub Once you have created your application with GitHub, each push on the master branch trigger a deployment. To deploy an other branch than master, go to the information panel of your application and select the default branch to use.\nGithub deployment branch select ‚ö†Ô∏è You can't directly push to an application created on Clever Cloud as a GitHub app: in this case, only the automatic deployment from GitHub is henceforth allowed.\nIf you try to push to Clever Cloud, as you would do for a non-GitHub app, you will get the following error :\nfatal: '/data/repositories/\u0026lt;app_id\u0026gt;.git' does not appear to be a git repository Indeed, no git repository is created on Clever Cloud because the application is directly cloned from GitHub.\nIf you have to push directly to a repo in order to deploy an application (eg if you deploy from a CI), then create a non-GitHub app.\nIf you don\u0026rsquo;t find your repository in the list fetched from Github, a workaround is to unlink your account in your profile here : https://console.clever-cloud.com/users/me/information, remove Clever Cloud API from your Github Authorized OAuth Apps and link again your Github account to your Clever Cloud account.\nPrivate GitHub repositories are also supported.\nCaution: in GitHub, private repositories in an ordinary user account are an all-or-nothing deal: either someone has full read write access (i.e., they\u0026rsquo;re a collaborator) or they have no access.\nHowever, if you set up an organization, create the repo under the aegis of the organization, and then add the collaborator, you have much more fine-grained control (including giving read-only access to a private repository).\nFTP Deployment You can deploy via FTP with PHP applications.\nTo deploy via FTP, you need an FTP software installed on your machine. Filezilla is one of them.\nDeploy your application via FTP, create a FS Bucket with an ID matching your application\u0026rsquo;s ID. You will find the FTP credentials in the configuration tab of this particular FS Bucket.\nMore documentation about Filezilla.\n‚ö†Ô∏è An FTP application is automatically started once the application is created, even if no code has been sent. DisclaimerFTP deployment is ok for small websites but not for large ones. We strongly recommend you to use Git deployment for large PHP websites. Application management generalities There are many tabs available in the application\u0026rsquo;s menu:\nInformation: General information about your application Scalability: Set-up scalability options Domain names: Manage custom domain names Environment variables: Manage environment variables Service dependencies: Link add-ons and applications Exposed configuration: Manage exposed environment variables Activity: Track last deployments Logs: Visualize application\u0026rsquo;s logs Metrics: Visualize application\u0026rsquo;s metrics Consumption: Visualize your application\u0026rsquo;s consumption. "},"title":"Quickstart"},"/doc/getting-started/ssh-keys/":{"data":{"":" You need to add a SSH key to your Clever Cloud\u0026rsquo;s account to deploy via Git. SSH keys are used to establish a secure connection between your computer and Clever Cloud. A user can have multiple SSH keys.\n‚ö†Ô∏è Accounts cannot share the same SSH key.¬†A SSH key is used to identify the actions made by a user and must be associated with only one account. If a key is used by more than one account, a warning will be displayed in the console. How to add your SSH key on Clever Cloud? I don\u0026rsquo;t have any, I want to create an SSH key In your Terminal, enter the following bash line:\nssh-keygen -t ed25519 -C \u0026#34;your_email@youremail.com\u0026#34; This command creates a new ssh key using the provided email, so that the owner of the key can be identified.\nWhen prompted in which file you want to save the key, just press enter. If it says that the file already exists, enter n for no. Type ls, verify the presence of the file and jump to Add your SSH key on Clever Cloud.\nWhen asked, enter a passphrase:\nGenerating public/private ed25519 key pair. Enter file in which to save the key (/your_home_path/.ssh/id_ed25519): # Now you should enter a passphrase. Enter passphrase (empty for no passphrase): [Type a passphrase] Enter same passphrase again: [Type passphrase again] Which should give you something like this:\nYour identification has been saved in /your_home_path/.ssh/id_ed25519. Your public key has been saved in /your_home_path/.ssh/id_ed25519.pub. The key fingerprint is: 01:0e:e5:2d:ab:98:d6:17:a1:6d:f0:68:9f:d0:a2:db your_email@youremail.com I maybe have SSH keys, I want to check GitHub account and SSH key on Clever Cloud If your account is linked to GitHub, a panel with your GitHub SSH keys will appear in the \u0026ldquo;SSH Keys\u0026rdquo; tab. You can add any key already present in your GitHub account by clicking on the import button next to it.\nFind your SSH key You may already have an SSH key and so do not need to generate a new one. To check if you have one, follow these steps:\nLinux and Mac Whether you use Mac or Linux, open your Terminal application. Run cd ~/.ssh/ in your Terminal. If the folder exists, run ls and check if a pair of key exists : id_ed25519 and id_ed25519.pub. Using id_rsa and id_rsa.pub is fine too. We are just advocating the use of ed25519.\nIt is smaller to copy and way stronger than 2048-bit RSA keys.\nIf you can find them, you do not need to generate a new one, simply go to the following \u0026ldquo;Add your key on Clever Cloud\u0026rdquo; part!\nWindows If you don\u0026rsquo;t have it, download Git for Windows and install it. Run Git Bash (from the Start Menu or from the Explorer with the contextual menu (right click)). Run cd ~/.ssh/ in your Terminal. If the folder exists, run ls and check if a pair of key exists : id_ed25519 and id_ed25519.pub. Using id_rsa and id_rsa.pub is fine too. We are just advocating the use of ed25519.\nIt is smaller to copy and way stronger than 2048-bit RSA keys.\nIf you can find them, you do not need to generate a new one, simply go to the following \u0026ldquo;Add your key on Clever Cloud\u0026rdquo; part!\nSpecific SSH key for Clever Cloud If you want to use a specific key for Clever Cloud, you can set it in your SSH config by adding this:\nHost *.clever-cloud.com IdentityFile ~/.ssh/clevercloud Add your SSH key on Clever Cloud Public SSH Key To declare your public SSH Key on Clever Cloud, in the left navigation bar, go in \u0026ldquo;Profile\u0026rdquo; and in the \u0026ldquo;SSH Keys\u0026rdquo; tab.\nAdd the key by entering a name and the public SSH key. The key is the entire contents of the id_[ed25519/rsa].pub file including the id_ed25519/ssh-rsa part and your email.\n‚ö†Ô∏è Your public SSH key must be associated with only one account. If you see \u0026ldquo;access denied\u0026rdquo; or \u0026ldquo;password:\u0026rdquo; when you push on Clever Cloud, your SSH Keys may be invalid or not available on Clever Cloud. Please check that you SSH Key is present and valid in your profile.\nPrivate SSH Key If your company manages its own artifacts in a private repository (like, you can only access them via git+ssh or sftp), and you need a private key to connect to the server, you can either set it in an environment variable or commit it in your application\u0026rsquo;s Clever Cloud repository.\nThat key will be installed in ~/.ssh/ before the start of the build. So the dependency manager will use it to fetch libs only accessible by ssh.\nNB: Please provide a key without pass phrase, or the system will be unable to unlock it\nEnvironment variable Set your key as the value of the CC_SSH_PRIVATE_KEY variable. If you want it to be saved to a specific file, you can set the CC_SSH_PRIVATE_KEY_FILE variable.\nCommitted file First, you need to add the file clevercloud/ssh.json, its content is pretty straight-forward:\n{ \u0026#34;privateKeyFile\u0026#34;: \u0026#34;path/to/file\u0026#34; } The privateKeyFile field must be a path to a SSH private key. The path must be relative to the root of your repository. e.g. if your private key file is in the clevercloud folder and is named my_key, the privateKeyFile field will be \u0026quot;clevercloud/my_key\u0026quot;.\nCheck your ssh configuration To check if your ssh key is correctly configured, you can try to run:\nssh git@push.clever-cloud.com The first time, you may have to type \u0026ldquo;yes\u0026rdquo; to continue.\nIf you see:\n\u0026gt; git@push-par-clevercloud-customers.services.clever-cloud.com: Permission denied (publickey). \u0026gt; \u0026gt; fatal: Could not read from remote repository. \u0026gt; \u0026gt; Please make sure you have the correct access rights \u0026gt; and the repository exists. This error can occur when your SSH agent has not be configured to use your SSH¬†key.\nMost of the time, it is due to the presence of multiple SSH keys generated by 3rd party software, like GitHub for Mac. To fix this you will need to configure your SSH agent.\nConfigure your SSH agent You can add those lines into your ~/.ssh/config file. It tells your SSH agent which key to pick for a given hostname. Please update your Clever Cloud SSH key path accordingly.\n# config for Clever Cloud specific key (Paris zone) Host push-par-clevercloud-customers.services.clever-cloud.com Hostname push-par-clevercloud-customers.services.clever-cloud.com User git IdentityFile ~/.ssh/id_ed25519_clevercloud # config for Clever Cloud specific key (Roubaix zone) Host push-rbx-clevercloud-customers.services.clever-cloud.com Hostname push-rbx-clevercloud-customers.services.clever-cloud.com User git IdentityFile ~/.ssh/id_ed25519_clevercloud # config for Clever Cloud specific key (Warsaw zone) Host push-wsw-clevercloud-customers.services.clever-cloud.com Hostname push-wsw-clevercloud-customers.services.clever-cloud.com User git IdentityFile ~/.ssh/id_ed25519_clevercloud # config for Clever Cloud specific key (Montreal zone) Host push-mtl-clevercloud-customers.services.clever-cloud.com Hostname push-mtl-clevercloud-customers.services.clever-cloud.com User git IdentityFile ~/.ssh/id_ed25519_clevercloud # config for Clever Cloud specific key (Singapore zone) Host push-sgp-clevercloud-customers.services.clever-cloud.com Hostname push-sgp-clevercloud-customers.services.clever-cloud.com User git IdentityFile ~/.ssh/id_ed25519_clevercloud # config for Clever Cloud specific key (Sydney zone) Host push-syd-clevercloud-customers.services.clever-cloud.com Hostname push-syd-clevercloud-customers.services.clever-cloud.com User git IdentityFile ~/.ssh/id_ed25519_clevercloud Need help about SSH keys?\nContact us at support@clever-cloud.com or you can read more about SSH Keys.\n"},"title":"SSH Keys"},"/doc/quickstart/":{"data":{"":"","choose-how-to-deploy#Choose how to deploy":" üå± Deploy with Git Step by Step To deploy via Git, you need it installed on your machine. You can find more information on Git website: git-scm.com\nNote: During the deployment, the .git folder is automatically deleted to avoid security problems. If you need to know which version is used on the server please use the COMMIT_ID environment variable.\nFollow these steps to deploy your application:\nGet the git deployment url in the application information page, which looks like: git+ssh://git@push.\u0026lt;zone\u0026gt;.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git.\nIn your terminal, go to your application repository. If you do not already track your app with git, start by typing:\ngit init git add . git commit -m \u0026#34;first commit\u0026#34; Then, link your local repository to Clever Cloud by providing the Git remote url: git remote add \u0026lt;remote-name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt; Push your application to Clever Cloud: git push \u0026lt;remote-name\u0026gt; \u0026lt;branch-name\u0026gt;:master You can see your application logs in the dashboard to monitor the deployment.\nDeploy automatically from GitHub Once you have created your application with GitHub, each push on the master branch trigger a deployment. To deploy an other branch than master, go to the information panel of your application and select the default branch to use.\nGithub deployment branch select If you don\u0026rsquo;t find your repository in the list fetched from Github, a workaround is to unlink your account in your profile here : https://console.clever-cloud.com/users/me/information, remove Clever Cloud API from your Github Authorized OAuth Apps and link again your Github account to your Clever Cloud account.\nPrivate GitHub repositories are also supported.\nCaution: in GitHub, private repositories in an ordinary user account are an all-or-nothing deal: either someone has full read write access (i.e., they\u0026rsquo;re a collaborator) or they have no access.\nHowever, if you set up an organization, create the repo under the aegis of the organization, and then add the collaborator, you have much more fine-grained control (including giving read-only access to a private repository).\nüìÇ FTP Deployment You can deploy via FTP with PHP applications.\nTo deploy via FTP, you need an FTP software installed on your machine. Filezilla is one of them.\nDeploy your application via FTP, create a FS Bucket with an ID matching your application\u0026rsquo;s ID. You will find the FTP credentials in the configuration tab of this particular FS Bucket.\nMore documentation about Filezilla.\nAn FTP application is automatically started once the application is created, even if no code has been sent.\n‚ö†Ô∏è FTP deployment is ok for small websites but not for large ones. We strongly recommend you to use Git deployment for large PHP websites. Troubleshooting Deployments Git Remote is asking for a password If the remote asks you for a password right after a git push attempt, this may be due to a SSH¬†Key misconfiguration.\nAdd your SSH key to your profile here:\nhttps://console.clever-cloud.com/users/me/ssh-keys\"\u003ehttps://console.clever-cloud.com/users/me/ssh-keys\nThe full tutorial about adding SSH key is here: Adding SSH keys\nGit is unable to resolve the reference master You are probably trying to push from another branch. Remeber that:\nYou can only push to the master branch for deployment. Trying to push to another branch will trigger an error. You cannot push a tag (which refers to a commit) to the remote repository. If you do so, no deployment will be triggered. In order to push to master from a non-master local branch, use this syntax: git push \u0026lt;remote-name\u0026gt; \u0026lt;branch-name\u0026gt;:master GitHub Does not appear to be a git repository You can\u0026rsquo;t directly push to an application created on Clever Cloud as a GitHub app: in this case, only the automatic deployment from GitHub is henceforth allowed.\nIf you try to push to Clever Cloud, as you would do for a non-GitHub app, you will get the following error :\nfatal: \u0026#39;/data/repositories/\u0026lt;app_id\u0026gt;.git\u0026#39; does not appear to be a git repository Indeed, no git repository is created on Clever Cloud because the application is directly cloned from GitHub.\nIf you have to push directly to a repo in order to deploy an application (eg if you deploy from a CI), then create a non-GitHub app.\n","create-a-clever-cloud-account#Create a Clever Cloud Account":" üîë Choose Your Authentication Method The API of Clever Cloud uses OAuth 1 to perform authentication actions. There are two ways to signup to Clever Cloud: email or GitHub login.\nGo to the Clever Cloud Console and select the method you prefer.\n@ Email Authentication This kind of auth requires a valid and non-temporary disposable e-mail, and a password having at least 6 characters. Do not forget to validate your email by clicking the link you will receive.\nGitHub Authentication The GitHub signup allows you to create an account or link your existing one to GitHub, in one click. This process asks the following permissions:¬†Read your Public Key Read User Repositories The \u0026ldquo;repository permission\u0026rdquo; is used to deploy your GitHub apps directly to Clever Cloud, with a simple step.\nIf you need to give access to Clever Cloud\u0026rsquo;s API to a specific GitHub organization, you can do it here.\nüîê Two Factor Authentication (2FA) Clever Cloud supports 2FA. You can enable it here: https://console.clever-cloud.com/users/me/authentication\nPlease, backup your recovery codes, we won\u0026rsquo;t be able to restore access to your account if you lose access to your regular codes.\n","create-an-application-step-by-step#Create an application step by step":"In the Clever Cloud Console:\nSelect the proper organization you want to add the application to At this point you must only have the Personal Space but you can create one.\nClick on the \u0026ldquo;Create an application\u0026rdquo; button Find it in the Organization Manager panel.\nThis starts the application creation wizard. If your account has been linked to GitHub, you can select a repository from your GitHub account.\nIf you want to deploy an application within a GitHub organisation, first grant the Clever Cloud API access to it.\nSelect the language or the framework you need üí° Optional: For PHP applications, you can choose between FTP and Git deployment.\nFine-tune your scaling configuration Horizontal scaling is the number of instances that can run at the same time. Vertical scaling sets the minimum and maximum size the instance can be.\nEnter the name and description of your application. Optional steps The wizard will offer you to add an add-on to your application\nThe wizard will offer you to add environment variables to your application\n","deploy-your-code#Deploy your code":" üéì What\u0026rsquo;s an Application on Clever Cloud An application is defined on Clever Cloud by the following elements:\na dedicated language/framework; a deployment method (FTP and/or Git); resources consumption (CPU, RAM, Disk‚Ä¶), depending on the language or framework used; an optional configuration file you may add to your project. If one of these elements is missing, Clever Cloud can\u0026rsquo;t deploy your application properly (except the configuration file, optional in some cases).\nSupported platforms: Docker Go Haskell Java Node.js Ruby PHP Python Rust Scala Elixir .NET üìç How it works When you push an application\u0026rsquo;s code to git or via FTP, the platform receives it and checks the resource‚Äôs requirements. If they are complete, the deployment is launched. When finished and successful, the application is up and running.\nThe log system retrieves all output from the application and displays it in the logs tab of your application in the Clever Cloud console.\n","manage-your-stack#Manage your stack":" üåê Manage your Application from the Dashboard There are many tabs available in the application\u0026rsquo;s menu:\nInformation: General information about your application Scalability: Set-up scalability options Domain names: Manage custom domain names Environment variables: Manage environment variables Service dependencies: Link add-ons and applications Exposed configuration: Manage exposed environment variables Activity: Track last deployments Logs: Visualize application\u0026rsquo;s logs Metrics: Visualize application\u0026rsquo;s metrics Consumption: Visualize your application\u0026rsquo;s consumption. üîå Create your first add-on Applications often requires one or more services in addition to the runtime itself. Add-ons are services you can use independently, or you can link them with your application(s). For instance, you may want to add a database or a caching system to your application or just have a database with no linked application.\nAn add-on can be shared by different applications to share data between them. It can be a database shared by two or three applications of your infrastructure for example, or they can be independent.\nMost of the add-ons catalog is provided by Clever Cloud, but vendors are also allowed to provide services external to Clever Cloud (See how to integrate your SaaS with Clever Cloud)\nAvailable add-ons Clever Cloud provides multiple add-ons to work with your applications:\nMySQL PostgreSQL MongDBThe NoSQL document-oriented database FS BucketExternal File System for your apps CellarObject storage RedisIn-memory database Config ProviderMore freedom to manage, import and inject your credentials üí∞ Add-on Billing There are two kinds of billing:\nPer-month billing: Add-ons with fixed resources (storage, CPU and RAM) Per-usage billing: Add-ons based on consumption, like FS Bucket and Cellar ‚ö†Ô∏è Add-ons having a free plan are meant for testing purposes. They are for not production usage. These add-ons usually rely on shared resources, resulting in variable, non-guaranteed performances and stability.\nShared clusters may not be running the same version as dedicated instances.\nüìä Note: Per usage billing will be taken on runtime credits each day, while per-month add-ons will create a new line in the monthly invoice. ü™Ñ Create an add-on for an existing application Here we will assume you want to create a new add-on and link it to your application.\nGo to the Clever Cloud Console. Go to the organization in which you want to create the add-on, for example your personal space. Click on Add an add-on. This space let you create and configure the add-on according to your needs. Choose which type of add-on you want to create. See above the list of available add-ons and their corresponding documentation pages for further information on how they work. Select the plan you need for you add-on. You can find details about the pricing, the capacity of the add-on and other specifications on this page or in the corresponding documentation page. Choose with which application you want to link you add-on. Linking an add-on to an application will provide configuration to the application through environment variables. The environment variables provided by the add-on are available for use in the linked application. If you want to use your add-on alone, just don\u0026rsquo;t link it to any application. Choose the name of the add-on and the region where the add-on will be hosted. Click on the Create button. The add-on will now be available in your organization, and corresponding environment variables will be available for the applications linked to the add-on you just created.\nüîó Link an existing add-on to your application To link an already existing add-on with your application, just follow these steps:\nGo in the organization of your application. Click on the name of the application you want to link with your add-on. Go in the Service dependencies section. Select the add-on you want to link under the \u0026ldquo;Link addons\u0026rdquo; dropdown menu. Click on the Link button of the add-on you want to link to your application. ‚öôÔ∏è Managing your add-on Once an add-on is created, at least two management tabs are available in the Clever Cloud console:\nthe Information tab the Configuration tab Other tabs may be available, depending on the add-on type.\nInformation screen This screen sums-up the characteristics of the selected add-on. Features and environment variables (if applicable) are shown.\nExample of the information tab of an add-on Configuration screen Add-ons can be managed from the Configuration tab. This screen is managed directly by the provider of the add-on.\nExample of the configuration tab of an add-on Delete an add-on To delete an add-on:\nGo to the Configuration page of the add-on. Click on Remove add-on. ‚ö†Ô∏è Warning: After deletion of the add-on, all associated data will be removed.\n"},"title":"Quickstart"},"/doc/reference/clever-tools/configure/":{"data":{"":"","inspect-the-current-configuration#Inspect the current configuration":"clever config will list you all available configuration for your application.\n$ clever config Name: phpinfo Description: phpinfo Zero-downtime deployment: enabled Sticky sessions: disabled Cancel current deployment on push: disabled Force redirection of HTTP to HTTPS: disabled You can also get a single configuration using clever config get {name}\n$ clever config get cancel-on-push Cancel current deployment on push: disabled ","update-your-configuration#Update your configuration":"You can update a single configuration using clever config set {name} {value}\n$ clever config set sticky-sessions true Sticky sessions: enabled You can also update all of the configuration at once using clever config update [options]\n$ clever config update --description=\u0026#34;Displays phpinfo()\u0026#34; --disable-sticky-sessions --enable-force-https Description: Displays phpinfo() Sticky sessions: disabled Force redirection of HTTP to HTTPS: enabled "},"title":"Application configuration with Clever Tools"},"/doc/reference/clever-tools/create/":{"data":{"":"","addon-creation-process#Addon creation process":"Using clever addon, you can add, rename or delete addon and list available addon providers\n# List existing addons clever addon Creating an addon First, list addon providers and then create your addon.\n# List addon providers clever addon providers # Create your addon and link it to your application with --link \u0026lt;app-alias\u0026gt; clever addon create \u0026lt;provider-name\u0026gt; \u0026lt;addon-name\u0026gt; --link \u0026lt;app-alias\u0026gt; # Create an addon for an organization clever addon create \u0026lt;provider-name\u0026gt; \u0026lt;addon-name\u0026gt; --link \u0026lt;app-alias\u0026gt; --org \u0026lt;org-name\u0026gt; Choosing provider\u0026rsquo;s plan and region You can choose your addon\u0026rsquo;s plan when you create it using --plan \u0026lt;plan-name\u0026gt;. The plan is by default \u0026lsquo;dev\u0026rsquo;. With the flag \u0026ldquo;\u0026ndash;yes\u0026rdquo; you can skip confirmation even if the addon is not free. You can also select the region that will provision the addon in.\n# Show more informations about a provider(plans and available regions) clever addon providers show \u0026lt;provider-name\u0026gt; # Create your addon clever addon create \u0026lt;provider-name\u0026gt; --plan \u0026lt;plan\u0026gt; --region \u0026lt;region-name\u0026gt; \u0026lt;addon-name\u0026gt; Rename or delete an addon Use addon rename and addon delete to respectively rename and delete an addon. If you don\u0026rsquo;t want any confirmation, use --yes.\n# Rename an addon clever addon rename \u0026lt;addon-name\u0026gt; \u0026lt;new-name\u0026gt; # Delete an addon clever addon delete \u0026lt;addon-name\u0026gt; ","apps-creation-process#Apps creation process":"Apps creation process clever create allows you to create a new application.\nFirst of all, select the type of your application in the list below :\ndocker (Docker) go (Go) gradle (Java or Groovy + Gradle) jar (Java + JAR) maven (Java + Maven) node (Node) php (PHP) play1 (Java + Play! 1) play2 (Java or Scala + Play! 2) python (Python) ruby (Ruby) rust (Rust) sbt (Scala + SBT) static-apache (Static) war (Java + WAR) Then, in order to create your app in your personal space, use :\nclever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; # Create an application for an organization clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --org \u0026lt;org\u0026gt; # Choose the region of your application (par, rbx, wsw, mtl, sgp, syd or jed) clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; Alias You might want to use an alias instead of the complete name.\nclever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --alias \u0026lt;alias\u0026gt; When you want to make reference to this application using an other command, use --alias ALIAS instead of the name.\nGitHub When creating your application, you can link it to GitHub for deployments.\n# Link an application to GitHub clever create --GitHub \u0026lt;owner\u0026gt;/\u0026lt;repository\u0026gt; ","dependencies#Dependencies":"Link an application or an addon You can make dependencies using clever service link\n# Link an application clever service link-app \u0026lt;app-name\u0026gt; # Link an addon clever service link-addon \u0026lt;addon-name\u0026gt; You can unlink dependency using unlink-app and unlink-addon\n","exposed-configuration#Exposed configuration":"Clever-tools allows you to get and update the exposed configuration of your application that allows dependencies to get informations about your application.\nGet the whole configuration Simply use the commmand down below to get all your variables.\nclever published-config Update a variable Use set to add or update a variable and rm to remove one.\n# Add or update a variable clever published-config set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; # Remove a variable clever published-config rm \u0026lt;variable-name\u0026gt; Import a configuration Clever-tools allows you to load a configuration from STDIN.\ncat \u0026lt;configuration\u0026gt; | clever published-config import "},"title":"Application creation with Clever Tools"},"/doc/reference/clever-tools/getting_started/":{"data":{"":"In addition to the Clever Cloud console, you can manage your addons and applications from the command line with Clever Tools.","deploying-new-code#Deploying new code":"After having written new code, you can deploy it to Clever Cloud\n# Will git push your code to Clever Cloud and display logs clever deploy # Will open your application clever open ","enabling-autocompletion#Enabling autocompletion":"The clever-tools CLI comes with a comprehensive auto-completion system. Some installation methods like .deb packages, .rpm packages or brew will try to enable it automatically. If it does not work, try this for bash:\nclever --bash-autocomplete-script $(which clever) | sudo tee /usr/share/bash-completion/completions/clever or this for zsh:\nclever --zsh-autocomplete-script $(which clever) | sudo tee /usr/share/zsh/site-functions ","installing-clever-tools#Installing Clever Tools":"The clever-tools CLI can be installed through many different channels depending on your system setup.\nVia npm If you already have node/npm on your system, you can run:\nnpm install -g clever-tools If you want to install our latest beta release, you can run:\nnpm install -g clever-tools@beta On GNU/Linux Debian/Ubuntu (.deb) ‚ö†Ô∏è We recently moved from Bintray to a self-hosted Nexus repository available at https://nexus.clever-cloud.com.\nIf you were using Bintray to install our .deb packages, you will need to edit your /etc/apt/sources.list and remove the old entry with https://dl.bintray.com/clevercloud/deb before going further.\nIf you are using a GNU/Linux distribution that uses .deb packages like Debian or Ubuntu, you can run:\ncurl -fsSL https://clever-tools.clever-cloud.com/gpg/cc-nexus-deb.public.gpg.key | gpg --dearmor -o /usr/share/keyrings/cc-nexus-deb.gpg echo \u0026#34;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/cc-nexus-deb.gpg] https://nexus.clever-cloud.com/repository/deb stable main\u0026#34; | tee -a /etc/apt/sources.list apt-get update apt-get install clever-tools NOTES:\nThe .deb packages are hosted on Clever Cloud\u0026rsquo;s public Nexus instance available at https://nexus.clever-cloud.com. Our PGP key is required to trust the repository. If you want access to the beta channel, you can use this in your sources.list: echo \u0026#34;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/cc-nexus-deb.gpg] https://nexus.clever-cloud.com/repository/deb-beta beta main\u0026#34; | tee -a /etc/apt/sources.list CentOS/Fedora (.rpm) ‚ö†Ô∏è We recently moved from Bintray to a self-hosted Nexus repository available at https://nexus.clever-cloud.com.\nIf you were using Bintray to install our .rpm packages, you will need to remove the old /etc/yum.repos.d/bintray-clevercloud-rpm.repo before going further.\nIf you are using a GNU/Linux distribution that uses .rpm packages like CentOS or Fedora, you can run:\ncurl -s https://clever-tools.clever-cloud.com/repos/cc-nexus-rpm.repo \u0026gt; /etc/yum.repos.d/cc-nexus-rpm.repo yum update yum install clever-tools NOTES:\nThe .rpm packages are hosted on Clever Cloud\u0026rsquo;s public Nexus instance available at https://nexus.clever-cloud.com. If you want access to the beta channel, you will need to edit /etc/yum.repos.d/cc-nexus-rpm.repo and set enabled=1 for the [clever-tools-beta]. Arch Linux If you are using Arch Linux, the packages can be installed from AUR with this repo: clever-tools-bin. If you don\u0026rsquo;t know how to use this, you can run:\ngit clone https://aur.archlinux.org/clever-tools-bin.git clever-tools cd clever-tools makepkg -si NOTES:\nIf you want access to the beta channel, you can use this repo clever-tools-bin-beta. Exherbo If you are using Exherbo, you can run:\ncave resolve repository/CleverCloud -zx1 cave resolve clever-tools-bin -zx Other distributions (.tar.gz) If you are using another GNU/Linux distribution, you can download a .tar.gz archive and extract the binary in your PATH:\ncurl -O https://clever-tools.clever-cloud.com/releases/latest/clever-tools-latest_linux.tar.gz tar xvzf clever-tools-latest_linux.tar.gz cp clever-tools-latest_linux/clever ~/.local/bin/ NOTES:\nThe packages are available on Clever Cloud\u0026rsquo;s Cellar bucket: clever-tools-latest_linux.tar.gz. You can also retrieve any release (including beta) on this Cellar bucket by replacing latest (path and filename) with the version number you need. On macOS Using homebrew If you are using macOS and you have homebrew installed, you can run:\nbrew install CleverCloud/homebrew-tap/clever-tools NOTES:\nIf you want access to the beta channel, you can use CleverCloud/homebrew-tap-beta/clever-tools instead. Using the .tar.gz archive If you are using macOS, but you don\u0026rsquo;t have homebrew installed, you can download a .tar.gz archive and extract the binary in your PATH:\ncurl -O https://clever-tools.clever-cloud.com/releases/latest/clever-tools-latest_macos.tar.gz tar xvzf clever-tools-latest_macos.tar.gz cp clever-tools-latest_macos/clever ~/.local/bin/ NOTES:\nThe packages are available on Clever Cloud\u0026rsquo;s Cellar bucket: clever-tools-latest_macos.tar.gz. You can also retrieve any release (including beta) on this Cellar bucket by replacing latest (path and filename) with the version number you need. On Windows Using chocolatey ‚ö†Ô∏è We recently moved from Bintray to a self-hosted Nexus repository available at https://nexus.clever-cloud.com.\nIf you were using Bintray to install our .nupkg packages, you will need to remove the old source.\nIf you are using Windows and you have chocolatey installed, you can run:\nchoco sources add -n=clevercloud -s=\u0026#39;https://nexus.clever-cloud.com/repository/nupkg/\u0026#39; choco install clever-tools NOTES:\nIf you want access to the beta channel, you can use choco sources add -n=clevercloud -s='https://nexus.clever-cloud.com/repository/nupkg-beta/' instead. Using the .zip archive If you are using Windows, but you don\u0026rsquo;t have chocolatey installed, you can download a .zip archive and extract the binary in your PATH.\nNOTES:\nThe packages are available on Clever Cloud\u0026rsquo;s Cellar bucket: clever-tools-latest_win.tar.gz. You can also retrieve any release (including beta) on this Cellar bucket by replacing latest (path and filename) with the version number you need. Via Docker If you are using docker, you can use the image provided here.\ndocker pull clevercloud/clever-tools docker run --rm clever-tools \u0026lt;command\u0026gt; Dockerfile In your Dockerfile you can copy the clever-tools CLI from the image itself with a simple one liner:\nCOPY --from=clevercloud/clever-tools /bin/clever /usr/local/bin/clever Via Nix If you are using Nix, you will find a Nix derivation on Fretlink\u0026rsquo;s GitHub repository: https://github.com/fretlink/clever-tools-nix\n","linking-an-existing-application#Linking an existing application":"If you have an already existing application, you can start managing it with Clever Tools.\n# First, go to your local repository cd /path/to/your/application # Then, link it to the Clever Cloud application clever link \u0026lt;app_id\u0026gt; # You can also use the application name (make sure to specify the # organization name if your application is in an organization. clever link --org \u0026lt;org_name\u0026gt; \u0026lt;app_name\u0026gt; # Unlink an application clever unlink \u0026lt;app_id\u0026gt; ‚ÑπÔ∏è Once you have linked an application, clever-tools will create a Json configuration file named `.clever.json` at the root of the directory.\nThis file can be commited safely, others team members working on this repository will not have to link the application again.\nThis configuration file contains the AppID, so keep this in mind if you publish it on a public repository.\n","linking-your-account#Linking your account":"To use clever-tools, you have to login.\nclever login It will open the Web console in your browser and reuse your existing session if you\u0026rsquo;re already logged in.\nclever login tries to open a browser through xdg-open on GNU/Linux systems (and in bash for windows). Make sure you have xdg-utils available as well as a default browser set (or you can copy and paste the URL displayed in the console.\n"},"title":"Getting started with Clever Cloud CLI"},"/doc/reference/clever-tools/lifecycle/":{"data":{"":"","activity-of-your-application#Activity of your application":"clever-tools can show you the activity of an application. For each deployment, you get :\ndate and time of deployment status (OK or FAIL) action (DEPLOY or UNDEPLOY) commit ID tool used to deploy (Git/Console/clever-tools/\u0026hellip;) In order to show those informations, use :\n# Show the last 10 deployments clever activity # Show all deployments clever activity --show-all # Show deployments and track new ones clever activity --follow ","listing-linked-applications#Listing linked applications":"You can list your linked applications with clever applications. For each application, the command shows you the alias, the id and the deployment url.\n# List linked applications clever applications # List only application aliases clever applications --only-aliases ","status-of-your-application#Status of your application":"Status of your application Clever-tools can show you the status of an application on Clever Cloud using clever status. This command shows you if the application is running or stopped and informations about the scalability of your application."},"title":"Informations about your application lifecycle"},"/doc/reference/clever-tools/manage/":{"data":{"":"","deploy-a-new-commit#Deploy a new commit":"Use clever deploy to push your commits, which then starts a deployment","domains#Domains":"List your domains If you want to list your domain, use :\nclever domain Add or remove domains Using clever domain, you can add or remove domain names.\n# Add a domain clever domain add \u0026lt;domain-name\u0026gt; # Remove a domain clever domain remove \u0026lt;domain-name\u0026gt; ","environment#Environment":"Clever-tools allows you to get and update the environment of your application.\nGet the whole environment Simply use the command down below to get all your variables.\nclever env Update an environment variable Use set to add or update an environment variable and rm to remove one.\n# Add or update an environment variable clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; # Remove an environment variable clever env rm \u0026lt;variable-name\u0026gt; Load environment variables Clever-tools allows you to load variables from STDIN.\ncat \u0026lt;env-file\u0026gt; | clever env import ","scalability#Scalability":"Flavors You can choose the scale of your application using --flavor \u0026lt;flavor\u0026gt; where \u0026lt;flavor\u0026gt; can be pico, nano, XS, S, M, L or XL.\n# Change the scale of your application clever scale --flavor \u0026lt;flavor\u0026gt; # Set the minimum and maximum scale for your application clever scale --min-flavor \u0026lt;min-flavor\u0026gt; --max-flavor \u0026lt;max-flavor\u0026gt; Instances You can choose the number of parallels instances using --instances \u0026lt;instances\u0026gt; where \u0026lt;instance\u0026gt; is a number between 1 and 20.\n# Change the number of parallels instances clever scale --instances \u0026lt;instances\u0026gt; # Set the minimum and maximum number of parallels instances clever scale --min-instances \u0026lt;min-instances\u0026gt; --max-instances \u0026lt;max-instances\u0026gt; ","stop-or-restart-your-application#Stop or restart your application":"clever stop \u0026lt;app-name\u0026gt; allows you to stop your application. If you want to restart your application, you can use :\nclever restart \u0026lt;app-name\u0026gt; # Restart the application with a specific commit id clever restart \u0026lt;app-name\u0026gt; --commit \u0026lt;commit-id\u0026gt; You can use --quiet when you restart, logs won\u0026rsquo;t appear during deployment.\n"},"title":"Manage your application"},"/doc/reference/clever-tools/notifications/":{"data":{"":"The Notifications service allows you to choose the events of interest to you and decide where to send corresponding notifications.","e-mails#E-mails":"Historically and by default, deployment result e-mails (deployment succeeded or failed) were always sent to the owners of an application, namely the user themselves or the organization\u0026rsquo;s members.\nUsing the notify-email command of clever-tools, you can choose to disable this or to restrict it to only some applications.\nTo do this, you need to delete the hook named Default deployment result e-mails, then add a new one and set it to your liking.\nIssue this command to learn more about this: clever help notify-email.\nIn the future, this service will also handle credits warning notifications and others to come. You will be able to choose wether or not to receive an e-mail and/or for these events to be forwarded to a web service via a webhook.\n","webhooks#Webhooks":"From Wikipedia:\nA webhook in web development is a method of augmenting or altering the behavior of a web page, or web application, with custom callbacks. These callbacks may be maintained, modified, and managed by third-party users and developers who may not necessarily be affiliated with the originating website or application.\nIn practical terms, this means that you can choose to receive all deployment result events on an endpoint of your application without having to listen to all events via the Websocket API. No more lost events and having to reconnect to the websocket if and when it fails.\nclever-tools has a webhooks command which allows you to list existing webhooks, remove one or add a new one.\nYou can issue this command to learn more about it: clever help webhooks.\nExample: Slack deployment results Webhook First, you will have to create the Incoming WebHooks integration on Slack:\nLet\u0026rsquo;s go to the custom integrations page, once there go to Incoming WebHooks.\nYou will find an Add Configuration button on the left which will take you to the page where you need to configure the integration. You just need to select the channel where you want the notifications to be posted, then it will show you the Webhook URL, it starts with https://hooks.slack.com/services/. Copy that URL.\nNow, let\u0026rsquo;s create the Webhook!\nGo into the application directory for which you want to receive notifications and there issue this command:\nclever webhooks add \u0026#34;deployment results on Slack\u0026#34; https://hooks.slack.com/services/xxxxxx/yyyyyy/zzzzzzzzzzzzz --format slack --event META_DEPLOYMENT_RESULT Events available The list of values that can be assigned to --event option:\nAccount:\nACCOUNT_CREATION ACCOUNT_DELETION ACCOUNT_EDITION Addon:\nADDON_CREATION ADDON_DELETION Application:\nAPPLICATION_CREATION APPLICATION_DELETION APPLICATION_EDITION APPLICATION_REDEPLOY APPLICATION_STOP Deployment:\nDEPLOYMENT_ACTION_BEGIN DEPLOYMENT_ACTION_END DEPLOYMENT_FAIL DEPLOYMENT_SUCCESS GIT_PUSH Organisation:\nORGANISATION_CREATION ORGANISATION_DELETION ORGANISATION_EDITION ORGANISATION_USER_ADDITION Meta:\nMETA_SERVICE_LIFECYCLE = APPLICATION_STOP, DEPLOYMENT_ACTION_BEGIN, DEPLOYMENT_FAIL, DEPLOYMENT_SUCCESS META_DEPLOYMENT_RESULT = DEPLOYMENT_FAIL, DEPLOYMENT_SUCCESS META_SERVICE_MANAGEMENT = ADDON_CREATION, ADDON_DELETION APPLICATION_CREATION, APPLICATION_EDITION, APPLICATION_DELETION` META_CREDITS = CREDITS_ADDED Others:\nCLEVER_TOOLS_REQUEST CREDITS_ADDED Examples: Get a message in a Slack channel when the deployment for an application failed:\nclever webhooks add \u0026#34;The application failed to deploy\u0026#34; https://hooks.slack.com/services/xxxxxx/ --format slack --event DEPLOYMENT_FAIL Notify your accounting service when credits are added:\nclever webhooks add \u0026#34;credits added\u0026#34; https://hooks.slack.com/services/xxxxxx/yyyyyy/zzzzzzzzzzzzz --format raw --event META_CREDITS All done! You can now push your application (clever deploy) or restart it (clever restart) and you will see the result of the deployment in your Slack channel.\n"},"title":"Notifications management with Clever Tools"},"/doc/reference/clever-tools/ssh-access/":{"data":{"":"","access-your-applications-folder#Access your application\u0026rsquo;s folder":"","accessing-your-machine-with-clever-tools-cli#Accessing your machine with Clever Tools CLI":"","requirements#Requirements":"","show-your-applications-logs#Show your application\u0026rsquo;s logs":"While direct SSH access to instances is not recommended in an immutable infrastructure setup, it can be useful for debugging purposes. Clever Cloud allows you to connect to running instances via SSH.\n‚ö†Ô∏è \u0026lt;p\u0026gt; Clever Cloud instances are to be seen as \u0026lt;i\u0026gt;read-only\u0026lt;/i\u0026gt; resources. Any change made on an instance \u0026lt;b\u0026gt;will not be persisted\u0026lt;/b\u0026gt;. You can use SSH access for quick tests, but if you want to persist changes, you need to commit them in your repository. Changes made on instances are not kept across deployments. \u0026lt;/p\u0026gt; ‚ö†Ô∏è \u0026lt;p\u0026gt; SSH on docker instances will attach to the running container. You must have `/bin/bash` installed (usually from the `bash` package) otherwise attaching to the container will fail. \u0026lt;/p\u0026gt; Requirements You need to have the Clever Tools CLI installed locally.\nMake sure you have a properly configured SSH key To use SSH access, you need to have an SSH key properly configured in your Clever Cloud account. Please refer to the SSH keys section of the documentation to know how to set up your SSH keys.\nAccessing your machine with Clever Tools CLI In order to access the machine via SSH using the Clever Tools CLI\nyou need to have an application running on Clever Cloud and have linked it with your local repository using the Clever Tools CLI with clever link --org \u0026lt;your_application's_organization_id\u0026gt; \u0026lt;your_application_id\u0026gt;\nAccessing your machine You can access running instances of a linked application with $ clever ssh in the linked application\u0026rsquo;s repository locally.\n$ clever ssh \u0026gt; Opening an ssh shell \u0026gt; bas@67fbf787-3518-47bb-abd9-2c2575844edd ~ $ If multiple instances are running, you will be asked which one to use:\n$ clever ssh \u0026gt; 1) Sleepy Ponita - Instance 0 - UP (11281f38-31ff-43a7-8595-a2d82630c32b) \u0026gt; 2) Tense Caterpie - Instance 1 - UP (b10d19d9-5238-408b-b038-3e32c7a301c2) \u0026gt; Your choice: 1 \u0026gt; Opening an ssh shell \u0026gt; bas@11281f38-31ff-43a7-8595-a2d82630c32b ~ $ You are now connected to the machine.\nNote for Windows users $ clever ssh command will fail on PowerShell or cmd.exe if there is no ssh.exe in your path. The most straightforward solution is to start $ clever ssh from git-bash but you can also add ssh.exe in your path..\nAccess your application\u0026rsquo;s folder No matter wich way you\u0026rsquo;ve decided to use to SSH to the machine, your application\u0026rsquo;s folder is located at: /home/bas/\u0026lt;app_id\u0026gt;.\nShow your application\u0026rsquo;s logs If you want to show your application\u0026rsquo;s logs while you debug:\njournalctl -efa -u bas-deploy.service You can also use journalctl with other options if you need to.\n"},"title":"SSH access with Clever Tools"},"/doc/reference/common-configuration/":{"data":{"":"Each instance type (php,java,python,go,ruby‚Ä¶) has its own configuration. However, some of\nthese configuration items can be applied to any instance.","hooks#Hooks":"You can run specific tasks during the deployment of your application.\nPlease refer to the hooks documentation to learn more about them.\n","private-ssh-key#Private SSH Key":"If your company manages its own artifacts in a private repository (like, you can only access them via git+ssh or sftp), and you need a private key to connect to the server, you can either set it in an environment variable or commit it in your application\u0026rsquo;s Clever Cloud repository.\nThat key will be installed in ~/.ssh/ before the start of the build. So the dependency manager will use it to fetch libs only accessible by ssh.\nNB: Please provide a key without pass phrase, or the system will be unable to unlock it\nEnvironment variable Set your key as the value of the CC_SSH_PRIVATE_KEY variable. If you want it to be saved to a specific file, you can set the CC_SSH_PRIVATE_KEY_FILE variable.\nCommitted file First, you need to add the file clevercloud/ssh.json, its content is pretty straight-forward:\n{ \u0026#34;privateKeyFile\u0026#34;: \u0026#34;path/to/file\u0026#34; } The privateKeyFile field must be a path to an SSH private key. The path must be relative to the root of your repository.\nFor example, if your private key file is in the clevercloud folder and is named my_key, the privateKeyFile field will be \u0026quot;clevercloud/my_key\u0026quot;.\n","workers#Workers":"You can run background tasks running in parallel of your application.\nPlease refer to the workers documentation to learn more about them.\n"},"title":"Configuration items available on every instance type"},"/doc/reference/lexic/":{"data":{"":"All terms available in this Lexic can be linked anywhere in the documentation thanks to the tooltip shortcode. iaas Infrastructure as a Service paas Platform as a Service "},"title":"Lexic"},"/doc/reference/reference-environment-variables/":{"data":{"":"","addons-related-environment-variable#Addons-related environment variable":"FS Bucket FS Bucket Documentation\nName Description Default value Read Only BUCKET_HOST Hostname of the bucket X CC_FS_BUCKET Defines which bucket to mount on which path MongoDB MongoDB Documentation\nName Description Default value Read Only MONGODB_ADDON_HOST Generated upon creation X MONGODB_ADDON_PORT Generated upon creation X MONGODB_ADDON_DIRECT_HOST Points directly to the VM, bypassing reverse proxies Generated on demand via the dashboard X MONGODB_ADDON_DIRECT_PORT Points to ectly to the VM, bypassing reverse proxies Generated on demand via the dashboard X MONGODB_ADDON_DB Generated upon creation X MONGODB_ADDON_PASSWORD Generated upon creation X MONGODB_ADDON_USER Generated upon creation X MySQL MySQL Documentation\nName Description Default value Read Only MYSQL_ADDON_HOST Generated upon creation X MYSQL_ADDON_PORT Generated upon creation X MYSQL_ADDON_DIRECT_HOST Points directly to the VM, bypassing reverse proxies Generated on demand via the dashboard X MYSQL_ADDON_DIRECT_PORT Points to ectly to the VM, bypassing reverse proxies Generated on demand via the dashboard X MYSQL_ADDON_DB Generated upon creation X MYSQL_ADDON_PASSWORD Generated upon creation X MYSQL_ADDON_ROLE Generated upon creation X MYSQL_ADDON_USER Generated upon creation X ProxySQL ProxySQL Documentation\nName Description Default value Read Only CC_ENABLE_MYSQL_PROXYSQL Enable the ProxySQL feature false CC_MYSQL_PROXYSQL_MAX_CONNECTIONS Defines the maximum number of connections the local ProxySQL will open to your MySQL add-on 10 CC_MYSQL_PROXYSQL_USE_TLS Enable or disable secured connection using TLS to your MySQL add-on true CC_MYSQL_PROXYSQL_SOCKET_PATH Contains the path to the Unix Datagram Socket to connect to ProxySQL true PostgreSQL PostgreSQL Documentation\nName Description Default value Read Only POSTGRESQL_ADDON_HOST Generated upon creation X POSTGRESQL_ADDON_PORT Generated upon creation X POSTGRESQL_ADDON_DIRECT_HOST Points directly to the VM, bypassing reverse proxies Generated on demand via the dashboard X POSTGRESQL_ADDON_DIRECT_PORT Points to ectly to the VM, bypassing reverse proxies Generated on demand via the dashboard X POSTGRESQL_ADDON_DB Generated upon creation X POSTGRESQL_ADDON_PASSWORD Generated upon creation X POSTGRESQL_ADDON_ROLE Generated upon creation X POSTGRESQL_ADDON_USER Generated upon creation X Pgpool-II Pgpool-II Documentation\nName Description Default value Read Only CC_ENABLE_PGPOOL Enables the Pgpool-II feature false CC_PGPOOL_SOCKET_PATH Contains the path to the Unix Datagram Socket to connect to Pgpool-II true CC_PGPOOL_PCP_SOCKET_PATH Contains the path to the Unix Datagram Socket to connect to PCP true CC_PGPOOL_EXTRA_USERS Add new user/password pairs to the pool_passwd file, separated by commas (user1:password,user2:password\u0026hellip;) '' CC_PGPOOL_RESERVED_CONNECTIONS Number of reserved connections 0 CC_PGPOOL_LISTEN_BACKLOG_MULTIPLIER Specifies the length of connection queue from frontend to Pgpool-II 2 CC_PGPOOL_LEADER_WEIGHT Weight for backend 0 (Leader) 1 CC_PGPOOL_NUM_INIT_CHILDREN Number of concurrent sessions allowed 16 CC_PGPOOL_MAX_POOL Number of connection pool caches per connection 1 CC_PGPOOL_CHILD_LIFE_TIME Pool exits after being idle for this many seconds 300 CC_PGPOOL_CHILD_MAX_CONNECTIONS Pool exits after receiving that many connections 0 (no exit) CC_PGPOOL_CONNECTION_LIFE_TIME Connection to backend closes after being idle for this many seconds 0 (no close) CC_PGPOOL_CLIENT_IDLE_LIMIT Client is disconnected after being idle for that many seconds (even inside an explicit transactions!) 0 (no disconnection) CC_PGPOOL_LOG_CONNECTIONS Log connections off CC_PGPOOL_LOG_DISCONNECTIONS Log disconnections off CC_PGPOOL_LOG_HOSTNAME Hostname will be shown in ps status and in logs if connections are logged off CC_PGPOOL_LOG_STATEMENT Log all statements off CC_PGPOOL_LOG_PER_NODE_STATEMENT Log all statements with node and backend informations off CC_PGPOOL_LOG_CLIENT_MESSAGES Log any client messages off CC_PGPOOL_LOG_STANDBY_DELAY Log standby delay. Valid values are combinations of always, if_over_threshold and none if_over_threshold CC_PGPOOL_CONNECTION_CACHE Activate connection pools on CC_PGPOOL_REPLICATE_SELECT Replicate SELECT statements in replication mode off CC_PGPOOL_INSERT_LOCK Automatically locks a dummy row or a table with INSERT statements to keep SERIAL data consistency on CC_PGPOOL_LOBJ_LOCK_TABLE When rewriting lo_creat command in replication mode, specify table name to lock '' CC_PGPOOL_REPLICATION_STOP_ON_MISMATCH On disagreement with the packet kind sent from backend, degenerate the node which is most likely \u0026ldquo;minority\u0026rdquo; If off, just force to exit this session off CC_PGPOOL_FAILOVER_IF_AFFECTED_TUPLES_MISMATCH On disagreement with the number of affected tuples in UPDATE/DELETE queries, then degenerate the node which is most likely \u0026ldquo;minority\u0026rdquo;. If off, just abort the transaction to keep the consistency off CC_PGPOOL_LOAD_BALANCE_MODE Activate load balancing mode on CC_PGPOOL_IGNORE_LEADING_WHITE_SPACE Ignore leading white spaces of each query on CC_PGPOOL_READ_ONLY_FUNCTION_LIST Comma separated list of function names that don\u0026rsquo;t write to database (regexp are accepted) '' CC_PGPOOL_WRITE_FUNCTION_LIST Comma separated list of function names that write to database (regexp are accepted) '' CC_PGPOOL_PRIMARY_ROUTING_QUERY_PATTERN_LIST Semicolon separated list of query patterns that should be sent to primary node (regexp are accepted) '' CC_PGPOOL_DATABASE_REDIRECT_PREFERENCE_LIST Comma separated list of pairs of database and node id '' CC_PGPOOL_APP_NAME_REDIRECT_PREFERENCE_LIST Comma separated list of pairs of app name and node id '' CC_PGPOOL_ALLOW_SQL_COMMENTS If on, ignore SQL comments when judging if load balance or query cache is possible off CC_PGPOOL_DISABLE_LOAD_BALANCE_ON_WRITE Load balance behavior when write query is issued in an explicit transaction. Valid values are transaction, trans_transaction, dml_adaptive or always transaction CC_PGPOOL_DML_ADAPTIVE_OBJECT_RELATIONSHIP_LIST Comma separated list of object pairs '' CC_PGPOOL_STATEMENT_LEVEL_LOAD_BALANCE Enables statement level load balancing off CC_PGPOOL_SR_CHECK_PERIOD Streaming replication check period 10 CC_PGPOOL_DELAY_THRESHOLD Threshold before not dispatching query to standby node Unit is in bytes 10000000 CC_PGPOOL_HEALTH_CHECK_PERIOD Health check period 20 CC_PGPOOL_HEALTH_CHECK_TIMEOUT Health check timeout 20 CC_PGPOOL_HEALTH_CHECK_MAX_RETRIES Maximum number of times to retry a failed health check before giving up 0 CC_PGPOOL_HEALTH_CHECK_RETRY_DELAY Amount of time to wait (in seconds) between retries 1 CC_PGPOOL_CONNECT_TIMEOUT Timeout value in milliseconds before giving up to connect to backend 10000 CC_PGPOOL_MEMORY_CACHE_ENABLED Use the memory cache functionality off CC_PGPOOL_MEMQCACHE_TOTAL_SIZE Total memory size in megabytes for storing memory cache 64 CC_PGPOOL_MEMQCACHE_MAX_NUM_CACHE Total number of cache entries 1000000 CC_PGPOOL_MEMQCACHE_EXPIRE Memory cache entry life time specified in seconds 0 CC_PGPOOL_MEMQCACHE_AUTO_CACHE_INVALIDATION Invalidation of query cache is triggered by corresponding DDL/DML/DCL on CC_PGPOOL_MEMQCACHE_MAXCACHE Maximum SELECT result size in kilobytes (must be smaller than MEMQCACHE_CACHE_BLOCK_SIZE) 400 CC_PGPOOL_MEMQCACHE_CACHE_BLOCK_SIZE Cache block size in megabytes 1 CC_PGPOOL_CACHE_SAFE_MEMQCACHE_TABLE_LIST Comma separated list of table names to memcache that don\u0026rsquo;t write to database (regexp are accepted) '' CC_PGPOOL_CACHE_UNSAFE_MEMQCACHE_TABLE_LIST Comma separated list of table names not to memcache that don\u0026rsquo;t write to database (regexp are accepted) '' Elastic Stack Elastic Stack Documentation\nName Description Default value Read Only ELASTIC_APM_SERVER_URL URI to connect APM Server Generated upon creation X ES_ADDON_APM_HOST APM Server hostname Generated upon creation X ES_ADDON_APM_AUTH_TOKEN Authentication token to send metrics to APM Server Generated upon creation X ELASTIC_APM_SECRET_TOKEN Authentication token to send metrics to APM Server Generated upon creation X ES_ADDON_APM_USER Username credential used by APM Server to send metrics to Elasticsearch Generated upon creation X ES_ADDON_APM_PASSWORD Password credential used by APM Server to send metrics to Elasticsearch Generated upon creation X ES_ADDON_KIBANA_HOST Kibana hostname Generated upon creation X ES_ADDON_KIBANA_USER Username credential used by Kibana to query Elasticsearch Generated upon creation X ES_ADDON_KIBANA_PASSWORD Password credential used by Kibana to query Elasticsearch Generated upon creation X ES_ADDON_URI URI to query Elasticsearch Generated upon creation X ES_ADDON_HOST Elasticsearch hostname Generated upon creation X ES_ADDON_USER Username credential to authenticate to Elasticsearch Generated upon creation X ES_ADDON_PASSWORD Password credential to authenticate to Elasticsearch Generated upon creation X ES_ADDON_VERSION ElasticSearch Version 7 X Blackfire Name Description Default value Read Only CC_BLACKFIRE_SERVER_TOKEN The server token used to authenticate with Blackfire '' X CC_BLACKFIRE_SERVER_ID The server id used to authenticate with Blackfire '' X CC_BLACKFIRE_LOG_LEVEL Sets the verbosity of Agent‚Äôs log output 1 X CC_BLACKFIRE_MEMORY_LIMIT Sets the maximum allowed RAM usage (megabytes) when ingesting traces 500 X CC_BLACKFIRE_COLLECTOR Sets the URL of Blackfire‚Äôs data collector https://blackfire.io X CC_BLACKFIRE_TIMEOUT Sets the Blackfire API connection timeout 15 X CC_BLACKFIRE_STATSD Sets the statsd server to send agent‚Äôs statistics '' X CC_BLACKFIRE_STATSD_PREFIX Sets the statsd prefix to use when sending data blackfire X New Relic Name Description Default value Read Only NEW_RELIC_APP_NAME Contains the application name X NEW_RELIC_LICENSE_KEY Contains your New Relic account license X CC_NEWRELIC_BROWSER_MONITORING_AUTO_INSTRUMENT true X CC_NEWRELIC_DISTRIBUTED_TRACING_ENABLED true X CC_NEWRELIC_ERROR_COLLECTOR_ENABLED true X CC_NEWRELIC_TRANSACTION_TRACER_ENABLED true X CC_NEWRELIC_TRANSACTION_TRACER_RECORD_SQL obfuscated X Pulsar Name Description Default value Read Only ADDON_PULSAR_BINARY_URL The complete URL to use in your application Generated upon creation X ADDON_PULSAR_BINARY_PORT The port to connect to the Pulsar Cluster Generated upon creation X ADDON_PULSAR_HOSTNAME The host to connect to the Pulsar Cluster Generated upon creation X ADDON_PULSAR_HTTP_URL The complete URL to connect with WebSocket Generated upon creation X ADDON_PULSAR_HTTP_PORT The port to connect with WebSocket Generated upon creation X ADDON_PULSAR_NAMESPACE Your add-on Pulsar ID Generated upon creation X ADDON_PULSAR_TENANT Your Clever Cloud tenant ID Generated upon creation X ADDON_PULSAR_TOKEN Your Biscuit authentication token Generated upon creation X Redis Redis Documentation\nName Description Default value Read Only REDIS_HOST Generated upon creation X REDIS_PORT Generated upon creation X REDIS_PASSWORD Generated upon creation X Socks Name Description Default value Read Only SOCKS_ADDON_HOST SOCKS_ADDON_PORT SOCKS_ADDON_PRIVATE_KEY VPN The VPN addon provides a fixed-ip outgoing node. This can be used to work with services protected by ip address filtering. VPN_ADDON_* variables will be provided by Clever Cloud upon setup, the only configuration you have to provide is a list of CIDRs (eg. 1.2.3.0/24) for which you want the traffic to be routed through the exit node.\nName Description Default value Read Only CC_VPN_DNS_OVERRIDES Comma-separated list of DNS IP VPN_ADDON_CACRT Server CA certificate VPN_ADDON_CIPHER Cipher to use CIPHER, can be either {cipher_suite}:{hmac_alg} or only {cipher_suite} DES-EDE3-CBC:SHA1 VPN_ADDON_CRT Client certificate VPN_ADDON_DEVTYPE Kernel virtual interface kind to use (\u0026ldquo;tap\u0026rdquo; or \u0026ldquo;tun\u0026rdquo;) tap VPN_ADDON_HOST Server host or IP address VPN_ADDON_KEY Client certificate private key VPN_ADDON_PORT Server port VPN_ADDON_TAKEY Pre-shared secret VPN_TARGETS Comma-separated list of CIDRs for which you want the traffic to be routed through the exit node ","commons-to-all-applications#Commons to all applications":"Set by the deployment process These are read-only variables that are generated for each scaler before they build and start your application.\nName Description Example value INSTANCE_NUMBER Allows your application to differentiate each running node on the application level. 0, 1‚Ä¶ INSTANCE_TYPE Whether this instance is a \u0026ldquo;build\u0026rdquo; instance or a \u0026ldquo;production\u0026rdquo; instance. build, production INSTANCE_ID The ID of the current instance (scaler) of your application. It\u0026rsquo;s unique for each instance of your application and changes every time you deploy it. 518c8d8f-e304-4310-81e0-9c4237d55645 CC_PRETTY_INSTANCE_NAME The random generated string as instance pretty name using pokemon names. Tiny rhyhorn APP_ID The ID of your Clever Cloud application app_649a93d1-6677-44bc-aca7-6f46107d6e02 APP_HOME The absolute path to your application folder /home/bas/app_649a93d1-6677-44bc-aca7-6f46107d6e02 CC_DEPLOYMENT_ID Internal id of current deployment f7efaf04-1a63-45a1-8503-0de7c750ee48 COMMIT_ID The id of the commit that\u0026rsquo;s currently running d88cd2ae1aaa91923ed2bd689d95d713b6f3f45f CC_REVERSE_PROXY_IPS A comma separated list of trusted IP addresses. You should only accept requests coming from these IP addresses. x.y.z.z,x.y.z.z ELASTIC_APM_SERVICE_NAME Sets the name of your service/application in Elastic APM. Automatically defined when you have linked an Elastic APM service to your application. You can override it by defining it yourself Your application\u0026rsquo;s name conforming to Elastic APM naming convention CC_APP_NAME The customer defined application name cloud-api-production PORT The mandatory port value is 8080 8080 Variables you can define So you can alter the build\u0026amp;start process for your application.\nName Description Default value APP_FOLDER Folder in which the application is located (inside the git repository) CC_DISABLE_GIT_SUBMODULES Disable Git submodules initialization \u0026amp; synchronization CC_DISABLE_METRICS Disable metrics collection. false CC_NODE_VERSION Set Node.js version on non-Node.js application. Don\u0026rsquo;t use it for Node.js applications, use this instead CC_SSH_PRIVATE_KEY A ssh private key to setup for the user running your application CC_SSH_PRIVATE_KEY_FILE The name to use for the file containing the private ssh key id_ed25519 CC_WORKER_RESTART One of always, on-failure or no. Control whether workers need to be restarted when they exit.\nThis setting controls all workers. on-failure CC_WORKER_RESTART_DELAY Define a delay in seconds to restart the worker when they exit. 1 CC_WORKER_COMMAND Command to run in background as a worker process. You can run multiple workers. Control build and dependencies cache Name Description Default value CC_CACHE_DEPENDENCIES Enable caching of your build dependencies to speed up following builds. false CC_IGNORE_FROM_BUILDCACHE Allows to specify paths to ignore when the build cache archive is created. IGNORE_FROM_BUILDCACHE (Deprecated) Allows to specify paths to ignore when the build cache archive is created. CC_OVERRIDE_BUILDCACHE Allows to specify paths that will be in the build cache. Only those files / directories will be cached Control the deployment\u0026rsquo;s behavior Name Description Default value CC_RUN_COMMAND Custom command to run your application. CC_TASK If set as true, the deployer runs CC_RUN_COMMAND and close the instance after havind run the task. Trigger an execution using git push or starting your instance false CC_TROUBLESHOOT Enable debug log level, will also keep the VM up after failure for 15 minutes so you can SSH and debug. Don\u0026rsquo;t forget to cancel deployment if you push a new commit. false Deployment hooks Use these to define commands to run between various steps of the deployment.\nName Description Default value CC_PRE_BUILD_HOOK Ran before the dependencies are fetched. If it fails, the deployment fails. CC_POST_BUILD_HOOK Ran after the project is built, and before the cache archive is generated. If it fails, the deployment fails. CC_PRE_RUN_HOOK Ran before the application is started, but after the cache archive has been generated. If it fails, the deployment fails. CC_RUN_FAILED_HOOK Ran once the application has failed to start. CC_RUN_SUCCEEDED_HOOK Ran once the application has started successfuly. Configure extra software Name Description Default value CC_CLAMAV Start the clamav and clamav-freshclam services (the database is updated every 2 hours). WARNING: Clamscan consumes a lot of resources (~ 1GB of memory), make sure you have a scaler with enough memory to avoid OOM. false CC_CLAMAV_MAXQUEUE Maximum number of queued items. 100 CC_CLAMAV_MAXTHREADS Maximum number of threads running at the same time. 10 CC_METRICS_PROMETHEUS_PASSWORD Define the password for the basic auth of the Prometheus endpoint CC_METRICS_PROMETHEUS_PATH Define the path on which the Prometheus endpoint is available /metrics CC_METRICS_PROMETHEUS_PORT Define the port on which the Prometheus endpoint is available 8080 CC_METRICS_PROMETHEUS_RESPONSE_TIMEOUT Define the timeout in seconds to collect the application metrics. This value must be below 60 seconds as data are collected every minutes 3 CC_METRICS_PROMETHEUS_USER Define the user for the basic auth of the Prometheus endpoint CC_VARNISH_STORAGE_SIZE Configure the size of the Varnish cache. 1G CC_WORKER_COMMAND Command to run in background as a worker process. You can run multiple workers. Tailscale support Tailscale is a managed VPN service based on Wireguard that enable private networking between users, devices or machines. Clever Cloud provides a native integration of Tailscale, by mounting a VPN endpoint for each of your application\u0026rsquo;s instances.\nNote that Reusable keys are required to use multiple instances. You can generate one here.\nName Description Default value Read Only TAILSCALE_AUTH_KEY Contains your Tailscale Auth key TAILSCALE_LOGIN_SERVER Contains the login server How it works? For a given application with TAILSCALE_AUTH_KEY configured, each instance will be configured to join a Tailscale network. Instances will be named after your configured name, suffixed with the INSTANCE_NUMBER : CC-\u0026lt;NAME\u0026gt;-\u0026lt;INSTANCE_NUMBER\u0026gt;. If you have multiple instances and use one of them for being an admin instance (using INSTANCE_NUMBER), you can match the instance from your deployment to reach it over VPN.\nIf TAILSCALE_LOGIN_SERVER is provided, the agent will be configured to reach an alternative control server. Note that using your own control server is at your own risks, and Tailscale can\u0026rsquo;t be responsible. An alternative control server can still be useful to use for constraints environements. Headscale is an example of self-hosted implementation of the Tailscale control server that can run on Clever Cloud.\n","docker#Docker":"Docker Documentation\nName Description Default value Read Only CC_DOCKERFILE The name of the Dockerfile to build. Dockerfile CC_DOCKER_EXPOSED_HTTP_PORT Set to custom HTTP port if your Docker container runs on custom port. 8080 CC_DOCKER_EXPOSED_TCP_PORT Set to custom TCP port if your Docker container runs on custom port. 4040 CC_DOCKER_FIXED_CIDR_V6 Activate the support of IPv6 with an IPv6 subnet int the docker daemon. CC_DOCKER_LOGIN_PASSWORD The password of your username. CC_DOCKER_LOGIN_SERVER The server of your private registry (optional). Docker‚Äôs public registry CC_DOCKER_LOGIN_USERNAME The username to login to a private registry. CC_MOUNT_DOCKER_SOCKET Set to true to access the host Docker socket from inside your container. false ","elixir#Elixir":"Elixir Documentation\nName Description Default value Read Only CC_ELIXIR_VERSION Choose the Elixir version between 1.8, 1.9, 1.10, 1.11, 1.12, 1.13 or 1.14 1.11 CC_MIX_BUILD_GOAL The mix goal to build the application (default compile) CC_PHOENIX_ASSETS_DIR Folder in which your Phoenix assets are located. CC_PHOENIX_DIGEST_GOAL Phoenix digest goal. phx.digest CC_PHOENIX_RUN_ECTO_MIGRATE Whether to run \u0026lsquo;mix ecto.migrate\u0026rsquo; or not. true CC_PHOENIX_SERVER_GOAL Phoenix server goal. phx.server CC_RUN_COMMAND Custom command to run your application. Replaces the default behaviour. ","go#Go":"Go Documentation\nName Description Default value Read Only CC_GO_BUILD_TOOL Available values: gomod, gobuild, goget. Makes the deployer use go modules, go get or go build to build your application. goget CC_GO_PKG Makes the deployer run go get ${CC_GO_PKG} instead of go get \u0026lt;app_id\u0026gt;. CC_GO_RUNDIR Makes the deployer use the specified directory to run your binary.\nIf your application must be in $GOPATH/src/company/project for your vendored dependencies, set this variable to company/project ","haskell#Haskell":"Haskell Documentation\nName Description Default value Read Only CC_HASKELL_STACK_TARGET Specify Stack package target. CC_RUN_COMMAND Custom command to run your application. ","java#Java":"Java Documentation\nName Description Default value Read Only CC_DISABLE_MAX_METASPACE Allows to disable the Java option -XX:MaxMetaspaceSize CC_EXTRA_JAVA_ARGS Define extra arguments to pass to \u0026lsquo;java\u0026rsquo; for jars. CC_JAR_ARGS Define arguments to pass to the jar we launch. CC_JAR_PATH Define the path to your jar. CC_JAVA_VERSION Choose the JVM version between 7 to 17 for OpenJDK or graalvm-ce for GraalVM 21.0.0.2 (based on OpenJDK 11.0). 11 CC_MAVEN_PROFILES Define which maven profile to use during default build. CC_RUN_COMMAND Custom command to run your application. Replaces the default behaviour. CC_SBT_TARGET_BIN Define the bin to pick in the CC_SBT_TARGET_DIR. The first bin found in the CC_SBT_TARGET_DIR. CC_SBT_TARGET_DIR Define where pick the bin to run. . Then /target/universal/stage/bin is concatenated. GRADLE_DEPLOY_GOAL Define which gradle goals to run during build. MAVEN_DEPLOY_GOAL Define which maven goals to run during build. NUDGE_APPID PLAY1_VERSION Define which play1 version to use between 1.2, 1.3, 1.4 and 1.5 SBT_DEPLOY_GOAL Define which sbt goals to run during build. stage ","net#.NET":".NET Documentation\nName Description Default value Read Only CC_DOTNET_PROFILE Override the build configuration settings in your project. Release CC_DOTNET_PROJ The name of your project file to use for the build, without the .csproj / .fsproj / .vbproj extension. CC_DOTNET_TFM Compiles for a specific framework. The framework must be defined in the project file. Example : net5.0 CC_DOTNET_VERSION Choose the .NET Core version between 5.0,6.0. 6.0 CC_RUN_COMMAND Custom command to run your application. ","nodejs#Node.js":"Node.js Documentation\nName Description Default value Read Only CC_NODE_DEV_DEPENDENCIES Control if development dependencies are installed or not. Values are either install or ignore ignore CC_RUN_COMMAND Define a custom command. Example for Meteor: node .build/bundle/main.js \u0026lt;options\u0026gt; CC_NODE_BUILD_TOOL Choose your build tool between npm, npm-ci, yarn, yarn2 and custom npm CC_CUSTOM_BUILD_TOOL A custom command to run (with CC_NODE_BUILD_TOOL set to custom) CC_NPM_REGISTRY The host of your private repository, available values: github or the registry host. registry.npmjs.org NPM_TOKEN Private repository token ","php#PHP":"PHP Documentation\nName Description Default value Read Only ALWAYS_POPULATE_RAW_POST_DATA CC_COMPOSER_VERSION Choose your composer version between 1 and 2 2 CC_CGI_IMPLEMENTATION Choose the Apache FastCGI module between fastcgi and proxy_fcgi fastcgi CC_HTTP_BASIC_AUTH Restrict HTTP access to your application. Example: login:password. You can define multiple credentials using additional CC_HTTP_BASIC_AUTH_n (where n is a number) environment variables. CC_LDAP_CA_CERT CC_MTA_AUTH_PASSWORD Password to authenticate to the SMTP server CC_MTA_AUTH_USER User to authenticate to the SMTP server CC_MTA_SERVER_AUTH_METHOD Enable or disable authentication to the SMTP server on CC_MTA_SERVER_HOST Host of the SMTP server CC_MTA_SERVER_PORT Port of the SMTP server 465 CC_MTA_SERVER_USE_TLS Enable or disable TLS when connecting to the SMTP server true CC_OPCACHE_INTERNED_STRINGS_BUFFER The amount of memory used to store interned strings, in megabytes. Default 4 (PHP5), 8 (PHP7) CC_OPCACHE_MAX_ACCELERATED_FILES Maximum number of files handled by opcache. Default depends on the scaler size CC_OPCACHE_MEMORY Set the shared opcache memory size Default is about 1/8 of the RAM CC_OPCACHE_PRELOAD The path of the PHP preload file (PHP version 7.4 or higher). CC_PHP_ASYNC_APP_BUCKET Mount the default app FS bucket asynchronously. If set, should have value async CC_PHP_DEV_DEPENDENCIES Control if development dependencies are installed or not. Values are either install or ignore CC_PHP_DISABLE_APP_BUCKET Disable entirely the app FS Bucket. Values are either true, yes or disable CC_PHP_VERSION Choose your PHP version between 5.6, 7.2, 7.3, 7.4, 8.0, 8.1 and 8.2 7 CC_REALPATH_CACHE_TTL The size of the realpath cache to be used by PHP 120 CC_WEBROOT Define the DocumentRoot of your project . ENABLE_ELASTIC_APM_AGENT Elastic APM Agent for PHP true if ELASTIC_APM_SERVER_URL is defined, false otherwise ENABLE_REDIS false HTTP_TIMEOUT Define a custom HTTP timeout 180 LDAPTLS_CACERT MAX_INPUT_VARS MEMORY_LIMIT Change the default memory limit SESSION_TYPE Choose redis to use it as session store SOCKSIFY_EVERYTHING SQREEN_API_APP_NAME The name of your sqreen application. SQREEN_API_TOKEN Organization token. USE_SOCKS false ","python#Python":"Python Documentation\nName Description Default value Read Only CC_HTTP_BASIC_AUTH Restrict HTTP access to your application. Example: login:password. You can define multiple credentials using additional CC_HTTP_BASIC_AUTH_n (where n is a number) environment variables. CC_NGINX_PROXY_BUFFERS Sets the number and size of the buffers used for reading a response from the proxied server, for a single connection. Nginx documentation CC_NGINX_PROXY_BUFFER_SIZE Sets the size of the buffer used for reading the first part of the response received from the proxied server. Nginx documentation CC_PIP_REQUIREMENTS_FILE Allows you to define a custom requirements.txt file requirements.txt CC_PYTHON_BACKEND Choose the Python backend to use between daphne, gunicorn, uvicorn and uwsgi uwsgi CC_PYTHON_CELERY_LOGFILE Relative path to your Celery logfile: /path/to/logdir CC_PYTHON_CELERY_MODULE Specify the Celery module you want to start: mymodule CC_PYTHON_CELERY_USE_BEAT Set to true to activate Beat support CC_PYTHON_MANAGE_TASKS Comma-separated list of Django manage tasks CC_PYTHON_MODULE Select which module you want to start: mymodule:app. \u0026lsquo;mymodule\u0026rsquo; refers to the path to the folder containing the app object. So a module called \u0026lsquo;server.py\u0026rsquo; in a folder called \u0026lsquo;app\u0026rsquo; would be used here as app.server:app CC_PYTHON_USE_GEVENT Set to true to enable Gevent CC_PYTHON_VERSION Choose the Python version between 2.7, 3.7, 3.8, 3.9, 3.10 and 3.11 ENABLE_GZIP_COMPRESSION Set to true to gzip-compress the output of uwsgi GZIP_TYPES Set the mime types to compress. text/* application/json application/xml application/javascript image/svg+xml HARAKIRI Timeout (in seconds) after which an unresponding process is killed 180 NGINX_READ_TIMEOUT Read timeout in seconds 300 PYTHON_SETUP_PY_GOAL Custom setup goal to be launch after requirements.txt have been installed STATIC_FILES_PATH Relative path to where your static files are stored: path/to/static STATIC_URL_PREFIX The URL path under which you want to serve static file, usually /public STATIC_WEBROOT UWSGI_ASYNC Number of cores to use for uWSGI asynchronous/non-blocking modes UWSGI_ASYNC_ENGINE Select the asynchronous engine for uWSGI (optional) UWSGI_INTERCEPT_ERRORS WSGI_BUFFER_SIZE Buffer size (in bytes) for uploads. 4096 WSGI_POST_BUFFERING Maximal size (in bytes) for the headers of a request. 4096 WSGI_THREADS Number of threads per worker. (Defaut: automatically setup with the scaler size) WSGI_WORKERS Number of workers. (Defaut: automatically setup with the scaler size) ","ruby#Ruby":"Ruby Documentation\nName Description Default value Read Only CC_ENABLE_SIDEKIQ Enable Sidekiq background process false CC_HTTP_BASIC_AUTH Restrict HTTP access to your application. Example: login:password. You can define multiple credentials using additional CC_HTTP_BASIC_AUTH_n (where n is a number) environment variables. CC_NGINX_PROXY_BUFFERS Sets the number and size of the buffers used for reading a response from the proxied server, for a single connection. Nginx documentation CC_NGINX_PROXY_BUFFER_SIZE Sets the size of the buffer used for reading the first part of the response received from the proxied server. Nginx documentation CC_RACKUP_SERVER The server to use for serving the ruby application puma CC_RAKEGOALS A list of comma-separated rake goals to execute e.g. db:migrate, assets:precompile CC_RUBY_VERSION Choose the Ruby version to use but we strongly advise to set Ruby version in your Gemfile CC_SIDEKIQ_FILES Specify a list of Sidekiq configuration files e.g. ./config/sidekiq_1.yml,./config/sidekiq_2.yml NGINX_READ_TIMEOUT Read timeout in seconds 300 RACK_ENV RAILS_ENV STATIC_FILES_PATH Relative path to where your static files are stored: path/to/static STATIC_URL_PREFIX The URL path under which you want to serve static file, usually /public STATIC_WEBROOT ","rust#Rust":"Rust Documentation\nName Description Default value Read Only CC_RUSTUP_CHANNEL The rust channel to use. Use a specific channel version with stable, beta, nightly or a specific version like 1.13.0 stable CC_RUST_BIN The name of the binary to launch once built CC_RUST_FEATURES The list of features to enable CC_RUN_COMMAND Custom command to run your application. "},"title":"Environment Variable Reference"},"/guides/":{"data":{"":" Drupal No Icon "},"title":"Les Tutorials"},"/guides/java/":{"data":{"":"This section covers some advanced topics of the theme.\nSpring Playframework Graddle "},"title":"Java"},"/guides/java/wordpress/":{"data":{"":"","configure-your-database#Configure your database":"Make sure you have created a MySQL database add-on in the Clever Cloud console, and that it\u0026rsquo;s linked to your application. When it\u0026rsquo;s done, you will be able to access all of your add-on environment variables from the application. You can use them as DATABASE_URL=$MYSQL_ADDON_URI.\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nGit specific Drupal instructions We at this point assume you have downloaded the source files of drupal from drupal.org and already have linked your MySQL add-on.\nOpen .gitignore file and delete sites/*/settings*.php line Copy the file sites/default/default.settings.php to sites/default/settings.php Open sites/default/settings.php and line 213, replace $databases = array(); by\n$databases = array ( \u0026#39;default\u0026#39; =\u0026gt; array ( \u0026#39;default\u0026#39; =\u0026gt; array ( \u0026#39;database\u0026#39; =\u0026gt; getenv(\u0026#39;MYSQL_ADDON_DB\u0026#39;), \u0026#39;username\u0026#39; =\u0026gt; getenv(\u0026#39;MYSQL_ADDON_USER\u0026#39;), \u0026#39;password\u0026#39; =\u0026gt; getenv(\u0026#39;MYSQL_ADDON_PASSWORD\u0026#39;), \u0026#39;host\u0026#39; =\u0026gt; getenv(\u0026#39;MYSQL_ADDON_HOST\u0026#39;), \u0026#39;port\u0026#39; =\u0026gt; getenv(\u0026#39;MYSQL_ADDON_PORT\u0026#39;), \u0026#39;driver\u0026#39; =\u0026gt; \u0026#39;mysql\u0026#39;, \u0026#39;prefix\u0026#39; =\u0026gt; \u0026#39;\u0026#39;, ), ), ); Replace the line $settings['hash_salt'] = '' ($drupal_hash_salt for Drupal 7) with $settings['hash_salt'] = getenv('DRUPAL_SALT'). You can generate salts with this link. Add a new DRUPAL_SALT environment variable to the application with the salt you have generated. As mentioned in this article, with Git deployments, files that are uploaded by users must be persisted in a File System Bucket. In order to do so, add a File Bucket via the console. At the root of your application, create a clevercloud/buckets.json file (create a clevercloud folder in which you create a buckets.json file). Copy the bucket.json content from the FS bucket addon dashboard (make sure to edit the folder field): [ { \u0026#34;bucket_host\u0026#34;: \u0026#34;\u0026lt;bucket-id\u0026gt;-fsbucket.services.clever-cloud.com\u0026#34;, \u0026#34;folder\u0026#34;: \u0026#34;/sites/default/files\u0026#34; } ] Send these Drupal files via Git. When finished, get the url that you can find in the domains panel in the left sidebar. Then open the following link: https://yourapplication.cleverapps.io/install.php\nDo not forget the /install.php page otherwise installation will not happen.\nFTP Deployment Make sure you have Filezilla or an other FTP software installed in your machine.\nWhen you have chosen to deploy your application via FTP at the application creation, a free FS Bucket has been created with an ID matching your application\u0026rsquo;s ID.\nYou will find the FTP credentials in the configuration tab of this particular FS Bucket.\nJust follow the instructions of your FTP Software to send code to Clever Cloud.\n‚ö†Ô∏è An FTP application is automatically started once the application is created, even if no code has been sent. Refer to our Quick Start - FTP deployment for more details.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n","overview#Overview":"Drupal applications almost work out of the box on Clever Cloud, you just have a few adjustments to make.\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nMonitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. Linking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\n"},"title":"Deploy a Drupal website"},"/guides/php/":{"data":{"":" Free, open source Build modern websites¬†with Markdown and Hugo Fast, batteries-included Hugo theme¬†for creating beautiful static websites Get Started Fast and Full-featured Simple and easy to use, yet powerful and feature-rich.\nMarkdown is All You Need Compose with just Markdown. Enrich with Shortcode components.\nFull Text Search Built-in full text search with FlexSearch, no extra setup required.\nLightweight as a Feather No dependency or Node.js is needed to use Hextra. Powered by Hugo, one of the fastest static site generators, building your site in just seconds with a single binary.\nReponsive with Dark Mode Included Looks great on different screen sizes. Built-in dark mode support, with auto-switching based on user\u0026rsquo;s system preference.\nBuild and Host for Free Build with GitHub Actions, and host for free on GitHub Pages. Alternatively it can be hosted on any static hosting service.\nMulti-Language Made Easy Create multi-language pages by just adding locales suffix to the Markdown file. Adding i18n support to your site is intuitive.\nAnd Much More... Syntax highlighting / Table of contents / SEO / RSS / LaTeX / Mermaid / Customizable / and more\u0026hellip;\n"},"title":"PHP"},"/guides/php/drupal-tutotal/":{"data":{"":"","configure-your-database#Configure your database":"Make sure you have created a MySQL database add-on in the Clever Cloud console, and that it\u0026rsquo;s linked to your application. When it\u0026rsquo;s done, you will be able to access all of your add-on environment variables from the application. You can use them as DATABASE_URL=$MYSQL_ADDON_URI.\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nGit specific Drupal instructions We at this point assume you have downloaded the source files of drupal from drupal.org and already have linked your MySQL add-on.\nOpen .gitignore file and delete sites/*/settings*.php line Copy the file sites/default/default.settings.php to sites/default/settings.php Open sites/default/settings.php and line 213, replace $databases = array(); by\n$databases = array ( \u0026#39;default\u0026#39; =\u0026gt; array ( \u0026#39;default\u0026#39; =\u0026gt; array ( \u0026#39;database\u0026#39; =\u0026gt; getenv(\u0026#39;MYSQL_ADDON_DB\u0026#39;), \u0026#39;username\u0026#39; =\u0026gt; getenv(\u0026#39;MYSQL_ADDON_USER\u0026#39;), \u0026#39;password\u0026#39; =\u0026gt; getenv(\u0026#39;MYSQL_ADDON_PASSWORD\u0026#39;), \u0026#39;host\u0026#39; =\u0026gt; getenv(\u0026#39;MYSQL_ADDON_HOST\u0026#39;), \u0026#39;port\u0026#39; =\u0026gt; getenv(\u0026#39;MYSQL_ADDON_PORT\u0026#39;), \u0026#39;driver\u0026#39; =\u0026gt; \u0026#39;mysql\u0026#39;, \u0026#39;prefix\u0026#39; =\u0026gt; \u0026#39;\u0026#39;, ), ), ); Replace the line $settings['hash_salt'] = '' ($drupal_hash_salt for Drupal 7) with $settings['hash_salt'] = getenv('DRUPAL_SALT'). You can generate salts with this link. Add a new DRUPAL_SALT environment variable to the application with the salt you have generated. As mentioned in this article, with Git deployments, files that are uploaded by users must be persisted in a File System Bucket. In order to do so, add a File Bucket via the console. At the root of your application, create a clevercloud/buckets.json file (create a clevercloud folder in which you create a buckets.json file). Copy the bucket.json content from the FS bucket addon dashboard (make sure to edit the folder field): [ { \u0026#34;bucket_host\u0026#34;: \u0026#34;\u0026lt;bucket-id\u0026gt;-fsbucket.services.clever-cloud.com\u0026#34;, \u0026#34;folder\u0026#34;: \u0026#34;/sites/default/files\u0026#34; } ] Send these Drupal files via Git. When finished, get the url that you can find in the domains panel in the left sidebar. Then open the following link: https://yourapplication.cleverapps.io/install.php\nDo not forget the /install.php page otherwise installation will not happen.\nFTP Deployment Make sure you have Filezilla or an other FTP software installed in your machine.\nWhen you have chosen to deploy your application via FTP at the application creation, a free FS Bucket has been created with an ID matching your application\u0026rsquo;s ID.\nYou will find the FTP credentials in the configuration tab of this particular FS Bucket.\nJust follow the instructions of your FTP Software to send code to Clever Cloud.\n‚ö†Ô∏è An FTP application is automatically started once the application is created, even if no code has been sent. Refer to our Quick Start - FTP deployment for more details.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n","overview#Overview":"Drupal applications almost work out of the box on Clever Cloud, you just have a few adjustments to make.\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nMonitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. Linking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\n"},"title":"Deploy a Drupal website"},"/guides/php/matomaux-tutotal/":{"data":{"":"","configure-your-database#Configure your database":"Make sure you have created a MySQL database add-on in the Clever Cloud console, and that it\u0026rsquo;s linked to your application. When it\u0026rsquo;s done, you will be able to access all of your add-on environment variables from the application. You can use them as DATABASE_URL=$MYSQL_ADDON_URI.\nGit Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\nGit specific Drupal instructions We at this point assume you have downloaded the source files of drupal from drupal.org and already have linked your MySQL add-on.\nOpen .gitignore file and delete sites/*/settings*.php line Copy the file sites/default/default.settings.php to sites/default/settings.php Open sites/default/settings.php and line 213, replace $databases = array(); by\n$databases = array ( \u0026#39;default\u0026#39; =\u0026gt; array ( \u0026#39;default\u0026#39; =\u0026gt; array ( \u0026#39;database\u0026#39; =\u0026gt; getenv(\u0026#39;MYSQL_ADDON_DB\u0026#39;), \u0026#39;username\u0026#39; =\u0026gt; getenv(\u0026#39;MYSQL_ADDON_USER\u0026#39;), \u0026#39;password\u0026#39; =\u0026gt; getenv(\u0026#39;MYSQL_ADDON_PASSWORD\u0026#39;), \u0026#39;host\u0026#39; =\u0026gt; getenv(\u0026#39;MYSQL_ADDON_HOST\u0026#39;), \u0026#39;port\u0026#39; =\u0026gt; getenv(\u0026#39;MYSQL_ADDON_PORT\u0026#39;), \u0026#39;driver\u0026#39; =\u0026gt; \u0026#39;mysql\u0026#39;, \u0026#39;prefix\u0026#39; =\u0026gt; \u0026#39;\u0026#39;, ), ), ); Replace the line $settings['hash_salt'] = '' ($drupal_hash_salt for Drupal 7) with $settings['hash_salt'] = getenv('DRUPAL_SALT'). You can generate salts with this link. Add a new DRUPAL_SALT environment variable to the application with the salt you have generated. As mentioned in this article, with Git deployments, files that are uploaded by users must be persisted in a File System Bucket. In order to do so, add a File Bucket via the console. At the root of your application, create a clevercloud/buckets.json file (create a clevercloud folder in which you create a buckets.json file). Copy the bucket.json content from the FS bucket addon dashboard (make sure to edit the folder field): [ { \u0026#34;bucket_host\u0026#34;: \u0026#34;\u0026lt;bucket-id\u0026gt;-fsbucket.services.clever-cloud.com\u0026#34;, \u0026#34;folder\u0026#34;: \u0026#34;/sites/default/files\u0026#34; } ] Send these Drupal files via Git. When finished, get the url that you can find in the domains panel in the left sidebar. Then open the following link: https://yourapplication.cleverapps.io/install.php\nDo not forget the /install.php page otherwise installation will not happen.\nFTP Deployment Make sure you have Filezilla or an other FTP software installed in your machine.\nWhen you have chosen to deploy your application via FTP at the application creation, a free FS Bucket has been created with an ID matching your application\u0026rsquo;s ID.\nYou will find the FTP credentials in the configuration tab of this particular FS Bucket.\nJust follow the instructions of your FTP Software to send code to Clever Cloud.\n‚ö†Ô∏è An FTP application is automatically started once the application is created, even if no code has been sent. Refer to our Quick Start - FTP deployment for more details.\nMore configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n","overview#Overview":"Drupal applications almost work out of the box on Clever Cloud, you just have a few adjustments to make.\nCreate an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\nSetting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\nMonitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. Linking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\n"},"title":"Deploy a Drupal website"},"/partials/add-ssh-keys-short-version/":{"data":{"":"You need to add a SSH key to your Clever Cloud\u0026rsquo;s account to deploy via Git.\nSSH keys are used to establish a secure connection between your computer and Clever Cloud. A user can have multiple SSH keys.","add-your-ssh-key-on-clever-cloud#Add your SSH key on Clever Cloud":"Public SSH Key To declare your public SSH Key on Clever Cloud, in the left navigation bar, go in \u0026ldquo;Profile\u0026rdquo; and in the \u0026ldquo;SSH Keys\u0026rdquo; tab, add the key by entering a name and the public SSH key. The key is the entire content of the id_[ed25519/rsa].pub file including the id_ed25519/ssh-rsa part and your email.\nPrivate SSH Key If you want to clone a repository from a private repository, you can add a Private SSH Key to an application by creating a folder clevercloud at the root of your application and creating the file clevercloud/ssh.json with the following content:\n{ \u0026#34;privateKeyFile\u0026#34;: \u0026#34;path/to/file\u0026#34; } Of course you need to provide a valid path to a file that contains a valid key and that you will push on the Clever Cloud git remote.\nIf you have trouble configuring this key you can refer to this extended documentation\n","i-created-my-account-with-github#I created my account with GitHub":"If your account is linked to GitHub, a panel with your GitHub SSH keys will appear in the \u0026ldquo;SSH Keys\u0026rdquo; tab.\nYou can add any key already present in your GitHub account by clicking on the import button next to it.","i-need-to-create-my-ssh-key#I need to create my SSH key":" In your Terminal, enter the following bash line:\nssh-keygen -t ed25519 -C \u0026#34;your_email@youremail.com\u0026#34; This command creates a new ssh key using the provided email, so that the owner of the key can be identified.\nWhen prompted in which file you want to save the key, just press enter. If it says that the file already exists, enter n for no. Type ls, verify the presence of the file and jump to Add your SSH key on Clever Cloud.\nWhen asked, enter a passphrase:\nGenerating public/private ed25519 key pair. Enter file in which to save the key (/your_home_path/.ssh/id_ed25519): # Now you should enter a passphrase. Enter passphrase (empty for no passphrase): [Type a passphrase] Enter same passphrase again: [Type passphrase again] Which should give you something like this:\nYour identification has been saved in /your_home_path/.ssh/id_ed25519. Your public key has been saved in /your_home_path/.ssh/id_ed25519.pub. The key fingerprint is: 01:0e:e5:2d:ab:98:d6:17:a1:6d:f0:68:9f:d0:a2:db your_email@youremail.com "},"title":"add-ssh-keys-short-version"},"/partials/authentication/":{"data":{"":"","#":"The API of Clever Cloud uses OAuth 1 to perform authentication actions. There are two ways to signup to Clever Cloud: email or GitHub login.\nGo to the Clever Cloud Console and select the method you prefer.\n@ Email Authentication This kind of auth requires a valid and non-temporary disposable e-mail, and a password having at least 6 characters. Do not forget to validate your email by clicking the link you will receive.\nGitHub Authentication The GitHub signup allows you to create an account or link your existing one to GitHub, in one click. This process asks the following permissions:¬†Read your Public Key Read User Repositories The \u0026ldquo;repository permission\u0026rdquo; is used to deploy your GitHub apps directly to Clever Cloud, with a simple step.\nIf you need to give access to Clever Cloud\u0026rsquo;s API to a specific GitHub organization, you can do it here.\nüîê Two Factor Authentication (2FA) Clever Cloud supports 2FA. You can enable it here: https://console.clever-cloud.com/users/me/authentication\nPlease, backup your recovery codes, we won\u0026rsquo;t be able to restore access to your account if you lose access to your regular codes.\n"},"title":"authentication"},"/partials/bintray-to-nexus/":{"data":{"":" Turns out I can\u0026rsquo;t use pure html in partial\n‚ö†Ô∏è We recently moved from Bintray to a self hosted Nexus repository available at nexus.clever-cloud.com.\nYou have to update the URL of your repository with the new one. If you experience any issue please let us know on the following issue.\n"},"title":"bintray-to-nexus"},"/partials/blackfire/":{"data":{"":"","#":"Monitor your application with Blackfire You can use Blackfire to monitor your application on Clever Cloud.\nPlease refer to our Blackfire documentation to configure it for your application.\n"},"title":"blackfire"},"/partials/cached-dependencies/":{"data":{"":"","#":"Cached dependencies Enabling dependencies caching You can enable dependencies caching by adding the CC_CACHE_DEPENDENCIES=true environment variable in your application. It is enabled by default only for rust and haskell applications.\nDisabling dependencies caching You can disable dependencies caching completely by removing the CC_CACHE_DEPENDENCIES environment variable from the Clever Cloud console, in the Environment variables menu of your application.\nOr by setting it to CC_CACHE_DEPENDENCIES=false\nTo fully remove cached dependencies, you have to rebuild your application from scratch.\nYou can select \u0026ldquo;rebuild and restart\u0026rdquo; from the Clever Cloud console or launch clever restart --without-cache with the Clever Tools CLI.\n"},"title":"cached-dependencies"},"/partials/create-application/":{"data":{"":"","create-an-application-on-clever-cloud#Create an application on Clever Cloud":"Create an application on Clever Cloud With the web console Refer to our getting started for more details on application creation via the console.\nWith the Clever Tools CLI Make sure you have clever-tools installed locally or follow our CLI getting started guide. In your code folder, do clever create --type \u0026lt;type\u0026gt; \u0026lt;app-name\u0026gt; --region \u0026lt;zone\u0026gt; --org \u0026lt;org\u0026gt; where : type is the type of technology you rely on app-name the name you want for your application, zone deployment zone (par for Paris and mtl for Montreal) org the organization ID the application will be created under. Refer to clever create for more details on application creation with Clever Tools.\n"},"title":"create-application"},"/partials/db-backup/":{"data":{"":"","database-daily-backup-and-retention#Database Daily Backup and Retention":"Database Daily Backup and Retention By default, Clever Cloud performs a free backup every day, with a retention of seven days. Retention and frequency can be customized for Premium customers.\nEach backup can be found in the add-on dashboard in the web console, along with the credentials.\n"},"title":"db-backup"},"/partials/deploy-ftp/":{"data":{"":"","ftp-deployment#FTP Deployment":"FTP Deployment Make sure you have Filezilla or an other FTP software installed in your machine.\nWhen you have chosen to deploy your application via FTP at the application creation, a free FS Bucket has been created with an ID matching your application\u0026rsquo;s ID.\nYou will find the FTP credentials in the configuration tab of this particular FS Bucket.\nJust follow the instructions of your FTP Software to send code to Clever Cloud.\n‚ö†Ô∏è An FTP application is automatically started once the application is created, even if no code has been sent. Refer to our Quick Start - FTP deployment for more details.\n"},"title":"deploy-ftp"},"/partials/deploy-git/":{"data":{"":"","git-deployment-on-clever-cloud#Git Deployment on Clever Cloud":"Git Deployment on Clever Cloud You need Git on your computer to deploy via this tool. Here is the official website of Git to get more information: git-scm.com\nSetting up your remotes The \u0026ldquo;Information\u0026rdquo; page of your app gives you your Git deployment URL, it looks like this:\ngit+ssh://git@push.clever-cloud.com/\u0026lt;your_app_id\u0026gt;.git Copy it in your clipboard Locally, under your code folder, type in git init to set up a new git repository or skip this step if you already have one\nAdd the deploy URL with git remote add \u0026lt;name\u0026gt; \u0026lt;your-git-deployment-url\u0026gt;\nAdd your files via git add \u0026lt;files path\u0026gt; and commit them via git commit -m \u0026lt;your commit message\u0026gt;\nNow push your application on Clever Cloud with git push \u0026lt;name\u0026gt; master\nRefer to git deployments for more details.\n"},"title":"deploy-git"},"/partials/env-injection/":{"data":{"":"","environment-injection#Environment injection":"Environment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons."},"title":"env-injection"},"/partials/java-versions/":{"data":{"":"","available-java-versions#Available Java versions":"Available Java versions Simply set the environment variable CC_JAVA_VERSION to the version you want.\n‚ÑπÔ∏è \u0026lt;p\u0026gt;We are using Java version 11 by default.\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;New applications will have the \u0026lt;strong\u0026gt;CC_JAVA_VERSION\u0026lt;/strong\u0026gt; environment variable set to 11.\u0026lt;/p\u0026gt; Accepted values are 7, 8, 11, 17 or graalvm-ce (for GraalVM 21.0.0.2, based on OpenJDK 11.0).\nWe follow the official Java roadmap by supporting both LTS and latest non-LTS versions.\nWe are using OpenJDK distribution for mentionned Java versions.\n‚ö†Ô∏è \u0026lt;p\u0026gt;Every non-LTS versions where \u0026lt;i\u0026gt;Premier support\u0026lt;/i\u0026gt; ends will be removed without warning as you should be able to switch to the next available non-LTS version without any trouble.\u0026lt;/p\u0026gt; "},"title":"java-versions"},"/partials/language-specific-deploy/docker/":{"data":{"":"","configure-your-docker-application#Configure your Docker application":"Configure your Docker application Mandatory configuration Be sure that you:\npush on the master branch. have and commit a file named Dockerfile or use the CC_DOCKERFILE environment variable if your Dockerfile has a different name, Here is what it will look like. run the application with CMD or ENTRYPOINT in your Dockerfile. listen on HTTP port 8080 by default (you can set your own port using CC_DOCKER_EXPOSED_HTTP_PORT=\u0026lt;port\u0026gt; environment variable). Dockerfile contents You can virtually put everything you want in your Dockerfile. The only mandatory (for us) instruction to put in it is:\nCMD \u0026lt;command to run\u0026gt; command to run: this is the command that starts your application. Your application must listen on port 8080. It can be easier for you to put a script in your docker image and call it with the CMD instruction.\nMemory usage during building If the building step of your app crashes because it uses more memory that it\u0026rsquo;s available, you\u0026rsquo;ll have to split the building and running steps and enable Dedicated build instance\n# The base image FROM outlinewiki/outline:version-0.44.0 # Run the memory intensive build on an instance with 4 GB of memory (M) RUN yarn install \u0026amp;\u0026amp; yarn build # Start the app on a smaller instance (nano) CMD yarn start TCP support Clever Cloud enables you to use TCP over Docker applications using using the environment variable CC_DOCKER_EXPOSED_TCP_PORT=\u0026lt;port\u0026gt;. Refer to the documentation page to know how to create [TCP redirections](https://devcenter.clever-cloud.com/doc/administrate/tcp-redirections/].\nDocker socket access Some containers require access to the docker socket, to spawn sibling containers for instance.\n‚ö†Ô∏è \u0026lt;p\u0026gt; Giving access to the docker socket breaks all isolation provided by docker. **DO NOT** give socket access to untrusted code. \u0026lt;/p\u0026gt; You can make the docker socket available from inside the container by adding the CC_MOUNT_DOCKER_SOCKET=true environment variable. In that case, docker is started in the namespaced mode, and in bridge network mode.\nPrivate registry We support pulling private images through the docker build command. To login to a private registry, you need to set a few environment variables:\nCC_DOCKER_LOGIN_USERNAME: the username to use to login CC_DOCKER_LOGIN_PASSWORD:¬†the password of your username CC_DOCKER_LOGIN_SERVER (optional): the server of your private registry. Defaults to Docker\u0026rsquo;s public registry. This uses the docker login command under the hood.\nEnable IPv6 networking You can activate the support of IPv6 with a IPv6 subnet in the docker daemon by adding the CC_DOCKER_FIXED-CIDR-V6=\u0026lt;IP\u0026gt; environment variable.\nBuild-time variables You can use the ARG instruction to define build-time environment variables.\nEvery environment variable defined for your application will be passed as a build environment variable using the --build-arg=\u0026lt;ENV\u0026gt; parameter during the docker build phase.\nDockerized Rust application Deployment To make your dockerized application run on clever Cloud, you need to:\nexpose port 8080 in your docker file run the application with CMD or ENTRYPOINT For instance, here is the Dockerfile used for the Rust application:\n# rust tooling is provided by `archlinux-rust` FROM geal/archlinux-rust MAINTAINER Geoffroy Couprie, contact@geoffroycouprie.com # needed by rust ENV LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib # relevant files are in `./source` ADD . /source WORKDIR /source # Clever Cloud expects your app to listen on port 8080 EXPOSE 8080 RUN rustc -V # Build your application RUN cargo build # Run the application with `CMD` CMD cargo run Dockerized HHVM application Deployment Deploying a HHVM application is a bit trickier as it needs to have both HHVM and nginx running as daemons. To be able to have them running both, we need to put them in a start script:\n#!/bin/sh hhvm --mode server -vServer.Type=fastcgi -vServer.Port=9000\u0026amp; service nginx start composer install echo \u0026#34;App running on port 8080\u0026#34; tail -f /var/log/hhvm/error.log Since the two servers are running as daemons, we need to start a long-running process. In this case we use tail -f. We then add start.sh as the CMD in the Dockerfile\n# We need HHVM FROM jolicode/hhvm # We need nginx RUN sudo apt-get update \\ \u0026amp;\u0026amp; sudo apt-get install -y nginx ADD . /root RUN sudo chmod +x /root/start.sh # Nginx configuration ADD hhvm.hdf /etc/hhvm/server.hdf ADD nginx.conf /etc/nginx/sites-available/hack.conf RUN sudo ln -s /etc/nginx/sites-available/hack.conf /etc/nginx/sites-enabled/hack.conf # Checking nginx config RUN sudo nginx -t RUN sudo chown -R www-data:www-data /root WORKDIR /root # The app needs to listen on port 8080 EXPOSE 8080 # Launch the start script CMD [\u0026#34;sudo\u0026#34;,\u0026#34;/root/start.sh\u0026#34;] Sample dockerized applications We provide a few examples of dockerized applications on Clever Cloud.\nElixir App Haskell App Hack / HHVM App Seaside / Smalltalk App Rust App "},"title":"docker"},"/partials/language-specific-deploy/dotnet/":{"data":{"":"","configure-your-dotnet-application#Configure your Dotnet application":"Configure your Dotnet application .NET version The default version used on Clever Cloud is 6.0. You can change it to 5.0 by setting the CC_DOTNET_VERSION environment variable to 5.0. No support will be provided for end-of-life versions.\nRequirements Be sure that:\nYou have pushed in master branch. You listen on port 8080, by default each .NET application is created with the ASPNETCORE_URLS=\u0026quot;http://0.0.0.0:8080\u0026quot; environment variable. You have committed the different files of your project and the corresponding project file (.csproj, .fsproj or .vbproj). Let\u0026rsquo;s take an example with the simple-feed-reader project.\nFirst, you need to add the APP_FOLDER=SimpleFeedReader environment variable to define the application folder inside the Git repository.\nDuring deployment, the SimpleFeedReader.csproj file and the target framework net5.0 are automatically detected. Then, the .NET project is published:\ndotnet publish --framework net5.0 --configuration Release No additional configuration is required (unless multiple project files or target frameworks are present, see the documentation below).\nMultiple project files in the repository If multiple project files are present in your repository, you can specify the file to use (without the .*proj extension) with the CC_DOTNET_PROJ environment variable.\nCC_DOTNET_PROJ=SimpleFeedReader Multiple binary targets If your project file defines multiple targets, like :\n\u0026lt;Project Sdk=\u0026#34;Microsoft.NET.Sdk.Web\u0026#34;\u0026gt; \u0026lt;PropertyGroup\u0026gt; \u0026lt;TargetFramework\u0026gt;net5.0;net6.0\u0026lt;/TargetFramework\u0026gt; \u0026lt;/PropertyGroup\u0026gt; ... You must specify the one you want to run, with the CC_DOTNET_TFM environment variable.\nIf CC_DOTNET_TFM is specified, then the executable produced by this target is used to start the application.\nCC_DOTNET_TFM=net5.0 Dependencies Make sure to list all your dependencies in your project file. For example:\n... \u0026lt;ItemGroup\u0026gt; \u0026lt;PackageReference Include=\u0026#34;AutoMapper.Extensions.Microsoft.DependencyInjection\u0026#34; Version=\u0026#34;5.0.1\u0026#34; /\u0026gt; \u0026lt;PackageReference Include=\u0026#34;Microsoft.SyndicationFeed.ReaderWriter\u0026#34; Version=\u0026#34;1.0.2\u0026#34; /\u0026gt; \u0026lt;/ItemGroup\u0026gt; \u0026lt;/ItemGroup\u0026gt; \u0026lt;/Project\u0026gt; Compiled dependencies are cached by default to speed up deployments. You can disable dependencies caching completely by removing the CC_CACHE_DEPENDENCIES environment variable.\nIf you want to rebuild your application from scratch, you can select \u0026ldquo;rebuild and restart\u0026rdquo; from the console or launch clever restart --without-cache from CLI\nConfigure profile The default profile is Release but you can use the CC_DOTNET_PROFILE environment variable to change this configuration.\nCC_DOTNET_PROFILE=Debug Custom run command If you need to run a custom command (or just pass options to the program), you can specify it through the CC_RUN_COMMAND environment variable.\nFor instance, you can have CC_RUN_COMMAND=./bin/Release/net5.0/myapp \u0026lt;options\u0026gt;.\nPrivate dependencies Support for private dependencies will be available soon.\n"},"title":"dotnet"},"/partials/language-specific-deploy/elixir/":{"data":{"":"","build-deployment-phases-and-custom-configuration#Build, deployment phases and custom configuration":"Once you push your code to Clever Cloud, the following commands are run:\nmix deps.get mix deps.compile npm install These commands will compile your dependencies at the root of your project folder. If you want to use another folder for npm install, specify it via the environment variable CC_PHOENIX_ASSETS_DIR. To change the folder for the entire build / run process, you should use APP_FOLDER environment variable.\nThen mix compile is run. If you want to override this behavior, you can set the environment variable CC_MIX_BUILD_GOAL to the value you desire.\nAt this point, there is the command npm run deploy.\nThen mix phx.digest is run. You can override this one with the variable CC_PHOENIX_DIGEST_GOAL.\nFinally, mix phx.server is invoked, and as always, you can override this behavior, either with CC_RUN_COMMAND where you have to specify the full command, or CC_PHOENIX_SERVER_GOAL where it will be a mix task by default.\nNote: If you need to specify the timezone of your application, you can do it with the variable TZ set to the usual timezone format, for instance Europe/Paris.\n","configure-your-elixir-application#Configure your Elixir application":"Configure your Elixir application Mandatory configuration Get your Elixir version in your console with $ elixir -v and set the environment variable CC_ELIXIR_VERSION to its value (available versions as of today are 1.8, 1.9, 1.10, 1.11, 1.12, 1.13 or 1.14). Compatibility between Elixir and Erlang/OTP Each version of Elixir uses the most recent compatible version of Erlang, based on the compatibility table provided in the official Elixir documentation. If you deploy a Phoenix application Edit the file config/prod.secret.exs to replace System.get_env(\u0026quot;DATABASE_URL\u0026quot;) with System.get_env(\u0026quot;POSTGRESQL_ADDON_URI\u0026quot;). Generate a secret token with $ mix phx.gen.secret. set environment variable SECRET_KEY_BASE to the value obtained with $ mix phx.gen.secret previously set envrionment variable CC_PHOENIX_RUN_ECTO_MIGRATE to true if you need to trigger the command $ mix ecto.migrate "},"title":"elixir"},"/partials/language-specific-deploy/go/":{"data":{"":"","build-the-application#Build the application":"To build your application, you can use one of the three methods available:\ngo modules go build go get (default) Go modules If your project is compatible with go modules, be sure that the go.mod file is in your git tree. Note that it must be at the root of your application (see the APP_FOLDER environment variable if it isn\u0026rsquo;t\nFor now, you have to add the environment variable CC_GO_BUILD_TOOL=gomod to build using the go modules. In a future release, we will automatically build with go modules if the go.mod file is present at the root of your git tree.\nYour project\u0026rsquo;s entrypoint should be in the same folder as the go.mod file and be named main.go. If it isn\u0026rsquo;t, you have to specify it using the following environment variable:\nCC_GO_PKG=./path/to/entrypoint.go\nGo build If your project does not support go modules, it may include your vendored dependencies. In this case, go build must be used.\nTo use go build, you have to set the CC_GO_BUILD_TOOL=gobuild environment variable. We will then deploy your project in a classic GOPATH hierarchy using go build.\nThe CC_GO_PKG environment variable can be used to define the main file of your application. Defaults to main.go.\nGo get If your application has submodules and imports them with their full path or your main project is an external package hosted, for instance on GitHub (like github.com/me/myproject), you can define the environment variable CC_GO_PKG=github.com/me/myproject. We will now run go get ${CC_GO_PKG} instead of go get \u0026lt;app_id\u0026gt;. Also, go get requires that you put your main code in a file named main.go. If you do not do that, go will generate a library and not an executable. So if you get a Nothing listening on port 8080, please check that your main file is named main.go.\nYou can also force the use of go get by setting the environment variable CC_GO_BUILD_TOOL=goget. This is currently the default.\nNote: if you get a Nothing listening on port 8080 error, please check that your main file is named main.go.\nCustomize build using environment variables Variable Usage CC_GO_PKG Makes the deployer run go get ${CC_GO_PKG} instead of go get or go install ${CC_GO_PKG} instead of go install mypackage. CC_GO_BUILD_TOOL Available values: gomod, goget, gobuild. Makes the deployer use go modules, go get or go build to build your application. If not specified, defaults to goget. CC_GO_RUNDIR Makes the deployer use the specified directory to run your binary. If your application must be in $GOPATH/src/company/project for your vendored dependencies, set this variable to company/project. clevercloud/go.json This configuration file is optional.\nIf you want to configure precisely your dependencies (e.g. have private libraries, or specific versions of some libraries), here is the way:\nMake your repository have a GOPATH structure:\n./ src/ myapp/ foo/ module1/ module2/ module3/ Here you have the modules myapp, foo/module1, foo/module2 and module3.\nCreate a clevercloud/go.json file at the top of your repository:\n./ clevercloud/ go.json src/ myapp/ ... In the go.json file, put the following:\n{ \u0026#34;deploy\u0026#34;: { \u0026#34;appIsGoPath\u0026#34;: true, \u0026#34;main\u0026#34;: \u0026#34;myapp\u0026#34; } } If appIsGoPath is present and equals true, then we consider that your repo root is the GOPATH.\nThe main field then becomes mandatory and must be the name of the module you want to run.\nE.g. if you want to run module1, main must be foo/module1.\n(Optional) Add a \u0026ldquo;execDir\u0026rdquo; field to the \u0026ldquo;deploy\u0026rdquo; object:\n{ \u0026#34;deploy\u0026#34;: { \u0026#34;appIsGoPath\u0026#34;: true, \u0026#34;main\u0026#34;: \u0026#34;myapp\u0026#34;, \u0026#34;execDir\u0026#34;: \u0026#34;src/myapp\u0026#34; } } The execDir value must be relative to the root of your repo.\nIn the example above, we will run the application in the src/myapp directory.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. To access environment variables from your code, just get them from the environment with PATH: os.Getenv(\u0026quot;MY_VARIABLE\u0026quot;).\n","configure-your-go-application#Configure your Go application":"Configure your Go application Mandatory configuration Be sure that:\nYour application listens to the wild network 0.0.0.0, not only localhost or 127.0.0.1 Your application listens on port 8080 You put your main code in a file named main.go (if you do not do that, Go will generate a library and not an executable) Apart from listening on port 8080, there is nothing to change on your application.\nGo production build on Clever Cloud We automatically build and run your application, see Build the application. By default, we consider that your repository contains a single application. We put your application in ${GOPATH}/src/{app_id} and then run go get {app_id}. Refer to clevercloud/go.json settings if you want to override this behaviour. By default, we deploy your application as a Go project named \u0026ldquo;\u0026lt;app_id\u0026gt;\u0026rdquo;. You can find the app_id of your application under the environment variable APP_ID. Please refer to environment injection to know how to query it in your application. The executable is run with the application\u0026rsquo;s root as its current path. So if your application has a static folder at its root, it will be accessible via ./static in your application. "},"title":"go"},"/partials/language-specific-deploy/haskell/":{"data":{"":"","configure-your-haskell-application#Configure your Haskell application":"Configure your Haskell application Mandatory configuration Be sure that:\nyou have pushed in master branch you listen on port 8080 you have one and only one binary target in your .cabal file your project has a stack.yaml file The steps ran in order are:\nstack setup stack install --only-dependencies stack install ./\u0026lt;path\u0026gt;/my-exe (or the contents of CC_RUN_COMMAND) The executable built by stack build (or the command you specify) must start a web server listening on 0.0.0.0:8080.\nFor instance, a minimal scotty application can look like this:\n{-# LANGUAGE OverloadedStrings #-} import Web.Scotty main = scotty 8080 $ do get \u0026#34;/\u0026#34; $ do html $ \u0026#34;Hello world\u0026#34; Dependencies Make sure to list all your dependencies in your .cabal file.\nFor the example above, you need:\nexecutable myfirstapp main-is: Main.hs build-depends: base , scotty Cached dependencies You can enable dependencies caching by adding the CC_CACHE_DEPENDENCIES=true.\nIt is enabled by default only for rust and haskell applications.\nTo disable dependencies caching completely, you can remove the CC_CACHE_DEPENDENCIES environment variable or by setting it to false.\nTo fully remove cached dependencies, you have to rebuild your application from scratch.\nYou can select rebuild and restart from the console or launch clever restart --without-cache with the Clever Tools CLI.\nCustom run command If you need to run a custom command (or just pass options to the binary built by stack), you can specify it through the CC_RUN_COMMAND environment variable.\nFor instance, for a hakyll website, you can define:\nCC_RUN_COMMAND=\u0026#34;~./local/bin/site server --host 0.0.0.0 --port 8080\u0026#34; To access environment variables from your code, just get them from the environment with getEnv :: String -\u0026gt; IO String in System.Environment.\nIf some environment variables are critical to your application, here is an approach you can use:\n{-# LANGUAGE OverloadedStrings #-} module Main where import Data.Text.Lazy (pack) import System.Environment (getEnv) import Web.Scotty (get, html, scotty) envVar = getEnv \u0026#34;MY_VAR\u0026#34; main = do myVar \u0026lt;- envVar scotty 8080 $ do get \u0026#34;/\u0026#34; $ do html . pack $ \u0026#34;Hello world \u0026#34; ++ myVar This loads the environment variable in your main function and tests it. This way, the application will refuse to start with an helpful error message if MY_VAR is not defined.\nSpecify Stack package target You may have several packages in your application which can be time consuming when building them, if you don\u0026rsquo;t want to build every packages you can target a package by using the CC_HASKELL_STACK_TARGET environnement variable.\nCC_HASKELL_STACK_TARGET=\u0026#34;mypackage\u0026#34; "},"title":"haskell"},"/partials/language-specific-deploy/node/":{"data":{"":"","automatic-https-redirection#Automatic HTTPS redirection":"You can use the X-Forwarded-Proto header to enable it.\nIf you are using Express.js, you can use express-sslify by adding:\napp.use(enforce.HTTPS({ trustProtoHeader: true })); Custom build phase The build phase installs the dependencies and executes the scripts.install you might have defined in your package.json. It\u0026rsquo;s meant to build the whole application including dependencies and / or assets (if there are any).\nAll the build part should be written into the scripts.install field of the package.json file. You can also add a custom bash script and execute it with:¬†\u0026quot;scripts.install\u0026quot;: \u0026quot;./build.sh\u0026quot;\nFor more information, see the npm documentation\n","configure-your-nodejs-application#Configure your Node.js application":"Configure your Node.js application Mandatory configuration Be sure that:\nyou listen on HTTP port 0.0.0.0:8080 you have a package.json file your package.json either has a scripts.start or main field the folder /node_modules is mentioned in your .gitignore file you enable production mode by setting the environment variable NODE_ENV=production Select node version You can use the engines.node field in package.json to define the wanted version, if not provided we will use the latest LTS version.\nAbout package.json The package.json file should look like the following:\n{ \u0026#34;name\u0026#34; : \u0026#34;myapp\u0026#34;, \u0026#34;version\u0026#34; : \u0026#34;0.1.0\u0026#34;, \u0026#34;main\u0026#34; : \u0026#34;myapp.js\u0026#34;, \u0026#34;scripts\u0026#34; : { \u0026#34;start\u0026#34; : \u0026#34;node myapp.js\u0026#34; }, \u0026#34;engines\u0026#34; : { \u0026#34;node\u0026#34; : \u0026#34;^10\u0026#34; } } The json fields The following table describes each of the fields formerly mentioned.\nUsage Field Description At least one scripts.start This field provides a command line to run. If defined, npm start will be launched. Otherwise we will use the main field. See below to know how and when to use the scripts.start field main This field allows you to specify the file you want to run. It should be the relative path of the file starting at the project's root. It's used to launch your application if scripts.start is not defined. Optional engines.node Sets the node engine version you app runs with. Any \"A.B.x\" or \"^A.B.C\" or \"~A.B\" version will lead to run the application with the latest \"A.B\" local version. If this field is missing, we use the latest LTS available. If you want to ensure that your app will always run, please put something of the form \"^A.B.C\" and avoid setting only \"\u003e=A.B.C\". NPM modules dependencies If you need some modules you can easily add some with the dependencies field in your package.json. Here is an example:\n{ \u0026#34;name\u0026#34; : { ... }, \u0026#34;engines\u0026#34;: { ... }, \u0026#34;dependencies\u0026#34;: { \u0026#34;express\u0026#34;: \u0026#34;3.x\u0026#34;, \u0026#34;socket.io\u0026#34;: \u0026#34;0.9.x\u0026#34;, \u0026#34;underscore\u0026#34;: \u0026#34;1.4.3\u0026#34; } } Private dependencies If your application has private dependencies, you can add a Private SSH Key.\nSupported package managers We support npm and yarn as package managers.\nThe environment variable CC_NODE_BUILD_TOOL allows you to define which build tool you want to use. The default value is set to npm but it can be any of these values:\nnpm-install: uses npm install npm-ci: uses npm ci npm: Defaults to npm-install for now yarn: uses yarn yarn2: uses yarn@2 custom: uses the build tool set with CC_CUSTOM_BUILD_TOOL If a yarn.lock file exists in your application\u0026rsquo;s main folder, then the yarn package manager will be automatically used. To overwrite this behaviour, either delete the yarn.lock file or set the CC_NODE_BUILD_TOOL environment variable.\nIf none of the above package managers fit your needs, you can put your own using CC_CUSTOM_BUILD_TOOL.\n","development-dependencies#Development Dependencies":"Development dependencies will not be automatically installed during the deployment. You can control their installation by using the CC_NODE_DEV_DEPENDENCIES environment variable which takes install or ignore as its value. This variable overrides the default behaviour of NODE_ENV.\nHere are various scenarios:\nCC_NODE_DEV_DEPENDENCIES=install: Development dependencies will be installed. CC_NODE_DEV_DEPENDENCIES=ignore: Development dependencies will not be installed. NODE_ENV=production, CC_NODE_DEV_DEPENDENCIES=install: Development dependencies will be installed. NODE_ENV=production, CC_NODE_DEV_DEPENDENCIES=ignore: Development dependencies will not be installed. NODE_ENV=production: Package manager (NPM / Yarn) default behaviour. Development dependencies will not be installed. Neither NODE_ENV nor CC_NODE_DEV_DEPENDENCIES are defined: Package manager (NPM / Yarn) default behaviour. Development dependencies will be installed. Custom run command If you need to run a custom command (or just pass options to the program), you can specify it through the CC_RUN_COMMAND environment variable.\nFor instance, for a meteor application, you can have CC_RUN_COMMAND=\u0026quot;node .build/bundle/main.js \u0026lt;options\u0026gt;\u0026quot;.\nCustom run phase The run phase is executed from scripts.start if defined. This phase is only meant to start your application and should not contain any build task.\nUse private repositories with CC_NPM_REGISTRY and NPM_TOKEN Since April 2015, npmjs.com allows you to have private repositories. If you want to use a private repository on npmjs.com (the default one), you only need to provide the token part. To register your auth token, you need to add to your application the NPM_TOKEN environment variable.\nNPM_TOKEN=\u0026#34;00000000-0000-0000-0000-000000000000\u0026#34; Then, the .npmrc file will be created automatically for your application, with the registry url and the token.\n//registry.npmjs.org/:_authToken=00000000-0000-0000-0000-000000000000 To authenticate to another registry (like github), you can use the CC_NPM_REGISTRY environment variable to define the registry\u0026rsquo;s host.\nCC_NPM_REGISTRY=\u0026#34;npm.pkg.github.com\u0026#34; NPM_TOKEN=\u0026#34;00000000-0000-0000-0000-000000000000\u0026#34; //npm.pkg.github.com/:_authToken=00000000-0000-0000-0000-000000000000 "},"title":"node"},"/partials/language-specific-deploy/php/":{"data":{"":"","available-extensions-and-modules#Available extensions and modules":"You can check enabled extensions and versions by viewing our phpinfo() example for:\nPHP 5.6. PHP 7.2. PHP 7.3. PHP 7.4. PHP 8.0. PHP 8.1. PHP 8.2. Warning: some extensions need to be enabled explicitely\nThe following extensions are enabled by default: amqp, imagick, libsodium, mcrypt, memcached, memcache, mongodb, opcache, redis, solr, ssh2, zip, gRPC, protobuf, Pspell.\nYou can add DISABLE_\u0026lt;extension_name\u0026gt;: true in your environment variable to disable them.\nIf you have a request about modules, feel free to contact our support at support@clever-cloud.com.\n‚ö†Ô∏è On PHP 7, the memcache extension is not available; only memcached is available Enable specific extensions Some extensions need to be enabled explicitly. To enable these extensions, you\u0026rsquo;ll need to set the corresponding environment variable:\nAPCu: set ENABLE_APCU to true.\nAPCu is an in-memory key-value store for PHP. Keys are of type string and values can be any PHP variables.\nCouchbase: set ENABLE_COUCHBASE and ENABLE_PCS to true\nCouchbase is a document database with a SQL-based query language that is engineered to deliver performance at scale.\nElastic APM Agent: set ENABLE_ELASTIC_APM_AGENT to true (default if ELASTIC_APM_SERVER_URL is defined).\nElastic APM agent is Elastic\u0026rsquo;s APM agent extension for PHP. The PHP agent enables you to trace the execution of operations in your application, sending performance metrics and errors to the Elastic APM server. Warning: This extension is available starting PHP 7.2.\nEvent: set ENABLE_EVENT to true.\nEvent is an extension to schedule I/O, time and signal based events.\nGEOS: set ENABLE_GEOS to true.\nGEOS (Geometry Engine - Open Source) is a C++ port of the Java Topology Suite (JTS).\nGnuPG: set ENABLE_GNUPG to true.\nGnuPG is an extension that provides methods to interact with GNU Privacy Guard (OpenPGP implementation).\nIonCube: set ENABLE_IONCUBE to true.\nIonCube is a tool to obfuscate PHP code. It\u0026rsquo;s often used by paying Prestashop and WordPress plugins.\nMailparse: set ENABLE_MAILPARSE to true.\nMailparse is an extension for parsing and working with email messages. It can deal with RFC 822 and RFC 2045 (MIME) compliant messages.\nMongo: set ENABLE_MONGO to true.\nMongoDB is a NoSQL Database. This extension allows to use it from PHP. Warning: this extension is now superseded by the mongodb extension. We provide it for backward compatibility.\nNewRelic: set ENABLE_NEWRELIC to true.\nNewrelic Agent for PHP. Newrelic is a software analytics tool.\nOAuth: set ENABLE_OAUTH to true.\nOAuth consumer extension. OAuth is an authorization protocol built on top of HTTP.\nPCS: set ENABLE_PCS to true.\nPCS provides a fast and easy way to mix C and PHP code in your PHP extension.\nRdkafka: set ENABLE_RDKAFKA to true.\nPHP-rdkafka is a thin librdkafka binding providing a working PHP 5 / PHP 7 Kafka client.\nSqreen: The Sqreen agent is started automatically after adding the environment variables (SQREEN_API_APP_NAME and SQREEN_API_TOKEN).\nUopz: set ENABLE_UOPZ to true. The uopz extension is focused on providing utilities to aid with unit testing PHP code.\nUploadprogress: set ENABLE_UPLOADPROGRESS to true. The uploadprogress extension is used to track the progress of a file download.\nXDebug: set ENABLE_XDEBUG to true.\nXDebug is a debugger and profiler tool for PHP.\n","composer#Composer":"We support Composer build out of the box. You just need to provide a composer.json file in the root of your repository and we will run composer.phar install --no-ansi --no-progress --no-interaction --no-dev for you.\nYou can also set the CC_COMPOSER_VERSION to 1 or 2 to select the composer version to use.\n‚ÑπÔ∏è If you encounter any issues, add your own `composer.phar` file in the root of your repository which will override the version we use. You can perform your own composer.phar install by using the Post Build hook.\nExample of a composer.json file:\n{ \u0026#34;require\u0026#34;: { \u0026#34;laravel/framework\u0026#34;: \u0026#34;4.1.*\u0026#34;, \u0026#34;ruflin/Elastica\u0026#34;: \u0026#34;dev-master\u0026#34;, \u0026#34;shift31/laravel-elasticsearch\u0026#34;: \u0026#34;dev-master\u0026#34;, \u0026#34;natxet/CssMin\u0026#34;: \u0026#34;dev-master\u0026#34; }, \u0026#34;repositories\u0026#34;: [ { \u0026#34;type\u0026#34;: \u0026#34;vcs\u0026#34;, \u0026#34;url\u0026#34;: \u0026#34;https://GitHub.com/timothylhuillier/laravel-elasticsearch.git\u0026#34; } ], \u0026#34;autoload\u0026#34;: { \u0026#34;classmap\u0026#34;: [ \u0026#34;app/controllers\u0026#34;, \u0026#34;app/models\u0026#34;, \u0026#34;app/database/migrations\u0026#34;, \u0026#34;app/database/seeds\u0026#34; ], \u0026#34;psr-0\u0026#34;: { \u0026#34;SomeApp\u0026#34;: \u0026#34;app\u0026#34; } }, \u0026#34;config\u0026#34;: { \u0026#34;preferred-install\u0026#34;: \u0026#34;dist\u0026#34; }, \u0026#34;minimum-stability\u0026#34;: \u0026#34;dev\u0026#34; } Example of a minimalist PHP application using composer and custom scripts: php-composer-demo\n","configure-apache#Configure Apache":"We use Apache 2 as HTTP Server. In order to configure it, you can create a .htaccess file and set directives inside this file.\nhtaccess The .htaccess file can be created everywhere in you app, depending of the part of the application covered by directives.\nHowever, directives who applies to the entire application must be declared in a .htaccess file to the application root.\nhtpasswd You can configure basic authentication using environment variables. You will need to set CC_HTTP_BASIC_AUTH variable to your own login:password pair. If you need to allow access to multiple users, you can create additional environment CC_HTTP_BASIC_AUTH_n (where n is a number) variables.\nDefine a custom HTTP timeout You can define the timeout of an HTTP request in Apache using the HTTP_TIMEOUT environment variable.\nBy default, the HTTP timeout is se to 3 minutes (180 seconds).\nForce HTTPS traffic Load balancers handle HTTPS traffic ahead of your application. You can use the X-Forwarded-Proto header to know the original protocol (http or https).\nPlace the following snippet in a .htaccess file to ensure that your visitors only access your application through HTTPS.\nRewriteEngine On RewriteCond %{HTTPS} off RewriteCond %{HTTP:X-Forwarded-Proto} !https RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] Prevent Apache to redirect HTTPS calls to HTTP when adding a trailing slash DirectorySlash is enabled by default on the PHP scalers, therefore Apache will add a trailing slash to a resource when it detects that it is a directory.\nE.g. if foobar is a directory, Apache will automatically redirect http://example.com/foobar to http://example.com/foobar/.\nUnfortunately the module is unable to detect if the request comes from a secure connection or not. As a result it will force an HTTPS call to be redirected to HTTP.\nIn order to prevent this behavior, you can add the following statements in a .htaccess file:\nDirectorySlash Off RewriteEngine On RewriteCond %{REQUEST_FILENAME} -d RewriteRule ^(.+[^/])$ %{HTTP:X-Forwarded-Proto}://%{HTTP_HOST}/$1/ [R=301,L,QSA] These statements will keep the former protocol of the request when issuying the redirect. Assuming that the header X-Forwarded-Proto is always filled (which is the case on our platform).\nIf you want to force all redirects to HTTPS, you can replace %{HTTP:X-Forwarded-Proto} with https.\nChange the FastCGI module You can choose between two FastCGI modules, fastcgi and proxy_fcgi.\nTo choose between these two modules you must use the CC_CGI_IMPLEMENTATION environment variable with fastcgi or proxy_fcgi as a value.\n‚ÑπÔ∏è We recommend preferring proxy_fcgi over fastcgi. The fastcgi implementation is not maintained anymore, but has been kept as default to prevent unexpected behaviors with historical applications. If you have issues with downloading content, it could be related to the fastcgi module not working correctly in combination with the deflate module, as the Content-Length header is not updated to the new size of the encoded content.\nTo resolve this issue, we advise you to switch the value of CC_CGI_IMPLEMENTATION from default to proxy_fcgi.\nEnvironment injection As mentionned above, Clever Cloud can inject environment variables that are defined in the dashboard and by add-ons linked to your application.\nTo access the variables, use the getenv function. So, for example, if your application has a postgresql add-on linked:\n$host = getenv(\u0026#34;POSTGRESQL_ADDON_HOST\u0026#34;); $database = getenv(\u0026#34;POSTGRESQL_ADDON_DB\u0026#34;); $username = getenv(\u0026#34;POSTGRESQL_ADDON_USER\u0026#34;); $password = getenv(\u0026#34;POSTGRESQL_ADDON_PASSWORD\u0026#34;); $pg = new PDO(\u0026#34;postgresql:host={$host};dbname={$database}, $username, $password); ‚ö†Ô∏è \u0026lt;p\u0026gt;Environment variables are displayed in the default output of `phpinfo()`. If you want to use `phpinfo()` without exposing environment variables, you have to call it this way: \u0026lt;/p\u0026gt; \u0026lt;code\u0026gt;phpinfo(INFO_GENERAL | INFO_CREDITS | INFO_CONFIGURATION | INFO_MODULES | INFO_LICENSE)\u0026lt;/code\u0026gt; ","configure-monolog#Configure Monolog":"A lot of frameworks (including Symfony) use Monolog to handle logging. The default configuration of Monolog doesn\u0026rsquo;t allow to log errors into the console.\nHere is a basic configuration of Monolog to send your application\u0026rsquo;s logs into our logging system and access them into the Console:\nmonolog: handlers: clever_logs: type: error_log level: warning You can change the level to whatever level you desire. For Symfony, the configuration file is app/config/config_prod.yml.\nLaravel doesn\u0026rsquo;t need Monolog to retrieve logs via Clever console or Clever CLI. Here, ensure that you have the following line in config/app.php:\nreturn [ // ... \u0026#39;log\u0026#39; =\u0026gt; env(\u0026#39;APP_LOG\u0026#39;), // ... ]; Then, set APP_LOG=syslog as Clever application environment variable.\n","configure-the-session-storage#Configure the session storage":"By default, a FS Bucket is created for each PHP applications. It is used to store session files, so that session data is available on each instance.\nThis FS Bucket is also used to store TMP files by default. You can change this behaviour by setting the TMPDIR environment variable. You can set it to /tmp for example.\nSpeed up or disable the session FS Bucket You can set the following environment variables:\nCC_PHP_ASYNC_APP_BUCKET=async to mount the session FS Bucket with the async option. It speeds up the FS Bucket usage, but it can corrupt files in case of a network outage. CC_PHP_DISABLE_APP_BUCKET=(true|yes|disable) to entirely prevent the session FS Bucket from being mounted. Use this if you don\u0026rsquo;t use the default PHP session library. It will speed up your application but users might lose their session across instances and deployments. Use Redis to store PHP Sessions We provide the possibility to store the PHP sessions in a Redis database to improve reliability.\nIf your application is under heavy load, redis persistence for sessions can improve latency.\nTo enable this feature, you need to:\nenable Redis support on the application (create an environment variable named ENABLE_REDIS with the value true.) create and link a Redis add-on create an environment variable named SESSION_TYPE with the value redis. ‚ö†Ô∏è You must have a [Redis](https://devcenter.clever-cloud.com/doc/deploy/addon/redis/) add-on [linked with your application](#linking-a-database-or-any-other-add-on-to-your-application) to enable PHP session storage in Redis. If no Redis add-on is linked with your application, the deployment will fail. ","configure-your-php-application#Configure your PHP application":"Configure your PHP application Choose your PHP version Set the CC_PHP_VERSION environment variable to one of the following values:\n5.6 7.2 7.3 7.4 8.0 8.1 8.2 All new PHP applications are created with a default CC_PHP_VERSION, set to 7, which means latest php 7 version available.\nYou can of course change it whenever you want then redeploy your application to use the version you want. We only support values based on the first two digits X.Y not X.Y.Z.\nThe configuration file for your PHP application must be /clevercloud/php.json, that is a php.json file in a /clevercloud folder at the root of your application.\nChange the webroot Since one of the best practices of PHP development is to take the libraries and core files outside the webroot, you may want to set another webroot than the default one (the root of your application).\nUsing an environment variable Add a new environment variable called CC_WEBROOT and set /public as its value.\nclever env set CC_WEBROOT /public Using a configuration file To change the webroot, just set the key webroot in the deploy part of the configuration file clevercloud/php.json with the absolute path (from the root of your application) of your new public folder.\nIn the following example we want to set the webroot to the folder /public:\n{ \u0026#34;deploy\u0026#34;: { \u0026#34;webroot\u0026#34;: \u0026#34;/public\u0026#34; } } ‚ö†Ô∏è Please note the absolute path style: `/public`. The change of the webroot will be rejected during the deployment if the target directory does not exist or is not a directory. Change PHP settings PHP settings Most PHP settings can be changed using a .user.ini file.\nIf you want the settings to be applied to the whole application, you should put this file in your webroot. If you did not change it (see above), then your webroot is the root of the repository.\nIf you put the .user.ini file in a sub-directory; settings will be applied recursively starting from this sub-directory.\nNote: .user.ini files are not loaded by the PHP CLI by default.\nTo do so, you can use a tiny trick:\nAdd the PHP_INI_SCAN_DIR=:/home/bas environment variable in your application. This way the PHP CLI will try to find a .ini file in /home/bas after loading all other configuration files.\nRun the following script in a deployment hook (e.g. in the pre-run hook):\n#!/bin/bash -l test -f ${APP_HOME}${CC_WEBROOT}/.user.ini \u0026amp;\u0026amp; \\ cp ${APP_HOME}${CC_WEBROOT}/.user.ini ${HOME}/user.ini Timezone configuration All instances on Clever Cloud run on the UTC timezone. We recommend to handle all your dates in UTC internally, and only handle timezones when reading or displaying dates.\nAdditionally, you can set PHP\u0026rsquo;s time zone setting with .user.ini. For instance, to use the french time zone, edit .user.ini to add this line:\ndate.timezone=Europe/Paris Header injection Usually, you can use an .htaccess file to create / update / delete headers. You won\u0026rsquo;t be able to do it from the .htaccess file if the headers come from a .php file, because php-fpm ignores the mod_headers plugin. It works fine for static files directly served by apache.\nSo if you need to inject headers on HTTP responses (for instance for CORS), you have to do it from PHP (you can\u0026rsquo;t do it from .htaccess).\nheader(\u0026#34;Access-Control-Allow-Origin: *\u0026#34;); If you want to keep this separate from your application, you can configure the application to execute some code on every request.\nIn .user.ini, add the following line (you need to create inject_headers.php first):\nauto_prepend_file=./inject_headers.php Please refer to the official documentation for more information.\nYou can review the available directives; all the PHP_INI_USER, PHP_INI_PERDIR, and PHP_INI_ALL directives can be set from within .user.ini.\nclevercloud/php.json settings Other settings than the one mentioned above can be changed by adding the following line in clevercloud/php.json:\n{ \u0026#34;configuration\u0026#34;: { \u0026#34;my.setting\u0026#34;: \u0026#34;value\u0026#34; } } Here is the list of available settings:\nmbstring.func_overload pm.max_children Note: You can send a request to the support if you need to change a setting which cannot be changed via a .user.ini file and is not in this list.\nMemory Limit When php-fpm spawns a worker it allocates a smaller part of the application\u0026rsquo;s memory to the worker, here is the allocated memory for each flavor:\nFlavor Memory Limit Pico 64M Nano 64M XS 128M S 256M M 384M L 512M XL 768M 2XL 1024M 3XL 1536M 4XL+ 2048M To change this limit you can define MEMORY_LIMIT environment variable.\nIf you define a limit exceeding the application memory it will use the default one.\npm.max_children: Maximum PHP Children per instance You can fix the maximum number of PHP running processes per instance by setting pm.max_children (see above).\nThis setting is useful if you need to limit the number of running processes according to the maximum connections limit of your MySQL or PostgreSQL database.\nBy default, pm.max_children is set to 10.\n","development-dependencies#Development Dependencies":"Development dependencies will not be automatically installed during the deployment. You can control their installation by using the CC_PHP_DEV_DEPENDENCIES environment variable which takes install value.\nAny other value than install will prevent developement dependencies from being installed.\nGitHub rate limit Sometimes, you can encounter the following error when downloading dependencies:\nFailed to download symfony/symfony from dist: Could not authenticate against GitHub.com To prevent this download dependencies\u0026rsquo;s fails that is often caused by rate limit of GitHub API while deploying your apps, we recommend you to add oauth token in your composer configuration file or in separate file named as described in composer FAQ (API rate limit and OAuth tokens).\nYou can find more documentation about composer configuration at getcomposer.com.\nExample You use Artisan to manage your project and you want to execute artisan migrate before running your app.\nTo do this, we use a post build hook, you have to set a new environment variable on your Clever application as following:\nCC_POST_BUILD_HOOK=php artisan migrate --force Note: You must add the execute permission to your file (chmod u+x yourfile) before pushing it.\n","frameworks-and-cms#Frameworks and CMS":"The following is the list of tested CMS by our team.\nIt\u0026rsquo;s quite not exhaustive, so it does not mean that other CMS can\u0026rsquo;t work on the Clever Cloud platform.\nWordPress Prestashop Dokuwiki Joomla SugarCRM Drupal Magento Status.net Symfony Thelia Laravel Sylius ","sending-emails#Sending emails":"The PHP language has the mail function to directly send emails. While we do not provide a SMTP server (needed to send the emails), you can configure one through environment variables.\nWe provide Mailpace addon to send emails through PHP mail() function. You have to turn TLS on with port 465 (environment variable CC_MTA_SERVER_USE_TLS=true) to make Mailpace working.\nWe also recommend you to use Mailgun or Mailjet if your project supports it. These services already have everything you need to send emails from your code.\nConfigure the SMTP server Services like Mailgun or Mailjet provide SMTP servers. If your application has no other way but to use the mail function of PHP to send emails, you have to configure a SMTP server. This can be done through environment variables:\nCC_MTA_SERVER_HOST: Host of the SMTP server. CC_MTA_SERVER_PORT: Port of the SMTP server. Defaults to 465 whether TLS is enabled or not. CC_MTA_AUTH_USER: User to authenticate to the SMTP server. CC_MTA_AUTH_PASSWORD: Password to authenticate to the SMTP server. CC_MTA_SERVER_USE_TLS: Enable or disable TLS. Defaults to true. CC_MTA_SERVER_STARTTLS: Enable or disable STARTTLS. Defaults to false. CC_MTA_SERVER_AUTH_METHOD: Enable or disable authentication. Defaults to on. ","using-http-authentication#Using HTTP authentication":"Using basic HTTP authentication, PHP usually handles the values of user and password in variables named $_SERVER['PHP_AUTH_USER'] and $_SERVER['PHP_AUTH_PW'].\nAt Clever Cloud, we have enabled an Apache option to pass directly the Authorization header, even though we are using FastCGI; still, the header is not used by PHP, and the aforementioned variables are empty.\nYou can do this to fill them using the Authorization header:\nlist($_SERVER[\u0026#39;PHP_AUTH_USER\u0026#39;], $_SERVER[\u0026#39;PHP_AUTH_PW\u0026#39;]) = explode(\u0026#39;:\u0026#39; , base64_decode(substr($_SERVER[\u0026#39;Authorization\u0026#39;], 6))); "},"title":"php"},"/partials/language-specific-deploy/python/":{"data":{"":"","celery-apps#Celery apps":"Note: Please note that Celery support is not available yet for gunicorn.\nWe also support celery apps out of the box. To deploy a celery app, use the CC_PYTHON_CELERY_MODULE environment variable:\nCC_PYTHON_CELERY_MODULE=\u0026#34;mymodule\u0026#34; ‚ö†Ô∏è Celery needs to be defined as a dependency in your requirements.txt. Otherwise the deployment will be aborted if Celery support is enabled. You can also activate beat with CC_PYTHON_CELERY_USE_BEAT=true and provide a given log dir for celery with CC_PYTHON_CELERY_LOGFILE=\u0026quot;/path/to/logdir\u0026quot;.\nThe CC_PYTHON_CELERY_LOGFILE path is relative to the application\u0026rsquo;s path.\n‚ö†Ô∏è There is a bug in versions \u0026lt;4.2 of Celery. You need to add the CELERY_TIMEZONE = 'UTC' environment variable.\nThe bug is documented here: https://GitHub.com/celery/celery/issues/4184.\n","configure-your-python-application#Configure your Python application":"Configure your Python application General configuration Python apps can be launched in a variety of ways. You can specify how to start your application (for instance which module to run) by setting environment variables.\nTo select which module you want to start, use the CC_PYTHON_MODULE environment variable.\nCC_PYTHON_MODULE=\u0026#34;mymodule:app\u0026#34; The module (without .py) must be importable, i.e. be in PYTHONPATH. Basically, you should just point to a WSGI capable object.\nFor example with Flask, it\u0026rsquo;s gonna be the name of your main server file, followed by your Flask object: server:app for instance if you have a server.py file at the root of your project with a Flask app object inside.\nChoose Python version The default version of python on Clever Cloud is 2.7. If you want to use python 3.x instead, create an environment variable CC_PYTHON_VERSION equal to either 3 (which will default to the most up-to-date version), 3.7, 3.8, 3.9, 3.10 or 3.11.\nNote: the version is a number, do not use quotes. values allowed are 2, 2.7, 3, 3.7, 3.8, 3.9, 3.10, 3.11.\nChoose Pip version The default version of pip on Clever Cloud is 19. If you want to use pip 9 instead, create an environment variable like CC_PIP_VERSION=9.\nSelect the python backend Currently, we support daphne, gunicorn, uvicorn and uwsgi for Python backends. If not specified, the default backend is uwsgi.\nTo select one, set the CC_PYTHON_BACKEND environment variable with either daphne, gunicorn, uvicorn or uwsgi.\nPlease contact the support if you need another backend.\nDependencies If you do not have a requirements.txt file to commit you can obtain it via the command pip freeze \u0026gt; requirements.txt (or pip3 freeze \u0026gt; requirements.txt if you use Python 3.x) at the root of your project folder in your terminal.\nFor example to install PostgreSQL and don\u0026rsquo;t want to use the pip freeze command above you have to create a file requirements.txt at the root of your application folder:\npsycopg2\u0026gt;=2.7 --no-binary psycopg2 Note: We recommend using psycopg2\u0026gt;=2.7 --no-binary psycopg2 to avoid wsgi issues.\nYou can define a custom requirements.txt file with the environnement variable CC_PIP_REQUIREMENTS_FILE for example: CC_PIP_REQUIREMENTS_FILE=config/production.txt.\nCached dependencies Enabling dependencies caching You can enable dependencies caching by adding the CC_CACHE_DEPENDENCIES=true environment variable in your application. It is enabled by default only for rust and haskell applications.\nDisabling dependencies caching You can disable dependencies caching completely by removing the CC_CACHE_DEPENDENCIES environment variable from the Clever Cloud console, in the Environment variables menu of your application.\nOr by setting it to CC_CACHE_DEPENDENCIES=false\nTo fully remove cached dependencies, you have to rebuild your application from scratch.\nYou can select \u0026ldquo;rebuild and restart\u0026rdquo; from the Clever Cloud console or launch clever restart --without-cache with the Clever Tools CLI.\nUse setup.py We support execution of a single setup.py goal. Usually, this would be to execute custom tasks after the installation of dependencies.\nThe goal will be launched after the dependencies from requirements.txt have been installed.\nTo execute a goal, you can define the environment variable PYTHON_SETUP_PY_GOAL=\u0026quot;\u0026lt;your goal\u0026gt;\u0026quot;.\nEnvironment injection Clever Cloud injects environment variables from your application settings as mentioned in setting up environment variables and is also injecting in your application production environment, those from your linked add-ons. To access environment variables from your code, just get them from the environment with:\nimport os os.getenv(\u0026#34;MY_VARIABLE\u0026#34;) Manage your static files To enable Nginx to serve your static resources, you have to set two environment variables.\nSTATIC_FILES_PATH: should point to a directory where your static files are stored.\nSTATIC_URL_PREFIX: the URL path under which you want to serve static files (e.g. /public).\nAlso, you are able to use a Filesystem Bucket to store your static files. Please refer to the File System Buckets section.\nNote: the path of your folder must be absolute regarding the root of your application.\nNote: setting the STATIC_URL_PREFIX to / will cause the deployment failure.\nStatic files example Here is how to serve static files, the test.png being the static file you want to serve:\n‚îú‚îÄ‚îÄ \u0026lt;app_root\u0026gt; ‚îÇ¬†‚îú‚îÄ‚îÄ flask-app.py ‚îÇ¬†‚îú‚îÄ‚îÄ static ‚îÇ¬†‚îÇ¬†‚îî‚îÄ‚îÄ test.png ‚îÇ¬†‚îî‚îÄ‚îÄ requirements.txt Using the environment variables STATIC_FILES_PATH=static/ and STATIC_URL_PREFIX=/public the test.png file will be accessed under: https://\u0026lt;domain.tld\u0026gt;/public/test.png.\nuWSGI, Gunicorn and Nginx configuration uWSGI, gunicorn and nginx settings can be configured by setting environment variables:\nuWSGI HARAKIRI: timeout (in seconds) after which an unresponding process is killed. (Default: 180) WSGI_BUFFER_SIZE: maximal size (in bytes) for the headers of a request. (Defaut: 4096) WSGI_POST_BUFFERING: buffer size (in bytes) for uploads. (Defaut: 4096) WSGI_WORKERS: number of workers. (Defaut: depends on the scaler) WSGI_THREADS: number of threads per worker. (Defaut: depends on the scaler) uWSGI asynchronous/non-blocking modes To enable uWSGI asynchronous mode, you can use these two environment variables:\nUWSGI_ASYNC: number of cores to use for uWSGI asynchronous/non-blocking modes. UWSGI_ASYNC_ENGINE: select the asynchronous engine for uWSGI (optional). Gunicorn GUNICORN_WORKER_CLASS: type of worker to use. Default to sync. Available workers CC_GUNICORN_TIMEOUT: gunicorn timeout. Defaults to 30 Nginx NGINX_READ_TIMEOUT: a bit like HARAKIRI, the response timeout in seconds. (Defaut: 300) ENABLE_GZIP_COMPRESSION: \u0026ldquo;on|yes|true\u0026rdquo; gzip-compress the output of uwsgi. GZIP_TYPES: the mime types to gzip. Defaults to text/* application/json application/xml application/javascript image/svg+xml. Basic authentication If you need basic authentication, you can enable it using environment variables. You will need to set CC_HTTP_BASIC_AUTH variable to your own login:password pair. If you need to allow access to multiple users, you can create additional environment CC_HTTP_BASIC_AUTH_n (where n is a number) variables.\nNginx optional configuration with clevercloud/http.json Nginx settings can be configured further in clevercloud/http.json. All its fields are optional.\nlanguages: configure a default language and redirections error_pages: configure custom files for error pages force_https: automatically redirect HTTP traffic to HTTPS aliases: set up redirections charset: force a specific charset { \u0026#34;languages\u0026#34;: { \u0026#34;default\u0026#34;: {\u0026#34;rewrite\u0026#34;: \u0026#34;en\u0026#34;}, \u0026#34;fr\u0026#34;: {\u0026#34;rewrite\u0026#34;: \u0026#34;en\u0026#34;} }, \u0026#34;error_pages\u0026#34;: { \u0026#34;404\u0026#34;: \u0026#34;path/to/page\u0026#34; }, \u0026#34;force_https\u0026#34;: true, \u0026#34;aliases\u0026#34;: { \u0026#34;/path\u0026#34;:¬†\u0026#34;redirection\u0026#34; }, \u0026#34;charset\u0026#34;: \u0026#34;latin-1\u0026#34; } Using the Gevent loop engine Whether you use uwsgi or gunicorn, you can enable the Gevent loop engine.\nTo do so, add the CC_PYTHON_USE_GEVENT environment variable to your application, with the true value.\nMonitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\n"},"title":"python"},"/partials/language-specific-deploy/ruby/":{"data":{"":"","configure-your-ruby-on-rails-application#Configure your Ruby on Rails application":"Configure your Ruby on Rails application Mandatory configuration Be sure that:\nyou push to the master branch you commit your gems.locked or Gemfile.lock file you have a config.ru file (this one is most of the time generated by rails) you have gem puma in your Gemfile (puma is the default application server from rails, when creating a new ruby application, an environment variable is automatically added: CC_RACKUP_SERVER=puma) You need to provide a gems.locked or Gemfile.lock file. To do that ensure you have at least once run bundle install in your terminal at the root of your rails project.\nChoose ruby version If you specify a ruby version in your gems.rb of Gemfile, we\u0026rsquo;ll use it, otherwise; keep reading.\nOn your Clever Cloud application create an environment variable CC_RUBY_VERSION=rubyversion where rubyversion represents:\n\u0026ldquo;2\u0026rdquo; will select the greatest \u0026ldquo;2.X.Y\u0026rdquo; version available. \u0026ldquo;2.5\u0026rdquo; will select the greatest \u0026ldquo;2.5.Y\u0026rdquo; version available. \u0026ldquo;2.5.3\u0026rdquo; will select the \u0026ldquo;2.5.3\u0026rdquo; version. Due to current landscape in ruby applications, the default version is the greatest 2.5.Y. We provide also the 2.4.Y and 2.3.Y version.\nIf given rubyversion does not match any available version, your deployment will fail.\nChoose your environment You can set the RUBY_ENV environment variable to the value you want. By default it is set to production. Most used values are production and development but you can use any custom one as long as you have setted up of the required variables for this environment in your ./config/ folder files.\nSecure configuration of secret key There are many way to add secret key to your env and each one is valid. Clever Cloud provides you a secure way so you don\u0026rsquo;t have to commit any file containing it.\ngenerate the secret key locally with rake secret add it to your environment in ./config/secret.yml with: production: secret_key_base: \u0026lt;%= ENV[\u0026#34;SECRET_KEY_BASE\u0026#34;] %\u0026gt; Configure Rake goals You can specify a list of rake goals to execute before the deployment of your application by using the CC_RAKEGOALS environment variable.\nThe value of this variable must be a comma-separated list of goals, for instance:\nCC_RAKEGOALS=\u0026#34;db:migrate, assets:precompile\u0026#34; We do not execute any rake goals by default.\nConfigure Sidekiq To run a Sidekiq process in background you will need to enable it with the CC_ENABLE_SIDEKIQ=true environment variable.\nPlease note you will need a redis instance to use this feature.\nYou can specify multiple Sidekiq configuration files with the CC_SIDEKIQ_FILES environment variable.\nThe value of this variable must be a comma-separated list of files:\nCC_SIDEKIQ_FILES=\u0026#34;./config/sidekiq_1.yml,./config/sidekiq_2.yml,./config/sidekiq_3.yml\u0026#34; Note: CC_SIDEKIQ_FILES have precedence over CC_ENABLE_SIDEKIQ which means that even if CC_SIDEKIQ_FILES is defined and CC_ENABLE_SIDEKIQ is set to false, Sidekiq will still be enabled.\nEach path is the path from the root of the repository to a sidekiq configuration file.\nEach file might contain something like this standard sidekiq.yml file:\n--- :concurrency: 4 :pidfile: tmp/pids/sidekiq_1.pid :queues: - [critical, 2] - default production: :logfile: ./log/sidekiq.log --- Manage your static files and assets Static files are configured with environment variables:\nSTATIC_FILES_PATH: should point to a directory where your static files are stored.\nSTATIC_URL_PREFIX: the URL path under which you want to serve static files (e.g. /public/)\nNote: the path of your folder must be absolute regarding the root of your application.\nNote: setting the STATIC_URL_PREFIX to / will make the deployment to fail.\nIf you use the asset pipeline, make sure to include the assets:precompile task in the CC_RAKEGOALS environment variable value.\nCC_RAKEGOALS=\u0026#34;db:migrate, assets:precompile\u0026#34; Note: if your project uses webpacker, make sure to enable the dedicated build instance option in the Information menu of your application in the Clever Cloud console because webpacker needs a lot a ressources when starting.\nUsing Active Storage and Cellar S3 Only for Rails \u0026gt;= 5.2.\nEnable Active Storage for your application: $ rails active_storage:install then $ rake db:migrate\nAdd gem \u0026quot;aws-sdk-s3\u0026quot;, require: false to your Gemfile, run $ bundle install\nAdd config.active_storage.service = :clevercloud in config/environments/production.yml\nAdd in config/storage.yml:\nclevercloud: service: S3 access_key_id: \u0026lt;%= ENV[\u0026#39;CELLAR_ADDON_KEY_ID\u0026#39;] %\u0026gt; secret_access_key: \u0026lt;%= ENV[\u0026#39;CELLAR_ADDON_KEY_SECRET\u0026#39;] %\u0026gt; region: us-east-1 bucket: \u0026lt;%= ENV[\u0026#39;CELLAR_ADDON_BUCKET_NAME\u0026#39;] %\u0026gt; endpoint: \u0026lt;%= ENV[\u0026#39;CELLAR_ADDON_ENDPOINT\u0026#39;] %\u0026gt; force_path_style: true In the clever cloud console create a Cellar S3 storage add-on, name it, link it to your rails application and create a bucket.\nIn the environment variables section of your Ruby on Rails application on Clever Cloud add the following environment variables:\nCELLAR_ADDON_BUCKET_NAME=\u0026#34;\u0026lt;your bucket name\u0026gt;\u0026#34; CELLAR_ADDON_ENDPOINT=\u0026#34;https://cellar-c2.services.clever-cloud.com\u0026#34; You can now commit and push your changes.\nAlso, you are able to use a Filesystem Bucket to store your static files. Please refer to the File System Buckets section.\nNginx configuration nginx settings can be configured with environment variables:\nNGINX_READ_TIMEOUT: the response timeout in seconds. (Defaut: 300) Basic authentication If you need basic authentication, you can enable it using environment variables. You will need to set CC_HTTP_BASIC_AUTH variable to your own login:password pair. If you need to allow access to multiple users, you can create additional environment CC_HTTP_BASIC_AUTH_n (where n is a number) variables.\nNginx optional configuration with clevercloud/http.json Nginx settings can be configured further in clevercloud/http.json. All its fields are optional.\nlanguages: configure a default language and redirections error_pages: configure custom files for error pages force_https: automatically redirect HTTP traffic to HTTPS aliases: set up redirections charset: force a specific charset { \u0026#34;languages\u0026#34;: { \u0026#34;default\u0026#34;: {\u0026#34;rewrite\u0026#34;: \u0026#34;en\u0026#34;}, \u0026#34;fr\u0026#34;: {\u0026#34;rewrite\u0026#34;: \u0026#34;en\u0026#34;} }, \u0026#34;error_pages\u0026#34;: { \u0026#34;404\u0026#34;: \u0026#34;path/to/page\u0026#34; }, \u0026#34;force_https\u0026#34;: true, \u0026#34;aliases\u0026#34;: { \u0026#34;/path\u0026#34;:¬†\u0026#34;redirection\u0026#34; }, \u0026#34;charset\u0026#34;: \u0026#34;latin-1\u0026#34; } Puma configuration Puma reads its configuration from the config/puma.rb file. See the puma documentation for more information.\nYou can override this configuration with environment variables. Each of them, when specified, will be be preferred over the setting from config/puma.rb.\nCC_PUMA_WORKERS overrides the number of workers (e.g. CC_PUMA_WORKERS=2) CC_PUMA_THREADS overrides the number of threads per worker, can be a raw number or a range (e.g. CC_PUMA_THREADS=6 or CC_PUMA_THREADS=4:8) If they are not defined in the environment nor in config/puma.rb we will setup the values depending on the size of the scaler your application is running on. We also fill the WEB_CONCURRENCY and RAILS_MAX_THREADS environment variable if they are not present as they may be used by rails\u0026rsquo; puma configuration.\n","overridding-rackup-application-server#Overridding rackup application server":"You can override the puma default server by setting an environment variable CC_RACKUP_SERVER=yourserver. We do not recommend you do it."},"title":"ruby"},"/partials/language-specific-deploy/rust/":{"data":{"":"","configure-your-rust-application#Configure your Rust application":"Configure your Rust application Mandatory configuration Make sure that:\nyou have pushed in master branch you listen on port 8080 you have committed Cargo.lock you have at least one binary target in Cargo.toml The result of cargo build --release --locked must be an executable which starts a web server listening on 0.0.0.0:8080.\nFor instance, a minimal iron application can look like this:\nextern crate iron; use iron::prelude::*; use iron::status; fn main() { fn hello_world(_: \u0026amp;mut Request) -\u0026gt; IronResult\u0026lt;Response\u0026gt; { Ok(Response::with((status::Ok, \u0026#34;Hello World!\u0026#34;))) } let _server = Iron::new(hello_world).http(\u0026#34;0.0.0.0:8080\u0026#34;).unwrap(); println!(\u0026#34;On 8080\u0026#34;); } Multiple binary targets If your Cargo.toml defines multiple targets, you must specify the one you want to run, with the CC_RUST_BIN environment variable. If CC_RUST_BIN is specified, then the executable produced by this target is used to start the application.\nCustom run command If you need to run a custom command (or just pass options to the program), you can specify it through the CC_RUN_COMMAND environment variable.\nFor instance, you can have CC_RUN_COMMAND=./target/release/myapp \u0026lt;options\u0026gt;.\nDependencies Make sure to list all your dependencies in Cargo.toml. For the example above, you need:\n[package] name = \u0026#34;my-app\u0026#34; version = \u0026#34;0.1.0\u0026#34; authors = [] [dependencies] iron = \u0026#34;0.4.0\u0026#34; Cached dependencies Enabling dependencies caching You can enable dependencies caching by adding the CC_CACHE_DEPENDENCIES=true environment variable in your application.\nDisabling dependencies caching You can disable dependencies caching completely by removing the CC_CACHE_DEPENDENCIES environment variable from the Clever Cloud console, in the Environment variables menu of your application. Or by setting it to CC_CACHE_DEPENDENCIES=false.\nTo fully remove cached dependencies, you have to rebuild your application from scratch. You can select \u0026ldquo;rebuild and restart\u0026rdquo; from the Clever Cloud console or launch clever restart --without-cache with the Clever Tools CLI.\nPrivate dependencies If you use dependencies on a private git repository inside your project, it needs a bit of configuration until this cargo issue has been resolved.\nFirst, you need to use the HTTPS url as the git url for your dependency in your Cargo.toml:\nprivate-dep = { git = \u0026quot;https://github.com/user/my-private-dep.git\u0026quot; }\nThen, you need to create a personal access token. It allows to not use your password:\nGithub: https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/ Gitlab: https://docs.gitlab.com/ce/user/profile/personal_access_tokens.html (API rights are needed) Once you have the token, we need to tell Git to use a credential store. For that, we are going to create it.\nCreate a clevercloud/pre-build.sh file at the root of your application and paste:\n#! /usr/bin/env bash git config --global credential.helper store echo \u0026#34;https://${GIT_USERNAME}:${GIT_PASSWORD}@gitlab.com\u0026#34; \u0026gt; ~/.git-credentials chmod 600 ~/.git-credentials If you have multiple private repositories, add them accordingly.\nNow, go into the environment variables page of your application and create those environment variables:\nGIT_USERNAME: your Github / gitlab / other username GIT_PASSWORD: your Github / gitlab / other password CC_PRE_BUILD_HOOK: clevercloud/pre-build.sh CC_POST_BUILD_HOOK: rm /home/bas/.git-credentials This adds the git configuration before the build start and it cleans it after the build has been done.\nRust channels By default, your application is built with the latest stable rust version. If you require beta, nightly or a specific Rust version, you can set CC_RUSTUP_CHANNEL environment variable value to beta, nightly or a specific version (eg. 1.36.0).\nThe build uses rustup to select the Rust version you need.\nCargo features You can enable specific features for your crate by settings the CC_RUST_FEATURES environment variable to the list of features to enable.\nTo access environment variables from your code, just get them from the environment with std::env::var(\u0026lt;KEY_NAME\u0026gt;).\nIf some environment variables are critical to your application, here is an approach you can use:\nuse std::env; fn main() { let my_config_value = env::var(\u0026#34;MY_VAR\u0026#34;).expect(\u0026#34;Missing env var `MY_VAR`\u0026#34;); something_that_runs_a_web_server(my_config_value); } This loads the environment variable in your main function and use .expect to fail early. This way, the application will refuse to start with an helpful error message if MY_VAR is not defined.\n"},"title":"rust"},"/partials/language-specific-deploy/scala/":{"data":{"":"","configure-your-scala-application#Configure your Scala application":"Configure your Scala application Mandatory configuration Your application has to listen on port 8080 for worldwide connections (0.0.0.0). We set the system variable http.port to 8080 for you so in many cases (like for play applications) you don\u0026rsquo;t have anything to do. You need to use the sbt-native-packager in your project.\nThe sbt-native-packager We rely on sbt-native-packager to run applications. This plugin provides a stage task which is run during deployment.\nIf your project doesn\u0026rsquo;t already use sbt-native-packager, you need to add it to project/plugins.sbt. Please make sure you use an up-to-date version.\nIn project/plugins.sbt:\naddSbtPlugin(\u0026#34;com.typesafe.sbt\u0026#34; % \u0026#34;sbt-native-packager\u0026#34; % \u0026#34;1.7.0\u0026#34;) Then you need to configure the package type:\nIn build.sbt:\nenablePlugins(JavaAppPackaging) # Disable javadoc packaging mappings in (Compile, packageDoc) := Seq() For more information, please have a look at the documentation for sbt-native-packager\nCustom sbt goal By default, the deployment system execute sbt stage and runs the first binary found into /target/universal/stage/bin. If you want to run another goal, you can specify it with the SBT_DEPLOY_GOAL environment variable.\nMulti-module build If you have a single repository with multiple modules or want to build a specific module in a monorepo (and no top-level stage task), then you can specify the sbt task with SBT_DEPLOY_GOAL.\nCC_SBT_TARGET_DIR must be set to the relative path of the module and CC_SBT_TARGET_BIN to the name of the binary to run.\nFor instance, if you want to deploy a module named service1 that produce a binary named \u0026ldquo;my-binary\u0026rdquo;, you have to define the following variables:\nSBT_DEPLOY_GOAL=service1/stage CC_SBT_TARGET_DIR=service1 CC_SBT_TARGET_BIN=my-binary Check details on environment variables.\nOur engine will execute the sbt service1/stage and will run service1/target/universal/stage/bin/my-binary\nNote: even when CC_RUN_COMMAND is configured CC_SBT_TARGET_DIR and CC_SBT_TARGET_BIN should be set to the correct values.\nHOCON users If you\u0026rsquo;re using HOCON configuration files, then you can have direct acces to environment variables from the configuration file:\napplication.secret=${APPLICATION_SECRET} "},"title":"scala"},"/partials/link-addon/":{"data":{"":"","linking-a-database-or-any-other-add-on-to-your-application#Linking a database or any other add-on to your application":"Linking a database or any other add-on to your application By linking an application to an add-on, the application has the add-on environment variables in its own environment by default.\nOn add-on creation Many add-ons do exist on Clever Cloud, please refer to the full list and check add-ons dedicated pages for full instructions.\nDuring add-on creation, you will see Applications screen, with a list of your applications. You can toggle the button to Link and click next. If you finish the process of add-on creation, the application will automatically be linked to it.\nAdd-on already exists In the Clever Cloud console, under the Service Dependencies menu of your application, you can use the Link addons dropdown menu to select the name of the add-on you want to link and use the add button to finish the process.\nYou can also link another application from the same page in the Clever Cloud console, using the Link applications dropdown menu.\n"},"title":"link-addon"},"/partials/more-config/":{"data":{"":"","more-configuration#More configuration":"More configuration Need more configuration? To run a script at the end of your deployment? To add your private SSH key to access private dependencies?\nGo check the Common configuration page.\nYou may want to have an advanced usage of your application, in which case we recommend you to read the Administrate documentation section.\nIf you can\u0026rsquo;t find something or have a specific need like using a non supported version of a particular software, please reach out to the support.\n"},"title":"more-config"},"/partials/new-relic/":{"data":{"":"","#":"Monitor your application with New Relic You can use New Relic to monitor your application on Clever Cloud.\nPlease refer to our New Relic documentation to configure it for your application.\n"},"title":"new-relic"},"/partials/pgpool/":{"data":{"":"Pgpool-II is a proxy software that sits between PostgreSQL servers and a PostgreSQL database client.\nYou can read the official project page for more information.\n"},"title":"pgpool"},"/partials/proxysql/":{"data":{"":"ProxySQL is a tool that acts like a proxy between your application and your MySQL add-on. Instead of connecting to your MySQL add-on, you can connect to the local ProxySQL and it will forward all your requests to your MySQL add-on.\nThis allows you to let ProxySQL take care of some interesting features like connection pooling or leader / follower setup.\n"},"title":"proxysql"},"/partials/set-env-vars/":{"data":{"":"","setting-up-environment-variables-on-clever-cloud#Setting up environment variables on Clever Cloud":"Setting up environment variables on Clever Cloud With the Clever Cloud console Go to the Clever Cloud console, and find the app you want to fine tune under it\u0026rsquo;s organization. Find the Environment variables menu and select it. In this menu, you will see a form with VARIABLE_NAME and variable value fields. Fill them with the desired values then select Add. Don\u0026rsquo;t forget to \u0026ldquo;Update Changes\u0026rdquo; at the end of the menu. With the Clever Tools CLI Make sure you have clever-tools installed locally. Refer to our CLI getting started. In your code folder, do clever env set \u0026lt;variable-name\u0026gt; \u0026lt;variable-value\u0026gt; Refer to environment variables reference for more details on available environment variables on Clever Cloud.\nYou can of course create custom ones with the interface we just demonstrated, they will be available for your application.\n"},"title":"set-env-vars"},"/partials/single-sign-on/":{"data":{"":"Clever Cloud has its own SSO (Single Sign-On) authentication to authenticate to various services. All members of your organization will be able to authenticate to the services in the same organization, using their Clever Cloud account.\nWhen a service will need to authenticate you, you will be redirected to a login form. Please enter your Clever Cloud credentials as well as your 2FA Authentication code if needed.\n‚ÑπÔ∏è If it\u0026rsquo;s the first time you use the Clever Cloud SSO, a few OAuth rights will be displayed for you to accept them. All the rights listed should be accepted otherwise the backend service might not work correctly.\nSSO Needed Rights If you mistakenly disabled some rights at some point, you have to revoke all tokens generated by this OAuth consumer:\nFirst, go to your user\u0026rsquo;s OAuth token in the Web console Then, find all tokens named Keycloak Consumer and revoke them Try to log-in again. The rights list should now be displayed. "},"title":"single-sign-on"},"/partials/ssh-keys/":{"data":{"":"You need to add a SSH key to your Clever Cloud\u0026rsquo;s account to deploy via Git. SSH keys are used to establish a secure connection between your computer and Clever Cloud. A user can have multiple SSH keys.\n‚ö†Ô∏è Accounts cannot share the same SSH key.¬†A SSH key is used to identify the actions made by a user and must be associated with only one account. If a key is used by more than one account, a warning will be displayed in the console. ","add-your-ssh-key-on-clever-cloud#Add your SSH key on Clever Cloud":"Public SSH Key To declare your public SSH Key on Clever Cloud, in the left navigation bar, go in \u0026ldquo;Profile\u0026rdquo; and in the \u0026ldquo;SSH Keys\u0026rdquo; tab.\nAdd the key by entering a name and the public SSH key. The key is the entire contents of the id_[ed25519/rsa].pub file including the id_ed25519/ssh-rsa part and your email.\n‚ö†Ô∏è Your public SSH key must be associated with only one account. If you see \u0026ldquo;access denied\u0026rdquo; or \u0026ldquo;password:\u0026rdquo; when you push on Clever Cloud, your SSH Keys may be invalid or not available on Clever Cloud. Please check that you SSH Key is present and valid in your profile.\n","check-your-ssh-configuration#Check your ssh configuration":"To check if your ssh key is correctly configured, you can try to run:\nssh git@push.clever-cloud.com The first time, you may have to type \u0026ldquo;yes\u0026rdquo; to continue.\nIf you see:\n\u0026gt; git@push-par-clevercloud-customers.services.clever-cloud.com: Permission denied (publickey). \u0026gt; \u0026gt; fatal: Could not read from remote repository. \u0026gt; \u0026gt; Please make sure you have the correct access rights \u0026gt; and the repository exists. This error can occur when your SSH agent has not be configured to use your SSH¬†key.\nMost of the time, it is due to the presence of multiple SSH keys generated by 3rd party software, like GitHub for Mac. To fix this you will need to configure your SSH agent.\n","configure-your-ssh-agent#Configure your SSH agent":"You can add those lines into your ~/.ssh/config file. It tells your SSH agent which key to pick for a given hostname. Please update your Clever Cloud SSH key path accordingly.\n# config for Clever Cloud specific key (Paris zone) Host push-par-clevercloud-customers.services.clever-cloud.com Hostname push-par-clevercloud-customers.services.clever-cloud.com User git IdentityFile ~/.ssh/id_ed25519_clevercloud # config for Clever Cloud specific key (Roubaix zone) Host push-rbx-clevercloud-customers.services.clever-cloud.com Hostname push-rbx-clevercloud-customers.services.clever-cloud.com User git IdentityFile ~/.ssh/id_ed25519_clevercloud # config for Clever Cloud specific key (Warsaw zone) Host push-wsw-clevercloud-customers.services.clever-cloud.com Hostname push-wsw-clevercloud-customers.services.clever-cloud.com User git IdentityFile ~/.ssh/id_ed25519_clevercloud # config for Clever Cloud specific key (Montreal zone) Host push-mtl-clevercloud-customers.services.clever-cloud.com Hostname push-mtl-clevercloud-customers.services.clever-cloud.com User git IdentityFile ~/.ssh/id_ed25519_clevercloud # config for Clever Cloud specific key (Singapore zone) Host push-sgp-clevercloud-customers.services.clever-cloud.com Hostname push-sgp-clevercloud-customers.services.clever-cloud.com User git IdentityFile ~/.ssh/id_ed25519_clevercloud # config for Clever Cloud specific key (Sydney zone) Host push-syd-clevercloud-customers.services.clever-cloud.com Hostname push-syd-clevercloud-customers.services.clever-cloud.com User git IdentityFile ~/.ssh/id_ed25519_clevercloud Need help about SSH keys?\nContact us at support@clever-cloud.com or you can read more about SSH Keys.\n","how-to-add-your-ssh-key-on-clever-cloud#How to add your SSH key on Clever Cloud?":"I don\u0026rsquo;t have any, I want to create an SSH key In your Terminal, enter the following bash line:\nssh-keygen -t ed25519 -C \u0026#34;your_email@youremail.com\u0026#34; This command creates a new ssh key using the provided email, so that the owner of the key can be identified.\nWhen prompted in which file you want to save the key, just press enter. If it says that the file already exists, enter n for no. Type ls, verify the presence of the file and jump to Add your SSH key on Clever Cloud.\nWhen asked, enter a passphrase:\nGenerating public/private ed25519 key pair. Enter file in which to save the key (/your_home_path/.ssh/id_ed25519): # Now you should enter a passphrase. Enter passphrase (empty for no passphrase): [Type a passphrase] Enter same passphrase again: [Type passphrase again] Which should give you something like this:\nYour identification has been saved in /your_home_path/.ssh/id_ed25519. Your public key has been saved in /your_home_path/.ssh/id_ed25519.pub. The key fingerprint is: 01:0e:e5:2d:ab:98:d6:17:a1:6d:f0:68:9f:d0:a2:db your_email@youremail.com ","i-maybe-have-ssh-keys-i-want-to-check#I maybe have SSH keys, I want to check":"GitHub account and SSH key on Clever Cloud If your account is linked to GitHub, a panel with your GitHub SSH keys will appear in the \u0026ldquo;SSH Keys\u0026rdquo; tab. You can add any key already present in your GitHub account by clicking on the import button next to it.\nFind your SSH key You may already have an SSH key and so do not need to generate a new one. To check if you have one, follow these steps:\nLinux and Mac Whether you use Mac or Linux, open your Terminal application. Run cd ~/.ssh/ in your Terminal. If the folder exists, run ls and check if a pair of key exists : id_ed25519 and id_ed25519.pub. Using id_rsa and id_rsa.pub is fine too. We are just advocating the use of ed25519.\nIt is smaller to copy and way stronger than 2048-bit RSA keys.\nIf you can find them, you do not need to generate a new one, simply go to the following \u0026ldquo;Add your key on Clever Cloud\u0026rdquo; part!\nWindows If you don\u0026rsquo;t have it, download Git for Windows and install it. Run Git Bash (from the Start Menu or from the Explorer with the contextual menu (right click)). Run cd ~/.ssh/ in your Terminal. If the folder exists, run ls and check if a pair of key exists : id_ed25519 and id_ed25519.pub. Using id_rsa and id_rsa.pub is fine too. We are just advocating the use of ed25519.\nIt is smaller to copy and way stronger than 2048-bit RSA keys.\nIf you can find them, you do not need to generate a new one, simply go to the following \u0026ldquo;Add your key on Clever Cloud\u0026rdquo; part!\n","private-ssh-key#Private SSH Key":"If your company manages its own artifacts in a private repository (like, you can only access them via git+ssh or sftp), and you need a private key to connect to the server, you can either set it in an environment variable or commit it in your application\u0026rsquo;s Clever Cloud repository.\nThat key will be installed in ~/.ssh/ before the start of the build. So the dependency manager will use it to fetch libs only accessible by ssh.\nNB: Please provide a key without pass phrase, or the system will be unable to unlock it\nEnvironment variable Set your key as the value of the CC_SSH_PRIVATE_KEY variable. If you want it to be saved to a specific file, you can set the CC_SSH_PRIVATE_KEY_FILE variable.\nCommitted file First, you need to add the file clevercloud/ssh.json, its content is pretty straight-forward:\n{ \u0026#34;privateKeyFile\u0026#34;: \u0026#34;path/to/file\u0026#34; } The privateKeyFile field must be a path to a SSH private key. The path must be relative to the root of your repository. e.g. if your private key file is in the clevercloud folder and is named my_key, the privateKeyFile field will be \u0026quot;clevercloud/my_key\u0026quot;.\n","specific-ssh-key-for-clever-cloud#Specific SSH key for Clever Cloud":"If you want to use a specific key for Clever Cloud, you can set it in your SSH config by adding this:\nHost *.clever-cloud.com IdentityFile ~/.ssh/clevercloud "},"title":"ssh-keys"}}